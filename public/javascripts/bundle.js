(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function makeSinkProxies(e){for(var r={},o=Object.keys(e),n=0;n<o.length;n++)r[o[n]]=new Rx.ReplaySubject(1);return r}function callDrivers(e,r){for(var o={},n=Object.keys(e),t=0;t<n.length;t++){var s=n[t];o[s]=e[s](r[s],s)}return o}function attachDisposeToSinks(e,r){return Object.defineProperty(e,"dispose",{value:function(){r.dispose()}})}function makeDisposeSources(e){return function(){for(var r=Object.keys(e),o=0;o<r.length;o++){var n=e[r[o]];"function"==typeof n.dispose&&n.dispose()}}}function attachDisposeToSources(e){return Object.defineProperty(e,"dispose",{value:makeDisposeSources(e)})}function replicateMany(e,r){return Rx.Observable.create(function(o){var n=new Rx.CompositeDisposable;return setTimeout(function(){for(var t=Object.keys(e),s=0;s<t.length;s++){var i=t[s];r.hasOwnProperty(i)&&!r[i].isDisposed&&n.add(e[i].doOnError(logToConsoleError).subscribe(r[i].asObserver()))}o.onNext(n)}),function(){n.dispose();for(var e=Object.keys(r),o=0;o<e.length;o++)r[e[o]].dispose()}})}function run(e,r){if("function"!=typeof e)throw new Error("First argument given to Cycle.run() must be the 'main' function.");if("object"!=typeof r||null===r)throw new Error("Second argument given to Cycle.run() must be an object with driver functions as properties.");if(0===Object.keys(r).length)throw new Error("Second argument given to Cycle.run() must be an object with at least one driver function declared as a property.");var o=makeSinkProxies(r),n=callDrivers(r,o),t=e(n),s=replicateMany(t,o).subscribe(),i=attachDisposeToSinks(t,s),c=attachDisposeToSources(n);return{sources:c,sinks:i}}var Rx=require("rx"),logToConsoleError="undefined"!=typeof console&&console.error?function(e){console.error(e.stack||e)}:Function.prototype,Cycle={run:run};module.exports=Cycle;

},{"rx":64}],2:[function(require,module,exports){
"use strict";var _extends=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(r[t]=i[t])}return r},svg=require("./virtual-hyperscript-svg"),_require=require("./render-dom"),makeDOMDriver=_require.makeDOMDriver,_require2=require("./render-html"),makeHTMLDriver=_require2.makeHTMLDriver,mockDOMSource=require("./mock-dom-source"),h=require("./virtual-hyperscript"),hh=require("hyperscript-helpers")(h),CycleDOM=_extends({makeDOMDriver:makeDOMDriver,makeHTMLDriver:makeHTMLDriver,h:h},hh,{hJSX:function(r,e){for(var i=arguments.length,t=Array(i>2?i-2:0),u=2;i>u;u++)t[u-2]=arguments[u];return h(r,e,t)},svg:svg,mockDOMSource:mockDOMSource});module.exports=CycleDOM;

},{"./mock-dom-source":4,"./render-dom":5,"./render-html":6,"./virtual-hyperscript":9,"./virtual-hyperscript-svg":8,"hyperscript-helpers":54}],3:[function(require,module,exports){
"use strict";function createListener(e){var n=e.element,r=e.eventName,t=e.handler,a=e.useCapture;if(n.addEventListener)return n.addEventListener(r,t,a),disposableCreate(function(){n.removeEventListener(r,t,a)});throw new Error("No listener found")}function createEventListener(e){var n=e.element,r=e.eventName,t=e.handler,a=e.useCapture,s=new CompositeDisposable;if(Array.isArray(n))for(var o=0,i=n.length;i>o;o++)s.add(createEventListener({element:n[o],eventName:r,handler:t,useCapture:a}));else n&&s.add(createListener({element:n,eventName:r,handler:t,useCapture:a}));return s}function fromEvent(e,n){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return new AnonymousObservable(function(t){return createEventListener({element:e,eventName:n,handler:function(){t.onNext(arguments[0])},useCapture:r})}).share()}var Rx=require("rx"),disposableCreate=Rx.Disposable.create,CompositeDisposable=Rx.CompositeDisposable,AnonymousObservable=Rx.AnonymousObservable;module.exports=fromEvent;

},{"rx":64}],4:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function getEventsStreamForSelector(e){return function(r){for(var t in e)if(e.hasOwnProperty(t)&&t===r)return e[t];return emptyStream}}function mockDOMSource(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return{select:function(r){for(var t in e)if(e.hasOwnProperty(t)&&t===r){var o=emptyStream;return e[t].hasOwnProperty("observable")&&(o=e[t].observable),{observable:o,events:getEventsStreamForSelector(e[t])}}return{observable:emptyStream,events:function(){return emptyStream}}}}}Object.defineProperty(exports,"__esModule",{value:!0});var _rx=require("rx"),_rx2=_interopRequireDefault(_rx),emptyStream=_rx2["default"].Observable.empty();exports["default"]=mockDOMSource,module.exports=exports["default"];

},{"rx":64}],5:[function(require,module,exports){
"use strict";function isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement||e instanceof DocumentFragment:e&&"object"==typeof e&&null!==e&&(1===e.nodeType||11===e.nodeType)&&"string"==typeof e.nodeName}function wrapTopLevelVTree(e,t){var r=e.properties.id,n=void 0===r?"":r,o=e.properties.className,a=void 0===o?"":o,i=n===t.id,s=a===t.className,c=e.tagName.toUpperCase()===t.tagName;if(i&&s&&c)return e;var l={};return t.id&&(l.id=t.id),t.className&&(l.className=t.className),VDOM.h(t.tagName,l,[e])}function makeDiffAndPatchToElement$(e){return function(t){var r=_slicedToArray(t,2),n=r[0],o=r[1];if("undefined"==typeof o)return Rx.Observable.empty();var a=wrapTopLevelVTree(n,e),i=wrapTopLevelVTree(o,e);return e=VDOM.patch(e,VDOM.diff(a,i)),Rx.Observable.just(e)}}function renderRawRootElem$(e,t){var r=makeDiffAndPatchToElement$(t);return e.flatMapLatest(transposeVTree).startWith(VDOM.parse(t)).pairwise().flatMap(r)}function isolateSource(e,t){return e.select(".cycle-scope-"+t)}function isolateSink(e,t){return e.map(function(e){var r=e.properties.className,n=void 0===r?"":r;if(-1===n.indexOf("cycle-scope-"+t)){var o=(n+" cycle-scope-"+t).trim();e.properties.className=o}if(e.properties.attributes){var a=e.properties.attributes["class"]||"";if(-1===a.indexOf("cycle-scope-"+t)){var i=(a+" cycle-scope-"+t).trim();e.properties.attributes["class"]=i}}return e})}function makeIsStrictlyInRootScope(e){var t=function(t){var r=t.match(/cycle-scope-(\S+)/);return r&&-1===e.indexOf("."+t)},r=function(t){var r=t.match(/cycle-scope-(\S+)/);return r&&-1!==e.indexOf("."+t)};return function(e){for(var n=e;n;n=n.parentElement){var o=String.prototype.split,a=n.classList||o.call(n.className," ");if(Array.prototype.some.call(a,r))return!0;if(Array.prototype.some.call(a,t))return!1}return!0}}function maybeMutateEventPropagationAttributes(e){e.hasOwnProperty("propagationHasBeenStopped")||!function(){e.propagationHasBeenStopped=!1;var t=e.stopPropagation;e.stopPropagation=function(){t.call(this),this.propagationHasBeenStopped=!0}}()}function mutateEventCurrentTarget(e,t){try{Object.defineProperty(e,"currentTarget",{value:t,configurable:!0})}catch(r){}e.ownerTarget=t}function makeSimulateBubbling(e,t){var r=makeIsStrictlyInRootScope(e),n=e.join(" "),o=e.join(""),a=t.parentElement;return function(e){if(maybeMutateEventPropagationAttributes(e),e.propagationHasBeenStopped)return!1;for(var t=e.target;t&&t!==a;t=t.parentElement)if(r(t)&&(matchesSelector(t,n)||matchesSelector(t,o)))return mutateEventCurrentTarget(e,t),!0;return!1}}function makeEventsSelector(e,t){return function(r){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("string"!=typeof r)throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=!1;return-1!==eventTypesThatDontBubble.indexOf(r)&&(o=!0),"boolean"==typeof n.useCapture&&(o=n.useCapture),e.first().flatMapLatest(function(e){if(!t||0===t.length)return fromEvent(e,r,o);var n=makeSimulateBubbling(t,e);return fromEvent(e,r,o).filter(n)}).share()}}function makeElementSelector(e){return function(t){if("string"!=typeof t)throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");var r=this.namespace,n=t.trim(),o=":root"===n?r:r.concat(n),a=e.map(function(e){if(""===o.join(""))return e;var t=e.querySelectorAll(o.join(" "));0===t.length&&(t=e.querySelectorAll(o.join("")));var r=Array.prototype.slice.call(t);return r.filter(makeIsStrictlyInRootScope(o))});return{observable:a,namespace:o,select:makeElementSelector(e),events:makeEventsSelector(e,o),isolateSource:isolateSource,isolateSink:isolateSink}}}function validateDOMSink(e){if(!e||"function"!=typeof e.subscribe)throw new Error("The DOM driver function expects as input an Observable of virtual DOM elements")}function defaultOnErrorFn(e){console&&console.error?console.error(e):console.log(e)}function makeDOMDriver(e,t){var r="string"==typeof e?document.querySelector(e):e;if("string"==typeof e&&null===r)throw new Error("Cannot render into unknown element `"+e+"`");if(!isElement(r))throw new Error("Given container is not a DOM element neither a selector string.");var n=t||{},o=n.onError,a=void 0===o?defaultOnErrorFn:o;if("function"!=typeof a)throw new Error("You provided an `onError` to makeDOMDriver but it was not a function. It should be a callback function to handle errors.");return function(e){validateDOMSink(e);var t=renderRawRootElem$(e,r).startWith(r).doOnError(a).replay(null,1),n=t.connect();return{observable:t,namespace:[],select:makeElementSelector(t),events:makeEventsSelector(t,[]),dispose:function(){return n.dispose()},isolateSource:isolateSource,isolateSink:isolateSink}}}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(c){o=!0,a=c}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Rx=require("rx"),fromEvent=require("./fromevent"),VDOM={h:require("./virtual-hyperscript"),diff:require("virtual-dom/diff"),patch:require("virtual-dom/patch"),parse:"undefined"!=typeof window?require("vdom-parser"):function(){}},_require=require("./transposition"),transposeVTree=_require.transposeVTree,matchesSelector=void 0;try{matchesSelector=require("matches-selector")}catch(err){matchesSelector=function(){}}var eventTypesThatDontBubble=["load","unload","focus","blur","mouseenter","mouseleave","submit","change","reset","timeupdate","playing","waiting","seeking","seeked","ended","loadedmetadata","loadeddata","canplay","canplaythrough","durationchange","play","pause","ratechange","volumechange","suspend","emptied","stalled"];module.exports={isElement:isElement,wrapTopLevelVTree:wrapTopLevelVTree,makeDiffAndPatchToElement$:makeDiffAndPatchToElement$,renderRawRootElem$:renderRawRootElem$,validateDOMSink:validateDOMSink,makeDOMDriver:makeDOMDriver};

},{"./fromevent":3,"./transposition":7,"./virtual-hyperscript":9,"matches-selector":60,"rx":64,"vdom-parser":71,"virtual-dom/diff":78,"virtual-dom/patch":79}],6:[function(require,module,exports){
"use strict";function makeBogusSelect(){return function(){return{observable:Rx.Observable.empty(),events:function(){return Rx.Observable.empty()}}}}function makeHTMLDriver(){return function(e){var r=e.flatMapLatest(transposeVTree).last().map(toHTML);return r.select=makeBogusSelect(),r}}var Rx=require("rx"),toHTML=require("vdom-to-html"),_require=require("./transposition"),transposeVTree=_require.transposeVTree;module.exports={makeBogusSelect:makeBogusSelect,makeHTMLDriver:makeHTMLDriver};

},{"./transposition":7,"rx":64,"vdom-to-html":75}],7:[function(require,module,exports){
"use strict";function transposeVTree(e){if("function"==typeof e.subscribe)return e.flatMapLatest(transposeVTree);if("VirtualText"===e.type)return Rx.Observable.just(e);if("VirtualNode"===e.type&&Array.isArray(e.children)&&e.children.length>0)return Rx.Observable.combineLatest(e.children.map(transposeVTree),function(){for(var r=arguments.length,t=Array(r),n=0;r>n;n++)t[n]=arguments[n];return new VirtualNode(e.tagName,e.properties,t,e.key,e.namespace)});if("VirtualNode"===e.type||"Widget"===e.type||"Thunk"===e.type)return Rx.Observable.just(e);throw new Error("Unhandled case in transposeVTree()")}var Rx=require("rx"),VirtualNode=require("virtual-dom/vnode/vnode");module.exports={transposeVTree:transposeVTree};

},{"rx":64,"virtual-dom/vnode/vnode":98}],8:[function(require,module,exports){
"use strict";function svg(r,t,e){!e&&isChildren(t)&&(e=t,t={}),t=t||{},t.namespace=SVG_NAMESPACE;var i=t.attributes||(t.attributes={});for(var a in t)if(t.hasOwnProperty(a)){var s=SVGAttributeNamespace(a);if(void 0!==s){var u=t[a];"string"!=typeof u&&"number"!=typeof u&&"boolean"!=typeof u||(null===s?(i[a]=u,t[a]=void 0):t[a]=attributeHook(s,u))}}return h(r,t,e)}function isObservable(r){return r&&"function"==typeof r.subscribe}function isChildren(r){return"string"==typeof r||isArray(r)||isObservable(r)}var isArray=require("x-is-array"),h=require("./virtual-hyperscript"),SVGAttributeNamespace=require("virtual-dom/virtual-hyperscript/svg-attribute-namespace"),attributeHook=require("virtual-dom/virtual-hyperscript/hooks/attribute-hook"),SVG_NAMESPACE="http://www.w3.org/2000/svg";module.exports=svg;

},{"./virtual-hyperscript":9,"virtual-dom/virtual-hyperscript/hooks/attribute-hook":86,"virtual-dom/virtual-hyperscript/svg-attribute-namespace":90,"x-is-array":104}],9:[function(require,module,exports){
"use strict";function h(e,r,i){var t,o,n,s,u=[];return!i&&isChildren(r)&&(i=r,o={}),o=o||r||{},t=parseTag(e,o),o.hasOwnProperty("key")&&(n=o.key,o.key=void 0),o.hasOwnProperty("namespace")&&(s=o.namespace,o.namespace=void 0),"INPUT"!==t||s||!o.hasOwnProperty("value")||void 0===o.value||isHook(o.value)||(o.value=softSetHook(o.value)),transformProperties(o),void 0!==i&&null!==i&&addChild(i,u,t,o),new VNode(t,o,u,n,s)}function addChild(e,r,i,t){if("string"==typeof e)r.push(new VText(e));else if("number"==typeof e)r.push(new VText(String(e)));else if(isChild(e))r.push(e);else{if(!isArray(e)){if(null===e||void 0===e)return;throw UnexpectedVirtualElement({foreignObject:e,parentVnode:{tagName:i,properties:t}})}for(var o=0;o<e.length;o++)addChild(e[o],r,i,t)}}function transformProperties(e){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(isHook(i))continue;"ev-"===r.substr(0,3)&&(e[r]=evHook(i))}}function isObservable(e){return e&&"function"==typeof e.subscribe}function isChild(e){return isVNode(e)||isVText(e)||isObservable(e)||isWidget(e)||isVThunk(e)}function isChildren(e){return"string"==typeof e||isArray(e)||isChild(e)}function UnexpectedVirtualElement(e){var r=new Error;return r.type="virtual-hyperscript.unexpected.virtual-element",r.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+errorString(e.foreignObject)+".\nThe parent vnode is:\n"+errorString(e.parentVnode),r.foreignObject=e.foreignObject,r.parentVnode=e.parentVnode,r}function errorString(e){try{return JSON.stringify(e,null,"    ")}catch(r){return String(e)}}var isArray=require("x-is-array"),VNode=require("virtual-dom/vnode/vnode.js"),VText=require("virtual-dom/vnode/vtext.js"),isVNode=require("virtual-dom/vnode/is-vnode"),isVText=require("virtual-dom/vnode/is-vtext"),isWidget=require("virtual-dom/vnode/is-widget"),isHook=require("virtual-dom/vnode/is-vhook"),isVThunk=require("virtual-dom/vnode/is-thunk"),parseTag=require("virtual-dom/virtual-hyperscript/parse-tag.js"),softSetHook=require("virtual-dom/virtual-hyperscript/hooks/soft-set-hook.js"),evHook=require("virtual-dom/virtual-hyperscript/hooks/ev-hook.js");module.exports=h;

},{"virtual-dom/virtual-hyperscript/hooks/ev-hook.js":87,"virtual-dom/virtual-hyperscript/hooks/soft-set-hook.js":88,"virtual-dom/virtual-hyperscript/parse-tag.js":89,"virtual-dom/vnode/is-thunk":92,"virtual-dom/vnode/is-vhook":93,"virtual-dom/vnode/is-vnode":94,"virtual-dom/vnode/is-vtext":95,"virtual-dom/vnode/is-widget":96,"virtual-dom/vnode/vnode.js":98,"virtual-dom/vnode/vtext.js":100,"x-is-array":104}],10:[function(require,module,exports){
"use strict";function optionsToSuperagent(e){var r=e.url,t=e.send,n=void 0===t?null:t,o=e.accept,i=void 0===o?null:o,a=e.query,s=void 0===a?null:a,u=e.user,l=void 0===u?null:u,p=e.password,c=void 0===p?null:p,f=e.field,v=void 0===f?null:f,d=e.attach,g=void 0===d?null:d,m=e.withCredentials,h=void 0===m?!1:m,y=e.headers,S=void 0===y?{}:y,q=e.redirects,T=void 0===q?5:q,w=e.type,R=void 0===w?"json":w,b=e.method,k=void 0===b?"get":b;if("string"!=typeof r)throw new Error("Please provide a `url` property in the request options.");var x=k.toLowerCase(),O="delete"===x?"del":x,P=superagent[O](r);"function"==typeof P.redirects&&(P=P.redirects(T)),P=P.type(R),null!==n&&(P=P.send(n)),null!==i&&(P=P.accept(i)),null!==s&&(P=P.query(s)),h&&(P=P.withCredentials()),null!==l&&null!==c&&(P=P.auth(l,c));for(var _ in S)S.hasOwnProperty(_)&&(P=P.set(_,S[_]));if(null!==v)for(var _ in v)v.hasOwnProperty(_)&&(P=P.field(_,v[_]));if(null!==g)for(var C=g.length-1;C>=0;C--){var D=g[C];P=P.attach(D.name,D.path,D.filename)}return P}function createResponse$(e){return Rx.Observable.create(function(r){var t=optionsToSuperagent(e);try{e.progress&&(t=t.on("progress",function(t){t.request=e,r.onNext(t)})),t.end(function(t,n){t?r.onError(t):(n.request=e,r.onNext(n),r.onCompleted())})}catch(n){r.onError(n)}return function(){t.abort()}})}function normalizeRequestOptions(e){if("string"==typeof e)return{url:e};if("object"==typeof e)return e;throw new Error("Observable of requests given to HTTP Driver must emit either URL strings or objects with parameters.")}function isolateSink(e,r){return e.map(function(e){return"string"==typeof e?{url:e,_namespace:[r]}:(e._namespace=e._namespace||[],e._namespace.push(r),e)})}function isolateSource(e,r){var t=e.filter(function(e){return Array.isArray(e.request._namespace)&&-1!==e.request._namespace.indexOf(r)});return t.isolateSource=isolateSource,t.isolateSink=isolateSink,t}function makeHTTPDriver(){var e=arguments.length<=0||void 0===arguments[0]?{eager:!1}:arguments[0],r=e.eager,t=void 0===r?!1:r;return function(e){var r=e.map(function(e){var r=normalizeRequestOptions(e),n=createResponse$(r);return("boolean"==typeof r.eager?r.eager:t)&&(n=n.replay(null,1),n.connect()),n.request=r,n}).replay(null,1);return r.connect(),r.isolateSource=isolateSource,r.isolateSink=isolateSink,r}}var Rx=require("rx"),superagent=require("superagent");module.exports={optionsToSuperagent:optionsToSuperagent,createResponse$:createResponse$,makeHTTPDriver:makeHTTPDriver};

},{"rx":64,"superagent":12}],11:[function(require,module,exports){
"use strict";var _require=require("./http-driver"),makeHTTPDriver=_require.makeHTTPDriver,CycleHTTPDriver={makeHTTPDriver:makeHTTPDriver};module.exports=CycleHTTPDriver;

},{"./http-driver":10}],12:[function(require,module,exports){
function noop(){}function isHost(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function isObject(t){return t===Object(t)}function serialize(t){if(!isObject(t))return t;var e=[];for(var r in t)null!=t[r]&&pushEncodedKeyValuePair(e,r,t[r]);return e.join("&")}function pushEncodedKeyValuePair(t,e,r){return Array.isArray(r)?r.forEach(function(r){pushEncodedKeyValuePair(t,e,r)}):void t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}function parseString(t){for(var e,r,s={},i=t.split("&"),o=0,n=i.length;n>o;++o)r=i[o],e=r.split("="),s[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return s}function parseHeader(t){var e,r,s,i,o=t.split(/\r?\n/),n={};o.pop();for(var u=0,a=o.length;a>u;++u)r=o[u],e=r.indexOf(":"),s=r.slice(0,e).toLowerCase(),i=trim(r.slice(e+1)),n[s]=i;return n}function isJSON(t){return/[\/+]json\b/.test(t)}function type(t){return t.split(/ *; */).shift()}function params(t){return reduce(t.split(/ *; */),function(t,e){var r=e.split(/ *= */),s=r.shift(),i=r.shift();return s&&i&&(t[s]=i),t},{})}function Response(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function Request(t,e){var r=this;Emitter.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new Response(r)}catch(s){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=s,t.rawResponse=r.xhr&&r.xhr.responseText?r.xhr.responseText:null,r.callback(t)}if(r.emit("response",e),t)return r.callback(t,e);if(e.status>=200&&e.status<300)return r.callback(t,e);var i=new Error(e.statusText||"Unsuccessful HTTP response");i.original=t,i.response=e,i.status=e.status,r.callback(i,e)})}function request(t,e){return"function"==typeof e?new Request("GET",t).end(e):1==arguments.length?new Request("GET",t):new Request(t,e)}function del(t,e){var r=request("DELETE",t);return e&&r.end(e),r}var Emitter=require("emitter"),reduce=require("reduce"),root;root="undefined"!=typeof window?window:"undefined"!=typeof self?self:this,request.getXHR=function(){if(!(!root.XMLHttpRequest||root.location&&"file:"==root.location.protocol&&root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var trim="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},Response.prototype.get=function(t){return this.header[t.toLowerCase()]},Response.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=type(e);var r=params(e);for(var s in r)this[s]=r[s]},Response.prototype.parseBody=function(t){var e=request.parse[this.type];return e&&t&&(t.length||t instanceof Object)?e(t):null},Response.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},Response.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,s="cannot "+e+" "+r+" ("+this.status+")",i=new Error(s);return i.status=this.status,i.method=e,i.url=r,i},request.Response=Response,Emitter(Request.prototype),Request.prototype.use=function(t){return t(this),this},Request.prototype.timeout=function(t){return this._timeout=t,this},Request.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},Request.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},Request.prototype.set=function(t,e){if(isObject(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},Request.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},Request.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},Request.prototype.type=function(t){return this.set("Content-Type",request.types[t]||t),this},Request.prototype.parse=function(t){return this._parser=t,this},Request.prototype.accept=function(t){return this.set("Accept",request.types[t]||t),this},Request.prototype.auth=function(t,e){var r=btoa(t+":"+e);return this.set("Authorization","Basic "+r),this},Request.prototype.query=function(t){return"string"!=typeof t&&(t=serialize(t)),t&&this._query.push(t),this},Request.prototype.field=function(t,e){return this._formData||(this._formData=new root.FormData),this._formData.append(t,e),this},Request.prototype.attach=function(t,e,r){return this._formData||(this._formData=new root.FormData),this._formData.append(t,e,r||e.name),this},Request.prototype.send=function(t){var e=isObject(t),r=this.getHeader("Content-Type");if(e&&isObject(this._data))for(var s in t)this._data[s]=t[s];else"string"==typeof t?(r||this.type("form"),r=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==r?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return!e||isHost(t)?this:(r||this.type("json"),this)},Request.prototype.callback=function(t,e){var r=this._callback;this.clearTimeout(),r(t,e)},Request.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},Request.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},Request.prototype.withCredentials=function(){return this._withCredentials=!0,this},Request.prototype.end=function(t){var e=this,r=this.xhr=request.getXHR(),s=this._query.join("&"),i=this._timeout,o=this._formData||this._data;this._callback=t||noop,r.onreadystatechange=function(){if(4==r.readyState){var t;try{t=r.status}catch(s){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var n=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),t.direction="download",e.emit("progress",t)};this.hasListeners("progress")&&(r.onprogress=n);try{r.upload&&this.hasListeners("progress")&&(r.upload.onprogress=n)}catch(u){}if(i&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},i)),s&&(s=request.serializeObject(s),this.url+=~this.url.indexOf("?")?"&"+s:"?"+s),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof o&&!isHost(o)){var a=this.getHeader("Content-Type"),h=this._parser||request.serialize[a?a.split(";")[0]:""];!h&&isJSON(a)&&(h=request.serialize["application/json"]),h&&(o=h(o))}for(var p in this.header)null!=this.header[p]&&r.setRequestHeader(p,this.header[p]);return this.emit("request",this),r.send("undefined"!=typeof o?o:null),this},Request.prototype.then=function(t,e){return this.end(function(r,s){r?e(r):t(s)})},request.Request=Request,request.get=function(t,e,r){var s=request("GET",t);return"function"==typeof e&&(r=e,e=null),e&&s.query(e),r&&s.end(r),s},request.head=function(t,e,r){var s=request("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.del=del,request["delete"]=del,request.patch=function(t,e,r){var s=request("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.post=function(t,e,r){var s=request("POST",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.put=function(t,e,r){var s=request("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},module.exports=request;

},{"emitter":16,"reduce":63}],13:[function(require,module,exports){

},{}],14:[function(require,module,exports){
module.exports=function(e){var t,n=String.prototype.split,l=/()??/.exec("")[1]===e;return t=function(t,r,i){if("[object RegExp]"!==Object.prototype.toString.call(r))return n.call(t,r,i);var o,p,s,c,g=[],u=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.extended?"x":"")+(r.sticky?"y":""),x=0,r=new RegExp(r.source,u+"g");for(t+="",l||(o=new RegExp("^"+r.source+"$(?!\\s)",u)),i=i===e?-1>>>0:i>>>0;(p=r.exec(t))&&(s=p.index+p[0].length,!(s>x&&(g.push(t.slice(x,p.index)),!l&&p.length>1&&p[0].replace(o,function(){for(var t=1;t<arguments.length-2;t++)arguments[t]===e&&(p[t]=e)}),p.length>1&&p.index<t.length&&Array.prototype.push.apply(g,p.slice(1)),c=p[0].length,x=s,g.length>=i)));)r.lastIndex===p.index&&r.lastIndex++;return x===t.length?!c&&r.test("")||g.push(""):g.push(t.slice(x)),g.length>i?g.slice(0,i):g}}();

},{}],15:[function(require,module,exports){
function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var e=setTimeout(cleanUpNextTick);draining=!0;for(var n=queue.length;n;){for(currentQueue=queue,queue=[];++queueIndex<n;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,n=queue.length}currentQueue=null,draining=!1,clearTimeout(e)}}function Item(e,n){this.fun=e,this.array=n}function noop(){}var process=module.exports={},queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];queue.push(new Item(e,n)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],16:[function(require,module,exports){
function Emitter(t){return t?mixin(t):void 0}function mixin(t){for(var e in Emitter.prototype)t[e]=Emitter.prototype[e];return t}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},Emitter.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,s=0;s<i.length;s++)if(r=i[s],r===e||r.fn===e){i.splice(s,1);break}return this},Emitter.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks["$"+t];if(i){i=i.slice(0);for(var r=0,s=i.length;s>r;++r)i[r].apply(this,e)}return this},Emitter.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},Emitter.prototype.hasListeners=function(t){return!!this.listeners(t).length};

},{}],17:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _makeHistoryDriver=require("./makeHistoryDriver");Object.defineProperty(exports,"makeHistoryDriver",{enumerable:!0,get:function(){return _makeHistoryDriver.makeHistoryDriver}});var _util=require("./util");Object.defineProperty(exports,"supportsHistory",{enumerable:!0,get:function(){return _util.supportsHistory}}),Object.defineProperty(exports,"createLocation",{enumerable:!0,get:function(){return _util.createLocation}});var _serverHistory=require("./serverHistory");Object.defineProperty(exports,"createServerHistory",{enumerable:!0,get:function(){return _serverHistory.createServerHistory}});

},{"./makeHistoryDriver":18,"./serverHistory":19,"./util":20}],18:[function(require,module,exports){
"use strict";function makePushState(e){return function(t){if("string"!=typeof t&&"object"!==("undefined"==typeof t?"undefined":_typeof(t)))throw new Error("History Driver input must be a string or\n        object but received "+("undefined"==typeof t?"undefined":_typeof(t)));e.push(t)}}function makeHistoryDriver(e){if(!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e))||"function"!=typeof e.listen)throw new Error("First argument to makeHistoryDriver must be a valid history instance with a listen() method");return function(t){var r=new _rx.ReplaySubject(1);return e.listen(function(e){return r.onNext(e)}),t.subscribe(makePushState(e)),r.createHref=e.createHref,r}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeHistoryDriver=void 0;var _rx=require("rx");exports.makeHistoryDriver=makeHistoryDriver;

},{"rx":64}],19:[function(require,module,exports){
"use strict";function ServerHistory(){this.listeners=[]}function createServerHistory(){return new ServerHistory}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createServerHistory=void 0;var _util=require("./util");ServerHistory.prototype.listen=function(e){this.listeners.push(e)},ServerHistory.prototype.push=function(e){var r=this.listeners;if(!r||0===r.length)throw new Error("There is no active listener");r.forEach(function(r){return r((0,_util.createLocation)(e))})},ServerHistory.prototype.createHref=function(e){return e},ServerHistory.prototype.createLocation=_util.createLocation,exports.createServerHistory=createServerHistory;

},{"./util":20}],20:[function(require,module,exports){
"use strict";function supportsHistory(){var t=navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&"undefined"!=typeof window?window.history&&"pushState"in window.history:!1}function createLocation(){var t=arguments.length<=0||void 0===arguments[0]?locationDefaults:arguments[0];return"string"==typeof t?Object.assign(locationDefaults,{pathname:t}):Object.assign(locationDefaults,t)}Object.defineProperty(exports,"__esModule",{value:!0});var locationDefaults={pathname:"/",action:"POP",hash:"",search:"",state:null,key:null};exports.supportsHistory=supportsHistory,exports.createLocation=createLocation;

},{}],21:[function(require,module,exports){
"use strict";function createAPI(e,r,t){var i=e.replay(1),o=i.connect();return{path:(0,_pathFilter.makePathFilter)(i,r,t),define:(0,_definitionResolver.makeDefinitionResolver)(i,r,t),observable:i,createHref:(0,_util.makeCreateHref)(r,t),dispose:function(){return o.dispose()}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAPI=void 0;var _pathFilter=require("./pathFilter"),_definitionResolver=require("./definitionResolver"),_util=require("./util");exports.createAPI=createAPI;

},{"./definitionResolver":23,"./pathFilter":26,"./util":27}],22:[function(require,module,exports){
"use strict";function createRouter(e){return(0,_api.createAPI)(e,[],e.createHref)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRouter=void 0;var _api=require("./api");exports.createRouter=createRouter;

},{"./api":21}],23:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function getPathValue(e,t){var a=void 0,i=void 0;try{var r=(0,_switchPath2["default"])(e,t);i=r.value,a=r.path}catch(u){if(!t["*"])throw u;a=e,i=t["*"]}return{path:a,value:i}}function makeDefinitionResolver(e,t,a){return function(i){var r=e.map(function(e){var a=e.pathname,r="/"+(0,_util.filterPath)((0,_util.splitPath)(a),t),u=getPathValue(r,i),n=u.path,l=u.value;return{path:n,value:l,pathname:a}}),u=r.pluck("path").replay(1),n=u.connect(),l=r.pluck("value").replay(1),o=l.connect(),p=r.pluck("pathname").replay(1),h=p.connect(),c=function(){n.dispose(),h.dispose(),o.dispose()};return{path$:u,value$:l,fullPath$:p,createHref:(0,_util.makeCreateHref)(t,a),dispose:c}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeDefinitionResolver=void 0;var _switchPath=require("switch-path"),_switchPath2=_interopRequireDefault(_switchPath),_util=require("./util");exports.makeDefinitionResolver=makeDefinitionResolver;

},{"./util":27,"switch-path":70}],24:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _makeRouterDriver=require("./makeRouterDriver");Object.defineProperty(exports,"makeRouterDriver",{enumerable:!0,get:function(){return _makeRouterDriver.makeRouterDriver}});var _createRouter=require("./createRouter");Object.defineProperty(exports,"createRouter",{enumerable:!0,get:function(){return _createRouter.createRouter}});var _util=require("./util");Object.defineProperty(exports,"supportsHistory",{enumerable:!0,get:function(){return _util.supportsHistory}}),Object.defineProperty(exports,"createLocation",{enumerable:!0,get:function(){return _util.createLocation}});

},{"./createRouter":22,"./makeRouterDriver":25,"./util":27}],25:[function(require,module,exports){
"use strict";function makeRouterDriver(r){if(!r||"function"!=typeof r)throw new Error("First argument to makeRouterDriver must be a valid history driver");return function(e){var t=r(e);return(0,_api.createAPI)(t,[],t.createHref)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeRouterDriver=void 0;var _api=require("./api");exports.makeRouterDriver=makeRouterDriver;

},{"./api":21}],26:[function(require,module,exports){
"use strict";function isStrictlyInScope(t,e){var r=(0,_util.splitPath)(e);return t.every(function(t,e){return r[e]===t})}function makePathFilter(t,e,r){return function(i){var a=e.concat((0,_util.splitPath)(i)),n=t.filter(function(t){var e=t.pathname;return isStrictlyInScope(a,e)});return(0,_api.createAPI)(n,a,r)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.makePathFilter=void 0;var _api=require("./api"),_util=require("./util");exports.makePathFilter=makePathFilter;

},{"./api":21,"./util":27}],27:[function(require,module,exports){
"use strict";function supportsHistory(){var t=navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&"undefined"!=typeof window?window.history&&"pushState"in window.history:!1}function splitPath(t){return t.split("/").filter(function(t){return t.length>0})}function filterPath(t,e){return t.filter(function(t){return e.indexOf(t)<0}).join("/")}function makeCreateHref(t,e){return function(n){var r=""+t.join("/")+n;return e(startsWith(r,"/")||startsWith("#/")?r:"/"+r)}}function createLocation(){var t=arguments.length<=0||void 0===arguments[0]?locationDefaults:arguments[0];return"string"==typeof t?Object.assign(locationDefaults,{pathname:t}):Object.assign(locationDefaults,t)}Object.defineProperty(exports,"__esModule",{value:!0});var startsWith=function(t,e){return t[0]===e},locationDefaults={pathname:"/",action:"POP",hash:"",search:"",state:null,key:null};exports.supportsHistory=supportsHistory,exports.splitPath=splitPath,exports.filterPath=filterPath,exports.makeCreateHref=makeCreateHref,exports.createLocation=createLocation;

},{}],28:[function(require,module,exports){
function isUndefinedOrNull(e){return null===e||void 0===e}function isBuffer(e){return e&&"object"==typeof e&&"number"==typeof e.length?"function"!=typeof e.copy||"function"!=typeof e.slice?!1:!(e.length>0&&"number"!=typeof e[0]):!1}function objEquiv(e,t,r){var n,i;if(isUndefinedOrNull(e)||isUndefinedOrNull(t))return!1;if(e.prototype!==t.prototype)return!1;if(isArguments(e))return isArguments(t)?(e=pSlice.call(e),t=pSlice.call(t),deepEqual(e,t,r)):!1;if(isBuffer(e)){if(!isBuffer(t))return!1;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}try{var u=objectKeys(e),o=objectKeys(t)}catch(f){return!1}if(u.length!=o.length)return!1;for(u.sort(),o.sort(),n=u.length-1;n>=0;n--)if(u[n]!=o[n])return!1;for(n=u.length-1;n>=0;n--)if(i=u[n],!deepEqual(e[i],t[i],r))return!1;return typeof e==typeof t}var pSlice=Array.prototype.slice,objectKeys=require("./lib/keys.js"),isArguments=require("./lib/is_arguments.js"),deepEqual=module.exports=function(e,t,r){return r||(r={}),e===t?!0:e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:objEquiv(e,t,r)};

},{"./lib/is_arguments.js":29,"./lib/keys.js":30}],29:[function(require,module,exports){
function supported(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function unsupported(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var supportsArgumentsClass="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();exports=module.exports=supportsArgumentsClass?supported:unsupported,exports.supported=supported,exports.unsupported=unsupported;

},{}],30:[function(require,module,exports){
function shim(e){var s=[];for(var t in e)s.push(t);return s}exports=module.exports="function"==typeof Object.keys?Object.keys:shim,exports.shim=shim;

},{}],31:[function(require,module,exports){
"use strict";function escapeHtml(e){var t=""+e,a=matchHtmlRegExp.exec(t);if(!a)return t;var r,c="",s=0,n=0;for(s=a.index;s<t.length;s++){switch(t.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#39;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}n!==s&&(c+=t.substring(n,s)),n=s+1,c+=r}return n!==s?c+t.substring(n,s):c}var matchHtmlRegExp=/["'&<>]/;module.exports=escapeHtml;

},{}],32:[function(require,module,exports){
"use strict";function EvStore(e){var r=e[hashKey];return r||(r=e[hashKey]={}),r}var OneVersionConstraint=require("individual/one-version"),MY_VERSION="7";OneVersionConstraint("ev-store",MY_VERSION);var hashKey="__EV_STORE_KEY@"+MY_VERSION;module.exports=EvStore;

},{"individual/one-version":56}],33:[function(require,module,exports){
(function (global){
var topLevel="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},minDoc=require("min-document");if("undefined"!=typeof document)module.exports=document;else{var doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"];doccy||(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDoc),module.exports=doccy}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"min-document":13}],34:[function(require,module,exports){
"use strict";exports.__esModule=!0;var PUSH="PUSH";exports.PUSH=PUSH;var REPLACE="REPLACE";exports.REPLACE=REPLACE;var POP="POP";exports.POP=POP,exports["default"]={PUSH:PUSH,REPLACE:REPLACE,POP:POP};

},{}],35:[function(require,module,exports){
"use strict";function loopAsync(o,i,t){function c(){return r=!0,n?void(p=[].concat(_slice.call(arguments))):void t.apply(this,arguments)}function s(){if(!r&&(e=!0,!n)){for(n=!0;!r&&o>l&&e;)e=!1,i.call(this,l++,s,c);return n=!1,r?void t.apply(this,p):void(l>=o&&e&&(r=!0,t()))}}var l=0,r=!1,n=!1,e=!1,p=void 0;s()}exports.__esModule=!0;var _slice=Array.prototype.slice;exports.loopAsync=loopAsync;

},{}],36:[function(require,module,exports){
(function (process){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function createKey(e){return KeyPrefix+e}function saveState(e,r){try{null==r?window.sessionStorage.removeItem(createKey(e)):window.sessionStorage.setItem(createKey(e),JSON.stringify(r))}catch(t){if(t.name===SecurityError)return void("production"!==process.env.NODE_ENV?_warning2["default"](!1,"[history] Unable to save state; sessionStorage is not available due to security settings"):void 0);if(QuotaExceededErrors.indexOf(t.name)>=0&&0===window.sessionStorage.length)return void("production"!==process.env.NODE_ENV?_warning2["default"](!1,"[history] Unable to save state; sessionStorage is not available in Safari private mode"):void 0);throw t}}function readState(e){var r=void 0;try{r=window.sessionStorage.getItem(createKey(e))}catch(t){if(t.name===SecurityError)return"production"!==process.env.NODE_ENV?_warning2["default"](!1,"[history] Unable to read state; sessionStorage is not available due to security settings"):void 0,null}if(r)try{return JSON.parse(r)}catch(t){}return null}exports.__esModule=!0,exports.saveState=saveState,exports.readState=readState;var _warning=require("warning"),_warning2=_interopRequireDefault(_warning),KeyPrefix="@@History/",QuotaExceededErrors=["QuotaExceededError","QUOTA_EXCEEDED_ERR"],SecurityError="SecurityError";

}).call(this,require('_process'))

},{"_process":15,"warning":103}],37:[function(require,module,exports){
"use strict";function addEventListener(t,e,o){t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent("on"+e,o)}function removeEventListener(t,e,o){t.removeEventListener?t.removeEventListener(e,o,!1):t.detachEvent("on"+e,o)}function getHashPath(){return window.location.href.split("#")[1]||""}function replaceHashPath(t){window.location.replace(window.location.pathname+window.location.search+"#"+t)}function getWindowPath(){return window.location.pathname+window.location.search+window.location.hash}function go(t){t&&window.history.go(t)}function getUserConfirmation(t,e){e(window.confirm(t))}function supportsHistory(){var t=navigator.userAgent;return-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone")?window.history&&"pushState"in window.history:!1}function supportsGoWithoutReloadUsingHash(){var t=navigator.userAgent;return-1===t.indexOf("Firefox")}exports.__esModule=!0,exports.addEventListener=addEventListener,exports.removeEventListener=removeEventListener,exports.getHashPath=getHashPath,exports.replaceHashPath=replaceHashPath,exports.getWindowPath=getWindowPath,exports.go=go,exports.getUserConfirmation=getUserConfirmation,exports.supportsHistory=supportsHistory,exports.supportsGoWithoutReloadUsingHash=supportsGoWithoutReloadUsingHash;

},{}],38:[function(require,module,exports){
"use strict";exports.__esModule=!0;var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement);exports.canUseDOM=canUseDOM;

},{}],39:[function(require,module,exports){
(function (process){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function extractPath(t){var e=t.match(/^https?:\/\/[^\/]*/);return null==e?t:t.substring(e[0].length)}function parsePath(t){var e=extractPath(t),r="",a="";"production"!==process.env.NODE_ENV?_warning2["default"](t===e,'A path must be pathname + search + hash only, not a fully qualified URL like "%s"',t):void 0;var n=e.indexOf("#");-1!==n&&(a=e.substring(n),e=e.substring(0,n));var s=e.indexOf("?");return-1!==s&&(r=e.substring(s),e=e.substring(0,s)),""===e&&(e="/"),{pathname:e,search:r,hash:a}}exports.__esModule=!0,exports.extractPath=extractPath,exports.parsePath=parsePath;var _warning=require("warning"),_warning2=_interopRequireDefault(_warning);

}).call(this,require('_process'))

},{"_process":15,"warning":103}],40:[function(require,module,exports){
(function (process){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function createBrowserHistory(){function t(t){t=t||window.history.state||{};var e=_DOMUtils.getWindowPath(),r=t,n=r.key,i=void 0;n?i=_DOMStateStorage.readState(n):(i=null,n=_.createKey(),c&&window.history.replaceState(_extends({},t,{key:n}),null,e));var o=_PathUtils.parsePath(e);return _.createLocation(_extends({},o,{state:i}),void 0,n)}function e(e){function r(e){void 0!==e.state&&n(t(e.state))}var n=e.transitionTo;return _DOMUtils.addEventListener(window,"popstate",r),function(){_DOMUtils.removeEventListener(window,"popstate",r)}}function r(t){var e=t.basename,r=t.pathname,n=t.search,i=t.hash,o=t.state,a=t.action,s=t.key;if(a!==_Actions.POP){_DOMStateStorage.saveState(s,o);var u=(e||"")+r+n+i,c={key:s};if(a===_Actions.PUSH){if(l)return window.location.href=u,!1;window.history.pushState(c,null,u)}else{if(l)return window.location.replace(u),!1;window.history.replaceState(c,null,u)}}}function n(t){1===++f&&(v=e(_));var r=_.listenBefore(t);return function(){r(),0===--f&&v()}}function i(t){1===++f&&(v=e(_));var r=_.listen(t);return function(){r(),0===--f&&v()}}function o(t){1===++f&&(v=e(_)),_.registerTransitionHook(t)}function a(t){_.unregisterTransitionHook(t),0===--f&&v()}var s=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_ExecutionEnvironment.canUseDOM?void 0:"production"!==process.env.NODE_ENV?_invariant2["default"](!1,"Browser history needs a DOM"):_invariant2["default"](!1);var u=s.forceRefresh,c=_DOMUtils.supportsHistory(),l=!c||u,_=_createDOMHistory2["default"](_extends({},s,{getCurrentLocation:t,finishTransition:r,saveState:_DOMStateStorage.saveState})),f=0,v=void 0;return _extends({},_,{listenBefore:n,listen:i,registerTransitionHook:o,unregisterTransitionHook:a})}exports.__esModule=!0;var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_invariant=require("invariant"),_invariant2=_interopRequireDefault(_invariant),_Actions=require("./Actions"),_PathUtils=require("./PathUtils"),_ExecutionEnvironment=require("./ExecutionEnvironment"),_DOMUtils=require("./DOMUtils"),_DOMStateStorage=require("./DOMStateStorage"),_createDOMHistory=require("./createDOMHistory"),_createDOMHistory2=_interopRequireDefault(_createDOMHistory);exports["default"]=createBrowserHistory,module.exports=exports["default"];

}).call(this,require('_process'))

},{"./Actions":34,"./DOMStateStorage":36,"./DOMUtils":37,"./ExecutionEnvironment":38,"./PathUtils":39,"./createDOMHistory":41,"_process":15,"invariant":57}],41:[function(require,module,exports){
(function (process){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function createDOMHistory(e){function t(e){return _ExecutionEnvironment.canUseDOM?void 0:"production"!==process.env.NODE_ENV?_invariant2["default"](!1,"DOM history needs a DOM"):_invariant2["default"](!1),r.listen(e)}var r=_createHistory2["default"](_extends({getUserConfirmation:_DOMUtils.getUserConfirmation},e,{go:_DOMUtils.go}));return _extends({},r,{listen:t})}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_invariant=require("invariant"),_invariant2=_interopRequireDefault(_invariant),_ExecutionEnvironment=require("./ExecutionEnvironment"),_DOMUtils=require("./DOMUtils"),_createHistory=require("./createHistory"),_createHistory2=_interopRequireDefault(_createHistory);exports["default"]=createDOMHistory,module.exports=exports["default"];

}).call(this,require('_process'))

},{"./DOMUtils":37,"./ExecutionEnvironment":38,"./createHistory":43,"_process":15,"invariant":57}],42:[function(require,module,exports){
(function (process){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function isAbsolutePath(e){return"string"==typeof e&&"/"===e.charAt(0)}function ensureSlash(){var e=_DOMUtils.getHashPath();return isAbsolutePath(e)?!0:(_DOMUtils.replaceHashPath("/"+e),!1)}function addQueryStringValueToPath(e,t,n){return e+(-1===e.indexOf("?")?"?":"&")+(t+"="+n)}function stripQueryStringValueFromPath(e,t){return e.replace(new RegExp("[?&]?"+t+"=[a-zA-Z0-9]+"),"")}function getQueryStringValueFromPath(e,t){var n=e.match(new RegExp("\\?.*?\\b"+t+"=(.+?)\\b"));return n&&n[1]}function createHashHistory(){function e(){var e=_DOMUtils.getHashPath(),t=void 0,n=void 0;p?(t=getQueryStringValueFromPath(e,p),e=stripQueryStringValueFromPath(e,p),t?n=_DOMStateStorage.readState(t):(n=null,t=f.createKey(),_DOMUtils.replaceHashPath(addQueryStringValueToPath(e,p,t)))):t=n=null;var r=_PathUtils.parsePath(e);return f.createLocation(_extends({},r,{state:n}),void 0,t)}function t(t){function n(){ensureSlash()&&r(e())}var r=t.transitionTo;return ensureSlash(),_DOMUtils.addEventListener(window,"hashchange",n),function(){_DOMUtils.removeEventListener(window,"hashchange",n)}}function n(e){var t=e.basename,n=e.pathname,r=e.search,a=e.state,i=e.action,o=e.key;if(i!==_Actions.POP){var u=(t||"")+n+r;p?(u=addQueryStringValueToPath(u,p,o),_DOMStateStorage.saveState(o,a)):e.key=e.state=null;var s=_DOMUtils.getHashPath();i===_Actions.PUSH?s!==u?window.location.hash=u:"production"!==process.env.NODE_ENV?_warning2["default"](!1,"You cannot PUSH the same path using hash history"):void 0:s!==u&&_DOMUtils.replaceHashPath(u)}}function r(e){1===++v&&(g=t(f));var n=f.listenBefore(e);return function(){n(),0===--v&&g()}}function a(e){1===++v&&(g=t(f));var n=f.listen(e);return function(){n(),0===--v&&g()}}function i(e){"production"!==process.env.NODE_ENV?_warning2["default"](p||null==e.state,"You cannot use state without a queryKey it will be dropped"):void 0,f.push(e)}function o(e){"production"!==process.env.NODE_ENV?_warning2["default"](p||null==e.state,"You cannot use state without a queryKey it will be dropped"):void 0,f.replace(e)}function u(e){"production"!==process.env.NODE_ENV?_warning2["default"](y,"Hash history go(n) causes a full page reload in this browser"):void 0,f.go(e)}function s(e){return"#"+f.createHref(e)}function l(e){1===++v&&(g=t(f)),f.registerTransitionHook(e)}function c(e){f.unregisterTransitionHook(e),0===--v&&g()}function h(e,t){"production"!==process.env.NODE_ENV?_warning2["default"](p||null==e,"You cannot use state without a queryKey it will be dropped"):void 0,f.pushState(e,t)}function d(e,t){"production"!==process.env.NODE_ENV?_warning2["default"](p||null==e,"You cannot use state without a queryKey it will be dropped"):void 0,f.replaceState(e,t)}var _=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_ExecutionEnvironment.canUseDOM?void 0:"production"!==process.env.NODE_ENV?_invariant2["default"](!1,"Hash history needs a DOM"):_invariant2["default"](!1);var p=_.queryKey;(void 0===p||p)&&(p="string"==typeof p?p:DefaultQueryKey);var f=_createDOMHistory2["default"](_extends({},_,{getCurrentLocation:e,finishTransition:n,saveState:_DOMStateStorage.saveState})),v=0,g=void 0,y=_DOMUtils.supportsGoWithoutReloadUsingHash();return _extends({},f,{listenBefore:r,listen:a,push:i,replace:o,go:u,createHref:s,registerTransitionHook:l,unregisterTransitionHook:c,pushState:h,replaceState:d})}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_warning=require("warning"),_warning2=_interopRequireDefault(_warning),_invariant=require("invariant"),_invariant2=_interopRequireDefault(_invariant),_Actions=require("./Actions"),_PathUtils=require("./PathUtils"),_ExecutionEnvironment=require("./ExecutionEnvironment"),_DOMUtils=require("./DOMUtils"),_DOMStateStorage=require("./DOMStateStorage"),_createDOMHistory=require("./createDOMHistory"),_createDOMHistory2=_interopRequireDefault(_createDOMHistory),DefaultQueryKey="_k";exports["default"]=createHashHistory,module.exports=exports["default"];

}).call(this,require('_process'))

},{"./Actions":34,"./DOMStateStorage":36,"./DOMUtils":37,"./ExecutionEnvironment":38,"./PathUtils":39,"./createDOMHistory":41,"_process":15,"invariant":57,"warning":103}],43:[function(require,module,exports){
(function (process){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function createRandomKey(e){return Math.random().toString(36).substr(2,e)}function locationsAreEqual(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.key===t.key&&_deepEqual2["default"](e.state,t.state)}function createHistory(){function e(e){return T.push(e),function(){T=T.filter(function(t){return t!==e})}}function t(){return R&&R.action===_Actions.POP?U.indexOf(R.key):O?U.indexOf(O.key):-1}function n(e){var n=t();O=e,O.action===_Actions.PUSH?U=[].concat(U.slice(0,n+1),[O.key]):O.action===_Actions.REPLACE&&(U[n]=O.key),m.forEach(function(e){e(O)})}function r(e){if(m.push(e),O)e(O);else{var t=P();U=[t.key],n(t)}return function(){m=m.filter(function(t){return t!==e})}}function i(e,t){_AsyncUtils.loopAsync(T.length,function(t,n,r){_runTransitionHook2["default"](T[t],e,function(e){null!=e?r(e):n()})},function(e){x&&"string"==typeof e?x(e,function(e){t(e!==!1)}):t(e!==!1)})}function a(e){O&&locationsAreEqual(O,e)||(R=e,i(e,function(t){if(R===e)if(t){if(e.action===_Actions.PUSH){var r=d(O),i=d(e);i===r&&_deepEqual2["default"](O.state,e.state)&&(e.action=_Actions.REPLACE)}A(e)!==!1&&n(e)}else if(O&&e.action===_Actions.POP){var a=U.indexOf(O.key),o=U.indexOf(e.key);-1!==a&&-1!==o&&H(a-o)}}))}function o(e){a(p(e,_Actions.PUSH,f()))}function u(e){a(p(e,_Actions.REPLACE,f()))}function s(){H(-1)}function c(){H(1)}function f(){return createRandomKey(L)}function d(e){if(null==e||"string"==typeof e)return e;var t=e.pathname,n=e.search,r=e.hash,i=t;return n&&(i+=n),r&&(i+=r),i}function l(e){return d(e)}function p(e,t){var n=arguments.length<=2||void 0===arguments[2]?f():arguments[2];return"object"==typeof t&&("production"!==process.env.NODE_ENV?_warning2["default"](!1,"The state (2nd) argument to history.createLocation is deprecated; use a location descriptor instead"):void 0,"string"==typeof e&&(e=_PathUtils.parsePath(e)),e=_extends({},e,{state:t}),t=n,n=arguments[3]||f()),_createLocation3["default"](e,t,n)}function _(e){O?(h(O,e),n(O)):h(P(),e)}function h(e,t){e.state=_extends({},e.state,t),E(e.key,e.state)}function y(e){-1===T.indexOf(e)&&T.push(e)}function g(e){T=T.filter(function(t){return t!==e})}function k(e,t){"string"==typeof t&&(t=_PathUtils.parsePath(t)),o(_extends({state:e},t))}function q(e,t){"string"==typeof t&&(t=_PathUtils.parsePath(t)),u(_extends({state:e},t))}var v=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],P=v.getCurrentLocation,A=v.finishTransition,E=v.saveState,H=v.go,x=v.getUserConfirmation,L=v.keyLength;"number"!=typeof L&&(L=DefaultKeyLength);var T=[],U=[],m=[],O=void 0,R=void 0;return{listenBefore:e,listen:r,transitionTo:a,push:o,replace:u,go:H,goBack:s,goForward:c,createKey:f,createPath:d,createHref:l,createLocation:p,setState:_deprecate2["default"](_,"setState is deprecated; use location.key to save state instead"),registerTransitionHook:_deprecate2["default"](y,"registerTransitionHook is deprecated; use listenBefore instead"),unregisterTransitionHook:_deprecate2["default"](g,"unregisterTransitionHook is deprecated; use the callback returned from listenBefore instead"),pushState:_deprecate2["default"](k,"pushState is deprecated; use push instead"),replaceState:_deprecate2["default"](q,"replaceState is deprecated; use replace instead")}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_warning=require("warning"),_warning2=_interopRequireDefault(_warning),_deepEqual=require("deep-equal"),_deepEqual2=_interopRequireDefault(_deepEqual),_PathUtils=require("./PathUtils"),_AsyncUtils=require("./AsyncUtils"),_Actions=require("./Actions"),_createLocation2=require("./createLocation"),_createLocation3=_interopRequireDefault(_createLocation2),_runTransitionHook=require("./runTransitionHook"),_runTransitionHook2=_interopRequireDefault(_runTransitionHook),_deprecate=require("./deprecate"),_deprecate2=_interopRequireDefault(_deprecate),DefaultKeyLength=6;exports["default"]=createHistory,module.exports=exports["default"];

}).call(this,require('_process'))

},{"./Actions":34,"./AsyncUtils":35,"./PathUtils":39,"./createLocation":44,"./deprecate":46,"./runTransitionHook":50,"_process":15,"deep-equal":28,"warning":103}],44:[function(require,module,exports){
(function (process){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function createLocation(){var e=arguments.length<=0||void 0===arguments[0]?"/":arguments[0],t=arguments.length<=1||void 0===arguments[1]?_Actions.POP:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=arguments.length<=3||void 0===arguments[3]?null:arguments[3];"string"==typeof e&&(e=_PathUtils.parsePath(e)),"object"==typeof t&&("production"!==process.env.NODE_ENV?_warning2["default"](!1,"The state (2nd) argument to createLocation is deprecated; use a location descriptor instead"):void 0,e=_extends({},e,{state:t}),t=n||_Actions.POP,n=r);var a=e.pathname||"/",o=e.search||"",i=e.hash||"",s=e.state||null;return{pathname:a,search:o,hash:i,state:s,action:t,key:n}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_warning=require("warning"),_warning2=_interopRequireDefault(_warning),_Actions=require("./Actions"),_PathUtils=require("./PathUtils");exports["default"]=createLocation,module.exports=exports["default"];

}).call(this,require('_process'))

},{"./Actions":34,"./PathUtils":39,"_process":15,"warning":103}],45:[function(require,module,exports){
(function (process){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function createStateStorage(e){return e.filter(function(e){return e.state}).reduce(function(e,t){return e[t.key]=t.state,e},{})}function createMemoryHistory(){function e(e,t){_[e]=t}function t(e){return _[e]}function r(){var e=c[f],r=e.basename,n=e.pathname,a=e.search,i=(r||"")+n+(a||""),o=void 0,u=void 0;e.key?(o=e.key,u=t(o)):(o=s.createKey(),u=null,e.key=o);var _=_PathUtils.parsePath(i);return s.createLocation(_extends({},_,{state:u}),void 0,o)}function n(e){var t=f+e;return t>=0&&t<c.length}function a(e){if(e){if(!n(e))return void("production"!==process.env.NODE_ENV?_warning2["default"](!1,"Cannot go(%s) there is not enough history",e):void 0);f+=e;var t=r();s.transitionTo(_extends({},t,{action:_Actions.POP}))}}function i(t){switch(t.action){case _Actions.PUSH:f+=1,f<c.length&&c.splice(f),c.push(t),e(t.key,t.state);break;case _Actions.REPLACE:c[f]=t,e(t.key,t.state)}}var o=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];Array.isArray(o)?o={entries:o}:"string"==typeof o&&(o={entries:[o]});var s=_createHistory2["default"](_extends({},o,{getCurrentLocation:r,finishTransition:i,saveState:e,go:a})),u=o,c=u.entries,f=u.current;"string"==typeof c?c=[c]:Array.isArray(c)||(c=["/"]),c=c.map(function(e){var t=s.createKey();return"string"==typeof e?{pathname:e,key:t}:"object"==typeof e&&e?_extends({},e,{key:t}):void("production"!==process.env.NODE_ENV?_invariant2["default"](!1,"Unable to create history entry from %s",e):_invariant2["default"](!1))}),null==f?f=c.length-1:f>=0&&f<c.length?void 0:"production"!==process.env.NODE_ENV?_invariant2["default"](!1,"Current index must be >= 0 and < %s, was %s",c.length,f):_invariant2["default"](!1);var _=createStateStorage(c);return s}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_warning=require("warning"),_warning2=_interopRequireDefault(_warning),_invariant=require("invariant"),_invariant2=_interopRequireDefault(_invariant),_PathUtils=require("./PathUtils"),_Actions=require("./Actions"),_createHistory=require("./createHistory"),_createHistory2=_interopRequireDefault(_createHistory);exports["default"]=createMemoryHistory,module.exports=exports["default"];

}).call(this,require('_process'))

},{"./Actions":34,"./PathUtils":39,"./createHistory":43,"_process":15,"invariant":57,"warning":103}],46:[function(require,module,exports){
(function (process){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function deprecate(e,r){return function(){return"production"!==process.env.NODE_ENV?_warning2["default"](!1,"[history] "+r):void 0,e.apply(this,arguments)}}exports.__esModule=!0;var _warning=require("warning"),_warning2=_interopRequireDefault(_warning);exports["default"]=deprecate,module.exports=exports["default"];

}).call(this,require('_process'))

},{"_process":15,"warning":103}],47:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0;var _deprecate=require("./deprecate"),_deprecate2=_interopRequireDefault(_deprecate),_useBeforeUnload=require("./useBeforeUnload"),_useBeforeUnload2=_interopRequireDefault(_useBeforeUnload);exports["default"]=_deprecate2["default"](_useBeforeUnload2["default"],"enableBeforeUnload is deprecated, use useBeforeUnload instead"),module.exports=exports["default"];

},{"./deprecate":46,"./useBeforeUnload":52}],48:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0;var _deprecate=require("./deprecate"),_deprecate2=_interopRequireDefault(_deprecate),_useQueries=require("./useQueries"),_useQueries2=_interopRequireDefault(_useQueries);exports["default"]=_deprecate2["default"](_useQueries2["default"],"enableQueries is deprecated, use useQueries instead"),module.exports=exports["default"];

},{"./deprecate":46,"./useQueries":53}],49:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0;var _deprecate=require("./deprecate"),_deprecate2=_interopRequireDefault(_deprecate),_createLocation2=require("./createLocation"),_createLocation3=_interopRequireDefault(_createLocation2),_createBrowserHistory=require("./createBrowserHistory"),_createBrowserHistory2=_interopRequireDefault(_createBrowserHistory);exports.createHistory=_createBrowserHistory2["default"];var _createHashHistory2=require("./createHashHistory"),_createHashHistory3=_interopRequireDefault(_createHashHistory2);exports.createHashHistory=_createHashHistory3["default"];var _createMemoryHistory2=require("./createMemoryHistory"),_createMemoryHistory3=_interopRequireDefault(_createMemoryHistory2);exports.createMemoryHistory=_createMemoryHistory3["default"];var _useBasename2=require("./useBasename"),_useBasename3=_interopRequireDefault(_useBasename2);exports.useBasename=_useBasename3["default"];var _useBeforeUnload2=require("./useBeforeUnload"),_useBeforeUnload3=_interopRequireDefault(_useBeforeUnload2);exports.useBeforeUnload=_useBeforeUnload3["default"];var _useQueries2=require("./useQueries"),_useQueries3=_interopRequireDefault(_useQueries2);exports.useQueries=_useQueries3["default"];var _Actions2=require("./Actions"),_Actions3=_interopRequireDefault(_Actions2);exports.Actions=_Actions3["default"];var _enableBeforeUnload2=require("./enableBeforeUnload"),_enableBeforeUnload3=_interopRequireDefault(_enableBeforeUnload2);exports.enableBeforeUnload=_enableBeforeUnload3["default"];var _enableQueries2=require("./enableQueries"),_enableQueries3=_interopRequireDefault(_enableQueries2);exports.enableQueries=_enableQueries3["default"];var createLocation=_deprecate2["default"](_createLocation3["default"],"Using createLocation without a history instance is deprecated; please use history.createLocation instead");exports.createLocation=createLocation;

},{"./Actions":34,"./createBrowserHistory":40,"./createHashHistory":42,"./createLocation":44,"./createMemoryHistory":45,"./deprecate":46,"./enableBeforeUnload":47,"./enableQueries":48,"./useBasename":51,"./useBeforeUnload":52,"./useQueries":53}],50:[function(require,module,exports){
(function (process){
"use strict";function _interopRequireDefault(n){return n&&n.__esModule?n:{"default":n}}function runTransitionHook(n,e,r){var t=n(e,r);n.length<2?r(t):"production"!==process.env.NODE_ENV?_warning2["default"](void 0===t,'You should not "return" in a transition hook with a callback argument; call the callback instead'):void 0}exports.__esModule=!0;var _warning=require("warning"),_warning2=_interopRequireDefault(_warning);exports["default"]=runTransitionHook,module.exports=exports["default"];

}).call(this,require('_process'))

},{"_process":15,"warning":103}],51:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function useBasename(e){return function(){function t(e){return d&&null==e.basename&&(0===e.pathname.indexOf(d)?(e.pathname=e.pathname.substring(d.length),e.basename=d,""===e.pathname&&(e.pathname="/")):e.basename=""),e}function n(e){if(!d)return e;"string"==typeof e&&(e=_PathUtils.parsePath(e));var t=e.pathname,n="/"===d.slice(-1)?d:d+"/",r="/"===t.charAt(0)?t.slice(1):t,a=n+r;return _extends({},e,{pathname:a})}function r(e){return h.listenBefore(function(n,r){_runTransitionHook2["default"](e,t(n),r)})}function a(e){return h.listen(function(n){e(t(n))})}function i(e){h.push(n(e))}function u(e){h.replace(n(e))}function o(e){return h.createPath(n(e))}function s(e){return h.createHref(n(e))}function c(e){for(var r=arguments.length,a=Array(r>1?r-1:0),i=1;r>i;i++)a[i-1]=arguments[i];return t(h.createLocation.apply(h,[n(e)].concat(a)))}function p(e,t){"string"==typeof t&&(t=_PathUtils.parsePath(t)),i(_extends({state:e},t))}function l(e,t){"string"==typeof t&&(t=_PathUtils.parsePath(t)),u(_extends({state:e},t))}var f=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],h=e(f),d=f.basename;if(null==d&&_ExecutionEnvironment.canUseDOM){var _=document.getElementsByTagName("base")[0];_&&(d=_PathUtils.extractPath(_.href))}return _extends({},h,{listenBefore:r,listen:a,push:i,replace:u,createPath:o,createHref:s,createLocation:c,pushState:_deprecate2["default"](p,"pushState is deprecated; use push instead"),replaceState:_deprecate2["default"](l,"replaceState is deprecated; use replace instead")})}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_ExecutionEnvironment=require("./ExecutionEnvironment"),_PathUtils=require("./PathUtils"),_runTransitionHook=require("./runTransitionHook"),_runTransitionHook2=_interopRequireDefault(_runTransitionHook),_deprecate=require("./deprecate"),_deprecate2=_interopRequireDefault(_deprecate);exports["default"]=useBasename,module.exports=exports["default"];

},{"./ExecutionEnvironment":38,"./PathUtils":39,"./deprecate":46,"./runTransitionHook":50}],52:[function(require,module,exports){
(function (process){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function startBeforeUnloadListener(e){function n(n){var r=e();return"string"==typeof r?((n||window.event).returnValue=r,r):void 0}return _DOMUtils.addEventListener(window,"beforeunload",n),function(){_DOMUtils.removeEventListener(window,"beforeunload",n)}}function useBeforeUnload(e){return function(n){function r(){for(var e=void 0,n=0,r=l.length;null==e&&r>n;++n)e=l[n].call();return e}function t(e){return l.push(e),1===l.length&&(_ExecutionEnvironment.canUseDOM?a=startBeforeUnloadListener(r):"production"!==process.env.NODE_ENV?_warning2["default"](!1,"listenBeforeUnload only works in DOM environments"):void 0),function(){l=l.filter(function(n){return n!==e}),0===l.length&&a&&(a(),a=null)}}function o(e){_ExecutionEnvironment.canUseDOM&&-1===l.indexOf(e)&&(l.push(e),1===l.length&&(a=startBeforeUnloadListener(r)))}function i(e){l.length>0&&(l=l.filter(function(n){return n!==e}),0===l.length&&a())}var u=e(n),a=void 0,l=[];return _extends({},u,{listenBeforeUnload:t,registerBeforeUnloadHook:_deprecate2["default"](o,"registerBeforeUnloadHook is deprecated; use listenBeforeUnload instead"),unregisterBeforeUnloadHook:_deprecate2["default"](i,"unregisterBeforeUnloadHook is deprecated; use the callback returned from listenBeforeUnload instead")})}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},_warning=require("warning"),_warning2=_interopRequireDefault(_warning),_ExecutionEnvironment=require("./ExecutionEnvironment"),_DOMUtils=require("./DOMUtils"),_deprecate=require("./deprecate"),_deprecate2=_interopRequireDefault(_deprecate);exports["default"]=useBeforeUnload,module.exports=exports["default"];

}).call(this,require('_process'))

},{"./DOMUtils":37,"./ExecutionEnvironment":38,"./deprecate":46,"_process":15,"warning":103}],53:[function(require,module,exports){
(function (process){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function defaultStringifyQuery(e){return _queryString.stringify(e).replace(/%20/g,"+")}function isNestedObject(e){for(var r in e)if(e.hasOwnProperty(r)&&"object"==typeof e[r]&&!Array.isArray(e[r])&&null!==e[r])return!0;return!1}function useQueries(e){return function(){function r(e){if(null==e.query){var r=e.search;e.query=_(r.substring(1)),e[SEARCH_BASE_KEY]={search:r,searchBase:""}}return e}function t(e,r){var t,n=e[SEARCH_BASE_KEY],a=r?y(r):"";if(!n&&!a)return e;"production"!==process.env.NODE_ENV?_warning2["default"](y!==defaultStringifyQuery||!isNestedObject(r),"useQueries does not stringify nested query objects by default; use a custom stringifyQuery function"):void 0,"string"==typeof e&&(e=_PathUtils.parsePath(e));var u=void 0;u=n&&e.search===n.search?n.searchBase:e.search||"";var i=u;return a&&(i+=(i?"&":"?")+a),_extends({},e,(t={search:i},t[SEARCH_BASE_KEY]={search:i,searchBase:u},t))}function n(e){return l.listenBefore(function(t,n){_runTransitionHook2["default"](e,r(t),n)})}function a(e){return l.listen(function(t){e(r(t))})}function u(e){l.push(t(e,e.query))}function i(e){l.replace(t(e,e.query))}function s(e,r){return"production"!==process.env.NODE_ENV?_warning2["default"](!r,"the query argument to createPath is deprecated; use a location descriptor instead"):void 0,l.createPath(t(e,r||e.query))}function o(e,r){return"production"!==process.env.NODE_ENV?_warning2["default"](!r,"the query argument to createHref is deprecated; use a location descriptor instead"):void 0,l.createHref(t(e,r||e.query))}function c(e){for(var n=arguments.length,a=Array(n>1?n-1:0),u=1;n>u;u++)a[u-1]=arguments[u];var i=l.createLocation.apply(l,[t(e,e.query)].concat(a));return e.query&&(i.query=e.query),r(i)}function f(e,r,t){"string"==typeof r&&(r=_PathUtils.parsePath(r)),u(_extends({state:e},r,{query:t}))}function d(e,r,t){"string"==typeof r&&(r=_PathUtils.parsePath(r)),i(_extends({state:e},r,{query:t}))}var p=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],l=e(p),y=p.stringifyQuery,_=p.parseQueryString;return"function"!=typeof y&&(y=defaultStringifyQuery),"function"!=typeof _&&(_=defaultParseQueryString),_extends({},l,{listenBefore:n,listen:a,push:u,replace:i,createPath:s,createHref:o,createLocation:c,pushState:_deprecate2["default"](f,"pushState is deprecated; use push instead"),replaceState:_deprecate2["default"](d,"replaceState is deprecated; use replace instead")})}}exports.__esModule=!0;var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},_warning=require("warning"),_warning2=_interopRequireDefault(_warning),_queryString=require("query-string"),_runTransitionHook=require("./runTransitionHook"),_runTransitionHook2=_interopRequireDefault(_runTransitionHook),_PathUtils=require("./PathUtils"),_deprecate=require("./deprecate"),_deprecate2=_interopRequireDefault(_deprecate),SEARCH_BASE_KEY="$searchBase",defaultParseQueryString=_queryString.parse;exports["default"]=useQueries,module.exports=exports["default"];

}).call(this,require('_process'))

},{"./PathUtils":39,"./deprecate":46,"./runTransitionHook":50,"_process":15,"query-string":62,"warning":103}],54:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var isValidString=function(t){return"string"==typeof t&&t.length>0},startsWith=function(t,e){return t[0]===e},isSelector=function(t){return isValidString(t)&&(startsWith(t,".")||startsWith(t,"#"))},node=function(t){return function(e){return function(r){for(var o=arguments.length,i=Array(o>1?o-1:0),n=1;o>n;n++)i[n-1]=arguments[n];return isSelector(r)?t.apply(void 0,[e+r].concat(i)):t.apply(void 0,[e,r].concat(i))}}},TAG_NAMES=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","sup","table","tbody","td","textarea","tfoot","th","thead","title","tr","u","ul","video"];exports["default"]=function(t){var e=node(t),r={TAG_NAMES:TAG_NAMES,isSelector:isSelector,createTag:e};return TAG_NAMES.forEach(function(t){r[t]=e(t)}),r},module.exports=exports["default"];

},{}],55:[function(require,module,exports){
(function (global){
"use strict";function Individual(o,n){return o in root?root[o]:(root[o]=n,n)}var root="undefined"!=typeof window?window:"undefined"!=typeof global?global:{};module.exports=Individual;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],56:[function(require,module,exports){
"use strict";function OneVersion(n,e,i){var r="__INDIVIDUAL_ONE_VERSION_"+n,o=r+"_ENFORCE_SINGLETON",a=Individual(o,e);if(a!==e)throw new Error("Can only have one copy of "+n+".\nYou already have version "+a+" installed.\nThis means you cannot install version "+e);return Individual(r,i)}var Individual=require("./index.js");module.exports=OneVersion;

},{"./index.js":55}],57:[function(require,module,exports){
(function (process){
"use strict";var invariant=function(r,e,n,i,o,a,t,s){if("production"!==process.env.NODE_ENV&&void 0===e)throw new Error("invariant requires an error message argument");if(!r){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var v=[n,i,o,a,t,s],d=0;u=new Error(e.replace(/%s/g,function(){return v[d++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};module.exports=invariant;

}).call(this,require('_process'))

},{"_process":15}],58:[function(require,module,exports){
"use strict";module.exports=function(t){return"object"==typeof t&&null!==t};

},{}],59:[function(require,module,exports){
var LANGUAGES={tr:{regexp:/\u0130|\u0049|\u0049\u0307/g,map:{"İ":"i",I:"ı","İ":"i"}},az:{regexp:/[\u0130]/g,map:{"İ":"i",I:"ı","İ":"i"}},lt:{regexp:/[\u0049\u004A\u012E\u00CC\u00CD\u0128]/g,map:{I:"i̇",J:"j̇","Į":"į̇","Ì":"i̇̀","Í":"i̇́","Ĩ":"i̇̃"}}};module.exports=function(u,e){var r=LANGUAGES[e];return u=null==u?"":String(u),r&&(u=u.replace(r.regexp,function(u){return r.map[u]})),u.toLowerCase()};

},{}],60:[function(require,module,exports){
"use strict";function match(e,t){if(vendor)return vendor.call(e,t);for(var o=e.parentNode.querySelectorAll(t),r=0;r<o.length;r++)if(o[r]==e)return!0;return!1}var proto=Element.prototype,vendor=proto.matches||proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match;

},{}],61:[function(require,module,exports){
var sentenceCase=require("sentence-case");module.exports=function(e,n){return sentenceCase(e,n,"-")};

},{"sentence-case":65}],62:[function(require,module,exports){
"use strict";var strictUriEncode=require("strict-uri-encode");exports.extract=function(r){return r.split("?")[1]||""},exports.parse=function(r){return"string"!=typeof r?{}:(r=r.trim().replace(/^(\?|#|&)/,""),r?r.split("&").reduce(function(r,t){var e=t.replace(/\+/g," ").split("="),n=e.shift(),i=e.length>0?e.join("="):void 0;return n=decodeURIComponent(n),i=void 0===i?null:decodeURIComponent(i),r.hasOwnProperty(n)?Array.isArray(r[n])?r[n].push(i):r[n]=[r[n],i]:r[n]=i,r},{}):{})},exports.stringify=function(r){return r?Object.keys(r).sort().map(function(t){var e=r[t];return void 0===e?"":null===e?t:Array.isArray(e)?e.slice().sort().map(function(r){return strictUriEncode(t)+"="+strictUriEncode(r)}).join("&"):strictUriEncode(t)+"="+strictUriEncode(e)}).filter(function(r){return r.length>0}).join("&"):""};

},{"strict-uri-encode":69}],63:[function(require,module,exports){
module.exports=function(l,n,e){for(var r=0,t=l.length,o=3==arguments.length?e:l[r++];t>r;)o=n.call(null,o,l[r],++r,l);return o};

},{}],64:[function(require,module,exports){
(function (process,global){
(function(t){function e(t){return t&&t.Object===Object?t:null}function n(t){for(var e=[],n=0,r=t.length;r>n;n++)e.push(t[n]);return e}function r(t){return function(){try{return t.apply(this,arguments)}catch(e){return Xt.e=e,Xt}}}function i(t){throw t}function o(t,e){if(Zt&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(re)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+re+"\n");t.stack=s(i)}}function s(t){for(var e=t.split("\n"),n=[],r=0,i=e.length;i>r;r++){var o=e[r];u(o)||c(o)||!o||n.push(o)}return n.join("\n")}function u(t){var e=a(t);if(!e)return!1;var n=e[0],r=e[1];return n===ee&&r>=ne&&Fs>=r}function c(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function h(){if(Zt)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=a(n);if(!r)return;return ee=r[0],r[1]}}function a(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function p(e,n,r,i,o,s){var u=Ue(e),c=u.length,h=Ue(n),a=h.length;if(c!==a&&!i)return!1;for(var p,f=c;f--;)if(p=u[f],!(i?p in n:ze.call(n,p)))return!1;for(var l=i;++f<c;){p=u[f];var d,_=e[p],b=n[p];if(!(d===t?r(_,b,i,o,s):d))return!1;l||(l="constructor"===p)}if(!l){var v=e.constructor,y=n.constructor;if(v!==y&&"constructor"in e&&"constructor"in n&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y))return!1}return!0}function f(t,e,n){switch(n){case ye:case we:return+t===+e;case me:return t.name===e.name&&t.message===e.message;case ge:return t!==+t?e!==+e:t===+e;case Ne:case Ae:return t===e+""}return!1}function l(t){return!!t&&"object"==typeof t}function d(t){return"number"==typeof t&&t>-1&&t%1===0&&Be>=t}function _(t){return l(t)&&d(t.length)&&!!Ve[Ie.call(t)]}function b(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function v(e,n,r,i,o,s){var u=-1,c=e.length,h=n.length;if(c!==h&&!(i&&h>c))return!1;for(;++u<c;){var a,p=e[u],f=n[u];if(a!==t){if(a)continue;return!1}if(i){if(!b(n,function(t){return p===t||r(p,t,i,o,s)}))return!1}else if(p!==f&&!r(p,f,i,o,s))return!1}return!0}function y(t,e,n,r,i,o){var s=He(t),u=He(e),c=ve,h=ve;s||(c=Ie.call(t),c===be?c=xe:c!==xe&&(s=_(t))),u||(h=Ie.call(e),h===be&&(h=xe));var a=c===xe&&!Ke(t),l=h===xe&&!Ke(e),d=c===h;if(d&&!s&&!a)return f(t,e,c);if(!r){var b=a&&ze.call(t,"__wrapped__"),y=l&&ze.call(e,"__wrapped__");if(b||y)return n(b?t.value():t,y?e.value():e,r,i,o)}if(!d)return!1;i||(i=[]),o||(o=[]);for(var w=i.length;w--;)if(i[w]===t)return o[w]===e;i.push(t),o.push(e);var m=(s?v:p)(t,e,n,r,i,o);return i.pop(),o.pop(),m}function w(t,e,n,r,i){return t===e?!0:null==t||null==e||!et(t)&&!l(e)?t!==t&&e!==e:y(t,e,w,n,r,i)}function m(t,e){for(var n=new Array(t),r=0;t>r;r++)n[r]=e();return n}function E(t,e){this.id=t,this.value=e}function C(t,e){this.scheduler=t,this.disposable=e,this.isDisposed=!1}function g(t,e){e.isDisposed||(e.isDisposed=!0,e.disposable.dispose())}function x(t){this._s=t,this.isDisposed=!1}function N(t){this._s=t}function D(t){this._s=t,this._l=t.length,this._i=0}function A(t){this._a=t}function S(t){this._a=t,this._l=j(t),this._i=0}function O(t){return"number"==typeof t&&zt.isFinite(t)}function q(e){var n,r=e[ae];if(!r&&"string"==typeof e)return n=new N(e),n[ae]();if(!r&&e.length!==t)return n=new A(e),n[ae]();if(!r)throw new TypeError("Object is not iterable");return e[ae]()}function k(t){var e=+t;return 0===e?e:isNaN(e)?e:0>e?-1:1}function j(t){var e=+t.length;return isNaN(e)?0:0!==e&&O(e)?(e=k(e)*Math.floor(Math.abs(e)),0>=e?0:e>fr?fr:e):e}function F(t,e){return bn(t)||(t=gn),new dr(e,t)}function R(t,e){this.observer=t,this.parent=e}function T(t,e){return t.amb(e)}function M(){return!1}function P(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function M(){return!1}function P(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function M(){return!1}function L(){return[]}function M(){return!1}function L(){return[]}function P(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function V(t){return function(e){return t.subscribe(e)}}function W(t){return t.toArray()}function z(t){return t.length>0}function I(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function I(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function B(t,e,n){var r=de(e,n,3);return t.map(function(e,n){var i=r(e,n,t);return $t(i)&&(i=ir(i)),(le(i)||fe(i))&&(i=lr(i)),i}).concatAll()}function U(t,e,n){for(var r=0,i=t.length;i>r;r++)if(n(t[r],e))return r;return-1}function K(t){this.comparer=t,this.set=[]}function H(e,n){return function(r){for(var i=r,o=0;n>o;o++){var s=i[e[o]];if("undefined"==typeof s)return t;i=s}return i}}function J(t){if(0===t.length)throw new ie;return t[0]}function Q(t,e,n,r){var i=de(e,n,3);return new xs(function(e){return t.subscribe(new uo(e,t,i,r))},t)}function $(t){return t?Kn.isObservable(t)?t:$t(t)?Kn.fromPromise(t):tt(t)||Z(t)?vo.call(this,t):Gt(t)?Y.call(this,t):le(t)||fe(t)?G.call(this,t):et(t)?X.call(this,t):t:t}function G(t){return Kn.from(t).concatMap(function(t){return Kn.isObservable(t)||et(t)?$.call(null,t):It.Observable.just(t)}).toArray()}function X(e){function n(e,n){r[n]=t,o.push(e.map(function(t){r[n]=t}))}for(var r=new e.constructor,i=Object.keys(e),o=[],s=0,u=i.length;u>s;s++){var c=i[s],h=$.call(this,e[c]);h&&Kn.isObservable(h)?n(h,c):r[c]=e[c]}return Kn.forkJoin.apply(Kn,o).map(function(){return r})}function Y(t){var e=this;return new xs(function(n){t.call(e,function(){var t=arguments[0],e=arguments[1];if(t)return n.onError(t);if(arguments.length>2){for(var r=[],i=1,o=arguments.length;o>i;i++)r.push(arguments[i]);e=r}n.onNext(e),n.onCompleted()})})}function Z(t){return Gt(t.next)&&Gt(t["throw"])}function tt(t){var e=t.constructor;return e?"GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName?!0:Z(e.prototype):!1}function et(t){return Object==t.constructor}function nt(t,e,n,r){var i=new Os;return r.push(rt(i,e,n)),t.apply(e,r),i.asObservable()}function rt(t,e,n){return function(){for(var r=arguments.length,i=new Array(r),o=0;r>o;o++)i[o]=arguments[o];if(Gt(n)){if(i=Yt(n).apply(e,i),i===Xt)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}function it(t,e,n,r){var i=new Os;return r.push(ot(i,e,n)),t.apply(e,r),i.asObservable()}function ot(t,e,n){return function(){var r=arguments[0];if(r)return t.onError(r);for(var i=arguments.length,o=[],s=1;i>s;s++)o[s-1]=arguments[s];if(Gt(n)){var o=Yt(n).apply(e,o);if(o===Xt)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}function st(t){return zt.StaticNodeList?t instanceof zt.StaticNodeList||t instanceof zt.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}function ut(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function ct(t,e,n){var r=new Ze,i=Object.prototype.toString.call(t);if(st(t)||"[object HTMLCollection]"===i)for(var o=0,s=t.length;s>o;o++)r.add(ct(t.item(o),e,n));else t&&r.add(new ut(t,e,n));return r}function ht(t,e,n){return new xs(function(r){function i(t,e){if(h[e]=t,s[e]=!0,u||(u=s.every(Ut))){if(o)return r.onError(o);var i=Yt(n).apply(null,h);if(i===Xt)return r.onError(i.e);r.onNext(i)}c&&h[1]&&r.onCompleted()}var o,s=[!1,!1],u=!1,c=!1,h=new Array(2);return new an(t.subscribe(function(t){i(t,0)},function(t){h[1]?r.onError(t):o=t},function(){c=!0,h[1]&&r.onCompleted()}),e.subscribe(function(t){i(t,1)},function(t){r.onError(t)},function(){c=!0,i(!0,1)}))},t)}function W(t){return t.toArray()}function at(t,e){return t.groupJoin(this,e,ar,function(t,e){return e})}function pt(t){var e=this;return new xs(function(n){var r=new Ss,i=new Ze,o=new fn(i);return n.onNext(Ge(r,o)),i.add(e.subscribe(function(t){r.onNext(t)},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),$t(t)&&(t=ir(t)),i.add(t.subscribe(function(t){r.onCompleted(),r=new Ss,n.onNext(Ge(r,o))},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),o},e)}function ft(t){var e=this;return new xs(function(n){function r(){var e;try{e=t()}catch(o){return void n.onError(o)}$t(e)&&(e=ir(e));var c=new cn;i.setDisposable(c),c.setDisposable(e.take(1).subscribe(Bt,function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),u=new Ss,n.onNext(Ge(u,s)),r()}))}var i=new hn,o=new Ze(i),s=new fn(o),u=new Ss;return n.onNext(Ge(u,s)),o.add(e.subscribe(function(t){u.onNext(t)},function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),n.onCompleted()})),r(),s},e)}function lt(t,e){return new Ro(t,e)}function P(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function dt(t){this.patterns=t}function _t(t,e){this.expression=t,this.selector=e}function bt(t){return function(e){t.onError(e)}}function vt(t,e){return function(){var n=Yt(t.selector).apply(t,arguments);return n===Xt?e.onError(n.e):void e.onNext(n)}}function yt(t,e,n){var r=t.get(e);if(!r){var i=new Io(e,n);return t.set(e,i),i}return r}function wt(t,e,n){this.joinObserverArray=t,this.onNext=e,this.onCompleted=n,this.joinObservers=new zo;for(var r=0,i=this.joinObserverArray.length;i>r;r++){var o=this.joinObserverArray[r];this.joinObservers.set(o,o)}}function mt(t,e){return new Bo(t,e)}function Et(t,e,n){return new xs(function(r){var i=t,o=_n(e);return n.scheduleRecursiveFuture(0,i,function(t,e){if(o>0){var s=n.now();i=new Date(i.getTime()+o),i.getTime()<=s&&(i=new Date(s+o))}r.onNext(t),e(t+1,new Date(i))})})}function Ct(t,e,n){return t===e?new xs(function(t){return n.schedulePeriodic(0,e,function(e){return t.onNext(e),e+1})}):ur(function(){return Et(new Date(n.now()+t),e,n)})}function gt(t,e,n){return new xs(function(r){var i,o=!1,s=new hn,u=null,c=[],h=!1;return i=t.materialize().timestamp(n).subscribe(function(t){var i,a;"E"===t.value.kind?(c=[],c.push(t),u=t.value.error,a=!h):(c.push({value:t.value,timestamp:t.timestamp+e}),a=!o,o=!0),a&&(null!==u?r.onError(u):(i=new cn,s.setDisposable(i),i.setDisposable(n.scheduleRecursiveFuture(null,e,function(t,e){var i,s,a,p;if(null===u){h=!0;do a=null,c.length>0&&c[0].timestamp-n.now()<=0&&(a=c.shift().value),null!==a&&a.accept(r);while(null!==a);p=!1,s=0,c.length>0?(p=!0,s=Math.max(0,c[0].timestamp-n.now())):o=!1,i=u,h=!1,null!==i?r.onError(i):p&&e(null,s)}}))))}),new an(i,s)},t)}function xt(t,e,n){return ur(function(){return gt(t,e-n.now(),n)})}function Nt(t,e,n){var r,i;return Gt(e)?i=e:(r=e,i=n),new xs(function(e){function n(){c.setDisposable(t.subscribe(function(t){var n=Yt(i)(t);if(n===Xt)return e.onError(n.e);var r=new cn;s.add(r),r.setDisposable(n.subscribe(function(){e.onNext(t),s.remove(r),o()},function(t){e.onError(t)},function(){e.onNext(t),s.remove(r),o()}))},function(t){e.onError(t)},function(){u=!0,c.dispose(),o()}))}function o(){u&&0===s.length&&e.onCompleted()}var s=new Ze,u=!1,c=new hn;return r?c.setDisposable(r.subscribe(n,function(t){e.onError(t)},n)):n(),new an(c,s)},t)}function Dt(t,e){return new xs(function(n){var r,i=!1,o=new hn,s=0,u=t.subscribe(function(t){var u=Yt(e)(t);if(u===Xt)return n.onError(u.e);$t(u)&&(u=ir(u)),i=!0,r=t,s++;var c=s,h=new cn;o.setDisposable(h),h.setDisposable(u.subscribe(function(){i&&s===c&&n.onNext(r),i=!1,h.dispose()},function(t){n.onError(t)},function(){i&&s===c&&n.onNext(r),i=!1,h.dispose()}))},function(t){o.dispose(),n.onError(t),i=!1,s++},function(){o.dispose(),i&&n.onNext(r),n.onCompleted(),i=!1,s++});return new an(u,o)},t)}function W(t){return t.toArray()}function W(t){return t.toArray()}function At(t,e,n,r){return Gt(e)&&(r=n,n=e,e=wr()),Kn.isObservable(r)||(r=Nr(new ts)),new xs(function(i){function o(t){function e(){return p=n===a}var n=a,o=new cn;c.setDisposable(o),o.setDisposable(t.subscribe(function(){e()&&u.setDisposable(r.subscribe(i)),o.dispose()},function(t){e()&&i.onError(t)},function(){e()&&u.setDisposable(r.subscribe(i))}))}function s(){var t=!p;return t&&a++,t}var u=new hn,c=new hn,h=new cn;u.setDisposable(h);var a=0,p=!1;return o(e),h.setDisposable(t.subscribe(function(t){if(s()){i.onNext(t);var e=Yt(n)(t);if(e===Xt)return i.onError(e.e);o($t(e)?ir(e):e)}},function(t){s()&&i.onError(t)},function(){s()&&i.onCompleted()})),new an(u,c)},t)}function St(t,e,n,r){return bn(n)&&(r=n,n=Nr(new ts)),n instanceof Error&&(n=Nr(n)),bn(r)||(r=Sn),Kn.isObservable(n)||(n=Nr(new ts)),new xs(function(i){function o(){var t=s;a.setDisposable(r.scheduleFuture(null,e,function(){h=s===t,h&&($t(n)&&(n=ir(n)),c.setDisposable(n.subscribe(i)))}))}var s=0,u=new cn,c=new hn,h=!1,a=new hn;return c.setDisposable(u),o(),u.setDisposable(t.subscribe(function(t){h||(s++,i.onNext(t),o())},function(t){h||(s++,i.onError(t))},function(){h||(s++,i.onCompleted())})),new an(c,a)},t)}function Ot(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}function qt(t){this.predicate=t}function kt(t){this.predicate=t}function jt(t,e){var n=this;this.scheduler=t,this.messages=e,this.subscriptions=[],this.observers=[];for(var r=0,i=this.messages.length;i>r;r++){var o=this.messages[r],s=o.value;!function(e){t.scheduleAbsolute(null,o.time,function(){for(var t=n.observers.slice(0),r=0,i=t.length;i>r;r++)e.accept(t[r]);return rn})}(s)}}var Ft={"function":!0,object:!0},Rt=Ft[typeof exports]&&exports&&!exports.nodeType?exports:null,Tt=Ft[typeof module]&&module&&!module.nodeType?module:null,Mt=e(Rt&&Tt&&"object"==typeof global&&global),Pt=e(Ft[typeof self]&&self),Lt=e(Ft[typeof window]&&window),Vt=Tt&&Tt.exports===Rt?Rt:null,Wt=e(Ft[typeof this]&&this),zt=Mt||Lt!==(Wt&&Wt.window)&&Lt||Pt||Wt||Function("return this")(),It={internals:{},config:{Promise:zt.Promise},helpers:{}},Bt=It.helpers.noop=function(){},Ut=It.helpers.identity=function(t){return t},Kt=It.helpers.defaultNow=Date.now,Ht=It.helpers.defaultComparer=function(t,e){return Je(t,e)},Jt=It.helpers.defaultSubComparer=function(t,e){return t>e?1:e>t?-1:0},Qt=(It.helpers.defaultKeySerializer=function(t){return t.toString()},It.helpers.defaultError=function(t){throw t}),$t=It.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},Gt=It.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),t}(),Xt={e:{}},Yt=It.internals.tryCatch=function(t){if(!Gt(t))throw new TypeError("fn must be a function");return r(t)};It.config.longStackSupport=!1;var Zt=!1,te=Yt(function(){throw new Error})();Zt=!!te.e&&!!te.e.stack;var ee,ne=h(),re="From previous event:",ie=It.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};ie.prototype=Object.create(Error.prototype),ie.prototype.name="EmptyError";var oe=It.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};oe.prototype=Object.create(Error.prototype),oe.prototype.name="ObjectDisposedError";var se=It.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};se.prototype=Object.create(Error.prototype),se.prototype.name="ArgumentOutOfRangeError";var ue=It.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};ue.prototype=Object.create(Error.prototype),ue.prototype.name="NotSupportedError";var ce=It.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};ce.prototype=Object.create(Error.prototype),ce.prototype.name="NotImplementedError";var he=It.helpers.notImplemented=function(){throw new ce},ae=(It.helpers.notSupported=function(){throw new ue},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");zt.Set&&"function"==typeof(new zt.Set)["@@iterator"]&&(ae="@@iterator");var pe=It.doneEnumerator={done:!0,value:t},fe=It.helpers.isIterable=function(e){return e&&e[ae]!==t},le=It.helpers.isArrayLike=function(e){return e&&e.length!==t};It.helpers.iterator=ae;var de=It.internals.bindCallback=function(t,e,n){if("undefined"==typeof e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},_e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],be=(_e.length,"[object Arguments]"),ve="[object Array]",ye="[object Boolean]",we="[object Date]",me="[object Error]",Ee="[object Function]",Ce="[object Map]",ge="[object Number]",xe="[object Object]",Ne="[object RegExp]",De="[object Set]",Ae="[object String]",Se="[object WeakMap]",Oe="[object ArrayBuffer]",qe="[object Float32Array]",ke="[object Float64Array]",je="[object Int8Array]",Fe="[object Int16Array]",Re="[object Int32Array]",Te="[object Uint8Array]",Me="[object Uint8ClampedArray]",Pe="[object Uint16Array]",Le="[object Uint32Array]",Ve={};Ve[qe]=Ve[ke]=Ve[je]=Ve[Fe]=Ve[Re]=Ve[Te]=Ve[Me]=Ve[Pe]=Ve[Le]=!0,Ve[be]=Ve[ve]=Ve[Oe]=Ve[ye]=Ve[we]=Ve[me]=Ve[Ee]=Ve[Ce]=Ve[ge]=Ve[xe]=Ve[Ne]=Ve[De]=Ve[Ae]=Ve[Se]=!1;var We=Object.prototype,ze=We.hasOwnProperty,Ie=We.toString,Be=Math.pow(2,53)-1,Ue=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,s,u=[];for(o in i)t.call(i,o)&&u.push(o);if(e)for(s=0;r>s;s++)t.call(i,n[s])&&u.push(n[s]);return u}}(),et=It.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)},Ke=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),He=Array.isArray||function(t){return l(t)&&d(t.length)&&Ie.call(t)===ve},Je=It.internals.isEqual=function(t,e){return w(t,e)},Qe=({}.hasOwnProperty,Array.prototype.slice,It.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}),$e=It.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;r>n;n++)e.push(arguments[n]);for(var i=0,o=e.length;o>i;i++){var s=e[i];for(var u in s)t[u]=s[u]}},Ge=It.internals.addRef=function(t,e){return new xs(function(n){return new an(e.getDisposable(),t.subscribe(n))})};E.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var Xe=It.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},Ye=Xe.prototype;Ye.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},Ye.percolate=function(t){if(!(t>=this.length||0>t)){var e=t-1>>1;if(!(0>e||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},Ye.heapify=function(t){if(+t||(t=0),!(t>=this.length||0>t)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var i=this.items[t];this.items[t]=this.items[r],this.items[r]=i,this.heapify(r)}}},Ye.peek=function(){return this.items[0].value},Ye.removeAt=function(e){this.items[e]=this.items[--this.length],this.items[this.length]=t,this.heapify()},Ye.dequeue=function(){var t=this.peek();return this.removeAt(0),t},Ye.enqueue=function(t){var e=this.length++;this.items[e]=new E(Xe.count++,t),this.percolate(e)},Ye.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},Xe.count=0;var Ze=It.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=new Array(e),t=0;e>t;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},tn=Ze.prototype;tn.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},tn.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);-1!==n&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},tn.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;t>n;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;t>n;n++)e[n].dispose()}};var en=It.Disposable=function(t){this.isDisposed=!1,this.action=t||Bt};en.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var nn=en.create=function(t){return new en(t)},rn=en.empty={dispose:Bt},on=en.isDisposable=function(t){return t&&Gt(t.dispose)},sn=en.checkDisposed=function(t){if(t.isDisposed)throw new oe},un=en._fixup=function(t){return on(t)?t:rn},cn=It.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};cn.prototype.getDisposable=function(){return this.current},cn.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},cn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var hn=It.SerialDisposable=function(){this.isDisposed=!1,this.current=null};hn.prototype.getDisposable=function(){return this.current},hn.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},hn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var an=It.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};an.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var pn=It.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};pn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;e>t;t++)this._disposables[t].dispose();this._disposables.length=0}};var fn=It.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?rn:new t(this)},e}();C.prototype.dispose=function(){this.scheduler.schedule(this,g)};var ln=It.internals.ScheduledItem=function(t,e,n,r,i){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=i||Jt,this.disposable=new cn};ln.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},ln.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},ln.prototype.isCancelled=function(){return this.disposable.isDisposed},ln.prototype.invokeCore=function(){return un(this.action(this.scheduler,this.state))};var dn=It.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new ce},e.scheduleFuture=function(e,n,r){var i=n;return i instanceof Date&&(i-=this.now()),i=t.normalize(i),0===i?this.schedule(e,r):this._scheduleFuture(e,i,r)},e._scheduleFuture=function(t,e,n){throw new ce},t.now=Kt,t.prototype.now=Kt,t.normalize=function(t){return 0>t&&(t=0),t},t}(),_n=dn.normalize,bn=dn.isScheduler;!function(t){function e(t,e){function n(e){function r(t,e){return s?o.remove(c):u=!0,i(e,n),rn}var s=!1,u=!1,c=t.schedule(e,r);u||(o.add(c),s=!0)}var r=e[0],i=e[1],o=new Ze;return i(r,n),o}function n(t,e){function n(e,r){function s(t,e){return u?o.remove(h):c=!0,i(e,n),rn}var u=!1,c=!1,h=t.scheduleFuture(e,r,s);c||(o.add(h),u=!0)}var r=e[0],i=e[1],o=new Ze;return i(r,n),o}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(dn.prototype),function(t){t.schedulePeriodic=function(t,e,n){if("undefined"==typeof zt.setInterval)throw new ue;e=_n(e);var r=t,i=zt.setInterval(function(){r=n(r)},e);return nn(function(){zt.clearInterval(i)})}}(dn.prototype),function(t){t.catchError=t["catch"]=function(t){return new On(this,t)}}(dn.prototype);var vn,yn,wn=It.internals.SchedulePeriodicRecursive=function(){function t(t){return function(e,n){n(0,t._period);var r=Yt(t._action)(t._state);r===Xt&&(t._cancel.dispose(),i(r.e)),t._state=r}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new cn;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,t(this))),e},e}(),mn=function(t){function e(){t.call(this)}return Qe(e,t),e.prototype.schedule=function(t,e){return un(e(this,t))},e}(dn),En=dn.immediate=new mn,Cn=function(t){function e(){for(;r.length>0;){var t=r.dequeue();!t.isCancelled()&&t.invoke()}}function n(){t.call(this)}var r;return Qe(n,t),n.prototype.schedule=function(t,n){var o=new ln(this,t,n,this.now());if(r)r.enqueue(o);else{r=new Xe(4),r.enqueue(o);var s=Yt(e)();r=null,s===Xt&&i(s.e)}return o.disposable},n.prototype.scheduleRequired=function(){return!r},n}(dn),gn=dn.currentThread=new Cn,xn=function(){var t,e=Bt;if(zt.setTimeout)t=zt.setTimeout,e=zt.clearTimeout;else{if(!zt.WScript)throw new ue;t=function(t,e){zt.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),Nn=xn.setTimeout,Dn=xn.clearTimeout;!function(){function t(e){if(o)Nn(function(){t(e)},0);else{var n=r[e];if(n){o=!0;var s=Yt(n)();yn(e),o=!1,s===Xt&&i(s.e)}}}function e(){if(!zt.postMessage||zt.importScripts)return!1;var t=!1,e=zt.onmessage;return zt.onmessage=function(){t=!0},zt.postMessage("","*"),zt.onmessage=e,t}var n=1,r={},o=!1;yn=function(t){delete r[t]};var s=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),u="function"==typeof(u=Mt&&Vt&&Mt.setImmediate)&&!s.test(u)&&u;if(Gt(u))vn=function(e){var i=n++;return r[i]=e,u(function(){t(i)}),i};else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))vn=function(e){var i=n++;return r[i]=e,process.nextTick(function(){t(i)}),i};else if(e()){var c="ms.rx.schedule"+Math.random(),h=function(e){"string"==typeof e.data&&e.data.substring(0,c.length)===c&&t(e.data.substring(c.length))};zt.addEventListener("message",h,!1),vn=function(t){var e=n++;return r[e]=t,zt.postMessage(c+e,"*"),e}}else if(zt.MessageChannel){var a=new zt.MessageChannel;a.port1.onmessage=function(e){t(e.data)},vn=function(t){var e=n++;return r[e]=t,a.port2.postMessage(e),e}}else vn="document"in zt&&"onreadystatechange"in zt.document.createElement("script")?function(e){var i=zt.document.createElement("script"),o=n++;return r[o]=e,i.onreadystatechange=function(){t(o),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},zt.document.documentElement.appendChild(i),o}:function(e){var i=n++;return r[i]=e,Nn(function(){t(i)},0),i}}();var An=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(en._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function i(t){this._id=t,this.isDisposed=!1}return Qe(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,yn(this._id))},i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Dn(this._id))},e.prototype.schedule=function(t,e){var i=new cn,o=vn(n(i,e,this,t));return new an(i,new r(o))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var o=new cn,s=Nn(n(o,r,this,t),e);return new an(o,new i(s))},e}(dn),Sn=dn["default"]=dn.async=new An,On=function(t){function e(e,n){this._scheduler=e,this._handler=n,this._recursiveOriginal=null,this._recursiveWrapper=null,t.call(this)}return Qe(e,t),e.prototype.schedule=function(t,e){return this._scheduler.schedule(t,this._wrap(e))},e.prototype._scheduleFuture=function(t,e,n){return this._scheduler.schedule(t,e,this._wrap(n))},e.prototype.now=function(){return this._scheduler.now()},e.prototype._clone=function(t){return new e(t,this._handler)},e.prototype._wrap=function(t){var e=this;return function(n,r){var o=Yt(t)(e._getRecursiveWrapper(n),r);return o===Xt?(e._handler(o.e)||i(o.e),rn):un(o)}},e.prototype._getRecursiveWrapper=function(t){if(this._recursiveOriginal!==t){this._recursiveOriginal=t;var e=this._clone(t);e._recursiveOriginal=t,e._recursiveWrapper=e,this._recursiveWrapper=e}return this._recursiveWrapper},e.prototype.schedulePeriodic=function(t,e,n){var r=this,o=!1,s=new cn;return s.setDisposable(this._scheduler.schedulePeriodic(t,e,function(t){if(o)return null;var e=Yt(n)(t);return e===Xt?(o=!0,r._handler(e.e)||i(e.e),s.dispose(),null):e})),s},e}(dn),qn=It.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new ce},t.prototype._acceptObserver=function(t,e,n){throw new ce},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return bn(t)||(t=En),new xs(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),kn=function(t){function e(t){this.value=t,this.kind="N"}return Qe(e,t),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(qn),jn=function(t){function e(t){this.error=t,this.kind="E"}return Qe(e,t),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(qn),Fn=function(t){function e(){this.kind="C"}return Qe(e,t),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(qn),Rn=qn.createOnNext=function(t){return new kn(t)},Tn=qn.createOnError=function(t){return new jn(t)},Mn=qn.createOnCompleted=function(){return new Fn},Pn=It.Observer=function(){};Pn.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},Pn.prototype.asObserver=function(){var t=this;return new zn(function(e){t.onNext(e)},function(e){t.onError(e)},function(){t.onCompleted()})},Pn.prototype.checked=function(){return new In(this)};var Ln=Pn.create=function(t,e,n){return t||(t=Bt),e||(e=Qt),n||(n=Bt),new zn(t,e,n)};Pn.fromNotifier=function(t,e){var n=de(t,e,1);return new zn(function(t){return n(Rn(t))},function(t){return n(Tn(t))},function(){return n(Mn())})},Pn.prototype.notifyOn=function(t){return new Un(t,this)},Pn.prototype.makeSafe=function(t){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,t)};var Vn,Wn=It.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return Qe(e,t),e.prototype.next=he,e.prototype.error=he,e.prototype.completed=he,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){
this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.error(t),!0)},e}(Pn),zn=It.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return Qe(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(Wn),In=function(t){function e(e){t.call(this),this._observer=e,this._state=0}Qe(e,t);var n=e.prototype;return n.onNext=function(t){this.checkAccess();var e=Yt(this._observer.onNext).call(this._observer,t);this._state=0,e===Xt&&i(e.e)},n.onError=function(t){this.checkAccess();var e=Yt(this._observer.onError).call(this._observer,t);this._state=2,e===Xt&&i(e.e)},n.onCompleted=function(){this.checkAccess();var t=Yt(this._observer.onCompleted).call(this._observer);this._state=2,t===Xt&&i(t.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},e}(Pn),Bn=It.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new hn}function n(t,e){return function(){t.onNext(e)}}function r(t,e){return function(){t.onError(e)}}function o(t){return function(){t.onCompleted()}}function s(t,e){var n;if(!(t.queue.length>0))return void(t.isAcquired=!1);n=t.queue.shift();var r=Yt(n)();return r===Xt?(t.queue=[],t.hasFaulted=!0,i(r.e)):void e(t)}return Qe(e,t),e.prototype.next=function(t){this.queue.push(n(this.observer,t))},e.prototype.error=function(t){this.queue.push(r(this.observer,t))},e.prototype.completed=function(){this.queue.push(o(this.observer))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,s))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(Wn),Un=function(t){function e(e,n,r){t.call(this,e,n),this._cancel=r}return Qe(e,t),e.prototype.next=function(e){t.prototype.next.call(this,e),this.ensureActive()},e.prototype.error=function(e){t.prototype.error.call(this,e),this.ensureActive()},e.prototype.completed=function(){t.prototype.completed.call(this),this.ensureActive()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},e}(Bn),Kn=It.Observable=function(){function t(t,e){return function(n){var r=n.onError;return n.onError=function(e){o(e,t),r.call(n,e)},e.call(t,n)}}function e(){if(It.config.longStackSupport&&Zt){var e=this._subscribe,n=Yt(i)(new Error).e;this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=t(this,e)}}return Vn=e.prototype,e.isObservable=function(t){return t&&Gt(t.subscribe)},Vn.subscribe=Vn.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:Ln(t,e,n))},Vn.subscribeOnNext=function(t,e){return this._subscribe(Ln("undefined"!=typeof e?function(n){t.call(e,n)}:t))},Vn.subscribeOnError=function(t,e){return this._subscribe(Ln(null,"undefined"!=typeof e?function(n){t.call(e,n)}:t))},Vn.subscribeOnCompleted=function(t,e){return this._subscribe(Ln(null,null,"undefined"!=typeof e?function(){t.call(e)}:t))},e}(),Hn=It.ObservableBase=function(t){function e(t){return t&&Gt(t.dispose)?t:Gt(t)?nn(t):rn}function n(t,n){var r=n[0],o=n[1],s=Yt(o.subscribeCore).call(o,r);s!==Xt||r.fail(Xt.e)||i(Xt.e),r.setDisposable(e(s))}function r(){t.call(this)}return Qe(r,t),r.prototype._subscribe=function(t){var e=new Ns(t),r=[e,this];return gn.scheduleRequired()?gn.schedule(r,n):n(null,r),e},r.prototype.subscribeCore=he,r}(Kn),Jn=It.FlatMapObservable=function(t){function e(e,n,r,i){this.resultSelector=Gt(r)?r:null,this.selector=de(Gt(n)?n:function(){return n},i,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,Wn.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},Qe(n,Wn),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map(function(t,r){return this.resultSelector(e,t,n,r)},this):t},n.prototype.next=function(t){var e=this.i++,n=Yt(this.selector)(t,e,this.source);return n===Xt?this.o.onError(n.e):($t(n)&&(n=ir(n)),(le(n)||fe(n))&&(n=Kn.from(n)),void this.o.onNext(this._wrapResult(n,t,e)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Hn),Qn=It.internals.Enumerable=function(){};x.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var $n=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=Yt(t.e.next).call(t.e);if(n===Xt)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();var i=n.value;$t(i)&&(i=ir(i));var o=new cn;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Wn.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new hn,r={isDisposed:!1,o:t,subscription:e,e:this.sources[ae]()},i=gn.scheduleRecursive(r,n);return new pn([e,i,new x(r)])},Qe(r,Wn),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(Hn);Qn.prototype.concat=function(){return new $n(this)};var Gn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=Yt(t.e.next).call(t.e);if(n===Xt)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var i=n.value;$t(i)&&(i=ir(i));var o=new cn;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Wn.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new hn,r={isDisposed:!1,e:this.sources[ae](),subscription:e,lastError:null,o:t},i=gn.scheduleRecursive(r,n);return new pn([e,i,new x(r)])},Qe(r,Wn),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(Hn);Qn.prototype.catchError=function(){return new Gn(this)};var Xn=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return Qe(e,t),e.prototype[ae]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?pe:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(Qn),Yn=Qn.repeat=function(t,e){return new Xn(t,e)},Zn=function(t){function e(t,e,n){this.s=t,this.fn=e?de(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return Qe(e,t),e.prototype[ae]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:pe},e}(Qn),tr=Qn.of=function(t,e,n){return new Zn(t,e,n)},er=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Un(this._s,t))},e}(Hn);Vn.observeOn=function(t){return new er(this,t)};var nr=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1],i=e[2];r.setDisposable(new C(t,n.subscribe(i)))}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new cn,r=new hn;return r.setDisposable(e),e.setDisposable(this._s.schedule([this.source,r,t],n)),r},e}(Hn);Vn.subscribeOn=function(t){return new nr(this,t)};var rr=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new cn,i=this;return this._p.then(function(r){e.setDisposable(i._s.schedule([t,r],n))},function(n){e.setDisposable(i._s.schedule([t,n],r))}),e},e}(Hn),ir=Kn.fromPromise=function(t,e){return e||(e=Sn),new rr(t,e)};Vn.toPromise=function(t){if(t||(t=It.config.Promise),!t)throw new ue("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r;e.subscribe(function(t){r=t},n,function(){t(r)})})};var or=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],Wn.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},Qe(n,Wn),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(Hn);Vn.toArray=function(){return new or(this)},Kn.create=function(t,e){return new xs(t,e)};var sr=function(t){function e(e){this._f=e,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=Yt(this._f)();return e===Xt?Nr(e.e).subscribe(t):($t(e)&&(e=ir(e)),e.subscribe(t))},e}(Hn),ur=Kn.defer=function(t){return new sr(t)},cr=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),rn}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new n(t,this.scheduler);return e.run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===En?r(null,t):this.scheduler.schedule(t,r)},e}(Hn),hr=new cr(En),ar=Kn.empty=function(t){return bn(t)||(t=En),t===En?hr:new cr(t)},pr=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e,n){return function(r,i){var o=Yt(e.next).call(e);if(o===Xt)return t.onError(o.e);if(o.done)return t.onCompleted();var s=o.value;return Gt(n)&&(s=Yt(n)(s,r),s===Xt)?t.onError(s.e):(t.onNext(s),void i(r+1))}}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=Object(this._iterable),r=q(e);return this._scheduler.scheduleRecursive(0,n(t,r,this._fn))},e}(Hn),fr=Math.pow(2,53)-1;N.prototype[ae]=function(){return new D(this._s)},D.prototype[ae]=function(){return this},D.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:pe},A.prototype[ae]=function(){return new S(this._a)},S.prototype[ae]=function(){return this},S.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:pe};var lr=Kn.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!Gt(e))throw new Error("mapFn when provided must be a function");if(e)var i=de(e,n,2);return bn(r)||(r=gn),new pr(t,i,r)},dr=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e.length;return function(r,i){n>r?(t.onNext(e[r]),i(r+1)):t.onCompleted()}}return Qe(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._args))},e}(Hn),_r=Kn.fromArray=function(t,e){return bn(e)||(e=gn),new dr(t,e)},br=function(t){function e(e,n,r,i,o){this._initialState=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._s=o,t.call(this)}function n(t,e){if(t.first)t.first=!1;else if(t.newState=Yt(t.self._itrFn)(t.newState),t.newState===Xt)return t.o.onError(t.newState.e);var n=Yt(t.self._cndFn)(t.newState);if(n===Xt)return t.o.onError(n.e);if(n){var r=Yt(t.self._resFn)(t.newState);if(r===Xt)return t.o.onError(r.e);t.o.onNext(r),e(t)}else t.o.onCompleted()}return Qe(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,first:!0,newState:this._initialState};return this._s.scheduleRecursive(e,n)},e}(Hn);Kn.generate=function(t,e,n,r,i){return bn(i)||(i=gn),new br(t,e,n,r,i)},Kn.of=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return new dr(e,gn)},Kn.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;e>r;r++)n[r-1]=arguments[r];return new dr(n,t)},Kn.ofArrayChanges=function(t){if(!Array.isArray(t))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new xs(function(e){function n(t){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n])}return Array.observe(t,n),function(){Array.unobserve(t,n)}})},Kn.ofObjectChanges=function(t){if(null==t)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new xs(function(e){function n(t){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n])}return Object.observe(t,n),function(){Object.unobserve(t,n)}})};var vr=function(t){function e(){t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return rn},e}(Hn),yr=new vr,wr=Kn.never=function(){return yr},mr=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}function n(t,e,n){return function(r,i){if(r<n.length){var o=n[r];t.onNext([o,e[o]]),i(r+1)}else t.onCompleted()}}return Qe(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._o,this._keys))},e}(Hn);Kn.pairs=function(t,e){return e||(e=gn),new mr(t,e)};var Er=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}function n(t,e,n){return function(r,i){e>r?(n.onNext(t+r),i(r+1)):n.onCompleted()}}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,n(this.start,this.rangeCount,t))},e}(Hn);Kn.range=function(t,e,n){return bn(n)||(n=gn),new Er(t,e,n)};var Cr=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new R(t,this);return e.run()},e}(Hn);R.prototype.run=function(){function t(t,r){return(-1===t||t>0)&&(e.onNext(n),t>0&&t--),0===t?e.onCompleted():void r(t)}var e=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,t)},Kn.repeat=function(t,e,n){return bn(n)||(n=gn),new Cr(t,e,n)};var gr=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),rn}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===En?n(null,e):this._scheduler.schedule(e,n)},e}(Hn),xr=(Kn["return"]=Kn.just=function(t,e){return bn(e)||(e=En),new gr(t,e)},function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onError(n),rn}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===En?n(null,e):this._scheduler.schedule(e,n)},e}(Hn)),Nr=Kn["throw"]=function(t,e){return bn(e)||(e=En),new xr(t,e)},Dr=function(t){function e(e,n){this._resFn=e,this._obsFn=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=rn,n=Yt(this._resFn)();if(n===Xt)return new an(Nr(n.e).subscribe(t),e);n&&(e=n);var r=Yt(this._obsFn)(n);return r===Xt?new an(Nr(r.e).subscribe(t),e):new an(r.subscribe(t),e)},e}(Hn);Kn.using=function(t,e){return new Dr(t,e)},Vn.amb=function(t){var e=this;return new xs(function(n){function r(){o||(o=s,h.dispose())}function i(){o||(o=u,c.dispose())}var o,s="L",u="R",c=new cn,h=new cn;$t(t)&&(t=ir(t));var a=Ln(function(t){r(),o===s&&n.onNext(t)},function(t){r(),o===s&&n.onError(t)},function(){r(),o===s&&n.onCompleted()}),p=Ln(function(t){i(),o===u&&n.onNext(t)},function(t){i(),o===u&&n.onError(t)},function(){i(),o===u&&n.onCompleted()});return c.setDisposable(e.subscribe(a)),h.setDisposable(t.subscribe(p)),new an(c,h)})},Kn.amb=function(){var t,e=wr();if(Array.isArray(arguments[0]))t=arguments[0];else{var n=arguments.length;t=new Array(t);for(var r=0;n>r;r++)t[r]=arguments[r]}for(var r=0,n=t.length;n>r;r++)e=T(e,t[r]);return e};var Ar=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new cn,n=new hn;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new Sr(t,n,this._fn))),n},e}(Hn),Sr=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e=Yt(this._fn)(t);if(e===Xt)return this._o.onError(e.e);$t(e)&&(e=ir(e));var n=new cn;this._s.setDisposable(n),n.setDisposable(e.subscribe(this._o))},e}(Wn);Vn["catch"]=function(t){return Gt(t)?new Ar(this,t):Or([this,t])};var Or=Kn["catch"]=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return tr(t).catchError()};Vn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),jr.apply(this,e)};var qr=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){for(var e=this._params.length,n=new Array(e),r={hasValue:m(e,M),hasValueAll:!1,isDone:m(e,M),values:new Array(e)},i=0;e>i;i++){var o=this._params[i],s=new cn;n[i]=s,$t(o)&&(o=ir(o)),s.setDisposable(o.subscribe(new kr(t,i,this._cb,r)))}return new pn(n)},e}(Hn),kr=function(t){function e(e,n,r,i){this._o=e,this._i=n,this._cb=r,this._state=i,t.call(this)}function n(t){return function(e,n){return n!==t}}return Qe(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(Ut))){var e=Yt(this._cb).apply(null,this._state.values);if(e===Xt)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter(n(this._i)).every(Ut)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(Ut)&&this._o.onCompleted()},e}(Wn),jr=Kn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Gt(e[t-1])?e.pop():P;return Array.isArray(e[0])&&(e=e[0]),new qr(e,r)};Vn.concat=function(){for(var t=[],e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return t.unshift(this),Tr.apply(null,t)};var Fr=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(Wn),Rr=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var n=t.sources[t.i];$t(n)&&(n=ir(n));var r=new cn;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Fr(t,e)))}}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new hn,r=nn(Bt),i={o:t,i:0,subscription:e,disposable:r,sources:this._sources},o=En.scheduleRecursive(i,n);return new pn([e,r,o])},e}(Hn),Tr=Kn.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;n>e;e++)t[e]=arguments[e]}return new Rr(t)};Vn.concatAll=function(){return this.merge(1)};var Mr=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new Ze;return e.add(this.source.subscribe(new Pr(t,this.maxConcurrent,e))),e},e}(Hn),Pr=function(t){function e(e,n,r){this.o=e,this.max=n,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Qe(e,t),e.prototype.handleSubscribe=function(t){var e=new cn;this.g.add(e),$t(t)&&(t=ir(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},Qe(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(Wn);Vn.merge=function(t){return"number"!=typeof t?Lr(this,t):new Mr(this,t)};var Lr=Kn.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(bn(arguments[0]))for(t=arguments[0],e=1;r>e;e++)n.push(arguments[e]);else for(t=En,e=0;r>e;e++)n.push(arguments[e]);else for(t=En,e=1;r>e;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),F(t,n).mergeAll()},Vr=function(t){function e(e){this.source=e,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new Ze,n=new cn;return e.add(n),n.setDisposable(this.source.subscribe(new Wr(t,e))),e},e}(Hn),Wr=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Qe(e,t),e.prototype.next=function(t){var e=new cn;this.g.add(e),$t(t)&&(t=ir(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},Qe(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(Wn);Vn.mergeAll=function(){return new Vr(this)};var zr=It.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};zr.prototype=Object.create(Error.prototype),zr.prototype.name="CompositeError";var Ir=function(t){function e(e){this.source=e,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new Ze,n=new cn,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new Br(e,r))),e},e}(Hn),Br=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new zr(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return Qe(e,t),e.prototype.next=function(t){var e=new cn;this._group.add(e),$t(t)&&(t=ir(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},Qe(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(Wn);Kn.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}var r=F(null,t);return new Ir(r)},Vn.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return Hr([this,t])};var Ur=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(t.pos<t.sources.length){var n=t.sources[t.pos++];$t(n)&&(n=ir(n));var r=new cn;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Kr(t,e)))}else t.o.onCompleted()}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new hn,r={pos:0,subscription:e,o:t,sources:this.sources},i=En.scheduleRecursive(r,n);return new an(e,i)},e}(Hn),Kr=function(t){function e(e,n){this._state=e,this._recurse=n,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._state.o.onNext(t)},e.prototype.error=function(){this._recurse(this._state)},e.prototype.completed=function(){this._recurse(this._state)},e}(Wn),Hr=Kn.onErrorResumeNext=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new Ur(t)},Jr=function(t){function e(e,n){this._s=e,this._o=$t(n)?ir(n):n,this._open=!1,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new cn;e.setDisposable(this._s.subscribe(new Qr(t,this))),$t(this._o)&&(this._o=ir(this._o));var n=new cn;return n.setDisposable(this._o.subscribe(new $r(t,this,n))),new an(e,n)},e}(Hn),Qr=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(Wn),$r=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return Qe(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(Wn);Vn.skipUntil=function(t){return new Jr(this,t)};var Gr=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,Wn.call(this)}function r(t,e){this.parent=t,this.id=e,Wn.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new hn,r=this.source.subscribe(new n(t,e));return new an(r,e)},Qe(n,Wn),n.prototype.next=function(t){var e=new cn,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),$t(t)&&(t=ir(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},Qe(r,Wn),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(Hn);Vn["switch"]=Vn.switchLatest=function(){return new Gr(this)};var Xr=function(t){function e(e,n){this.source=e,this.other=$t(n)?ir(n):n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return new an(this.source.subscribe(t),this.other.subscribe(new Yr(t)))},e}(Hn),Yr=function(t){function e(e){this._o=e,t.call(this)}return Qe(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=Bt,e}(Wn);Vn.takeUntil=function(t){return new Xr(this,t)};var Zr=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){for(var e=this._ss.length,n={hasValue:m(e,M),hasValueAll:!1,values:new Array(e)},r=this._ss.length,i=new Array(r+1),o=0;r>o;o++){var s=this._ss[o],u=new cn;$t(s)&&(s=ir(s)),u.setDisposable(s.subscribe(new ti(t,o,n))),i[o]=u}var c=new cn;return c.setDisposable(this._s.subscribe(new ei(t,this._cb,n))),i[r]=c,new pn(i)},e}(Hn),ti=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(Ut)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=Bt,e}(Wn),ei=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return Qe(e,t),e.prototype.next=function(t){var e=[t].concat(this._state.values);if(this._state.hasValueAll){var n=Yt(this._cb).apply(null,e);return n===Xt?this._o.onError(n.e):void this._o.onNext(n)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Wn);Vn.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Gt(e[t-1])?e.pop():P;return Array.isArray(e[0])&&(e=e[0]),new Zr(this,e,r)};var ni=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){for(var e=this._s.length,n=new Array(e),r=m(e,M),i=m(e,L),o=0;e>o;o++){var s=this._s[o],u=new cn;n[o]=u,$t(s)&&(s=ir(s)),u.setDisposable(s.subscribe(new ri(t,o,this,i,r)))}return new pn(n)},e}(Hn),ri=function(t){function e(e,n,r,i,o){this._o=e,this._i=n,this._p=r,this._q=i,this._d=o,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function i(t){return function(e,n){return n!==t}}return Qe(e,t),e.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(n)){var e=this._q.map(r),o=Yt(this._p._cb).apply(null,e);if(o===Xt)return this._o.onError(o.e);this._o.onNext(o)}else this._d.filter(i(this._i)).every(Ut)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(Ut)&&this._o.onCompleted()},e}(Wn);Vn.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Gt(e[t-1])?e.pop():P;Array.isArray(e[0])&&(e=e[0]);var i=this;return e.unshift(i),new ni(e,r)},Kn.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];Array.isArray(e[0])&&(e=Gt(e[1])?e[0].concat(e[1]):e[0]);var r=e.shift();return r.zip.apply(r,e)};var ii=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){for(var e=this.sources,n=e.length,r=new Array(n),i={q:m(n,L),done:m(n,M),cb:this._cb,o:t},o=0;n>o;o++)!function(t){var n=e[t],o=new cn;(le(n)||fe(n))&&(n=lr(n)),r[t]=o,o.setDisposable(n.subscribe(new oi(i,t)))}(o);return new pn(r)},e}(Hn),oi=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function i(t){return function(e,n){return n!==t}}return Qe(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),o=Yt(this._s.cb).apply(null,e);if(o===Xt)return this._s.o.onError(o.e);this._s.o.onNext(o)}else this._s.done.filter(i(this._i)).every(Ut)&&this._s.o.onCompleted()},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(Ut)&&this._s.o.onCompleted()},e}(Wn);Vn.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Gt(e[t-1])?e.pop():P,i=this;return e.unshift(i),new ii(e,r)},Vn.asObservable=function(){return new xs(V(this),this)},Vn.bufferWithCount=function(t,e){return"number"!=typeof e&&(e=t),this.windowWithCount(t,e).flatMap(W).filter(z)};var si=function(t){function e(e){this.source=e,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ui(t))},e}(Hn),ui=function(t){function e(e){this._o=e,t.call(this)}return Qe(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Wn);Vn.dematerialize=function(){return new si(this)};var ci=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new hi(t,this.keyFn,this.comparer))},e}(Hn),hi=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,
t.call(this)}return Qe(e,t),e.prototype.next=function(t){var e,n=t;return Gt(this.keyFn)&&(n=Yt(this.keyFn)(t),n===Xt)?this.o.onError(n.e):this.hasCurrentKey&&(e=Yt(this.comparer)(this.currentKey,n),e===Xt)?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(Wn);Vn.distinctUntilChanged=function(t,e){return e||(e=Ht),new ci(this,t,e)};var ai=function(t){function e(e,n,r,i){this.source=e,this._oN=n,this._oE=r,this._oC=i,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||Gt(e._oN)?Ln(e._oN||Bt,e._oE||Bt,e._oC||Bt):e._oN,this.isStopped=!1,Wn.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},Qe(n,Wn),n.prototype.next=function(t){var e=Yt(this.t.onNext).call(this.t,t);e===Xt&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=Yt(this.t.onError).call(this.t,t);return e===Xt?this.o.onError(e.e):void this.o.onError(t)},n.prototype.completed=function(){var t=Yt(this.t.onCompleted).call(this.t);return t===Xt?this.o.onError(t.e):void this.o.onCompleted()},e}(Hn);Vn["do"]=Vn.tap=Vn.doAction=function(t,e,n){return new ai(this,t,e,n)},Vn.doOnNext=Vn.tapOnNext=function(t,e){return this.tap("undefined"!=typeof e?function(n){t.call(e,n)}:t)},Vn.doOnError=Vn.tapOnError=function(t,e){return this.tap(Bt,"undefined"!=typeof e?function(n){t.call(e,n)}:t)},Vn.doOnCompleted=Vn.tapOnCompleted=function(t,e){return this.tap(Bt,null,"undefined"!=typeof e?function(){t.call(e)}:t)};var pi=function(t){function e(e,n,r){this.source=e,this._fn=de(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=Yt(this.source.subscribe).call(this.source,t);return e===Xt&&(this._fn(),i(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=Yt(this._s.dispose).call(this._s);this._fn(),t===Xt&&i(t.e)}},e}(Hn);Vn["finally"]=function(t,e){return new pi(this,t,e)};var fi=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=Bt,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(t),!0)},e}(Hn);Vn.ignoreElements=function(){return new fi(this)};var li=function(t){function e(e,n){this.source=e,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new di(t))},e}(Hn),di=function(t){function e(e){this._o=e,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._o.onNext(Rn(t))},e.prototype.error=function(t){this._o.onNext(Tn(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext(Mn()),this._o.onCompleted()},e}(Wn);Vn.materialize=function(){return new li(this)},Vn.repeat=function(t){return Yn(this,t).concat()},Vn.retry=function(t){return Yn(this,t).catchError()};var _i=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return Qe(n,t),n.prototype.subscribeCore=function(t){var n,r=new Ss,i=new Ss,o=this._notifier(r),s=o.subscribe(i),u=this.source["@@iterator"](),c={isDisposed:!1},h=new hn,a=gn.scheduleRecursive(null,function(e,o){if(!c.isDisposed){var s=u.next();if(s.done)return void(n?t.onError(n):t.onCompleted());var a=s.value;$t(a)&&(a=ir(a));var p=new cn,f=new cn;h.setDisposable(new an(f,p)),p.setDisposable(a.subscribe(function(e){t.onNext(e)},function(e){f.setDisposable(i.subscribe(o,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(e),p.dispose()},function(){t.onCompleted()}))}});return new pn([s,h,a,e(c)])},n}(Hn);Vn.retryWhen=function(t){return new _i(I(this),t)};var bi=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return Qe(n,t),n.prototype.subscribeCore=function(t){var n,r=new Ss,i=new Ss,o=this._notifier(r),s=o.subscribe(i),u=this.source["@@iterator"](),c={isDisposed:!1},h=new hn,a=gn.scheduleRecursive(null,function(e,o){if(!c.isDisposed){var s=u.next();if(s.done)return void(n?t.onError(n):t.onCompleted());var a=s.value;$t(a)&&(a=ir(a));var p=new cn,f=new cn;h.setDisposable(new an(f,p)),p.setDisposable(a.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){f.setDisposable(i.subscribe(o,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(null),p.dispose()}))}});return new pn([s,h,a,e(c)])},n}(Hn);Vn.repeatWhen=function(t){return new bi(I(this),t)};var vi=function(t){function e(e,n,r,i){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=i,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new yi(t,this))},e}(Hn),yi=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return Qe(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=Yt(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?Yt(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===Xt?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(Wn);Vn.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new vi(this,n,e,t)};var wi=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new mi(t,this._c))},e}(Hn),mi=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Wn);Vn.skipLast=function(t){if(0>t)throw new se;return new wi(this,t)},Vn.startWith=function(){var t,e=0;arguments.length&&bn(arguments[0])?(t=arguments[0],e=1):t=En;for(var n=[],r=e,i=arguments.length;i>r;r++)n.push(arguments[r]);return tr([_r(n,t),this]).concat()};var Ei=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(Wn);Vn.takeLast=function(t){if(0>t)throw new se;var e=this;return new xs(function(n){return e.subscribe(new Ei(n,t))},e)};var Ci=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},e}(Wn);Vn.takeLastBuffer=function(t){if(0>t)throw new se;var e=this;return new xs(function(n){return e.subscribe(new Ci(n,t))},e)},Vn.windowWithCount=function(t,e){var n=this;if(+t||(t=0),Math.abs(t)===1/0&&(t=0),0>=t)throw new se;if(null==e&&(e=t),+e||(e=0),Math.abs(e)===1/0&&(e=0),0>=e)throw new se;return new xs(function(r){function i(){var t=new Ss;c.push(t),r.onNext(Ge(t,s))}var o=new cn,s=new fn(o),u=0,c=[];return i(),o.setDisposable(n.subscribe(function(n){for(var r=0,o=c.length;o>r;r++)c[r].onNext(n);var s=u-t+1;s>=0&&s%e===0&&c.shift().onCompleted(),++u%e===0&&i()},function(t){for(;c.length>0;)c.shift().onError(t);r.onError(t)},function(){for(;c.length>0;)c.shift().onCompleted();r.onCompleted()})),s},n)},Vn.selectConcat=Vn.concatMap=function(t,e,n){return Gt(t)&&Gt(e)?this.concatMap(function(n,r){var i=t(n,r);return $t(i)&&(i=ir(i)),(le(i)||fe(i))&&(i=lr(i)),i.map(function(t,i){return e(n,t,r,i)})}):Gt(t)?B(this,t,n):B(this,function(){return t})},Vn.concatMapObserver=Vn.selectConcatObserver=function(t,e,n,r){var i=this,o=de(t,r,2),s=de(e,r,1),u=de(n,r,0);return new xs(function(t){var e=0;return i.subscribe(function(n){var r;try{r=o(n,e++)}catch(i){return void t.onError(i)}$t(r)&&(r=ir(r)),t.onNext(r)},function(e){var n;try{n=s(e)}catch(r){return void t.onError(r)}$t(n)&&(n=ir(n)),t.onNext(n),t.onCompleted()},function(){var e;try{e=u()}catch(n){return void t.onError(n)}$t(e)&&(e=ir(e)),t.onNext(e),t.onCompleted()})},this).concatAll()};var gi=function(t){function e(e,n){this._o=e,this._d=n,this._f=!1,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._f=!0,this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},e}(Wn);Vn.defaultIfEmpty=function(e){var n=this;return e===t&&(e=null),new xs(function(t){return n.subscribe(new gi(t,e))},n)},K.prototype.push=function(t){var e=-1===U(this.set,t,this.comparer);return e&&this.set.push(t),e};var xi=function(t){function e(e,n,r){this.source=e,this._keyFn=n,this._cmpFn=r,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ni(t,this._keyFn,this._cmpFn))},e}(Hn),Ni=function(t){function e(e,n,r){this._o=e,this._keyFn=n,this._h=new K(r),t.call(this)}return Qe(e,t),e.prototype.next=function(t){var e=t;return Gt(this._keyFn)&&(e=Yt(this._keyFn)(t),e===Xt)?this._o.onError(e.e):void(this._h.push(e)&&this._o.onNext(t))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Wn);Vn.distinct=function(t,e){return e||(e=Ht),new xi(this,t,e)},Vn.groupBy=function(t,e){return this.groupByUntil(t,e,wr)},Vn.groupByUntil=function(e,n,r){var i=this;return new xs(function(o){var s=new zo,u=new Ze,c=new fn(u),h=function(t){return function(e){e.onError(t)}};return u.add(i.subscribe(function(i){var a=Yt(e)(i);if(a===Xt)return s.forEach(h(a.e)),o.onError(a.e);var p=!1,f=s.get(a);if(f===t&&(f=new Ss,s.set(a,f),p=!0),p){var l=new As(a,f,c),d=new As(a,f),_=Yt(r)(d);if(_===Xt)return s.forEach(h(_.e)),o.onError(_.e);o.onNext(l);var b=new cn;u.add(b),b.setDisposable(_.take(1).subscribe(Bt,function(t){s.forEach(h(t)),o.onError(t)},function(){s["delete"](a)&&f.onCompleted(),u.remove(b)}))}var v=i;return Gt(n)&&(v=Yt(n)(i),v===Xt)?(s.forEach(h(v.e)),o.onError(v.e)):void f.onNext(v)},function(t){s.forEach(h(t)),o.onError(t)},function(){s.forEach(function(t){t.onCompleted()}),o.onCompleted()})),c},i)};var Di=function(t){function e(e,n,r){this.source=e,this.selector=de(n,r,3),t.call(this)}function n(t,e){return function(n,r,i){return t.call(this,e.selector(n,r,i),r,i)}}function r(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,Wn.call(this)}return Qe(e,t),e.prototype.internalMap=function(t,r){return new e(this.source,n(t,this),r)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},Qe(r,Wn),r.prototype.next=function(t){var e=Yt(this.selector)(t,this.i++,this.source);return e===Xt?this.o.onError(e.e):void this.o.onNext(e)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Hn);Vn.map=Vn.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof Di?this.internalMap(n,e):new Di(this,n,e)},Vn.pluck=function(){var t=arguments.length,e=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var n=0;t>n;n++)e[n]=arguments[n];return this.map(H(e,t))},Vn.flatMap=Vn.selectMany=function(t,e,n){return new Jn(this,t,e,n).mergeAll()},Vn.flatMapObserver=Vn.selectManyObserver=function(t,e,n,r){var i=this;return new xs(function(o){var s=0;return i.subscribe(function(e){var n;try{n=t.call(r,e,s++)}catch(i){return void o.onError(i)}$t(n)&&(n=ir(n)),o.onNext(n)},function(t){var n;try{n=e.call(r,t)}catch(i){return void o.onError(i)}$t(n)&&(n=ir(n)),o.onNext(n),o.onCompleted()},function(){var t;try{t=n.call(r)}catch(e){return void o.onError(e)}$t(t)&&(t=ir(t)),o.onNext(t),o.onCompleted()})},i).mergeAll()},It.Observable.prototype.flatMapLatest=function(t,e,n){return new Jn(this,t,e,n).switchLatest()};var Ai=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,Wn.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Qe(n,Wn),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Hn);Vn.skip=function(t){if(0>t)throw new se;return new Ai(this,t)};var Si=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Oi(t,this))},e}(Hn),Oi=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return Qe(e,t),e.prototype.next=function(t){if(!this._r){var e=Yt(this._p._fn)(t,this._i++,this._p);if(e===Xt)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Wn);Vn.skipWhile=function(t,e){var n=de(t,e,3);return new Si(this,n)};var qi=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,Wn.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Qe(n,Wn),n.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Hn);Vn.take=function(t,e){if(0>t)throw new se;return 0===t?ar(e):new qi(this,t)};var ki=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ji(t,this))},e}(Hn),ji=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return Qe(e,t),e.prototype.next=function(t){return this._r&&(this._r=Yt(this._p._fn)(t,this._i++,this._p),this._r===Xt)?this._o.onError(this._r.e):void(this._r?this._o.onNext(t):this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Wn);Vn.takeWhile=function(t,e){var n=de(t,e,3);return new ki(this,n)};var Fi=function(t){function e(e,n,r){this.source=e,this.predicate=de(n,r,3),t.call(this)}function n(t,e){return function(n,r,i){return e.predicate(n,r,i)&&t.call(this,n,r,i)}}function r(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,Wn.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},e.prototype.internalFilter=function(t,r){return new e(this.source,n(t,this),r)},Qe(r,Wn),r.prototype.next=function(t){var e=Yt(this.predicate)(t,this.i++,this.source);return e===Xt?this.o.onError(e.e):void(e&&this.o.onNext(t))},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Hn);Vn.filter=Vn.where=function(t,e){return this instanceof Fi?this.internalFilter(t,e):new Fi(this,t,e)};var Ri=function(t){function e(e,n,r){this.source=e,this._k=n,this._c=r,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ti(t,this._k,this._c))},e}(Hn),Ti=function(t){function e(e,n,r){this._o=e,this._k=n,this._c=r,this._v=null,this._hv=!1,this._l=[],t.call(this)}return Qe(e,t),e.prototype.next=function(t){var e=Yt(this._k)(t);if(e===Xt)return this._o.onError(e.e);var n=0;if(this._hv){if(n=Yt(this._c)(e,this._v),n===Xt)return this._o.onError(n.e)}else this._hv=!0,this._v=e;n>0&&(this._v=e,this._l=[]),n>=0&&this._l.push(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},e}(Wn),Mi=function(t){function e(e,n,r,i){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=i,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Pi(t,this))},e}(Hn),Pi=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return Qe(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=Yt(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?Yt(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===Xt?this._o.onError(this._a.e):void this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new ie),this._o.onCompleted()},e}(Wn);Vn.reduce=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new Mi(this,n,e,t)};var Li=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Vi(t,this._fn,this.source))},e}(Hn),Vi=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return Qe(e,t),e.prototype.next=function(t){var e=Yt(this._fn)(t,this._i++,this._s);return e===Xt?this._o.onError(e.e):void(Boolean(e)&&(this._o.onNext(!0),this._o.onCompleted()))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(Wn);Vn.some=function(t,e){var n=de(t,e,3);return new Li(this,n)};var Wi=function(t){function e(e){this.source=e,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new zi(t))},e}(Hn),zi=function(t){function e(e){this._o=e,t.call(this)}return Qe(e,t),e.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(Wn);Vn.isEmpty=function(){return new Wi(this)};var Ii=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Bi(t,this._fn,this.source))},e}(Hn),Bi=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return Qe(e,t),e.prototype.next=function(t){var e=Yt(this._fn)(t,this._i++,this._s);return e===Xt?this._o.onError(e.e):void(Boolean(e)||(this._o.onNext(!1),this._o.onCompleted()))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(Wn);Vn.every=function(t,e){var n=de(t,e,3);return new Ii(this,n)};var Ui=function(t){function e(e,n,r){var i=+r||0;Math.abs(i)===1/0&&(i=0),this.source=e,this._elem=n,this._n=i,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(!1),t.onCompleted(),rn):this.source.subscribe(new Ki(t,this._elem,this._n))},e}(Hn),Ki=function(t){function e(e,n,r){this._o=e,this._elem=n,this._n=r,this._i=0,t.call(this)}function n(t,e){return 0===t&&0===e||t===e||isNaN(t)&&isNaN(e)}return Qe(e,t),e.prototype.next=function(t){this._i++>=this._n&&n(t,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(Wn);Vn.includes=function(t,e){return new Ui(this,t,e)};var Hi=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ji(t,this._fn,this.source))},e}(Hn),Ji=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return Qe(e,t),e.prototype.next=function(t){if(this._fn){var e=Yt(this._fn)(t,this._i++,this._s);if(e===Xt)return this._o.onError(e.e);Boolean(e)&&this._c++}else this._c++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(Wn);Vn.count=function(t,e){var n=de(t,e,3);return new Hi(this,n)};var Qi=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),rn):this.source.subscribe(new $i(t,this._e,this._n))},e}(Hn),$i=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._i=0,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},e}(Wn);Vn.indexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new Qi(this,t,n)};var Gi=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Xi(t,this._fn,this.source))},e}(Hn),Xi=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return Qe(e,t),e.prototype.next=function(t){if(this._fn){var e=Yt(this._fn)(t,this._i++,this._s);if(e===Xt)return this._o.onError(e.e);this._c+=e}else this._c+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(Wn);Vn.sum=function(t,e){var n=de(t,e,3);return new Gi(this,n)},Vn.minBy=function(t,e){return e||(e=Jt),new Ri(this,t,function(t,n){return-1*e(t,n)})},Vn.min=function(t){return this.minBy(Ut,t).map(J)},Vn.maxBy=function(t,e){return e||(e=Jt),new Ri(this,t,e)},Vn.max=function(t){return this.maxBy(Ut,t).map(J)};var Yi=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Zi(t,this._fn,this.source))},e}(Hn),Zi=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._c=0,this._t=0,t.call(this)}return Qe(e,t),e.prototype.next=function(t){if(this._fn){var e=Yt(this._fn)(t,this._c++,this._s);if(e===Xt)return this._o.onError(e.e);this._t+=e}else this._c++,this._t+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){return 0===this._c?this._o.onError(new ie):(this._o.onNext(this._t/this._c),void this._o.onCompleted())},e}(Wn);Vn.average=function(t,e){var n,r=this;return Gt(t)&&(n=de(t,e,3)),new Yi(r,n)},Vn.sequenceEqual=function(t,e){var n=this;return e||(e=Ht),new xs(function(r){var i=!1,o=!1,s=[],u=[],c=n.subscribe(function(t){if(u.length>0){var n=u.shift(),i=Yt(e)(n,t);if(i===Xt)return r.onError(i.e);i||(r.onNext(!1),r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):s.push(t)},function(t){r.onError(t)},function(){i=!0,0===s.length&&(u.length>0?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});(le(t)||fe(t))&&(t=lr(t)),$t(t)&&(t=ir(t));var h=t.subscribe(function(t){if(s.length>0){var n=s.shift(),o=Yt(e)(n,t);if(o===Xt)return r.onError(o.e);o||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):u.push(t)},function(t){r.onError(t)},function(){o=!0,0===u.length&&(s.length>0?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))});return new an(c,h)},n)};var to=function(t){function e(e,n,r){this.source=e,this._i=n,this._d=r,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new eo(t,this._i,this._d))},e}(Hn),eo=function(e){function n(t,n,r){this._o=t,this._i=n,this._d=r,e.call(this)}return Qe(n,e),n.prototype.next=function(t){0===this._i--&&(this._o.onNext(t),this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._d===t?this._o.onError(new se):(this._o.onNext(this._d),this._o.onCompleted())},n}(Wn);Vn.elementAt=function(t,e){if(0>t)throw new se;return new to(this,t,e)};var no=function(e){function n(t,n,r){this._o=t,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,e.call(this)}return Qe(n,e),n.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=Yt(this._obj.predicate)(t,this._i++,this._s);if(n===Xt)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);if(e){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=t}},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===t?this._o.onError(new ie):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},n}(Wn);Vn.single=function(t,e){var n={},r=this;if(n="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},Gt(n.predicate)){var i=n.predicate;n.predicate=de(i,n.thisArg,3)}return new xs(function(t){return r.subscribe(new no(t,n,r))},r)};var ro=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new io(t,this._obj,this.source))},e}(Hn),io=function(e){function n(t,n,r){this._o=t,this._obj=n,this._s=r,this._i=0,e.call(this)}return Qe(n,e),n.prototype.next=function(t){if(this._obj.predicate){var e=Yt(this._obj.predicate)(t,this._i++,this._s);if(e===Xt)return this._o.onError(e.e);Boolean(e)&&(this._o.onNext(t),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(t),this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._obj.defaultValue===t?this._o.onError(new ie):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},n}(Wn);Vn.first=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},Gt(t.predicate)){var e=t.predicate;t.predicate=de(e,t.thisArg,3)}return new ro(this,t)};var oo=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new so(t,this._obj,this.source))},e}(Hn),so=function(e){function n(t,n,r){this._o=t,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,e.call(this)}return Qe(n,e),n.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=Yt(this._obj.predicate)(t,this._i++,this._s);if(n===Xt)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);e&&(this._hv=!0,this._v=t)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===t?this._o.onError(new ie):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},n}(Wn);Vn.last=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},Gt(t.predicate)){var e=t.predicate;t.predicate=de(e,t.thisArg,3)}return new oo(this,t)};var uo=function(t){function e(e,n,r,i){this._o=e,this._s=n,this._cb=r,this._y=i,this._i=0,t.call(this)}return Qe(e,t),e.prototype.next=function(t){var e=Yt(this._cb)(t,this._i,this._s);return e===Xt?this._o.onError(e.e):void(e?(this._o.onNext(this._y?this._i:t),this._o.onCompleted()):this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},e}(Wn);Vn.find=function(t,e){return Q(this,t,e,!1)},Vn.findIndex=function(t,e){return Q(this,t,e,!0)};var co=function(t){function e(e){this.source=e,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ho(t))},e}(Hn),ho=function(t){function e(e){this._o=e,this._s=new zt.Set,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._s.add(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},e}(Wn);Vn.toSet=function(){if("undefined"==typeof zt.Set)throw new TypeError;return new co(this)};var ao=function(t){function e(e,n,r){this.source=e,this._k=n,this._e=r,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new po(t,this._k,this._e))},e}(Hn),po=function(t){function e(e,n,r){this._o=e,this._k=n,this._e=r,this._m=new zt.Map,t.call(this)}return Qe(e,t),e.prototype.next=function(t){var e=Yt(this._k)(t);if(e===Xt)return this._o.onError(e.e);var n=t;return this._e&&(n=Yt(this._e)(t),n===Xt)?this._o.onError(n.e):void this._m.set(e,n)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},e}(Wn);Vn.toMap=function(t,e){if("undefined"==typeof zt.Map)throw new TypeError;return new ao(this,t,e)};var fo=function(t){function e(e,n,r){this.source=e,this._b=n,this._e=r,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new lo(t,this._b,this._e))},e}(Hn),lo=function(t){function e(e,n,r){this._o=e,this._b=n,this._e=r,this._i=0,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(t)),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Wn);Vn.slice=function(t,e){var n=t||0;if(0>n)throw new It.ArgumentOutOfRangeError;if("number"==typeof e&&n>e)throw new It.ArgumentOutOfRangeError;return new fo(this,n,e)};var _o=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),rn):this.source.subscribe(new bo(t,this._e,this._n))},e}(Hn),bo=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._v=0,this._hv=!1,this._i=0,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._hv=!0,this._v=this._i),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},e}(Wn);Vn.lastIndexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new _o(this,t,n)},Kn.wrap=function(t){function e(){return Kn.spawn.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e};var vo=Kn.spawn=function(){for(var t=arguments[0],e=this,n=[],r=1,i=arguments.length;i>r;r++)n.push(arguments[r]);return new xs(function(r){function i(e){var n=Yt(t.next).call(t,e);return n===Xt?r.onError(n.e):void s(n)}function o(e){var n=Yt(t.next).call(t,e);return n===Xt?r.onError(n.e):void s(n)}function s(t){if(t.done)return r.onNext(t.value),void r.onCompleted();var n=$.call(e,t.value),s=null,c=!1;Kn.isObservable(n)?u.add(n.subscribe(function(t){c=!0,s=t},o,function(){c&&i(s)})):o(new TypeError("type not supported"))}var u=new Ze;return Gt(t)&&(t=t.apply(e,n)),t&&Gt(t.next)?(i(),u):(r.onNext(t),r.onCompleted())})};Kn.start=function(t,e,n){return yo(t,e,n)()};var yo=Kn.toAsync=function(t,e,n){return bn(n)||(n=Sn),function(){var r=arguments,i=new Os;return n.schedule(null,function(){var n;try{n=t.apply(e,r)}catch(o){return void i.onError(o)}i.onNext(n),i.onCompleted()}),i.asObservable()}};Kn.fromCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,i=new Array(r),o=0;r>o;o++)i[o]=arguments[o];return nt(t,e,n,i)}},Kn.fromNodeCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);
for(var r=arguments.length,i=new Array(r),o=0;r>o;o++)i[o]=arguments[o];return it(t,e,n,i)}},ut.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},It.config.useNativeEvents=!1;var wo=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return Gt(e)&&(n=Yt(e).apply(null,arguments),n===Xt)?t.onError(n.e):void t.onNext(n)}}return Qe(e,t),e.prototype.subscribeCore=function(t){return ct(this._el,this._n,n(t,this._fn))},e}(Hn);Kn.fromEvent=function(t,e,n){return t.addListener?Eo(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):It.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new wo(t,e,n).publish().refCount():Eo(function(n){t.on(e,n)},function(n){t.off(e,n)},n)};var mo=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return Gt(e)&&(n=Yt(e).apply(null,arguments),n===Xt)?t.onError(n.e):void t.onNext(n)}}function r(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=n(t,this._fn),i=this._add(e);return new r(this._del,e,i)},r.prototype.dispose=function(){this.isDisposed||(Gt(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},e}(Hn),Eo=Kn.fromEventPattern=function(t,e,n){return new mo(t,e,n).publish().refCount()};Kn.startAsync=function(t){var e=Yt(t)();return e===Xt?Nr(e.e):ir(e)};var Co=function(t){function e(e,n){this.source=e,this.controller=new Ss,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return Qe(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=rn,i=this.pauser.distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=rn)});return new pn([n,r,i])},e.prototype.pause=function(){this.controller.onNext(!1)},e.prototype.resume=function(){this.controller.onNext(!0)},e}(Kn);Vn.pausable=function(t){return new Co(this,t)};var go=function(e){function n(t,n){this.source=t,this.controller=new Ss,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,e.call(this)}return Qe(n,e),n.prototype._subscribe=function(e){function n(){for(;i.length>0;)e.onNext(i.shift())}var r,i=[],o=ht(this.source,this.pauser.startWith(!1).distinctUntilChanged(),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(o){r!==t&&o.shouldFire!==r?(r=o.shouldFire,o.shouldFire&&n()):(r=o.shouldFire,o.shouldFire?e.onNext(o.data):i.push(o.data))},function(t){n(),e.onError(t)},function(){n(),e.onCompleted()});return o},n.prototype.pause=function(){this.controller.onNext(!1)},n.prototype.resume=function(){this.controller.onNext(!0)},n}(Kn);Vn.pausableBuffered=function(t){return new go(this,t)};var xo=function(t){function e(e,n,r){t.call(this),this.subject=new No(n,r),this.source=e.multicast(this.subject).refCount()}return Qe(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}(Kn),No=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new Ss,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||gn}return Qe(e,t),$e(e.prototype,Pn,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(qn.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(qn.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(qn.createOnNext(t)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,n){var r=e._processRequest(n),i=e.hasCompleted||e.hasFailed;return!i&&r>0?(e.requestedCount=r,nn(function(){e.requestedCount=0})):void 0}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}(Kn);Vn.controlled=function(t,e){return t&&bn(t)&&(e=t,t=!0),null==t&&(t=!0),new xo(this,t,e)};var Do=function(t){function e(e){t.call(this),this.source=e}function n(t,e){e.source.request(1)}Qe(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new an(this.subscription,Sn.schedule(this,n))};var r=function(t){function n(e,n,r){t.call(this),this.observer=e,this.observable=n,this.cancel=r,this.scheduleDisposable=null}function r(t,e){e.observable.source.request(1)}return Qe(n,t),n.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},n.prototype.error=function(t){this.observer.onError(t),this.dispose()},n.prototype.next=function(t){this.observer.onNext(t),this.scheduleDisposable=Sn.schedule(this,r)},e.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},n}(Wn);return e}(Kn);xo.prototype.stopAndWait=function(){return new Do(this)};var Ao=function(t){function e(e,n){t.call(this),this.source=e,this.windowSize=n}function n(t,e){e.source.request(e.windowSize)}Qe(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new an(this.subscription,Sn.schedule(this,n))};var r=function(t){function e(e,n,r){this.observer=e,this.observable=n,this.cancel=r,this.received=0,this.scheduleDisposable=null,t.call(this)}function n(t,e){e.observable.source.request(e.observable.windowSize)}return Qe(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=Sn.schedule(this,n))},e.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(Wn);return e}(Kn);xo.prototype.windowed=function(t){return new Ao(this,t)},Vn.pipe=function(t){function e(){n.resume()}var n=this.pausableBuffered();return t.addListener("drain",e),n.subscribe(function(e){!t.write(String(e))&&n.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",e)}),n.resume(),t};var So=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new an(this._fn2(e).subscribe(t),e.connect())},e}(Hn);Vn.multicast=function(t,e){return Gt(t)?new So(this,t,e):new ko(this,t)},Vn.publish=function(t){return t&&Gt(t)?this.multicast(function(){return new Ss},t):this.multicast(new Ss)},Vn.share=function(){return this.publish().refCount()},Vn.publishLast=function(t){return t&&Gt(t)?this.multicast(function(){return new Os},t):this.multicast(new Os)},Vn.publishValue=function(t,e){return 2===arguments.length?this.multicast(function(){return new qs(e)},t):this.multicast(new qs(t))},Vn.shareValue=function(t){return this.publishValue(t).refCount()},Vn.replay=function(t,e,n,r){return t&&Gt(t)?this.multicast(function(){return new ks(e,n,r)},t):this.multicast(new ks(e,n,r))},Vn.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var Oo=function(t,e){this._s=t,this._o=e};Oo.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var qo=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1===++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0===--this._p._count&&this._p._connectableSubscription.dispose())},e}(Hn),ko=It.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return Qe(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new qo(this)},e}(Kn);Vn.singleInstance=function(){function t(){return r||(r=!0,e=n["finally"](function(){r=!1}).publish().refCount()),e}var e,n=this,r=!1;return new xs(function(e){return t().subscribe(e)})},Vn.join=function(t,e,n,r){var i=this;return new xs(function(o){var s=new Ze,u=!1,c=!1,h=0,a=0,p=new zo,f=new zo,l=function(t){o.onError(t)};return s.add(i.subscribe(function(t){var n=h++,i=new cn;p.set(n,t),s.add(i);var c=Yt(e)(t);return c===Xt?o.onError(c.e):(i.setDisposable(c.take(1).subscribe(Bt,l,function(){p["delete"](n)&&0===p.size&&u&&o.onCompleted(),s.remove(i)})),void f.forEach(function(e){var n=Yt(r)(t,e);return n===Xt?o.onError(n.e):void o.onNext(n)}))},l,function(){u=!0,(c||0===p.size)&&o.onCompleted()})),s.add(t.subscribe(function(t){var e=a++,i=new cn;f.set(e,t),s.add(i);var u=Yt(n)(t);return u===Xt?o.onError(u.e):(i.setDisposable(u.take(1).subscribe(Bt,l,function(){f["delete"](e)&&0===f.size&&c&&o.onCompleted(),s.remove(i)})),void p.forEach(function(e){var n=Yt(r)(e,t);return n===Xt?o.onError(n.e):void o.onNext(n)}))},l,function(){c=!0,(u||0===f.size)&&o.onCompleted()})),s},i)},Vn.groupJoin=function(t,e,n,r){var i=this;return new xs(function(o){function s(t){}var u=new Ze,c=new fn(u),h=new zo,a=new zo,p=0,f=0,s=function(t){return function(e){e.onError(t)}};return u.add(i.subscribe(function(t){var n=new Ss,i=p++;h.set(i,n);var f=Yt(r)(t,Ge(n,c));if(f===Xt)return h.forEach(s(f.e)),o.onError(f.e);o.onNext(f),a.forEach(function(t){n.onNext(t)});var l=new cn;u.add(l);var d=Yt(e)(t);return d===Xt?(h.forEach(s(d.e)),o.onError(d.e)):void l.setDisposable(d.take(1).subscribe(Bt,function(t){h.forEach(s(t)),o.onError(t)},function(){h["delete"](i)&&n.onCompleted(),u.remove(l)}))},function(t){h.forEach(s(t)),o.onError(t)},function(){o.onCompleted()})),u.add(t.subscribe(function(t){var e=f++;a.set(e,t);var r=new cn;u.add(r);var i=Yt(n)(t);return i===Xt?(h.forEach(s(i.e)),o.onError(i.e)):(r.setDisposable(i.take(1).subscribe(Bt,function(t){h.forEach(s(t)),o.onError(t)},function(){a["delete"](e),u.remove(r)})),void h.forEach(function(e){e.onNext(t)}))},function(t){h.forEach(s(t)),o.onError(t)})),c},i)},Vn.buffer=function(){return this.window.apply(this,arguments).flatMap(W)},Vn.window=function(t,e){return 1===arguments.length&&"function"!=typeof arguments[0]?pt.call(this,t):"function"==typeof t?ft.call(this,t):at.call(this,t,e)};var jo=function(t){function e(e){this.source=e,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Fo(t))},e}(Hn),Fo=function(t){function e(e){this._o=e,this._p=null,this._hp=!1,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._hp?this._o.onNext([this._p,t]):this._hp=!0,this._p=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Wn);Vn.pairwise=function(){return new jo(this)},Vn.partition=function(t,e){var n=de(t,e,3);return[this.filter(t,e),this.filter(function(t,e,r){return!n(t,e,r)})]};var Ro=function(t){function e(t,e){this.c=t,this.s=e}return Qe(e,t),e.prototype[ae]=function(){var t=this;return{next:function(){return t.c()?{done:!1,value:t.s}:{done:!0,value:void 0}}}},e}(Qn);Vn.letBind=Vn.let=function(t){return t(this)},Kn["if"]=function(t,e,n){return ur(function(){return n||(n=ar()),$t(e)&&(e=ir(e)),$t(n)&&(n=ir(n)),"function"==typeof n.now&&(n=ar(n)),t()?e:n})},Kn["for"]=Kn.forIn=function(t,e,n){return tr(t,e,n).concat()};var To=Kn["while"]=Kn.whileDo=function(t,e){return $t(e)&&(e=ir(e)),lt(t,e).concat()};Vn.doWhile=function(t){return Tr([this,To(t,this)])},Kn["case"]=function(t,e,n){return ur(function(){$t(n)&&(n=ir(n)),n||(n=ar()),bn(n)&&(n=ar(n));var r=e[t()];return $t(r)&&(r=ir(r)),r||n})};var Mo=function(t){function e(e,n,r){this.source=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e){var n,r=t[0],i=t[1];if(!(r.q.length>0))return void(r.isAcquired=!1);n=r.q.shift();var o=new cn;r.d.add(o),o.setDisposable(n.subscribe(new Po(r,i,o))),e([r,i])}return Qe(e,t),e.prototype._ensureActive=function(t){var e=!1;t.q.length>0&&(e=!t.isAcquired,t.isAcquired=!0),e&&t.m.setDisposable(this._scheduler.scheduleRecursive([t,this],n))},e.prototype.subscribeCore=function(t){var e=new hn,n=new Ze(e),r={q:[],m:e,d:n,activeCount:0,isAcquired:!1,o:t};return r.q.push(this.source),r.activeCount++,this._ensureActive(r),n},e}(Hn),Po=function(t){function e(e,n,r){this._s=e,this._p=n,this._m1=r,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._s.o.onNext(t);var e=Yt(this._p._fn)(t);return e===Xt?this._s.o.onError(e.e):(this._s.q.push(e),this._s.activeCount++,void this._p._ensureActive(this._s))},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted()},e}(Wn);Vn.expand=function(t,e){return bn(e)||(e=gn),new Mo(this,t,e)};var Lo=function(t){function e(e,n){this._sources=e,this._cb=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){if(0===this._sources.length)return t.onCompleted(),rn;for(var e=this._sources.length,n={finished:!1,hasResults:new Array(e),hasCompleted:new Array(e),results:new Array(e)},r=new Ze,i=0,o=this._sources.length;o>i;i++){var s=this._sources[i];$t(s)&&(s=ir(s)),r.add(s.subscribe(new Vo(t,n,i,this._cb,r)))}return r},e}(Hn),Vo=function(t){function e(e,n,r,i,o){this._o=e,this._s=n,this._i=r,this._cb=i,this._subs=o,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=t)},e.prototype.error=function(t){this._s.finished=!0,this._o.onError(t),this._subs.dispose()},e.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var t=0;t<this._s.results.length;t++)if(!this._s.hasCompleted[t])return;this._s.finished=!0;var e=Yt(this._cb).apply(null,this._s.results);if(e===Xt)return this._o.onError(e.e);this._o.onNext(e),this._o.onCompleted()}},e}(Wn);Kn.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Gt(e[t-1])?e.pop():P;return Array.isArray(e[0])&&(e=e[0]),new Lo(e,r)},Vn.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Kn.forkJoin.apply(null,e)},Vn.manySelect=Vn.extend=function(t,e){bn(e)||(e=It.Scheduler.immediate);var n=this;return ur(function(){var r;return n.map(function(t){var e=new Wo(t);return r&&r.onNext(t),r=e,e}).tap(Bt,function(t){r&&r.onError(t)},function(){r&&r.onCompleted()}).observeOn(e).map(t)},n)};var Wo=function(t){function e(e){t.call(this),this.head=e,this.tail=new Os}return Qe(e,t),$e(e.prototype,Pn,{_subscribe:function(t){var e=new Ze;return e.add(gn.schedule(this,function(n,r){t.onNext(r.head),e.add(r.tail.mergeAll().subscribe(t))})),e},onCompleted:function(){this.onNext(Kn.empty())},onError:function(t){this.onNext(Kn["throw"](t))},onNext:function(t){this.tail.onNext(t),this.tail.onCompleted()}}),e}(Kn),zo=zt.Map||function(){function e(){this.size=0,this._values=[],this._keys=[]}return e.prototype["delete"]=function(t){var e=this._keys.indexOf(t);return-1===e?!1:(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},e.prototype.get=function(e){var n=this._keys.indexOf(e);return-1===n?t:this._values[n]},e.prototype.set=function(t,e){var n=this._keys.indexOf(t);return-1===n?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},e.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},e}();dt.prototype.and=function(t){return new dt(this.patterns.concat(t))},dt.prototype.thenDo=function(t){return new _t(this,t)},_t.prototype.activate=function(t,e,n){for(var r=[],i=bt(e),o=0,s=this.expression.patterns.length;s>o;o++)r.push(yt(t,this.expression.patterns[o],i));var u=new wt(r,vt(this,e),function(){for(var t=0,e=r.length;e>t;t++)r[t].removeActivePlan(u);n(u)});for(o=0,s=r.length;s>o;o++)r[o].addActivePlan(u);return u},wt.prototype.dequeue=function(){this.joinObservers.forEach(function(t){t.queue.shift()})},wt.prototype.match=function(){var t,e,n=!0;for(t=0,e=this.joinObserverArray.length;e>t;t++)if(0===this.joinObserverArray[t].queue.length){n=!1;break}if(n){var r=[],i=!1;for(t=0,e=this.joinObserverArray.length;e>t;t++)r.push(this.joinObserverArray[t].queue[0]),"C"===this.joinObserverArray[t].queue[0].kind&&(i=!0);if(i)this.onCompleted();else{this.dequeue();var o=[];for(t=0,e=r.length;t<r.length;t++)o.push(r[t].value);this.onNext.apply(this,o)}}};var Io=function(t){function e(e,n){t.call(this),this.source=e,this.onError=n,this.queue=[],this.activePlans=[],this.subscription=new cn,this.isDisposed=!1}Qe(e,t);var n=e.prototype;return n.next=function(t){if(!this.isDisposed){if("E"===t.kind)return this.onError(t.error);this.queue.push(t);for(var e=this.activePlans.slice(0),n=0,r=e.length;r>n;n++)e[n].match()}},n.error=Bt,n.completed=Bt,n.addActivePlan=function(t){this.activePlans.push(t)},n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},n.removeActivePlan=function(t){this.activePlans.splice(this.activePlans.indexOf(t),1),0===this.activePlans.length&&this.dispose()},n.dispose=function(){t.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},e}(Wn);Vn.and=function(t){return new dt([this,t])},Vn.thenDo=function(t){return new dt([this]).thenDo(t)},Kn.when=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new xs(function(e){var n=[],r=new zo,i=Ln(function(t){e.onNext(t)},function(t){r.forEach(function(e){e.onError(t)}),e.onError(t)},function(t){e.onCompleted()});try{for(var o=0,s=t.length;s>o;o++)n.push(t[o].activate(r,i,function(t){var r=n.indexOf(t);n.splice(r,1),0===n.length&&e.onCompleted()}))}catch(u){return Nr(u).subscribe(e)}var c=new Ze;return r.forEach(function(t){t.subscribe(),c.add(t)}),c})};var Bo=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return Qe(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(Hn),Uo=Kn.interval=function(t,e){return Ct(t,t,bn(e)?e:Sn)};Kn.timer=function(e,n,r){var i;return bn(r)||(r=Sn),null!=n&&"number"==typeof n?i=n:bn(n)&&(r=n),(e instanceof Date||"number"==typeof e)&&i===t?mt(e,r):e instanceof Date&&i!==t?Et(e,n,r):Ct(e,i,r)};Vn.delay=function(){var t=arguments[0];if("number"==typeof t||t instanceof Date){var e=t,n=arguments[1];return bn(n)||(n=Sn),e instanceof Date?xt(this,e,n):gt(this,e,n)}if(Kn.isObservable(t)||Gt(t))return Nt(this,t,arguments[1]);throw new Error("Invalid arguments")};var Ko=function(t){function e(e,n,r){bn(r)||(r=Sn),this.source=e,this._dt=n,this._s=r,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new hn;return new an(this.source.subscribe(new Ho(t,this._dt,this._s,e)),e)},e}(Hn),Ho=function(t){function e(e,n,r,i){this._o=e,this._d=n,this._scheduler=r,this._c=i,this._v=null,this._hv=!1,this._id=0,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new cn;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1}))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(Wn);Vn.debounce=function(){if(Gt(arguments[0]))return Dt(this,arguments[0]);if("number"==typeof arguments[0])return new Ko(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")},Vn.windowWithTime=function(t,e,n){var r,i=this;return null==e&&(r=t),bn(n)||(n=Sn),"number"==typeof e?r=e:bn(e)&&(r=t,n=e),new xs(function(e){function o(){var t=new cn,i=!1,s=!1;p.setDisposable(t),h===c?(i=!0,s=!0):c>h?i=!0:s=!0;var l=i?h:c,d=l-f;f=l,i&&(h+=r),s&&(c+=r),t.setDisposable(n.scheduleFuture(null,d,function(){if(s){var t=new Ss;a.push(t),e.onNext(Ge(t,u))}i&&a.shift().onCompleted(),o()}))}var s,u,c=r,h=t,a=[],p=new hn,f=0;return s=new Ze(p),u=new fn(s),a.push(new Ss),e.onNext(Ge(a[0],u)),o(),s.add(i.subscribe(function(t){for(var e=0,n=a.length;n>e;e++)a[e].onNext(t)},function(t){for(var n=0,r=a.length;r>n;n++)a[n].onError(t);e.onError(t)},function(){for(var t=0,n=a.length;n>t;t++)a[t].onCompleted();e.onCompleted()})),u},i)},Vn.windowWithTimeOrCount=function(t,e,n){var r=this;return bn(n)||(n=Sn),new xs(function(i){function o(e){var r=new cn;s.setDisposable(r),r.setDisposable(n.scheduleFuture(null,t,function(){if(e===a){h=0;var t=++a;p.onCompleted(),p=new Ss,i.onNext(Ge(p,c)),o(t)}}))}var s=new hn,u=new Ze(s),c=new fn(u),h=0,a=0,p=new Ss;return i.onNext(Ge(p,c)),o(0),u.add(r.subscribe(function(t){var n=0,r=!1;p.onNext(t),++h===e&&(r=!0,h=0,n=++a,p.onCompleted(),p=new Ss,i.onNext(Ge(p,c))),r&&o(n)},function(t){p.onError(t),i.onError(t)},function(){p.onCompleted(),i.onCompleted()})),c},r)},Vn.bufferWithTime=function(t,e,n){return this.windowWithTime(t,e,n).flatMap(W)},Vn.bufferWithTimeOrCount=function(t,e,n){return this.windowWithTimeOrCount(t,e,n).flatMap(W)};var Jo=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Qo(t,this._s))},e}(Hn),Qo=function(t){function e(e,n){this._o=e,this._s=n,this._l=n.now(),t.call(this)}return Qe(e,t),e.prototype.next=function(t){var e=this._s.now(),n=e-this._l;this._l=e,this._o.onNext({value:t,interval:n})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Wn);Vn.timeInterval=function(t){return bn(t)||(t=Sn),new Jo(this,t)};var $o=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Go(t,this._s))},e}(Hn),Go=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Wn);Vn.timestamp=function(t){return bn(t)||(t=Sn),new $o(this,t)};var Xo=function(t){function e(e,n){this.source=e,this._sampler=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new cn};return e.sourceSubscription.setDisposable(this.source.subscribe(new Zo(e))),new an(e.sourceSubscription,this._sampler.subscribe(new Yo(e)))},e}(Hn),Yo=function(t){function e(e){this._s=e,t.call(this)}return Qe(e,t),e.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},e.prototype.next=function(){this._handleMessage()},e.prototype.error=function(t){this._s.onError(t)},e.prototype.completed=function(){this._handleMessage()},e}(Wn),Zo=function(t){function e(e){this._s=e,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},e}(Wn);Vn.sample=function(t,e){return bn(e)||(e=Sn),"number"==typeof t?new Xo(this,Uo(t,e)):new Xo(this,t)};var ts=It.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};ts.prototype=Object.create(Error.prototype),Vn.timeout=function(){var t=arguments[0];if(t instanceof Date||"number"==typeof t)return St(this,t,arguments[1],arguments[2]);if(Kn.isObservable(t)||Gt(t))return At(this,t,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var es=function(t){function e(e,n,r,i,o,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._timeFn=o,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=Yt(t.self._itrFn)(t.newState),t.newState===Xt)return t.o.onError(t.newState.e);if(t.hasResult=Yt(t.self._cndFn)(t.newState),t.hasResult===Xt)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=Yt(t.self._resFn)(t.newState),t.result===Xt)return t.o.onError(t.result.e);var n=Yt(t.self._timeFn)(t.newState);if(n===Xt)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return Qe(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,new Date(this._s.now()),n)},e}(Hn);Kn.generateWithAbsoluteTime=function(t,e,n,r,i,o){return bn(o)||(o=Sn),new es(t,e,n,r,i,o)};var ns=function(t){function e(e,n,r,i,o,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._timeFn=o,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=Yt(t.self._itrFn)(t.newState),t.newState===Xt)return t.o.onError(t.newState.e);if(t.hasResult=Yt(t.self._cndFn)(t.newState),t.hasResult===Xt)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=Yt(t.self._resFn)(t.newState),t.result===Xt)return t.o.onError(t.result.e);var n=Yt(t.self._timeFn)(t.newState);if(n===Xt)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return Qe(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,0,n)},e}(Hn);Kn.generateWithRelativeTime=function(t,e,n,r,i,o){return bn(o)||(o=Sn),new ns(t,e,n,r,i,o)};var rs=function(t){function e(e,n,r){this.source=e,this._dt=n,this._s=r,t.call(this)}function n(t,e){var n=e[0],r=e[1],i=e[2];i.setDisposable(n.subscribe(r))}return Qe(e,t),e.prototype.subscribeCore=function(t){var e=new hn;return e.setDisposable(this._s.scheduleFuture([this.source,t,e],this._dt,n)),e},e}(Hn);Vn.delaySubscription=function(t,e){return bn(e)||(e=Sn),new rs(this,t,e)};var is=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new os(t,this))},e}(Hn),os=function(t){function e(e,n){this._o=e,this._s=n._s,this._d=n._d,this._q=[],t.call(this)}return Qe(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0&&t-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},e}(Wn);Vn.skipLastWithTime=function(t,e){return bn(e)||(e=Sn),new is(this,t,e)};var ss=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new us(t,this._d,this._s))},e}(Hn),us=function(t){function e(e,n,r){this._o=e,this._d=n,this._s=r,this._q=[],t.call(this)}return Qe(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0;){var e=this._q.shift();t-e.interval<=this._d&&this._o.onNext(e.value)}this._o.onCompleted()},e}(Wn);Vn.takeLastWithTime=function(t,e){return bn(e)||(e=Sn),new ss(this,t,e)},Vn.takeLastBufferWithTime=function(t,e){var n=this;return bn(e)||(e=Sn),new xs(function(r){var i=[];return n.subscribe(function(n){var r=e.now();for(i.push({interval:r,value:n});i.length>0&&r-i[0].interval>=t;)i.shift()},function(t){r.onError(t)},function(){for(var n=e.now(),o=[];i.length>0;){var s=i.shift();n-s.interval<=t&&o.push(s.value)}r.onNext(o),r.onCompleted()})},n)};var cs=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}function n(t,e){e.onCompleted()}return Qe(e,t),e.prototype.subscribeCore=function(t){return new an(this._s.scheduleFuture(t,this._d,n),this.source.subscribe(t))},e}(Hn);Vn.takeWithTime=function(t,e){return bn(e)||(e=Sn),new cs(this,t,e)};var hs=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,this._open=!1,t.call(this)}function n(t,e){e._open=!0}return Qe(e,t),e.prototype.subscribeCore=function(t){return new an(this._s.scheduleFuture(this,this._d,n),this.source.subscribe(new as(t,this)))},e}(Hn),as=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Wn);Vn.skipWithTime=function(t,e){return bn(e)||(e=Sn),new hs(this,t,e)};var ps=function(t){function e(e,n,r){this.source=e,this._st=n,this._s=r,t.call(this)}function n(t,e){e._open=!0}return Qe(e,t),e.prototype.subscribeCore=function(t){return this._open=!1,new an(this._s.scheduleFuture(this,this._st,n),this.source.subscribe(new fs(t,this)))},e}(Hn),fs=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Qe(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Wn);Vn.skipUntilWithTime=function(t,e){return bn(e)||(e=Sn),new ps(this,t,e)},Vn.takeUntilWithTime=function(t,e){bn(e)||(e=Sn);var n=this;return new xs(function(r){return new an(e.scheduleFuture(r,t,function(t,e){e.onCompleted()}),n.subscribe(r))},n)},Vn.throttle=function(t,e){bn(e)||(e=Sn);var n=+t||0;if(0>=n)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new xs(function(t){var i=0;return r.subscribe(function(r){var o=e.now();(0===i||o-i>=n)&&(i=o,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)};var ls=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return Qe(e,t),e.prototype.next=function(t){var e=Yt(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===Xt&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(Wn);Vn.transduce=function(t){var e=this;return new xs(function(n){var r=t(Ot(n));return e.subscribe(new ls(n,r))},e)};var ds=function(t){function e(e){this.source=e,t.call(this)}return Qe(e,t),
e.prototype.subscribeCore=function(t){var e=new cn,n=new Ze,r={hasCurrent:!1,isStopped:!1,o:t,g:n};return n.add(e),e.setDisposable(this.source.subscribe(new _s(r))),n},e}(Hn),_s=function(t){function e(e){this._s=e,t.call(this)}function n(e,n){this._s=e,this._i=n,t.call(this)}return Qe(e,t),e.prototype.next=function(t){if(!this._s.hasCurrent){this._s.hasCurrent=!0,$t(t)&&(t=ir(t));var e=new cn;this._s.g.add(e),e.setDisposable(t.subscribe(new n(this._s,e)))}},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},Qe(n,t),n.prototype.next=function(t){this._s.o.onNext(t)},n.prototype.error=function(t){this._s.o.onError(t)},n.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},e}(Wn);Vn.switchFirst=function(){return new ds(this)},Vn.flatMapFirst=Vn.selectManyFirst=function(t,e,n){return new Jn(this,t,e,n).switchFirst()},It.Observable.prototype.flatMapWithMaxConcurrent=function(t,e,n,r){return new Jn(this,e,n,r).merge(t)};var bs=It.VirtualTimeScheduler=function(t){function e(e,n){this.clock=e,this.comparer=n,this.isEnabled=!1,this.queue=new Xe(1024),t.call(this)}Qe(e,t);var n=e.prototype;return n.now=function(){return this.toAbsoluteTime(this.clock)},n.schedule=function(t,e){return this.scheduleAbsolute(t,this.clock,e)},n.scheduleFuture=function(t,e,n){var r=e instanceof Date?this.toRelativeTime(e-this.now()):this.toRelativeTime(e);return this.scheduleRelative(t,r,n)},n.add=he,n.toAbsoluteTime=he,n.toRelativeTime=he,n.schedulePeriodic=function(t,e,n){var r=new wn(this,t,e,n);return r.start()},n.scheduleRelative=function(t,e,n){var r=this.add(this.clock,e);return this.scheduleAbsolute(t,r,n)},n.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var t=this.getNext();null!==t?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1}while(this.isEnabled)}},n.stop=function(){this.isEnabled=!1},n.advanceTo=function(t){var e=this.comparer(this.clock,t);if(this.comparer(this.clock,t)>0)throw new se;if(0!==e&&!this.isEnabled){this.isEnabled=!0;do{var n=this.getNext();null!==n&&this.comparer(n.dueTime,t)<=0?(this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime),n.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=t}},n.advanceBy=function(t){var e=this.add(this.clock,t),n=this.comparer(this.clock,e);if(n>0)throw new se;0!==n&&this.advanceTo(e)},n.sleep=function(t){var e=this.add(this.clock,t);if(this.comparer(this.clock,e)>=0)throw new se;this.clock=e},n.getNext=function(){for(;this.queue.length>0;){var t=this.queue.peek();if(!t.isCancelled())return t;this.queue.dequeue()}return null},n.scheduleAbsolute=function(t,e,n){function r(t,e){return i.queue.remove(o),n(t,e)}var i=this,o=new ln(this,t,r,e,this.comparer);return this.queue.enqueue(o),o.disposable},e}(dn);It.HistoricalScheduler=function(t){function e(e,n){var r=null==e?0:e,i=n||Jt;t.call(this,r,i)}Qe(e,t);var n=e.prototype;return n.add=function(t,e){return t+e},n.toAbsoluteTime=function(t){return new Date(t).getTime()},n.toRelativeTime=function(t){return t},e}(It.VirtualTimeScheduler),qt.prototype.equals=function(t){return t===this?!0:null==t?!1:"N"!==t.kind?!1:this.predicate(t.value)},kt.prototype.equals=function(t){return t===this?!0:null==t?!1:"E"!==t.kind?!1:this.predicate(t.error)};var vs=It.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(t,e){return"function"==typeof e?new ys(t,new qt(e)):new ys(t,qn.createOnNext(e))},onError:function(t,e){return"function"==typeof e?new ys(t,new kt(e)):new ys(t,qn.createOnError(e))},onCompleted:function(t){return new ys(t,qn.createOnCompleted())},subscribe:function(t,e){return new ws(t,e)}},ys=It.Recorded=function(t,e,n){this.time=t,this.value=e,this.comparer=n||Ht};ys.prototype.equals=function(t){return this.time===t.time&&this.comparer(this.value,t.value)},ys.prototype.toString=function(){return this.value.toString()+"@"+this.time};var ws=It.Subscription=function(t,e){this.subscribe=t,this.unsubscribe=e||Number.MAX_VALUE};ws.prototype.equals=function(t){return this.subscribe===t.subscribe&&this.unsubscribe===t.unsubscribe},ws.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"};var ms=It.MockDisposable=function(t){this.scheduler=t,this.disposes=[],this.disposes.push(this.scheduler.clock)};ms.prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var Es=function(t){function e(e){t.call(this),this.scheduler=e,this.messages=[]}Qe(e,t);var n=e.prototype;return n.onNext=function(t){this.messages.push(new ys(this.scheduler.clock,qn.createOnNext(t)))},n.onError=function(t){this.messages.push(new ys(this.scheduler.clock,qn.createOnError(t)))},n.onCompleted=function(){this.messages.push(new ys(this.scheduler.clock,qn.createOnCompleted()))},e}(Pn);jt.prototype.then=function(e,n){var r=this;this.subscriptions.push(new ws(this.scheduler.clock));var i,o=this.subscriptions.length-1,s=It.Observer.create(function(n){var u=e(n);if(u&&"function"==typeof u.then)i=u;else{var c=r.scheduler.clock;i=new jt(r.scheduler,[It.ReactiveTest.onNext(c,t),It.ReactiveTest.onCompleted(c)])}var h=r.observers.indexOf(s);r.observers.splice(h,1),r.subscriptions[o]=new ws(r.subscriptions[o].subscribe,r.scheduler.clock)},function(t){n(t);var e=r.observers.indexOf(s);r.observers.splice(e,1),r.subscriptions[o]=new ws(r.subscriptions[o].subscribe,r.scheduler.clock)});return this.observers.push(s),i||new jt(this.scheduler,this.messages)};var Cs=function(t){function e(e,n){t.call(this);var r,i,o=this;this.scheduler=e,this.messages=n,this.subscriptions=[],this.observers=[];for(var s=0,u=this.messages.length;u>s;s++)r=this.messages[s],i=r.value,function(t){e.scheduleAbsolute(null,r.time,function(){for(var e=o.observers.slice(0),n=0,r=e.length;r>n;n++)t.accept(e[n]);return rn})}(i)}return Qe(e,t),e.prototype._subscribe=function(t){var e=this;this.observers.push(t),this.subscriptions.push(new ws(this.scheduler.clock));var n=this.subscriptions.length-1;return nn(function(){var r=e.observers.indexOf(t);e.observers.splice(r,1),e.subscriptions[n]=new ws(e.subscriptions[n].subscribe,e.scheduler.clock)})},e}(Kn),gs=function(t){function e(e,n){t.call(this),this.scheduler=e,this.messages=n,this.subscriptions=[]}return Qe(e,t),e.prototype._subscribe=function(t){var e,n,r=this;this.subscriptions.push(new ws(this.scheduler.clock));for(var i=this.subscriptions.length-1,o=new Ze,s=0,u=this.messages.length;u>s;s++)e=this.messages[s],n=e.value,function(n){o.add(r.scheduler.scheduleRelative(null,e.time,function(){return n.accept(t),rn}))}(n);return nn(function(){r.subscriptions[i]=new ws(r.subscriptions[i].subscribe,r.scheduler.clock),o.dispose()})},e}(Kn);It.TestScheduler=function(t){function e(t,e){return t>e?1:e>t?-1:0}function n(){t.call(this,0,e)}return Qe(n,t),n.prototype.scheduleAbsolute=function(e,n,r){return n<=this.clock&&(n=this.clock+1),t.prototype.scheduleAbsolute.call(this,e,n,r)},n.prototype.add=function(t,e){return t+e},n.prototype.toAbsoluteTime=function(t){return new Date(t).getTime()},n.prototype.toRelativeTime=function(t){return t},n.prototype.startScheduler=function(t,e){e||(e={}),null==e.created&&(e.created=vs.created),null==e.subscribed&&(e.subscribed=vs.subscribed),null==e.disposed&&(e.disposed=vs.disposed);var n,r,i=this.createObserver();return this.scheduleAbsolute(null,e.created,function(){return n=t(),rn}),this.scheduleAbsolute(null,e.subscribed,function(){return r=n.subscribe(i),rn}),this.scheduleAbsolute(null,e.disposed,function(){return r.dispose(),rn}),this.start(),i},n.prototype.createHotObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new Cs(this,t)},n.prototype.createColdObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new gs(this,t)},n.prototype.createResolvedPromise=function(t,e){return new jt(this,[It.ReactiveTest.onNext(t,e),It.ReactiveTest.onCompleted(t)])},n.prototype.createRejectedPromise=function(t,e){return new jt(this,[It.ReactiveTest.onError(t,e)])},n.prototype.createObserver=function(){return new Es(this)},n}(bs);var xs=It.AnonymousObservable=function(t){function e(t){return t&&Gt(t.dispose)?t:Gt(t)?nn(t):rn}function n(t,n){var r=n[0],o=n[1],s=Yt(o.__subscribe).call(o,r);s!==Xt||r.fail(Xt.e)||i(Xt.e),r.setDisposable(e(s))}function r(e,n){this.source=n,this.__subscribe=e,t.call(this)}return Qe(r,t),r.prototype._subscribe=function(t){var e=new Ns(t),r=[e,this];return gn.scheduleRequired()?gn.schedule(r,n):n(null,r),e},r}(Kn),Ns=function(t){function e(e){t.call(this),this.observer=e,this.m=new cn}Qe(e,t);var n=e.prototype;return n.next=function(t){var e=Yt(this.observer.onNext).call(this.observer,t);e===Xt&&(this.dispose(),i(e.e))},n.error=function(t){var e=Yt(this.observer.onError).call(this.observer,t);this.dispose(),e===Xt&&i(e.e)},n.completed=function(){var t=Yt(this.observer.onCompleted).call(this.observer);this.dispose(),t===Xt&&i(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(Wn),Ds=function(t){function e(e,n){this._m=e,this._u=n,t.call(this)}return Qe(e,t),e.prototype.subscribeCore=function(t){return new an(this._m.getDisposable(),this._u.subscribe(t))},e}(Hn),As=function(t){function e(e,n,r){t.call(this),this.key=e,this.underlyingObservable=r?new Ds(r,n):n}return Qe(e,t),e.prototype._subscribe=function(t){return this.underlyingObservable.subscribe(t)},e}(Kn),Ss=It.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return Qe(e,t),$e(e.prototype,Pn.prototype,{_subscribe:function(t){return sn(this),this.isStopped?this.hasError?(t.onError(this.error),rn):(t.onCompleted(),rn):(this.observers.push(t),new Oo(this,t))},hasObservers:function(){return sn(this),this.observers.length>0},onCompleted:function(){if(sn(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=n(this.observers),r=e.length;r>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(sn(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,r=n(this.observers),i=r.length;i>e;e++)r[e].onError(t);this.observers.length=0}},onNext:function(t){if(sn(this),!this.isStopped)for(var e=0,r=n(this.observers),i=r.length;i>e;e++)r[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new js(t,e)},e}(Kn),Os=It.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return Qe(e,t),$e(e.prototype,Pn.prototype,{_subscribe:function(t){return sn(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),rn):(this.observers.push(t),new Oo(this,t))},hasObservers:function(){return sn(this),this.observers.length>0},onCompleted:function(){var t,e;if(sn(this),!this.isStopped){this.isStopped=!0;var r=n(this.observers),e=r.length;if(this.hasValue)for(t=0;e>t;t++){var i=r[t];i.onNext(this.value),i.onCompleted()}else for(t=0;e>t;t++)r[t].onCompleted();this.observers.length=0}},onError:function(t){if(sn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,r=n(this.observers),i=r.length;i>e;e++)r[e].onError(t);this.observers.length=0}},onNext:function(t){sn(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(Kn),qs=It.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return Qe(e,t),$e(e.prototype,Pn.prototype,{_subscribe:function(t){return sn(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),rn):(this.observers.push(t),t.onNext(this.value),new Oo(this,t))},getValue:function(){return sn(this),this.hasError&&i(this.error),this.value},hasObservers:function(){return sn(this),this.observers.length>0},onCompleted:function(){if(sn(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=n(this.observers),r=e.length;r>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(sn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,r=n(this.observers),i=r.length;i>e;e++)r[e].onError(t);this.observers.length=0}},onNext:function(t){if(sn(this),!this.isStopped){this.value=t;for(var e=0,r=n(this.observers),i=r.length;i>e;e++)r[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}(Kn),ks=It.ReplaySubject=function(t){function e(t,e){return nn(function(){e.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function r(e,n,r){this.bufferSize=null==e?i:e,this.windowSize=null==n?i:n,this.scheduler=r||gn,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}var i=Math.pow(2,53)-1;return Qe(r,t),$e(r.prototype,Pn.prototype,{_subscribe:function(t){sn(this);var n=new Bn(this.scheduler,t),r=e(this,n);this._trim(this.scheduler.now()),this.observers.push(n);for(var i=0,o=this.q.length;o>i;i++)n.onNext(this.q[i].value);return this.hasError?n.onError(this.error):this.isStopped&&n.onCompleted(),n.ensureActive(),r},hasObservers:function(){return sn(this),this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(sn(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var r=0,i=n(this.observers),o=i.length;o>r;r++){var s=i[r];s.onNext(t),s.ensureActive()}}},onError:function(t){if(sn(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var r=0,i=n(this.observers),o=i.length;o>r;r++){var s=i[r];s.onError(t),s.ensureActive()}this.observers.length=0}},onCompleted:function(){if(sn(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,r=n(this.observers),i=r.length;i>e;e++){var o=r[e];o.onCompleted(),o.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),r}(Kn),js=It.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return Qe(e,t),$e(e.prototype,Pn.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}(Kn);It.Pauser=function(t){function e(){t.call(this)}return Qe(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(Ss),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(zt.Rx=It,define(function(){return It})):Rt&&Tt?Vt?(Tt.exports=It).Rx=It:Rt.Rx=It:zt.Rx=It;var Fs=h()}).call(this);

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":15}],65:[function(require,module,exports){
var lowerCase=require("lower-case"),NON_WORD_REGEXP=require("./vendor/non-word-regexp"),CAMEL_CASE_REGEXP=require("./vendor/camel-case-regexp"),TRAILING_DIGIT_REGEXP=require("./vendor/trailing-digit-regexp");module.exports=function(e,r,n){function E(e,r,E){return 0===r||r===E.length-e.length?"":n}return null==e?"":(n=n||" ",e=String(e).replace(CAMEL_CASE_REGEXP,"$1 $2").replace(TRAILING_DIGIT_REGEXP,"$1 $2").replace(NON_WORD_REGEXP,E),lowerCase(e,r))};

},{"./vendor/camel-case-regexp":66,"./vendor/non-word-regexp":67,"./vendor/trailing-digit-regexp":68,"lower-case":59}],66:[function(require,module,exports){
module.exports=/([\u0061-\u007A\u00B5\u00DF-\u00F6\u00F8-\u00FF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0561-\u0587\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7FA\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A])([\u0041-\u005A\u00C0-\u00D6\u00D8-\u00DE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA\uFF21-\uFF3A\u0030-\u0039\u00B2\u00B3\u00B9\u00BC-\u00BE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19])/g;

},{}],67:[function(require,module,exports){
module.exports=/[^\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u0030-\u0039\u00B2\u00B3\u00B9\u00BC-\u00BE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]+/g;

},{}],68:[function(require,module,exports){
module.exports=/([\u0030-\u0039\u00B2\u00B3\u00B9\u00BC-\u00BE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19])([^\u0030-\u0039\u00B2\u00B3\u00B9\u00BC-\u00BE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19])/g;

},{}],69:[function(require,module,exports){
"use strict";module.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})};

},{}],70:[function(require,module,exports){
"use strict";function isPattern(t){return"string"==typeof t&&("/"===t.charAt(0)||"*"===t)}function isRouteConfigurationObject(t){if("object"!=typeof t)return!1;for(var n in t)if(t.hasOwnProperty(n))return isPattern(n)}function unprefixed(t,n){return t.split(n)[1]}function matchesWithParams(t,n){var e=t.split("/").filter(function(t){return t.length>0}),r=n.split("/").filter(function(t){return t.length>0}),a=r.map(function(t,n){return null!==t.match(/:\w+/)?e[n]:null}).filter(function(t){return null!==t}),i=r.every(function(t,n){return null!==t.match(/:\w+/)||t===e[n]});return i?a:[]}function validateSwitchPathPreconditions(t,n){if("string"!=typeof t)throw new Error("Invalid source path. We expected to see a string given as the sourcePath (first argument) to switchPath.");if(!isRouteConfigurationObject(n))throw new Error("Invalid routes object. We expected to see a routes configuration object where keys are strings that look like '/foo'. These keys must start with a slash '/'.")}function validatePatternPreconditions(t){if(!isPattern(t))throw new Error("Paths in route configuration must be strings that start with a slash '/'.")}function isNormalPattern(t,n){return!("*"===n||!t.hasOwnProperty(n))}function handleTrailingSlash(t){return isRouteConfigurationObject(t)?t["/"]:t}function getParamsFnValue(t,n){var e=handleTrailingSlash(t);return"function"!=typeof e?e:e.apply(null,n)}function splitPath(t){var n=t.split("/");return""===n[n.length-1]&&n.pop(),n}function validatePath(t,n){if(null===n)return"";var e=splitPath(t),r=splitPath(n),a=e.map(function(t,n){return t!==r[n]?null:t}).filter(function(t){return null!==t}).join("/");return a}function validate(t){var n=t.sourcePath,e=t.matchedPath,r=t.value,a=t.routes,i=validatePath(n,e);if(!i){i=a["*"]?n:null;var u=i?a["*"]:null;return{validPath:i,validValue:u}}return{validPath:i,validValue:r}}function betterMatch(t,n){return null===t?!1:null===n?!0:t.length>=n.length}function switchPath(t,n){validateSwitchPathPreconditions(t,n);var e=null,r=null;for(var a in n)if(isNormalPattern(n,a)){validatePatternPreconditions(a),0===t.search(a)&&betterMatch(a,e)&&(e=a,r=n[a]);var i=matchesWithParams(t,a);if(i.length>0&&betterMatch(t,e)&&(e=t,r=getParamsFnValue(n[a],i)),isRouteConfigurationObject(n[a])&&0===i.length){var u=switchPath(unprefixed(t,a),n[a]),l=a+u.path;null!==u.path&&betterMatch(l,e)&&(e=l,r=u.value)}if(a===t)return{path:a,value:handleTrailingSlash(n[a])}}var o=validate({sourcePath:t,matchedPath:e,value:r,routes:n}),h=o.validPath,s=o.validValue;return{path:h,value:s}}module.exports=switchPath;

},{}],71:[function(require,module,exports){
"use strict";function parser(e,t){if(!e)return createNode(document.createTextNode(""));if("string"==typeof e){var r=domParser.parseFromString(e,"text/html");e=r.body.firstChild?r.body.firstChild:r.head.firstChild&&("TITLE"!==r.head.firstChild.tagName||r.title)?r.head.firstChild:r.firstChild&&"HTML"!==r.firstChild.tagName?r.firstChild:document.createTextNode("")}if("object"!=typeof e||!e||!e.nodeType)throw new Error("invalid dom node",e);return createNode(e,t)}function createNode(e,t){return 3===e.nodeType?createVirtualTextNode(e):1===e.nodeType||9===e.nodeType?createVirtualDomNode(e,t):new VText("")}function createVirtualTextNode(e){return new VText(e.nodeValue)}function createVirtualDomNode(e,t){var r=e.namespaceURI!==HTML_NAMESPACE?e.namespaceURI:null,a=t&&e.getAttribute(t)?e.getAttribute(t):null;return new VNode(e.tagName,createProperties(e),createChildren(e,t),a,r)}function createChildren(e,t){for(var r=[],a=0;a<e.childNodes.length;a++)r.push(createNode(e.childNodes[a],t));return r}function createProperties(e){var t={};if(!e.hasAttributes())return t;var r;e.namespaceURI&&e.namespaceURI!==HTML_NAMESPACE&&(r=e.namespaceURI);for(var a,n=0;n<e.attributes.length;n++)a=r?createPropertyNS(e.attributes[n]):createProperty(e.attributes[n]),a.ns?t[a.name]={namespace:a.ns,value:a.value}:a.isAttr?(t.attributes||(t.attributes={}),t.attributes[a.name]=a.value):t[a.name]=a.value;return t}function createProperty(e){var t,r,a;if(t=propertyMap[e.name]?propertyMap[e.name]:e.name,"style"===t){var n={};e.value.split(";").forEach(function(e){var t=e.indexOf(":");0>t||(n[e.substr(0,t).trim()]=e.substr(t+1).trim())}),r=n}else 0===t.indexOf("data-")?(r=e.value,a=!0):r=e.value;return{name:t,value:r,isAttr:a||!1}}function createPropertyNS(e){return{name:e.name,value:e.value,ns:namespaceMap[e.name]||""}}var VNode=require("virtual-dom/vnode/vnode"),VText=require("virtual-dom/vnode/vtext"),domParser=new DOMParser,propertyMap=require("./property-map"),namespaceMap=require("./namespace-map"),HTML_NAMESPACE="http://www.w3.org/1999/xhtml";module.exports=parser;

},{"./namespace-map":72,"./property-map":73,"virtual-dom/vnode/vnode":98,"virtual-dom/vnode/vtext":100}],72:[function(require,module,exports){
"use strict";var DEFAULT_NAMESPACE=null,EV_NAMESPACE="http://www.w3.org/2001/xml-events",XLINK_NAMESPACE="http://www.w3.org/1999/xlink",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",namespaces={about:DEFAULT_NAMESPACE,"accent-height":DEFAULT_NAMESPACE,accumulate:DEFAULT_NAMESPACE,additive:DEFAULT_NAMESPACE,"alignment-baseline":DEFAULT_NAMESPACE,alphabetic:DEFAULT_NAMESPACE,amplitude:DEFAULT_NAMESPACE,"arabic-form":DEFAULT_NAMESPACE,ascent:DEFAULT_NAMESPACE,attributeName:DEFAULT_NAMESPACE,attributeType:DEFAULT_NAMESPACE,azimuth:DEFAULT_NAMESPACE,bandwidth:DEFAULT_NAMESPACE,baseFrequency:DEFAULT_NAMESPACE,baseProfile:DEFAULT_NAMESPACE,"baseline-shift":DEFAULT_NAMESPACE,bbox:DEFAULT_NAMESPACE,begin:DEFAULT_NAMESPACE,bias:DEFAULT_NAMESPACE,by:DEFAULT_NAMESPACE,calcMode:DEFAULT_NAMESPACE,"cap-height":DEFAULT_NAMESPACE,"class":DEFAULT_NAMESPACE,clip:DEFAULT_NAMESPACE,"clip-path":DEFAULT_NAMESPACE,"clip-rule":DEFAULT_NAMESPACE,clipPathUnits:DEFAULT_NAMESPACE,color:DEFAULT_NAMESPACE,"color-interpolation":DEFAULT_NAMESPACE,"color-interpolation-filters":DEFAULT_NAMESPACE,"color-profile":DEFAULT_NAMESPACE,"color-rendering":DEFAULT_NAMESPACE,content:DEFAULT_NAMESPACE,contentScriptType:DEFAULT_NAMESPACE,contentStyleType:DEFAULT_NAMESPACE,cursor:DEFAULT_NAMESPACE,cx:DEFAULT_NAMESPACE,cy:DEFAULT_NAMESPACE,d:DEFAULT_NAMESPACE,datatype:DEFAULT_NAMESPACE,defaultAction:DEFAULT_NAMESPACE,descent:DEFAULT_NAMESPACE,diffuseConstant:DEFAULT_NAMESPACE,direction:DEFAULT_NAMESPACE,display:DEFAULT_NAMESPACE,divisor:DEFAULT_NAMESPACE,"dominant-baseline":DEFAULT_NAMESPACE,dur:DEFAULT_NAMESPACE,dx:DEFAULT_NAMESPACE,dy:DEFAULT_NAMESPACE,edgeMode:DEFAULT_NAMESPACE,editable:DEFAULT_NAMESPACE,elevation:DEFAULT_NAMESPACE,"enable-background":DEFAULT_NAMESPACE,end:DEFAULT_NAMESPACE,"ev:event":EV_NAMESPACE,event:DEFAULT_NAMESPACE,exponent:DEFAULT_NAMESPACE,externalResourcesRequired:DEFAULT_NAMESPACE,fill:DEFAULT_NAMESPACE,"fill-opacity":DEFAULT_NAMESPACE,"fill-rule":DEFAULT_NAMESPACE,filter:DEFAULT_NAMESPACE,filterRes:DEFAULT_NAMESPACE,filterUnits:DEFAULT_NAMESPACE,"flood-color":DEFAULT_NAMESPACE,"flood-opacity":DEFAULT_NAMESPACE,focusHighlight:DEFAULT_NAMESPACE,focusable:DEFAULT_NAMESPACE,"font-family":DEFAULT_NAMESPACE,"font-size":DEFAULT_NAMESPACE,"font-size-adjust":DEFAULT_NAMESPACE,"font-stretch":DEFAULT_NAMESPACE,"font-style":DEFAULT_NAMESPACE,"font-variant":DEFAULT_NAMESPACE,"font-weight":DEFAULT_NAMESPACE,format:DEFAULT_NAMESPACE,from:DEFAULT_NAMESPACE,fx:DEFAULT_NAMESPACE,fy:DEFAULT_NAMESPACE,g1:DEFAULT_NAMESPACE,g2:DEFAULT_NAMESPACE,"glyph-name":DEFAULT_NAMESPACE,"glyph-orientation-horizontal":DEFAULT_NAMESPACE,"glyph-orientation-vertical":DEFAULT_NAMESPACE,glyphRef:DEFAULT_NAMESPACE,gradientTransform:DEFAULT_NAMESPACE,gradientUnits:DEFAULT_NAMESPACE,handler:DEFAULT_NAMESPACE,hanging:DEFAULT_NAMESPACE,height:DEFAULT_NAMESPACE,"horiz-adv-x":DEFAULT_NAMESPACE,"horiz-origin-x":DEFAULT_NAMESPACE,"horiz-origin-y":DEFAULT_NAMESPACE,id:DEFAULT_NAMESPACE,ideographic:DEFAULT_NAMESPACE,"image-rendering":DEFAULT_NAMESPACE,"in":DEFAULT_NAMESPACE,in2:DEFAULT_NAMESPACE,initialVisibility:DEFAULT_NAMESPACE,intercept:DEFAULT_NAMESPACE,k:DEFAULT_NAMESPACE,k1:DEFAULT_NAMESPACE,k2:DEFAULT_NAMESPACE,k3:DEFAULT_NAMESPACE,k4:DEFAULT_NAMESPACE,kernelMatrix:DEFAULT_NAMESPACE,kernelUnitLength:DEFAULT_NAMESPACE,kerning:DEFAULT_NAMESPACE,keyPoints:DEFAULT_NAMESPACE,keySplines:DEFAULT_NAMESPACE,keyTimes:DEFAULT_NAMESPACE,lang:DEFAULT_NAMESPACE,lengthAdjust:DEFAULT_NAMESPACE,"letter-spacing":DEFAULT_NAMESPACE,"lighting-color":DEFAULT_NAMESPACE,limitingConeAngle:DEFAULT_NAMESPACE,local:DEFAULT_NAMESPACE,"marker-end":DEFAULT_NAMESPACE,"marker-mid":DEFAULT_NAMESPACE,"marker-start":DEFAULT_NAMESPACE,markerHeight:DEFAULT_NAMESPACE,markerUnits:DEFAULT_NAMESPACE,markerWidth:DEFAULT_NAMESPACE,mask:DEFAULT_NAMESPACE,maskContentUnits:DEFAULT_NAMESPACE,maskUnits:DEFAULT_NAMESPACE,mathematical:DEFAULT_NAMESPACE,max:DEFAULT_NAMESPACE,media:DEFAULT_NAMESPACE,mediaCharacterEncoding:DEFAULT_NAMESPACE,mediaContentEncodings:DEFAULT_NAMESPACE,mediaSize:DEFAULT_NAMESPACE,mediaTime:DEFAULT_NAMESPACE,method:DEFAULT_NAMESPACE,min:DEFAULT_NAMESPACE,mode:DEFAULT_NAMESPACE,name:DEFAULT_NAMESPACE,"nav-down":DEFAULT_NAMESPACE,"nav-down-left":DEFAULT_NAMESPACE,"nav-down-right":DEFAULT_NAMESPACE,"nav-left":DEFAULT_NAMESPACE,"nav-next":DEFAULT_NAMESPACE,"nav-prev":DEFAULT_NAMESPACE,"nav-right":DEFAULT_NAMESPACE,"nav-up":DEFAULT_NAMESPACE,"nav-up-left":DEFAULT_NAMESPACE,"nav-up-right":DEFAULT_NAMESPACE,numOctaves:DEFAULT_NAMESPACE,observer:DEFAULT_NAMESPACE,offset:DEFAULT_NAMESPACE,opacity:DEFAULT_NAMESPACE,operator:DEFAULT_NAMESPACE,order:DEFAULT_NAMESPACE,orient:DEFAULT_NAMESPACE,orientation:DEFAULT_NAMESPACE,origin:DEFAULT_NAMESPACE,overflow:DEFAULT_NAMESPACE,overlay:DEFAULT_NAMESPACE,"overline-position":DEFAULT_NAMESPACE,"overline-thickness":DEFAULT_NAMESPACE,"panose-1":DEFAULT_NAMESPACE,path:DEFAULT_NAMESPACE,pathLength:DEFAULT_NAMESPACE,patternContentUnits:DEFAULT_NAMESPACE,patternTransform:DEFAULT_NAMESPACE,patternUnits:DEFAULT_NAMESPACE,phase:DEFAULT_NAMESPACE,playbackOrder:DEFAULT_NAMESPACE,"pointer-events":DEFAULT_NAMESPACE,points:DEFAULT_NAMESPACE,pointsAtX:DEFAULT_NAMESPACE,pointsAtY:DEFAULT_NAMESPACE,pointsAtZ:DEFAULT_NAMESPACE,preserveAlpha:DEFAULT_NAMESPACE,preserveAspectRatio:DEFAULT_NAMESPACE,primitiveUnits:DEFAULT_NAMESPACE,propagate:DEFAULT_NAMESPACE,property:DEFAULT_NAMESPACE,r:DEFAULT_NAMESPACE,radius:DEFAULT_NAMESPACE,refX:DEFAULT_NAMESPACE,refY:DEFAULT_NAMESPACE,rel:DEFAULT_NAMESPACE,"rendering-intent":DEFAULT_NAMESPACE,repeatCount:DEFAULT_NAMESPACE,repeatDur:DEFAULT_NAMESPACE,requiredExtensions:DEFAULT_NAMESPACE,requiredFeatures:DEFAULT_NAMESPACE,requiredFonts:DEFAULT_NAMESPACE,requiredFormats:DEFAULT_NAMESPACE,resource:DEFAULT_NAMESPACE,restart:DEFAULT_NAMESPACE,result:DEFAULT_NAMESPACE,rev:DEFAULT_NAMESPACE,role:DEFAULT_NAMESPACE,rotate:DEFAULT_NAMESPACE,rx:DEFAULT_NAMESPACE,ry:DEFAULT_NAMESPACE,scale:DEFAULT_NAMESPACE,seed:DEFAULT_NAMESPACE,"shape-rendering":DEFAULT_NAMESPACE,slope:DEFAULT_NAMESPACE,snapshotTime:DEFAULT_NAMESPACE,spacing:DEFAULT_NAMESPACE,specularConstant:DEFAULT_NAMESPACE,specularExponent:DEFAULT_NAMESPACE,spreadMethod:DEFAULT_NAMESPACE,startOffset:DEFAULT_NAMESPACE,stdDeviation:DEFAULT_NAMESPACE,stemh:DEFAULT_NAMESPACE,stemv:DEFAULT_NAMESPACE,stitchTiles:DEFAULT_NAMESPACE,"stop-color":DEFAULT_NAMESPACE,"stop-opacity":DEFAULT_NAMESPACE,"strikethrough-position":DEFAULT_NAMESPACE,"strikethrough-thickness":DEFAULT_NAMESPACE,string:DEFAULT_NAMESPACE,stroke:DEFAULT_NAMESPACE,"stroke-dasharray":DEFAULT_NAMESPACE,"stroke-dashoffset":DEFAULT_NAMESPACE,"stroke-linecap":DEFAULT_NAMESPACE,"stroke-linejoin":DEFAULT_NAMESPACE,"stroke-miterlimit":DEFAULT_NAMESPACE,"stroke-opacity":DEFAULT_NAMESPACE,"stroke-width":DEFAULT_NAMESPACE,surfaceScale:DEFAULT_NAMESPACE,syncBehavior:DEFAULT_NAMESPACE,syncBehaviorDefault:DEFAULT_NAMESPACE,syncMaster:DEFAULT_NAMESPACE,syncTolerance:DEFAULT_NAMESPACE,syncToleranceDefault:DEFAULT_NAMESPACE,systemLanguage:DEFAULT_NAMESPACE,tableValues:DEFAULT_NAMESPACE,target:DEFAULT_NAMESPACE,targetX:DEFAULT_NAMESPACE,targetY:DEFAULT_NAMESPACE,"text-anchor":DEFAULT_NAMESPACE,"text-decoration":DEFAULT_NAMESPACE,"text-rendering":DEFAULT_NAMESPACE,textLength:DEFAULT_NAMESPACE,timelineBegin:DEFAULT_NAMESPACE,title:DEFAULT_NAMESPACE,to:DEFAULT_NAMESPACE,transform:DEFAULT_NAMESPACE,transformBehavior:DEFAULT_NAMESPACE,type:DEFAULT_NAMESPACE,"typeof":DEFAULT_NAMESPACE,u1:DEFAULT_NAMESPACE,u2:DEFAULT_NAMESPACE,"underline-position":DEFAULT_NAMESPACE,"underline-thickness":DEFAULT_NAMESPACE,unicode:DEFAULT_NAMESPACE,"unicode-bidi":DEFAULT_NAMESPACE,"unicode-range":DEFAULT_NAMESPACE,"units-per-em":DEFAULT_NAMESPACE,"v-alphabetic":DEFAULT_NAMESPACE,"v-hanging":DEFAULT_NAMESPACE,"v-ideographic":DEFAULT_NAMESPACE,"v-mathematical":DEFAULT_NAMESPACE,values:DEFAULT_NAMESPACE,version:DEFAULT_NAMESPACE,"vert-adv-y":DEFAULT_NAMESPACE,"vert-origin-x":DEFAULT_NAMESPACE,"vert-origin-y":DEFAULT_NAMESPACE,viewBox:DEFAULT_NAMESPACE,viewTarget:DEFAULT_NAMESPACE,visibility:DEFAULT_NAMESPACE,width:DEFAULT_NAMESPACE,widths:DEFAULT_NAMESPACE,"word-spacing":DEFAULT_NAMESPACE,"writing-mode":DEFAULT_NAMESPACE,x:DEFAULT_NAMESPACE,"x-height":DEFAULT_NAMESPACE,x1:DEFAULT_NAMESPACE,x2:DEFAULT_NAMESPACE,xChannelSelector:DEFAULT_NAMESPACE,"xlink:actuate":XLINK_NAMESPACE,"xlink:arcrole":XLINK_NAMESPACE,"xlink:href":XLINK_NAMESPACE,"xlink:role":XLINK_NAMESPACE,"xlink:show":XLINK_NAMESPACE,"xlink:title":XLINK_NAMESPACE,"xlink:type":XLINK_NAMESPACE,"xml:base":XML_NAMESPACE,"xml:id":XML_NAMESPACE,"xml:lang":XML_NAMESPACE,"xml:space":XML_NAMESPACE,y:DEFAULT_NAMESPACE,y1:DEFAULT_NAMESPACE,y2:DEFAULT_NAMESPACE,yChannelSelector:DEFAULT_NAMESPACE,z:DEFAULT_NAMESPACE,zoomAndPan:DEFAULT_NAMESPACE};module.exports=namespaces;

},{}],73:[function(require,module,exports){
"use strict";var properties={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charset",checked:"checked",cite:"cite","class":"className",cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",enctype:"encType","for":"htmlFor",form:"form",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"};module.exports=properties;

},{}],74:[function(require,module,exports){
function createAttribute(e,r,t){if(properties.hasOwnProperty(e)){if(shouldSkip(e,r))return"";e=(attributeNames[e]||e).toLowerCase();var p=properties[e];return p===types.BOOLEAN||p===types.OVERLOADED_BOOLEAN&&r===!0?escape(e):prefixAttribute(e)+escape(r)+'"'}return t?null==r?"":prefixAttribute(e)+escape(r)+'"':null}function shouldSkip(e,r){var t=properties[e];return null==r||t===types.BOOLEAN&&!r||t===types.OVERLOADED_BOOLEAN&&r===!1}function memoizeString(e){var r={};return function(t){return r.hasOwnProperty(t)?r[t]:r[t]=e.call(this,t)}}var escape=require("escape-html"),propConfig=require("./property-config"),types=propConfig.attributeTypes,properties=propConfig.properties,attributeNames=propConfig.attributeNames,prefixAttribute=memoizeString(function(e){return escape(e)+'="'});module.exports=createAttribute;

},{"./property-config":76,"escape-html":31}],75:[function(require,module,exports){
function toHTML(e,r){return e?(isThunk(e)&&(e=e.render()),isWidget(e)&&e.render&&(e=e.render()),isVNode(e)?openTag(e)+tagContent(e)+closeTag(e):isVText(e)?r&&"script"===r.tagName.toLowerCase()?String(e.text):escape(String(e.text)):""):""}function openTag(e){var r=e.properties,t="<"+e.tagName.toLowerCase();for(var i in r){var o=r[i];if(null!=o)if("attributes"!=i){if("style"==i){var a="";o=extend({},o);for(var n in o)a+=paramCase(n)+": "+o[n]+"; ";o=a.trim()}if(o instanceof softHook||o instanceof attrHook)t+=" "+createAttribute(i,o.value,!0);else{var s=createAttribute(i,o);s&&(t+=" "+s)}}else{o=extend({},o);for(var u in o)t+=" "+createAttribute(u,o[u],!0)}}return t+">"}function tagContent(e){var r=e.properties.innerHTML;if(null!=r)return r;var t="";if(e.children&&e.children.length)for(var i=0,o=e.children.length;o>i;i++){var a=e.children[i];t+=toHTML(a,e)}return t}function closeTag(e){var r=e.tagName.toLowerCase();return voidElements[r]?"":"</"+r+">"}var escape=require("escape-html"),extend=require("xtend"),isVNode=require("virtual-dom/vnode/is-vnode"),isVText=require("virtual-dom/vnode/is-vtext"),isThunk=require("virtual-dom/vnode/is-thunk"),isWidget=require("virtual-dom/vnode/is-widget"),softHook=require("virtual-dom/virtual-hyperscript/hooks/soft-set-hook"),attrHook=require("virtual-dom/virtual-hyperscript/hooks/attribute-hook"),paramCase=require("param-case"),createAttribute=require("./create-attribute"),voidElements=require("./void-elements");module.exports=toHTML;

},{"./create-attribute":74,"./void-elements":77,"escape-html":31,"param-case":61,"virtual-dom/virtual-hyperscript/hooks/attribute-hook":86,"virtual-dom/virtual-hyperscript/hooks/soft-set-hook":88,"virtual-dom/vnode/is-thunk":92,"virtual-dom/vnode/is-vnode":94,"virtual-dom/vnode/is-vtext":95,"virtual-dom/vnode/is-widget":96,"xtend":105}],76:[function(require,module,exports){
var types={BOOLEAN:1,OVERLOADED_BOOLEAN:2},properties={accept:!0,acceptCharset:!0,accessKey:!0,action:!0,allowFullScreen:types.BOOLEAN,allowTransparency:!0,alt:!0,async:types.BOOLEAN,autocomplete:!0,autofocus:types.BOOLEAN,autoplay:types.BOOLEAN,cellPadding:!0,cellSpacing:!0,charset:!0,checked:types.BOOLEAN,classID:!0,className:!0,cols:!0,colSpan:!0,content:!0,contentEditable:!0,contextMenu:!0,controls:types.BOOLEAN,coords:!0,crossOrigin:!0,data:!0,dateTime:!0,defer:types.BOOLEAN,dir:!0,disabled:types.BOOLEAN,download:types.OVERLOADED_BOOLEAN,draggable:!0,enctype:!0,form:!0,formAction:!0,formEncType:!0,formMethod:!0,formNoValidate:types.BOOLEAN,formTarget:!0,frameBorder:!0,headers:!0,height:!0,hidden:types.BOOLEAN,href:!0,hreflang:!0,htmlFor:!0,httpEquiv:!0,icon:!0,id:!0,label:!0,lang:!0,list:!0,loop:types.BOOLEAN,manifest:!0,marginHeight:!0,marginWidth:!0,max:!0,maxLength:!0,media:!0,mediaGroup:!0,method:!0,min:!0,multiple:types.BOOLEAN,muted:types.BOOLEAN,name:!0,noValidate:types.BOOLEAN,open:!0,pattern:!0,placeholder:!0,poster:!0,preload:!0,radiogroup:!0,readOnly:types.BOOLEAN,rel:!0,required:types.BOOLEAN,role:!0,rows:!0,rowSpan:!0,sandbox:!0,scope:!0,scrolling:!0,seamless:types.BOOLEAN,selected:types.BOOLEAN,shape:!0,size:!0,sizes:!0,span:!0,spellcheck:!0,src:!0,srcdoc:!0,srcset:!0,start:!0,step:!0,style:!0,tabIndex:!0,target:!0,title:!0,type:!0,useMap:!0,value:!0,width:!0,wmode:!0,autocapitalize:!0,autocorrect:!0,itemProp:!0,itemScope:types.BOOLEAN,itemType:!0,property:!0},attributeNames={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"};module.exports={attributeTypes:types,properties:properties,attributeNames:attributeNames};

},{}],77:[function(require,module,exports){
module.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};

},{}],78:[function(require,module,exports){
var diff=require("./vtree/diff.js");module.exports=diff;

},{"./vtree/diff.js":102}],79:[function(require,module,exports){
var patch=require("./vdom/patch.js");module.exports=patch;

},{"./vdom/patch.js":84}],80:[function(require,module,exports){
function applyProperties(o,t,e){for(var r in t){var i=t[r];void 0===i?removeProperty(o,r,i,e):isHook(i)?(removeProperty(o,r,i,e),i.hook&&i.hook(o,r,e?e[r]:void 0)):isObject(i)?patchObject(o,t,e,r,i):o[r]=i}}function removeProperty(o,t,e,r){if(r){var i=r[t];if(isHook(i))i.unhook&&i.unhook(o,t,e);else if("attributes"===t)for(var v in i)o.removeAttribute(v);else if("style"===t)for(var s in i)o.style[s]="";else"string"==typeof i?o[t]="":o[t]=null}}function patchObject(o,t,e,r,i){var v=e?e[r]:void 0;if("attributes"!==r){if(v&&isObject(v)&&getPrototype(v)!==getPrototype(i))return void(o[r]=i);isObject(o[r])||(o[r]={});var s="style"===r?"":void 0;for(var n in i){var p=i[n];o[r][n]=void 0===p?s:p}}else for(var c in i){var u=i[c];void 0===u?o.removeAttribute(c):o.setAttribute(c,u)}}function getPrototype(o){return Object.getPrototypeOf?Object.getPrototypeOf(o):o.__proto__?o.__proto__:o.constructor?o.constructor.prototype:void 0}var isObject=require("is-object"),isHook=require("../vnode/is-vhook.js");module.exports=applyProperties;

},{"../vnode/is-vhook.js":93,"is-object":58}],81:[function(require,module,exports){
function createElement(e,r){var t=r?r.document||document:document,n=r?r.warn:null;if(e=handleThunk(e).a,isWidget(e))return e.init();if(isVText(e))return t.createTextNode(e.text);if(!isVNode(e))return n&&n("Item is not a valid virtual dom node",e),null;var i=null===e.namespace?t.createElement(e.tagName):t.createElementNS(e.namespace,e.tagName),a=e.properties;applyProperties(i,a);for(var d=e.children,l=0;l<d.length;l++){var o=createElement(d[l],r);o&&i.appendChild(o)}return i}var document=require("global/document"),applyProperties=require("./apply-properties"),isVNode=require("../vnode/is-vnode.js"),isVText=require("../vnode/is-vtext.js"),isWidget=require("../vnode/is-widget.js"),handleThunk=require("../vnode/handle-thunk.js");module.exports=createElement;

},{"../vnode/handle-thunk.js":91,"../vnode/is-vnode.js":94,"../vnode/is-vtext.js":95,"../vnode/is-widget.js":96,"./apply-properties":80,"global/document":33}],82:[function(require,module,exports){
function domIndex(n,e,r,i){return r&&0!==r.length?(r.sort(ascending),recurse(n,e,r,i,0)):{}}function recurse(n,e,r,i,t){if(i=i||{},n){indexInRange(r,t,t)&&(i[t]=n);var d=e.children;if(d)for(var u=n.childNodes,o=0;o<e.children.length;o++){t+=1;var c=d[o]||noChild,f=t+(c.count||0);indexInRange(r,t,f)&&recurse(u[o],c,r,i,t),t=f}}return i}function indexInRange(n,e,r){if(0===n.length)return!1;for(var i,t,d=0,u=n.length-1;u>=d;){if(i=(u+d)/2>>0,t=n[i],d===u)return t>=e&&r>=t;if(e>t)d=i+1;else{if(!(t>r))return!0;u=i-1}}return!1}function ascending(n,e){return n>e?1:-1}var noChild={};module.exports=domIndex;

},{}],83:[function(require,module,exports){
function applyPatch(e,r,t){var a=e.type,n=e.vNode,o=e.patch;switch(a){case VPatch.REMOVE:return removeNode(r,n);case VPatch.INSERT:return insertNode(r,o,t);case VPatch.VTEXT:return stringPatch(r,n,o,t);case VPatch.WIDGET:return widgetPatch(r,n,o,t);case VPatch.VNODE:return vNodePatch(r,n,o,t);case VPatch.ORDER:return reorderChildren(r,o),r;case VPatch.PROPS:return applyProperties(r,o,n.properties),r;case VPatch.THUNK:return replaceRoot(r,t.patch(r,o,t));default:return r}}function removeNode(e,r){var t=e.parentNode;return t&&t.removeChild(e),destroyWidget(e,r),null}function insertNode(e,r,t){var a=t.render(r,t);return e&&e.appendChild(a),e}function stringPatch(e,r,t,a){var n;if(3===e.nodeType)e.replaceData(0,e.length,t.text),n=e;else{var o=e.parentNode;n=a.render(t,a),o&&n!==e&&o.replaceChild(n,e)}return n}function widgetPatch(e,r,t,a){var n,o=updateWidget(r,t);n=o?t.update(r,e)||e:a.render(t,a);var d=e.parentNode;return d&&n!==e&&d.replaceChild(n,e),o||destroyWidget(e,r),n}function vNodePatch(e,r,t,a){var n=e.parentNode,o=a.render(t,a);return n&&o!==e&&n.replaceChild(o,e),o}function destroyWidget(e,r){"function"==typeof r.destroy&&isWidget(r)&&r.destroy(e)}function reorderChildren(e,r){for(var t,a,n,o=e.childNodes,d={},i=0;i<r.removes.length;i++)a=r.removes[i],t=o[a.from],a.key&&(d[a.key]=t),e.removeChild(t);for(var c=o.length,p=0;p<r.inserts.length;p++)n=r.inserts[p],t=d[n.key],e.insertBefore(t,n.to>=c++?null:o[n.to])}function replaceRoot(e,r){return e&&r&&e!==r&&e.parentNode&&e.parentNode.replaceChild(r,e),r}var applyProperties=require("./apply-properties"),isWidget=require("../vnode/is-widget.js"),VPatch=require("../vnode/vpatch.js"),updateWidget=require("./update-widget");module.exports=applyPatch;

},{"../vnode/is-widget.js":96,"../vnode/vpatch.js":99,"./apply-properties":80,"./update-widget":85}],84:[function(require,module,exports){
function patch(r,e,t){return t=t||{},t.patch=t.patch&&t.patch!==patch?t.patch:patchRecursive,t.render=t.render||render,t.patch(r,e,t)}function patchRecursive(r,e,t){var a=patchIndices(e);if(0===a.length)return r;var n=domIndex(r,e.a,a),c=r.ownerDocument;t.document||c===document||(t.document=c);for(var p=0;p<a.length;p++){var u=a[p];r=applyPatch(r,n[u],e[u],t)}return r}function applyPatch(r,e,t,a){if(!e)return r;var n;if(isArray(t))for(var c=0;c<t.length;c++)n=patchOp(t[c],e,a),e===r&&(r=n);else n=patchOp(t,e,a),e===r&&(r=n);return r}function patchIndices(r){var e=[];for(var t in r)"a"!==t&&e.push(Number(t));return e}var document=require("global/document"),isArray=require("x-is-array"),render=require("./create-element"),domIndex=require("./dom-index"),patchOp=require("./patch-op");module.exports=patch;

},{"./create-element":81,"./dom-index":82,"./patch-op":83,"global/document":33,"x-is-array":104}],85:[function(require,module,exports){
function updateWidget(i,e){return isWidget(i)&&isWidget(e)?"name"in i&&"name"in e?i.id===e.id:i.init===e.init:!1}var isWidget=require("../vnode/is-widget.js");module.exports=updateWidget;

},{"../vnode/is-widget.js":96}],86:[function(require,module,exports){
"use strict";function AttributeHook(t,e){return this instanceof AttributeHook?(this.namespace=t,void(this.value=e)):new AttributeHook(t,e)}module.exports=AttributeHook,AttributeHook.prototype.hook=function(t,e,o){o&&"AttributeHook"===o.type&&o.value===this.value&&o.namespace===this.namespace||t.setAttributeNS(this.namespace,e,this.value)},AttributeHook.prototype.unhook=function(t,e,o){if(!o||"AttributeHook"!==o.type||o.namespace!==this.namespace){var i=e.indexOf(":"),u=i>-1?e.substr(i+1):e;t.removeAttributeNS(this.namespace,u)}},AttributeHook.prototype.type="AttributeHook";

},{}],87:[function(require,module,exports){
"use strict";function EvHook(o){return this instanceof EvHook?void(this.value=o):new EvHook(o)}var EvStore=require("ev-store");module.exports=EvHook,EvHook.prototype.hook=function(o,t){var e=EvStore(o),r=t.substr(3);e[r]=this.value},EvHook.prototype.unhook=function(o,t){var e=EvStore(o),r=t.substr(3);e[r]=void 0};

},{"ev-store":32}],88:[function(require,module,exports){
"use strict";function SoftSetHook(o){return this instanceof SoftSetHook?void(this.value=o):new SoftSetHook(o)}module.exports=SoftSetHook,SoftSetHook.prototype.hook=function(o,t){o[t]!==this.value&&(o[t]=this.value)};

},{}],89:[function(require,module,exports){
"use strict";function parseTag(s,a){if(!s)return"DIV";var t=!a.hasOwnProperty("id"),e=split(s,classIdSplit),r=null;notClassId.test(e[1])&&(r="DIV");var l,n,i,p;for(p=0;p<e.length;p++)n=e[p],n&&(i=n.charAt(0),r?"."===i?(l=l||[],l.push(n.substring(1,n.length))):"#"===i&&t&&(a.id=n.substring(1,n.length)):r=n);return l&&(a.className&&l.push(a.className),a.className=l.join(" ")),a.namespace?r:r.toUpperCase()}var split=require("browser-split"),classIdSplit=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,notClassId=/^\.|#/;module.exports=parseTag;

},{"browser-split":14}],90:[function(require,module,exports){
"use strict";function SVGAttributeNamespace(E){return SVG_PROPERTIES.hasOwnProperty(E)?SVG_PROPERTIES[E]:void 0}var DEFAULT_NAMESPACE=null,EV_NAMESPACE="http://www.w3.org/2001/xml-events",XLINK_NAMESPACE="http://www.w3.org/1999/xlink",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",SVG_PROPERTIES={about:DEFAULT_NAMESPACE,"accent-height":DEFAULT_NAMESPACE,accumulate:DEFAULT_NAMESPACE,additive:DEFAULT_NAMESPACE,"alignment-baseline":DEFAULT_NAMESPACE,alphabetic:DEFAULT_NAMESPACE,amplitude:DEFAULT_NAMESPACE,"arabic-form":DEFAULT_NAMESPACE,ascent:DEFAULT_NAMESPACE,attributeName:DEFAULT_NAMESPACE,attributeType:DEFAULT_NAMESPACE,azimuth:DEFAULT_NAMESPACE,bandwidth:DEFAULT_NAMESPACE,baseFrequency:DEFAULT_NAMESPACE,baseProfile:DEFAULT_NAMESPACE,"baseline-shift":DEFAULT_NAMESPACE,bbox:DEFAULT_NAMESPACE,begin:DEFAULT_NAMESPACE,bias:DEFAULT_NAMESPACE,by:DEFAULT_NAMESPACE,calcMode:DEFAULT_NAMESPACE,"cap-height":DEFAULT_NAMESPACE,"class":DEFAULT_NAMESPACE,clip:DEFAULT_NAMESPACE,"clip-path":DEFAULT_NAMESPACE,"clip-rule":DEFAULT_NAMESPACE,clipPathUnits:DEFAULT_NAMESPACE,color:DEFAULT_NAMESPACE,"color-interpolation":DEFAULT_NAMESPACE,"color-interpolation-filters":DEFAULT_NAMESPACE,"color-profile":DEFAULT_NAMESPACE,"color-rendering":DEFAULT_NAMESPACE,content:DEFAULT_NAMESPACE,contentScriptType:DEFAULT_NAMESPACE,contentStyleType:DEFAULT_NAMESPACE,cursor:DEFAULT_NAMESPACE,cx:DEFAULT_NAMESPACE,cy:DEFAULT_NAMESPACE,d:DEFAULT_NAMESPACE,datatype:DEFAULT_NAMESPACE,defaultAction:DEFAULT_NAMESPACE,descent:DEFAULT_NAMESPACE,diffuseConstant:DEFAULT_NAMESPACE,direction:DEFAULT_NAMESPACE,display:DEFAULT_NAMESPACE,divisor:DEFAULT_NAMESPACE,"dominant-baseline":DEFAULT_NAMESPACE,dur:DEFAULT_NAMESPACE,dx:DEFAULT_NAMESPACE,dy:DEFAULT_NAMESPACE,edgeMode:DEFAULT_NAMESPACE,editable:DEFAULT_NAMESPACE,elevation:DEFAULT_NAMESPACE,"enable-background":DEFAULT_NAMESPACE,end:DEFAULT_NAMESPACE,"ev:event":EV_NAMESPACE,event:DEFAULT_NAMESPACE,exponent:DEFAULT_NAMESPACE,externalResourcesRequired:DEFAULT_NAMESPACE,fill:DEFAULT_NAMESPACE,"fill-opacity":DEFAULT_NAMESPACE,"fill-rule":DEFAULT_NAMESPACE,filter:DEFAULT_NAMESPACE,filterRes:DEFAULT_NAMESPACE,filterUnits:DEFAULT_NAMESPACE,"flood-color":DEFAULT_NAMESPACE,"flood-opacity":DEFAULT_NAMESPACE,focusHighlight:DEFAULT_NAMESPACE,focusable:DEFAULT_NAMESPACE,"font-family":DEFAULT_NAMESPACE,"font-size":DEFAULT_NAMESPACE,"font-size-adjust":DEFAULT_NAMESPACE,"font-stretch":DEFAULT_NAMESPACE,"font-style":DEFAULT_NAMESPACE,"font-variant":DEFAULT_NAMESPACE,"font-weight":DEFAULT_NAMESPACE,format:DEFAULT_NAMESPACE,from:DEFAULT_NAMESPACE,fx:DEFAULT_NAMESPACE,fy:DEFAULT_NAMESPACE,g1:DEFAULT_NAMESPACE,g2:DEFAULT_NAMESPACE,"glyph-name":DEFAULT_NAMESPACE,"glyph-orientation-horizontal":DEFAULT_NAMESPACE,"glyph-orientation-vertical":DEFAULT_NAMESPACE,glyphRef:DEFAULT_NAMESPACE,gradientTransform:DEFAULT_NAMESPACE,gradientUnits:DEFAULT_NAMESPACE,handler:DEFAULT_NAMESPACE,hanging:DEFAULT_NAMESPACE,height:DEFAULT_NAMESPACE,"horiz-adv-x":DEFAULT_NAMESPACE,"horiz-origin-x":DEFAULT_NAMESPACE,"horiz-origin-y":DEFAULT_NAMESPACE,id:DEFAULT_NAMESPACE,ideographic:DEFAULT_NAMESPACE,"image-rendering":DEFAULT_NAMESPACE,"in":DEFAULT_NAMESPACE,in2:DEFAULT_NAMESPACE,initialVisibility:DEFAULT_NAMESPACE,intercept:DEFAULT_NAMESPACE,k:DEFAULT_NAMESPACE,k1:DEFAULT_NAMESPACE,k2:DEFAULT_NAMESPACE,k3:DEFAULT_NAMESPACE,k4:DEFAULT_NAMESPACE,kernelMatrix:DEFAULT_NAMESPACE,kernelUnitLength:DEFAULT_NAMESPACE,kerning:DEFAULT_NAMESPACE,keyPoints:DEFAULT_NAMESPACE,keySplines:DEFAULT_NAMESPACE,keyTimes:DEFAULT_NAMESPACE,lang:DEFAULT_NAMESPACE,lengthAdjust:DEFAULT_NAMESPACE,"letter-spacing":DEFAULT_NAMESPACE,"lighting-color":DEFAULT_NAMESPACE,limitingConeAngle:DEFAULT_NAMESPACE,local:DEFAULT_NAMESPACE,"marker-end":DEFAULT_NAMESPACE,"marker-mid":DEFAULT_NAMESPACE,"marker-start":DEFAULT_NAMESPACE,markerHeight:DEFAULT_NAMESPACE,markerUnits:DEFAULT_NAMESPACE,markerWidth:DEFAULT_NAMESPACE,mask:DEFAULT_NAMESPACE,maskContentUnits:DEFAULT_NAMESPACE,maskUnits:DEFAULT_NAMESPACE,mathematical:DEFAULT_NAMESPACE,max:DEFAULT_NAMESPACE,media:DEFAULT_NAMESPACE,mediaCharacterEncoding:DEFAULT_NAMESPACE,mediaContentEncodings:DEFAULT_NAMESPACE,mediaSize:DEFAULT_NAMESPACE,mediaTime:DEFAULT_NAMESPACE,method:DEFAULT_NAMESPACE,min:DEFAULT_NAMESPACE,mode:DEFAULT_NAMESPACE,name:DEFAULT_NAMESPACE,"nav-down":DEFAULT_NAMESPACE,"nav-down-left":DEFAULT_NAMESPACE,"nav-down-right":DEFAULT_NAMESPACE,"nav-left":DEFAULT_NAMESPACE,"nav-next":DEFAULT_NAMESPACE,"nav-prev":DEFAULT_NAMESPACE,"nav-right":DEFAULT_NAMESPACE,"nav-up":DEFAULT_NAMESPACE,"nav-up-left":DEFAULT_NAMESPACE,"nav-up-right":DEFAULT_NAMESPACE,numOctaves:DEFAULT_NAMESPACE,observer:DEFAULT_NAMESPACE,offset:DEFAULT_NAMESPACE,opacity:DEFAULT_NAMESPACE,operator:DEFAULT_NAMESPACE,order:DEFAULT_NAMESPACE,orient:DEFAULT_NAMESPACE,orientation:DEFAULT_NAMESPACE,origin:DEFAULT_NAMESPACE,overflow:DEFAULT_NAMESPACE,overlay:DEFAULT_NAMESPACE,"overline-position":DEFAULT_NAMESPACE,"overline-thickness":DEFAULT_NAMESPACE,"panose-1":DEFAULT_NAMESPACE,path:DEFAULT_NAMESPACE,pathLength:DEFAULT_NAMESPACE,patternContentUnits:DEFAULT_NAMESPACE,patternTransform:DEFAULT_NAMESPACE,patternUnits:DEFAULT_NAMESPACE,phase:DEFAULT_NAMESPACE,playbackOrder:DEFAULT_NAMESPACE,"pointer-events":DEFAULT_NAMESPACE,points:DEFAULT_NAMESPACE,pointsAtX:DEFAULT_NAMESPACE,pointsAtY:DEFAULT_NAMESPACE,pointsAtZ:DEFAULT_NAMESPACE,preserveAlpha:DEFAULT_NAMESPACE,preserveAspectRatio:DEFAULT_NAMESPACE,primitiveUnits:DEFAULT_NAMESPACE,propagate:DEFAULT_NAMESPACE,property:DEFAULT_NAMESPACE,r:DEFAULT_NAMESPACE,radius:DEFAULT_NAMESPACE,refX:DEFAULT_NAMESPACE,refY:DEFAULT_NAMESPACE,rel:DEFAULT_NAMESPACE,"rendering-intent":DEFAULT_NAMESPACE,repeatCount:DEFAULT_NAMESPACE,repeatDur:DEFAULT_NAMESPACE,requiredExtensions:DEFAULT_NAMESPACE,requiredFeatures:DEFAULT_NAMESPACE,requiredFonts:DEFAULT_NAMESPACE,requiredFormats:DEFAULT_NAMESPACE,resource:DEFAULT_NAMESPACE,restart:DEFAULT_NAMESPACE,result:DEFAULT_NAMESPACE,rev:DEFAULT_NAMESPACE,role:DEFAULT_NAMESPACE,rotate:DEFAULT_NAMESPACE,rx:DEFAULT_NAMESPACE,ry:DEFAULT_NAMESPACE,scale:DEFAULT_NAMESPACE,seed:DEFAULT_NAMESPACE,"shape-rendering":DEFAULT_NAMESPACE,slope:DEFAULT_NAMESPACE,snapshotTime:DEFAULT_NAMESPACE,spacing:DEFAULT_NAMESPACE,specularConstant:DEFAULT_NAMESPACE,specularExponent:DEFAULT_NAMESPACE,spreadMethod:DEFAULT_NAMESPACE,startOffset:DEFAULT_NAMESPACE,stdDeviation:DEFAULT_NAMESPACE,stemh:DEFAULT_NAMESPACE,stemv:DEFAULT_NAMESPACE,stitchTiles:DEFAULT_NAMESPACE,"stop-color":DEFAULT_NAMESPACE,"stop-opacity":DEFAULT_NAMESPACE,"strikethrough-position":DEFAULT_NAMESPACE,"strikethrough-thickness":DEFAULT_NAMESPACE,string:DEFAULT_NAMESPACE,stroke:DEFAULT_NAMESPACE,"stroke-dasharray":DEFAULT_NAMESPACE,"stroke-dashoffset":DEFAULT_NAMESPACE,"stroke-linecap":DEFAULT_NAMESPACE,"stroke-linejoin":DEFAULT_NAMESPACE,"stroke-miterlimit":DEFAULT_NAMESPACE,"stroke-opacity":DEFAULT_NAMESPACE,"stroke-width":DEFAULT_NAMESPACE,surfaceScale:DEFAULT_NAMESPACE,syncBehavior:DEFAULT_NAMESPACE,syncBehaviorDefault:DEFAULT_NAMESPACE,syncMaster:DEFAULT_NAMESPACE,syncTolerance:DEFAULT_NAMESPACE,syncToleranceDefault:DEFAULT_NAMESPACE,systemLanguage:DEFAULT_NAMESPACE,tableValues:DEFAULT_NAMESPACE,target:DEFAULT_NAMESPACE,targetX:DEFAULT_NAMESPACE,targetY:DEFAULT_NAMESPACE,"text-anchor":DEFAULT_NAMESPACE,"text-decoration":DEFAULT_NAMESPACE,"text-rendering":DEFAULT_NAMESPACE,textLength:DEFAULT_NAMESPACE,timelineBegin:DEFAULT_NAMESPACE,title:DEFAULT_NAMESPACE,to:DEFAULT_NAMESPACE,transform:DEFAULT_NAMESPACE,transformBehavior:DEFAULT_NAMESPACE,type:DEFAULT_NAMESPACE,"typeof":DEFAULT_NAMESPACE,u1:DEFAULT_NAMESPACE,u2:DEFAULT_NAMESPACE,"underline-position":DEFAULT_NAMESPACE,"underline-thickness":DEFAULT_NAMESPACE,unicode:DEFAULT_NAMESPACE,"unicode-bidi":DEFAULT_NAMESPACE,"unicode-range":DEFAULT_NAMESPACE,"units-per-em":DEFAULT_NAMESPACE,"v-alphabetic":DEFAULT_NAMESPACE,"v-hanging":DEFAULT_NAMESPACE,"v-ideographic":DEFAULT_NAMESPACE,"v-mathematical":DEFAULT_NAMESPACE,values:DEFAULT_NAMESPACE,version:DEFAULT_NAMESPACE,"vert-adv-y":DEFAULT_NAMESPACE,"vert-origin-x":DEFAULT_NAMESPACE,"vert-origin-y":DEFAULT_NAMESPACE,viewBox:DEFAULT_NAMESPACE,viewTarget:DEFAULT_NAMESPACE,visibility:DEFAULT_NAMESPACE,width:DEFAULT_NAMESPACE,widths:DEFAULT_NAMESPACE,"word-spacing":DEFAULT_NAMESPACE,"writing-mode":DEFAULT_NAMESPACE,x:DEFAULT_NAMESPACE,"x-height":DEFAULT_NAMESPACE,x1:DEFAULT_NAMESPACE,x2:DEFAULT_NAMESPACE,xChannelSelector:DEFAULT_NAMESPACE,"xlink:actuate":XLINK_NAMESPACE,"xlink:arcrole":XLINK_NAMESPACE,"xlink:href":XLINK_NAMESPACE,"xlink:role":XLINK_NAMESPACE,"xlink:show":XLINK_NAMESPACE,"xlink:title":XLINK_NAMESPACE,"xlink:type":XLINK_NAMESPACE,"xml:base":XML_NAMESPACE,"xml:id":XML_NAMESPACE,"xml:lang":XML_NAMESPACE,"xml:space":XML_NAMESPACE,y:DEFAULT_NAMESPACE,y1:DEFAULT_NAMESPACE,y2:DEFAULT_NAMESPACE,yChannelSelector:DEFAULT_NAMESPACE,z:DEFAULT_NAMESPACE,zoomAndPan:DEFAULT_NAMESPACE};module.exports=SVGAttributeNamespace;

},{}],91:[function(require,module,exports){
function handleThunk(e,n){var r=e,i=n;return isThunk(n)&&(i=renderThunk(n,e)),isThunk(e)&&(r=renderThunk(e,null)),{a:r,b:i}}function renderThunk(e,n){var r=e.vnode;if(r||(r=e.vnode=e.render(n)),!(isVNode(r)||isVText(r)||isWidget(r)))throw new Error("thunk did not return a valid node");return r}var isVNode=require("./is-vnode"),isVText=require("./is-vtext"),isWidget=require("./is-widget"),isThunk=require("./is-thunk");module.exports=handleThunk;

},{"./is-thunk":92,"./is-vnode":94,"./is-vtext":95,"./is-widget":96}],92:[function(require,module,exports){
function isThunk(n){return n&&"Thunk"===n.type}module.exports=isThunk;

},{}],93:[function(require,module,exports){
function isHook(o){return o&&("function"==typeof o.hook&&!o.hasOwnProperty("hook")||"function"==typeof o.unhook&&!o.hasOwnProperty("unhook"))}module.exports=isHook;

},{}],94:[function(require,module,exports){
function isVirtualNode(e){return e&&"VirtualNode"===e.type&&e.version===version}var version=require("./version");module.exports=isVirtualNode;

},{"./version":97}],95:[function(require,module,exports){
function isVirtualText(e){return e&&"VirtualText"===e.type&&e.version===version}var version=require("./version");module.exports=isVirtualText;

},{"./version":97}],96:[function(require,module,exports){
function isWidget(e){return e&&"Widget"===e.type}module.exports=isWidget;

},{}],97:[function(require,module,exports){
module.exports="2";

},{}],98:[function(require,module,exports){
function VirtualNode(e,i,o,s,r){this.tagName=e,this.properties=i||noProperties,this.children=o||noChildren,this.key=null!=s?String(s):void 0,this.namespace="string"==typeof r?r:null;var t,n=o&&o.length||0,h=0,a=!1,d=!1,u=!1;for(var k in i)if(i.hasOwnProperty(k)){var l=i[k];isVHook(l)&&l.unhook&&(t||(t={}),t[k]=l)}for(var p=0;n>p;p++){var v=o[p];isVNode(v)?(h+=v.count||0,!a&&v.hasWidgets&&(a=!0),!d&&v.hasThunks&&(d=!0),u||!v.hooks&&!v.descendantHooks||(u=!0)):!a&&isWidget(v)?"function"==typeof v.destroy&&(a=!0):!d&&isThunk(v)&&(d=!0)}this.count=n+h,this.hasWidgets=a,this.hasThunks=d,this.hooks=t,this.descendantHooks=u}var version=require("./version"),isVNode=require("./is-vnode"),isWidget=require("./is-widget"),isThunk=require("./is-thunk"),isVHook=require("./is-vhook");module.exports=VirtualNode;var noProperties={},noChildren=[];VirtualNode.prototype.version=version,VirtualNode.prototype.type="VirtualNode";

},{"./is-thunk":92,"./is-vhook":93,"./is-vnode":94,"./is-widget":96,"./version":97}],99:[function(require,module,exports){
function VirtualPatch(t,a,r){this.type=Number(t),this.vNode=a,this.patch=r}var version=require("./version");VirtualPatch.NONE=0,VirtualPatch.VTEXT=1,VirtualPatch.VNODE=2,VirtualPatch.WIDGET=3,VirtualPatch.PROPS=4,VirtualPatch.ORDER=5,VirtualPatch.INSERT=6,VirtualPatch.REMOVE=7,VirtualPatch.THUNK=8,module.exports=VirtualPatch,VirtualPatch.prototype.version=version,VirtualPatch.prototype.type="VirtualPatch";

},{"./version":97}],100:[function(require,module,exports){
function VirtualText(t){this.text=String(t)}var version=require("./version");module.exports=VirtualText,VirtualText.prototype.version=version,VirtualText.prototype.type="VirtualText";

},{"./version":97}],101:[function(require,module,exports){
function diffProps(o,t){var e;for(var r in o){r in t||(e=e||{},e[r]=void 0);var i=o[r],f=t[r];if(i!==f)if(isObject(i)&&isObject(f))if(getPrototype(f)!==getPrototype(i))e=e||{},e[r]=f;else if(isHook(f))e=e||{},e[r]=f;else{var s=diffProps(i,f);s&&(e=e||{},e[r]=s)}else e=e||{},e[r]=f}for(var n in t)n in o||(e=e||{},e[n]=t[n]);return e}function getPrototype(o){return Object.getPrototypeOf?Object.getPrototypeOf(o):o.__proto__?o.__proto__:o.constructor?o.constructor.prototype:void 0}var isObject=require("is-object"),isHook=require("../vnode/is-vhook");module.exports=diffProps;

},{"../vnode/is-vhook":93,"is-object":58}],102:[function(require,module,exports){
function diff(e,n){var t={a:e};return walk(e,n,t,0),t}function walk(e,n,t,r){if(e!==n){var h=t[r],a=!1;if(isThunk(e)||isThunk(n))thunks(e,n,t,r);else if(null==n)isWidget(e)||(clearState(e,t,r),h=t[r]),h=appendPatch(h,new VPatch(VPatch.REMOVE,e,n));else if(isVNode(n))if(isVNode(e))if(e.tagName===n.tagName&&e.namespace===n.namespace&&e.key===n.key){var i=diffProps(e.properties,n.properties);i&&(h=appendPatch(h,new VPatch(VPatch.PROPS,e,i))),h=diffChildren(e,n,t,h,r)}else h=appendPatch(h,new VPatch(VPatch.VNODE,e,n)),a=!0;else h=appendPatch(h,new VPatch(VPatch.VNODE,e,n)),a=!0;else isVText(n)?isVText(e)?e.text!==n.text&&(h=appendPatch(h,new VPatch(VPatch.VTEXT,e,n))):(h=appendPatch(h,new VPatch(VPatch.VTEXT,e,n)),a=!0):isWidget(n)&&(isWidget(e)||(a=!0),h=appendPatch(h,new VPatch(VPatch.WIDGET,e,n)));h&&(t[r]=h),a&&clearState(e,t,r)}}function diffChildren(e,n,t,r,h){for(var a=e.children,i=reorder(a,n.children),s=i.children,o=a.length,u=s.length,c=o>u?o:u,d=0;c>d;d++){var l=a[d],f=s[d];h+=1,l?walk(l,f,t,h):f&&(r=appendPatch(r,new VPatch(VPatch.INSERT,null,f))),isVNode(l)&&l.count&&(h+=l.count)}return i.moves&&(r=appendPatch(r,new VPatch(VPatch.ORDER,e,i.moves))),r}function clearState(e,n,t){unhook(e,n,t),destroyWidgets(e,n,t)}function destroyWidgets(e,n,t){if(isWidget(e))"function"==typeof e.destroy&&(n[t]=appendPatch(n[t],new VPatch(VPatch.REMOVE,e,null)));else if(isVNode(e)&&(e.hasWidgets||e.hasThunks))for(var r=e.children,h=r.length,a=0;h>a;a++){var i=r[a];t+=1,destroyWidgets(i,n,t),isVNode(i)&&i.count&&(t+=i.count)}else isThunk(e)&&thunks(e,null,n,t)}function thunks(e,n,t,r){var h=handleThunk(e,n),a=diff(h.a,h.b);hasPatches(a)&&(t[r]=new VPatch(VPatch.THUNK,null,a))}function hasPatches(e){for(var n in e)if("a"!==n)return!0;return!1}function unhook(e,n,t){if(isVNode(e)){if(e.hooks&&(n[t]=appendPatch(n[t],new VPatch(VPatch.PROPS,e,undefinedKeys(e.hooks)))),e.descendantHooks||e.hasThunks)for(var r=e.children,h=r.length,a=0;h>a;a++){var i=r[a];t+=1,unhook(i,n,t),isVNode(i)&&i.count&&(t+=i.count)}}else isThunk(e)&&thunks(e,null,n,t)}function undefinedKeys(e){var n={};for(var t in e)n[t]=void 0;return n}function reorder(e,n){var t=keyIndex(n),r=t.keys,h=t.free;if(h.length===n.length)return{children:n,moves:null};var a=keyIndex(e),i=a.keys,s=a.free;if(s.length===e.length)return{children:n,moves:null};for(var o=[],u=0,c=h.length,d=0,l=0;l<e.length;l++){var f,k=e[l];k.key?r.hasOwnProperty(k.key)?(f=r[k.key],o.push(n[f])):(f=l-d++,o.push(null)):c>u?(f=h[u++],o.push(n[f])):(f=l-d++,o.push(null))}for(var p=u>=h.length?n.length:h[u],P=0;P<n.length;P++){var v=n[P];v.key?i.hasOwnProperty(v.key)||o.push(v):P>=p&&o.push(v)}for(var y,V=o.slice(),g=0,T=[],m=[],w=0;w<n.length;){var N=n[w];for(y=V[g];null===y&&V.length;)T.push(remove(V,g,null)),y=V[g];y&&y.key===N.key?(g++,w++):N.key?(y&&y.key&&r[y.key]!==w+1?(T.push(remove(V,g,y.key)),y=V[g],y&&y.key===N.key?g++:m.push({key:N.key,to:w})):m.push({key:N.key,to:w}),w++):y&&y.key&&T.push(remove(V,g,y.key))}for(;g<V.length;)y=V[g],T.push(remove(V,g,y&&y.key));return T.length!==d||m.length?{children:o,moves:{removes:T,inserts:m}}:{children:o,moves:null}}function remove(e,n,t){return e.splice(n,1),{from:n,key:t}}function keyIndex(e){for(var n={},t=[],r=e.length,h=0;r>h;h++){var a=e[h];a.key?n[a.key]=h:t.push(h)}return{keys:n,free:t}}function appendPatch(e,n){return e?(isArray(e)?e.push(n):e=[e,n],e):n}var isArray=require("x-is-array"),VPatch=require("../vnode/vpatch"),isVNode=require("../vnode/is-vnode"),isVText=require("../vnode/is-vtext"),isWidget=require("../vnode/is-widget"),isThunk=require("../vnode/is-thunk"),handleThunk=require("../vnode/handle-thunk"),diffProps=require("./diff-props");module.exports=diff;

},{"../vnode/handle-thunk":91,"../vnode/is-thunk":92,"../vnode/is-vnode":94,"../vnode/is-vtext":95,"../vnode/is-widget":96,"../vnode/vpatch":99,"./diff-props":101,"x-is-array":104}],103:[function(require,module,exports){
(function (process){
"use strict";var warning=function(){};"production"!==process.env.NODE_ENV&&(warning=function(r,n,e){var o=arguments.length;e=new Array(o>2?o-2:0);for(var t=2;o>t;t++)e[t-2]=arguments[t];if(void 0===n)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(n.length<10||/^[s\W]*$/.test(n))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+n);if(!r){var i=0,a="Warning: "+n.replace(/%s/g,function(){return e[i++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(s){}}}),module.exports=warning;

}).call(this,require('_process'))

},{"_process":15}],104:[function(require,module,exports){
function isArray(r){return"[object Array]"===toString.call(r)}var nativeIsArray=Array.isArray,toString=Object.prototype.toString;module.exports=nativeIsArray||isArray;

},{}],105:[function(require,module,exports){
function extend(){for(var r={},e=0;e<arguments.length;e++){var t=arguments[e];for(var n in t)hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;

},{}],106:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _core=require("@cycle/core"),_dom=require("@cycle/dom"),_cyclicHistory=require("cyclic-history"),_http=require("@cycle/http"),_cyclicRouter=require("cyclic-router"),_history=require("history"),_stateDriver=require("./state-driver"),_main=require("./main"),_main2=_interopRequireDefault(_main),_polymer=require("./polymer"),_polymer2=_interopRequireDefault(_polymer);app.addEventListener("dom-change",function(){var e={DOM:(0,_dom.makeDOMDriver)("#application"),HTTP:(0,_http.makeHTTPDriver)(),router:(0,_cyclicRouter.makeRouterDriver)((0,_cyclicHistory.makeHistoryDriver)((0,_history.createHashHistory)())),state$:(0,_stateDriver.makeStateDriver)()};(0,_core.run)(_main2["default"],e)});

},{"./main":120,"./polymer":121,"./state-driver":122,"@cycle/core":1,"@cycle/dom":2,"@cycle/http":11,"cyclic-history":17,"cyclic-router":24,"history":49}],107:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function ContentRouter(e){var t=e.router,a=e.state$,n=t.define(routes),r=n.path$,u=n.value$,p=r.zip(u,function(n,r){var u=r(_extends({},e,{router:t.path(n),state$:a.take(1)}));return{DOM:u.DOM,state$:u.state$}});return{DOM:p.flatMapLatest(function(e){return e.DOM}),state$:p.flatMapLatest(function(e){return e.state$}),path$:r}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_homeIndex=require("../../pages/home/home-index"),_homeIndex2=_interopRequireDefault(_homeIndex),_page1Index=require("../../pages/page1/page1-index"),_page1Index2=_interopRequireDefault(_page1Index),_page2Index=require("../../pages/page2/page2-index"),_page2Index2=_interopRequireDefault(_page2Index),_page404Index=require("../../pages/page404/page404-index"),_page404Index2=_interopRequireDefault(_page404Index),routes={"/":_homeIndex2["default"],"/page1":_page1Index2["default"],"/page2":_page2Index2["default"],"*":_page404Index2["default"]};exports["default"]=ContentRouter;

},{"../../pages/home/home-index":110,"../../pages/page1/page1-index":114,"../../pages/page2/page2-index":116,"../../pages/page404/page404-index":118}],108:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _navbarView=require("./navbar-view"),_navbarView2=_interopRequireDefault(_navbarView),navbar=function(e,r){var a=(0,_navbarView2["default"])(e,r);return{DOM:a}};exports["default"]=navbar;

},{"./navbar-view":109}],109:[function(require,module,exports){
"use strict";function view(e,t){var r=e.router.createHref,o=r("/"),n=r("/page1"),a=r("/page2");return t.map(function(){return(0,_dom.div)([(0,_dom.nav)(".nav",[(0,_dom.ul)(".nav-list",[(0,_dom.li)(".nav-item .link",[(0,_dom.a)(".pure-button",{href:o},["Home"])]),(0,_dom.li)(".nav-item .link",[(0,_dom.a)(".pure-button",{href:n},["Page 1"])]),(0,_dom.li)(".nav-item .link .testlink",[(0,_dom.a)(".pure-button",{href:a},["Page 2"])])])])])})}Object.defineProperty(exports,"__esModule",{value:!0});var _dom=require("@cycle/dom");exports["default"]=view;

},{"@cycle/dom":2}],110:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_homeView=require("./home-view"),_homeView2=_interopRequireDefault(_homeView),_homeIntent=require("./home-intent"),_homeIntent2=_interopRequireDefault(_homeIntent),_homeModel=require("./home-model"),_homeModel2=_interopRequireDefault(_homeModel),Home=function(e){var t=e.state$,o=(0,_homeIntent2["default"])(e),r=(0,_homeModel2["default"])(_extends({},o,{state$:t}));return{DOM:(0,_homeView2["default"])(r),state$:r}};exports["default"]=Home;

},{"./home-intent":111,"./home-model":112,"./home-view":113}],111:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var homeIntent=function(e){return{inc$:e.DOM.select(".increment").events("click").map(function(){return 1}),dec$:e.DOM.select(".decrement").events("click").map(function(){return-1})}};exports["default"]=homeIntent;

},{}],112:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _rx=require("rx"),_rx2=_interopRequireDefault(_rx),homeModel=function(e){var r=e.inc$,t=e.dec$,u=e.state$;return _rx2["default"].Observable.merge(u.take(1).map(function(e){var r=e.counter;return parseFloat(r)}),r,t).scan(function(e,r){return e+r}).map(function(e){return{counter:e}})};exports["default"]=homeModel;

},{"rx":64}],113:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _dom=require("@cycle/dom"),view=function(e){return e.map(function(e){var r=e.counter;return(0,_dom.div)(".homepage",[(0,_dom.div)([(0,_dom.div)([(0,_dom.h)("p","Counter: "+r)]),(0,_dom.h)("paper-input.username",{label:"Username"}),(0,_dom.h)("paper-input.password",{label:"Password",type:"password"}),(0,_dom.h)("paper-button.login",{raised:"true"},"Login")])])})};exports["default"]=view;

},{"@cycle/dom":2}],114:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _rx=require("rx"),_rx2=_interopRequireDefault(_rx),_page1View=require("./page1-view"),_page1View2=_interopRequireDefault(_page1View),Page1=function(e){var r=e.state$,t=(0,_page1View2["default"])(r);return{DOM:_rx2["default"].Observable.just(t),state$:r}};exports["default"]=Page1;

},{"./page1-view":115,"rx":64}],115:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _dom=require("@cycle/dom"),view=function(e){return e.map(function(e){var o=e.counter;return(0,_dom.div)(".page1",[(0,_dom.h1)(".content-subhead",["Page 1"]),(0,_dom.h1)(["This is Page 1"]),(0,_dom.h2)(["Counter: "+o])])})};exports["default"]=view;

},{"@cycle/dom":2}],116:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _rx=require("rx"),_rx2=_interopRequireDefault(_rx),_page2View=require("./page2-view"),_page2View2=_interopRequireDefault(_page2View),Page2=function(e){var r=e.state$,t=(0,_page2View2["default"])(r);return{DOM:_rx2["default"].Observable.just(t),state$:r}};exports["default"]=Page2;

},{"./page2-view":117,"rx":64}],117:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _dom=require("@cycle/dom"),view=function(e){return e.map(function(e){var o=e.counter;return(0,_dom.div)(".page2",[(0,_dom.h1)(".content-subhead",["Page 2"]),(0,_dom.h1)(["This is the second Page"]),(0,_dom.h2)(["Counter: "+o])])})};exports["default"]=view;

},{"@cycle/dom":2}],118:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _rx=require("rx"),_rx2=_interopRequireDefault(_rx),_page404View=require("./page404-view"),_page404View2=_interopRequireDefault(_page404View),Page404=function(){var e=_rx2["default"].Observable.just((0,_page404View2["default"])());return{DOM:e}};exports["default"]=Page404;

},{"./page404-view":119,"rx":64}],119:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _dom=require("@cycle/dom"),view=function(){return(0,_dom.div)([(0,_dom.h1)(".content-subhead",["404 error"]),(0,_dom.h1)("Page could not be found")])};exports["default"]=view;

},{"@cycle/dom":2}],120:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function main(e){var n=(0,_contentRouterIndex2["default"])(e),t=n.path$,r=n.state$,o=((0,_navbarIndex2["default"])(e,t),e.DOM.select(".login").events("click").debounce(500).flatMap(function(n){return _rx.Observable.zip(e.DOM.select(".username").observable.flatMap(function(e){return e}).map(function(e){return e.value}).take(1),e.DOM.select(".password").observable.flatMap(function(e){return e}).map(function(e){return e.value}).take(1),function(e,n){return{username:e,password:n}})}).doOnNext(function(e){return console.log(e)}).filter(function(e){return e.username.length>0}).filter(function(e){return e.password.length>0}).map(function(e){return{url:"https://api.robinhood.com/api-token-auth/",method:"POST",field:{username:e.username,password:e.password},headers:{"X-Robinhood-API-Version":"1.60.1","User-Agent":"okhttp/3.2.0"}}})),u=e.HTTP.flatMap(function(e){return e}).map(function(e){return e.body.token}).startWith("").map(function(e){return(0,_dom.h1)(".token",e)}).merge(n.DOM);return{DOM:u,HTTP:o,state$:r.startWith({counter:0})}}Object.defineProperty(exports,"__esModule",{value:!0});var _rx=require("rx"),_navbarIndex=require("./dialogue/components/navbar/navbar-index"),_navbarIndex2=_interopRequireDefault(_navbarIndex),_contentRouterIndex=require("./dialogue/components/content-router/content-router-index"),_contentRouterIndex2=_interopRequireDefault(_contentRouterIndex),_dom=require("@cycle/dom"),view=function(e,n){return(0,_dom.div)("#layout",[(0,_dom.div)((0,_dom.div)(".header",[e])),(0,_dom.div)([n])])};exports["default"]=main;

},{"./dialogue/components/content-router/content-router-index":107,"./dialogue/components/navbar/navbar-index":108,"@cycle/dom":2,"rx":64}],121:[function(require,module,exports){
"use strict";!function(e){var o=e.querySelector("#app");o.baseUrl="/",""===window.location.port,o.displayInstalledToast=function(){Polymer.dom(e).querySelector("platinum-sw-cache").disabled||Polymer.dom(e).querySelector("#caching-complete").show()},o.addEventListener("dom-change",function(){}),window.addEventListener("WebComponentsReady",function(){}),window.addEventListener("paper-header-transform",function(o){var a=Polymer.dom(e).querySelector("#mainToolbar .app-name"),r=Polymer.dom(e).querySelector("#mainToolbar .middle-container"),n=Polymer.dom(e).querySelector("#mainToolbar .bottom-container"),t=o.detail,l=t.height-t.condensedHeight,c=Math.min(1,t.y/l),i=.5,m=l-t.y,s=l/(1-i),d=Math.max(i,m/s+i),y=1-c;Polymer.Base.transform("translate3d(0,"+100*c+"%,0)",r),Polymer.Base.transform("scale("+y+") translateZ(0)",n),Polymer.Base.transform("scale("+d+") translateZ(0)",a)}),o.scrollPageToTop=function(){o.$.headerPanelMain.scrollToTop(!0)},o.closeDrawer=function(){o.$.paperDrawerPanel.closeDrawer()}}(document);

},{}],122:[function(require,module,exports){
"use strict";function makeStateDriver(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return function(t){var o=t.scan(function(e,t){if(!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t)))throw new TypeError("state must be an object");return Object.assign(e,t)},e).replay(null,1);return o.connect(),o}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeStateDriver=makeStateDriver;

},{}]},{},[106])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9AY3ljbGUvY29yZS9saWIvY3ljbGUuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9AY3ljbGUvZG9tL2xpYi9jeWNsZS1kb20uanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9AY3ljbGUvZG9tL2xpYi9mcm9tZXZlbnQuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9AY3ljbGUvZG9tL2xpYi9tb2NrLWRvbS1zb3VyY2UuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9AY3ljbGUvZG9tL2xpYi9yZW5kZXItZG9tLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvQGN5Y2xlL2RvbS9saWIvcmVuZGVyLWh0bWwuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9AY3ljbGUvZG9tL2xpYi90cmFuc3Bvc2l0aW9uLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvQGN5Y2xlL2RvbS9saWIvdmlydHVhbC1oeXBlcnNjcmlwdC1zdmcuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9AY3ljbGUvZG9tL2xpYi92aXJ0dWFsLWh5cGVyc2NyaXB0LmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvQGN5Y2xlL2h0dHAvbGliL2h0dHAtZHJpdmVyLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvQGN5Y2xlL2h0dHAvbGliL2luZGV4LmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvQGN5Y2xlL2h0dHAvbm9kZV9tb2R1bGVzL3N1cGVyYWdlbnQvbGliL2NsaWVudC5qcyIsIm5vZGVfbW9kdWxlcy9icm93c2VyLXJlc29sdmUvZW1wdHkuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9icm93c2VyLXNwbGl0L2luZGV4LmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvY29tcG9uZW50LWVtaXR0ZXIvaW5kZXguanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9jeWNsaWMtaGlzdG9yeS9saWIvaW5kZXguanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9jeWNsaWMtaGlzdG9yeS9saWIvbWFrZUhpc3RvcnlEcml2ZXIuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9jeWNsaWMtaGlzdG9yeS9saWIvc2VydmVySGlzdG9yeS5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL2N5Y2xpYy1oaXN0b3J5L2xpYi91dGlsLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvY3ljbGljLXJvdXRlci9saWIvYXBpLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvY3ljbGljLXJvdXRlci9saWIvY3JlYXRlUm91dGVyLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvY3ljbGljLXJvdXRlci9saWIvZGVmaW5pdGlvblJlc29sdmVyLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvY3ljbGljLXJvdXRlci9saWIvaW5kZXguanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9jeWNsaWMtcm91dGVyL2xpYi9tYWtlUm91dGVyRHJpdmVyLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvY3ljbGljLXJvdXRlci9saWIvcGF0aEZpbHRlci5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL2N5Y2xpYy1yb3V0ZXIvbGliL3V0aWwuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9kZWVwLWVxdWFsL2luZGV4LmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvZGVlcC1lcXVhbC9saWIvaXNfYXJndW1lbnRzLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvZGVlcC1lcXVhbC9saWIva2V5cy5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL2VzY2FwZS1odG1sL2luZGV4LmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvZXYtc3RvcmUvaW5kZXguanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9nbG9iYWwvZG9jdW1lbnQuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9BY3Rpb25zLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvQXN5bmNVdGlscy5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL2hpc3RvcnkvbGliL0RPTVN0YXRlU3RvcmFnZS5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL2hpc3RvcnkvbGliL0RPTVV0aWxzLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9QYXRoVXRpbHMuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9jcmVhdGVCcm93c2VySGlzdG9yeS5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL2hpc3RvcnkvbGliL2NyZWF0ZURPTUhpc3RvcnkuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9jcmVhdGVIYXNoSGlzdG9yeS5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL2hpc3RvcnkvbGliL2NyZWF0ZUhpc3RvcnkuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9jcmVhdGVMb2NhdGlvbi5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL2hpc3RvcnkvbGliL2NyZWF0ZU1lbW9yeUhpc3RvcnkuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9kZXByZWNhdGUuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9lbmFibGVCZWZvcmVVbmxvYWQuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9lbmFibGVRdWVyaWVzLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvaW5kZXguanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9ydW5UcmFuc2l0aW9uSG9vay5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL2hpc3RvcnkvbGliL3VzZUJhc2VuYW1lLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvdXNlQmVmb3JlVW5sb2FkLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvdXNlUXVlcmllcy5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL2h5cGVyc2NyaXB0LWhlbHBlcnMvZGlzdC9pbmRleC5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL2luZGl2aWR1YWwvaW5kZXguanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9pbmRpdmlkdWFsL29uZS12ZXJzaW9uLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvaW52YXJpYW50L2Jyb3dzZXIuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9pcy1vYmplY3QvaW5kZXguanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9sb3dlci1jYXNlL2xvd2VyLWNhc2UuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9tYXRjaGVzLXNlbGVjdG9yL2luZGV4LmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvcGFyYW0tY2FzZS9wYXJhbS1jYXNlLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvcXVlcnktc3RyaW5nL2luZGV4LmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvcmVkdWNlLWNvbXBvbmVudC9pbmRleC5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL3J4L2Rpc3QvcnguYWxsLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvc2VudGVuY2UtY2FzZS9zZW50ZW5jZS1jYXNlLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvc2VudGVuY2UtY2FzZS92ZW5kb3IvY2FtZWwtY2FzZS1yZWdleHAuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9zZW50ZW5jZS1jYXNlL3ZlbmRvci9ub24td29yZC1yZWdleHAuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9zZW50ZW5jZS1jYXNlL3ZlbmRvci90cmFpbGluZy1kaWdpdC1yZWdleHAuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy9zdHJpY3QtdXJpLWVuY29kZS9pbmRleC5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL3N3aXRjaC1wYXRoL2xpYi9pbmRleC5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL3Zkb20tcGFyc2VyL2luZGV4LmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvdmRvbS1wYXJzZXIvbmFtZXNwYWNlLW1hcC5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL3Zkb20tcGFyc2VyL3Byb3BlcnR5LW1hcC5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL3Zkb20tdG8taHRtbC9jcmVhdGUtYXR0cmlidXRlLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvdmRvbS10by1odG1sL2luZGV4LmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvdmRvbS10by1odG1sL3Byb3BlcnR5LWNvbmZpZy5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL3Zkb20tdG8taHRtbC92b2lkLWVsZW1lbnRzLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvdmlydHVhbC1kb20vZGlmZi5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL3ZpcnR1YWwtZG9tL3BhdGNoLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvdmlydHVhbC1kb20vdmRvbS9hcHBseS1wcm9wZXJ0aWVzLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvdmlydHVhbC1kb20vdmRvbS9jcmVhdGUtZWxlbWVudC5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL3ZpcnR1YWwtZG9tL3Zkb20vZG9tLWluZGV4LmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvdmlydHVhbC1kb20vdmRvbS9wYXRjaC1vcC5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL3ZpcnR1YWwtZG9tL3Zkb20vcGF0Y2guanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy92aXJ0dWFsLWRvbS92ZG9tL3VwZGF0ZS13aWRnZXQuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy92aXJ0dWFsLWRvbS92aXJ0dWFsLWh5cGVyc2NyaXB0L2hvb2tzL2F0dHJpYnV0ZS1ob29rLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvdmlydHVhbC1kb20vdmlydHVhbC1oeXBlcnNjcmlwdC9ob29rcy9ldi1ob29rLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvdmlydHVhbC1kb20vdmlydHVhbC1oeXBlcnNjcmlwdC9ob29rcy9zb2Z0LXNldC1ob29rLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvdmlydHVhbC1kb20vdmlydHVhbC1oeXBlcnNjcmlwdC9wYXJzZS10YWcuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy92aXJ0dWFsLWRvbS92aXJ0dWFsLWh5cGVyc2NyaXB0L3N2Zy1hdHRyaWJ1dGUtbmFtZXNwYWNlLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvdmlydHVhbC1kb20vdm5vZGUvaGFuZGxlLXRodW5rLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvdmlydHVhbC1kb20vdm5vZGUvaXMtdGh1bmsuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy92aXJ0dWFsLWRvbS92bm9kZS9pcy12aG9vay5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL3ZpcnR1YWwtZG9tL3Zub2RlL2lzLXZub2RlLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvdmlydHVhbC1kb20vdm5vZGUvaXMtdnRleHQuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy92aXJ0dWFsLWRvbS92bm9kZS9pcy13aWRnZXQuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy92aXJ0dWFsLWRvbS92bm9kZS92ZXJzaW9uLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvdmlydHVhbC1kb20vdm5vZGUvdm5vZGUuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy92aXJ0dWFsLWRvbS92bm9kZS92cGF0Y2guanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy92aXJ0dWFsLWRvbS92bm9kZS92dGV4dC5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL3ZpcnR1YWwtZG9tL3Z0cmVlL2RpZmYtcHJvcHMuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL25vZGVfbW9kdWxlcy92aXJ0dWFsLWRvbS92dHJlZS9kaWZmLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMvd2FybmluZy9icm93c2VyLmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9ub2RlX21vZHVsZXMveC1pcy1hcnJheS9pbmRleC5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvbm9kZV9tb2R1bGVzL3h0ZW5kL2ltbXV0YWJsZS5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvc3JjL2FwcC5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvc3JjL2RpYWxvZ3VlL2NvbXBvbmVudHMvY29udGVudC1yb3V0ZXIvY29udGVudC1yb3V0ZXItaW5kZXguanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL3NyYy9kaWFsb2d1ZS9jb21wb25lbnRzL25hdmJhci9uYXZiYXItaW5kZXguanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL3NyYy9kaWFsb2d1ZS9jb21wb25lbnRzL25hdmJhci9uYXZiYXItdmlldy5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvc3JjL2RpYWxvZ3VlL3BhZ2VzL2hvbWUvaG9tZS1pbmRleC5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvc3JjL2RpYWxvZ3VlL3BhZ2VzL2hvbWUvaG9tZS1pbnRlbnQuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL3NyYy9kaWFsb2d1ZS9wYWdlcy9ob21lL2hvbWUtbW9kZWwuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL3NyYy9kaWFsb2d1ZS9wYWdlcy9ob21lL2hvbWUtdmlldy5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvc3JjL2RpYWxvZ3VlL3BhZ2VzL3BhZ2UxL3BhZ2UxLWluZGV4LmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9zcmMvZGlhbG9ndWUvcGFnZXMvcGFnZTEvcGFnZTEtdmlldy5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvc3JjL2RpYWxvZ3VlL3BhZ2VzL3BhZ2UyL3BhZ2UyLWluZGV4LmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9zcmMvZGlhbG9ndWUvcGFnZXMvcGFnZTIvcGFnZTItdmlldy5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvc3JjL2RpYWxvZ3VlL3BhZ2VzL3BhZ2U0MDQvcGFnZTQwNC1pbmRleC5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvc3JjL2RpYWxvZ3VlL3BhZ2VzL3BhZ2U0MDQvcGFnZTQwNC12aWV3LmpzIiwiL1VzZXJzL2ZlbGlwZV9saW1hL3Byai9vc3Mvcm9iaW5ob29kLXdlYi9zcmMvbWFpbi5qcyIsIi9Vc2Vycy9mZWxpcGVfbGltYS9wcmovb3NzL3JvYmluaG9vZC13ZWIvc3JjL3BvbHltZXIuanMiLCIvVXNlcnMvZmVsaXBlX2xpbWEvcHJqL29zcy9yb2Jpbmhvb2Qtd2ViL3NyYy9zdGF0ZS1kcml2ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxZQUlBLFNBQVMsaUJBQWdCLEdBR3ZCLElBQUssR0FGRCxNQUNBLEVBQU8sT0FBTyxLQUFLLEdBQ2QsRUFBSSxFQUFHLEVBQUksRUFBSyxPQUFRLElBQy9CLEVBQVksRUFBSyxJQUFNLEdBQUksSUFBRyxjQUFjLEVBRTlDLE9BQU8sR0FHVCxRQUFTLGFBQVksRUFBUyxHQUc1QixJQUFLLEdBRkQsTUFDQSxFQUFPLE9BQU8sS0FBSyxHQUNkLEVBQUksRUFBRyxFQUFJLEVBQUssT0FBUSxJQUFLLENBQ3BDLEdBQUksR0FBUSxFQUFLLEVBQ2pCLEdBQVEsR0FBUyxFQUFRLEdBQU8sRUFBWSxHQUFRLEdBRXRELE1BQU8sR0FHVCxRQUFTLHNCQUFxQixFQUFPLEdBQ25DLE1BQU8sUUFBTyxlQUFlLEVBQU8sV0FDbEMsTUFBTyxXQUNMLEVBQXdCLGFBSzlC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eUJsQixpQkFBQSxhQUFtQyxxQkFJbkMsaUJBQUEscUJBQUEscUJBUUEsaUJBQUEseUJBQUEsU0FBa0QsTUFDNUMsR0FBVSxRQUFBLElBQUEsR0FBQSxjQUQ4QywwQkFFeEQsRUFBa0IsUUFBQSxJQUFBLEdBQUEsY0FGc0Msa0NBR3hELEVBQWtCLFFBQUEsSUFBQSxHQUFBLGNBSHNDLGtDQUl4RCxFQUFTLEVBSitDLE9BS3hELEVBQWEsRUFBQSxPQUFnQixFQUwyQixnQkFNeEQsRUFBUyxLQUFBLElBQUEsRUFBWSxFQUFBLEVBTm1DLEdBUXhELEVBUndELEdBU3hELEVBQVksRUFBYSxFQVQrQixFQVV4RCxFQUFXLEdBQWMsRUFWK0IsR0FXeEQsRUFBYyxLQUFBLElBQUEsRUFBeUIsRUFBQSxFQVhpQixHQVl4RCxFQUFjLEVBWjBDLFVBZTVELEtBQUEsVUFBdUIsaUJBQW1CLElBQUEsRUFBbkIsT0FmcUMsV0FrQjVELEtBQUEsVUFBdUIsU0FBQSxFQUFBLGtCQWxCcUMsV0FxQjVELEtBQUEsVUFBdUIsU0FBQSxFQUFBLGtCQTFEUCxPQThEbEIsZ0JBQUEsYUFDRSxFQUFBLGdCQUFBLGFBL0RnQixNQWtFbEIsWUFBQSxhQUNFLEVBQUEsaUJBbkVKLGdCQUFBOzs7WUNUQSxTQUFBLHNCQUF5QixHQUFBLFVBQUEsUUFBQSxHQUFBLFNBQUEsVUFBQSxNQUFhLFVBQUksbUJBQ2pDLE1BQ0MsR0FBQSxFQUFVLEtBQUEsU0FDUixFQUFBLE9BQ0EsR0FBQSxZQUFTLG1CQUFBLEdBQUEsWUFBQSxRQUFBLFNBQ0wsSUFBQSxXQURSLGlDQUdPLFFBQUEsT0FBQSxFQUpILElBRFEsR0FBQSxPQUFBLEtBRGlCLFlBQUEsVUFEckMsa1FBZVEsZ0JBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBSeCA9IHJlcXVpcmUoXCJyeFwiKTtcblxuZnVuY3Rpb24gbWFrZVNpbmtQcm94aWVzKGRyaXZlcnMpIHtcbiAgdmFyIHNpbmtQcm94aWVzID0ge307XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZHJpdmVycyk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHNpbmtQcm94aWVzW2tleXNbaV1dID0gbmV3IFJ4LlJlcGxheVN1YmplY3QoMSk7XG4gIH1cbiAgcmV0dXJuIHNpbmtQcm94aWVzO1xufVxuXG5mdW5jdGlvbiBjYWxsRHJpdmVycyhkcml2ZXJzLCBzaW5rUHJveGllcykge1xuICB2YXIgc291cmNlcyA9IHt9O1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRyaXZlcnMpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgX25hbWUgPSBrZXlzW2ldO1xuICAgIHNvdXJjZXNbX25hbWVdID0gZHJpdmVyc1tfbmFtZV0oc2lua1Byb3hpZXNbX25hbWVdLCBfbmFtZSk7XG4gIH1cbiAgcmV0dXJuIHNvdXJjZXM7XG59XG5cbmZ1bmN0aW9uIGF0dGFjaERpc3Bvc2VUb1NpbmtzKHNpbmtzLCByZXBsaWNhdGlvblN1YnNjcmlwdGlvbikge1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHNpbmtzLCBcImRpc3Bvc2VcIiwge1xuICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSgpIHtcbiAgICAgIHJlcGxpY2F0aW9uU3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBtYWtlRGlzcG9zZVNvdXJjZXMoc291cmNlcykge1xuICByZXR1cm4gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZXMpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNba2V5c1tpXV07XG4gICAgICBpZiAodHlwZW9mIHNvdXJjZS5kaXNwb3NlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgc291cmNlLmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dGFjaERpc3Bvc2VUb1NvdXJjZXMoc291cmNlcykge1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHNvdXJjZXMsIFwiZGlzcG9zZVwiLCB7XG4gICAgdmFsdWU6IG1ha2VEaXNwb3NlU291cmNlcyhzb3VyY2VzKVxuICB9KTtcbn1cblxudmFyIGxvZ1RvQ29uc29sZUVycm9yID0gdHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZS5lcnJvciA/IGZ1bmN0aW9uIChlcnJvcikge1xuICBjb25zb2xlLmVycm9yKGVycm9yLnN0YWNrIHx8IGVycm9yKTtcbn0gOiBGdW5jdGlvbi5wcm90b3R5cGU7XG5cbmZ1bmN0aW9uIHJlcGxpY2F0ZU1hbnkob2JzZXJ2YWJsZXMsIHN1YmplY3RzKSB7XG4gIHJldHVybiBSeC5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFJ4LkNvbXBvc2l0ZURpc3Bvc2FibGUoKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JzZXJ2YWJsZXMpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBfbmFtZTIgPSBrZXlzW2ldO1xuICAgICAgICBpZiAoc3ViamVjdHMuaGFzT3duUHJvcGVydHkoX25hbWUyKSAmJiAhc3ViamVjdHNbX25hbWUyXS5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChvYnNlcnZhYmxlc1tfbmFtZTJdLmRvT25FcnJvcihsb2dUb0NvbnNvbGVFcnJvcikuc3Vic2NyaWJlKHN1YmplY3RzW19uYW1lMl0uYXNPYnNlcnZlcigpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9ic2VydmVyLm9uTmV4dChzdWJzY3JpcHRpb24pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICBzdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhzdWJqZWN0cyk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc3ViamVjdHNba2V5c1tpXV0uZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBydW4obWFpbiwgZHJpdmVycykge1xuICBpZiAodHlwZW9mIG1haW4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkZpcnN0IGFyZ3VtZW50IGdpdmVuIHRvIEN5Y2xlLnJ1bigpIG11c3QgYmUgdGhlICdtYWluJyBcIiArIFwiZnVuY3Rpb24uXCIpO1xuICB9XG4gIGlmICh0eXBlb2YgZHJpdmVycyAhPT0gXCJvYmplY3RcIiB8fCBkcml2ZXJzID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU2Vjb25kIGFyZ3VtZW50IGdpdmVuIHRvIEN5Y2xlLnJ1bigpIG11c3QgYmUgYW4gb2JqZWN0IFwiICsgXCJ3aXRoIGRyaXZlciBmdW5jdGlvbnMgYXMgcHJvcGVydGllcy5cIik7XG4gIH1cbiAgaWYgKE9iamVjdC5rZXlzKGRyaXZlcnMpLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlNlY29uZCBhcmd1bWVudCBnaXZlbiB0byBDeWNsZS5ydW4oKSBtdXN0IGJlIGFuIG9iamVjdCBcIiArIFwid2l0aCBhdCBsZWFzdCBvbmUgZHJpdmVyIGZ1bmN0aW9uIGRlY2xhcmVkIGFzIGEgcHJvcGVydHkuXCIpO1xuICB9XG5cbiAgdmFyIHNpbmtQcm94aWVzID0gbWFrZVNpbmtQcm94aWVzKGRyaXZlcnMpO1xuICB2YXIgc291cmNlcyA9IGNhbGxEcml2ZXJzKGRyaXZlcnMsIHNpbmtQcm94aWVzKTtcbiAgdmFyIHNpbmtzID0gbWFpbihzb3VyY2VzKTtcbiAgdmFyIHN1YnNjcmlwdGlvbiA9IHJlcGxpY2F0ZU1hbnkoc2lua3MsIHNpbmtQcm94aWVzKS5zdWJzY3JpYmUoKTtcbiAgdmFyIHNpbmtzV2l0aERpc3Bvc2UgPSBhdHRhY2hEaXNwb3NlVG9TaW5rcyhzaW5rcywgc3Vic2NyaXB0aW9uKTtcbiAgdmFyIHNvdXJjZXNXaXRoRGlzcG9zZSA9IGF0dGFjaERpc3Bvc2VUb1NvdXJjZXMoc291cmNlcyk7XG4gIHJldHVybiB7IHNvdXJjZXM6IHNvdXJjZXNXaXRoRGlzcG9zZSwgc2lua3M6IHNpbmtzV2l0aERpc3Bvc2UgfTtcbn1cblxudmFyIEN5Y2xlID0ge1xuICAvKipcbiAgICogVGFrZXMgYSBgbWFpbmAgZnVuY3Rpb24gYW5kIGNpcmN1bGFybHkgY29ubmVjdHMgaXQgdG8gdGhlIGdpdmVuIGNvbGxlY3Rpb25cbiAgICogb2YgZHJpdmVyIGZ1bmN0aW9ucy5cbiAgICpcbiAgICogVGhlIGBtYWluYCBmdW5jdGlvbiBleHBlY3RzIGEgY29sbGVjdGlvbiBvZiBcImRyaXZlciBzb3VyY2VcIiBPYnNlcnZhYmxlc1xuICAgKiBhcyBpbnB1dCwgYW5kIHNob3VsZCByZXR1cm4gYSBjb2xsZWN0aW9uIG9mIFwiZHJpdmVyIHNpbmtcIiBPYnNlcnZhYmxlcy5cbiAgICogQSBcImNvbGxlY3Rpb24gb2YgT2JzZXJ2YWJsZXNcIiBpcyBhIEphdmFTY3JpcHQgb2JqZWN0IHdoZXJlXG4gICAqIGtleXMgbWF0Y2ggdGhlIGRyaXZlciBuYW1lcyByZWdpc3RlcmVkIGJ5IHRoZSBgZHJpdmVyc2Agb2JqZWN0LCBhbmQgdmFsdWVzXG4gICAqIGFyZSBPYnNlcnZhYmxlcyBvciBhIGNvbGxlY3Rpb24gb2YgT2JzZXJ2YWJsZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG1haW4gYSBmdW5jdGlvbiB0aGF0IHRha2VzIGBzb3VyY2VzYCBhcyBpbnB1dFxuICAgKiBhbmQgb3V0cHV0cyBhIGNvbGxlY3Rpb24gb2YgYHNpbmtzYCBPYnNlcnZhYmxlcy5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRyaXZlcnMgYW4gb2JqZWN0IHdoZXJlIGtleXMgYXJlIGRyaXZlciBuYW1lcyBhbmQgdmFsdWVzXG4gICAqIGFyZSBkcml2ZXIgZnVuY3Rpb25zLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IGFuIG9iamVjdCB3aXRoIHR3byBwcm9wZXJ0aWVzOiBgc291cmNlc2AgYW5kIGBzaW5rc2AuXG4gICAqIGBzaW5rc2AgaXMgdGhlIGNvbGxlY3Rpb24gb2YgZHJpdmVyIHNpbmtzLCBhbmQgYHNvdXJjZXNgIGlzIHRoZSBjb2xsZWN0aW9uXG4gICAqIG9mIGRyaXZlciBzb3VyY2VzLCB0aGF0IGNhbiBiZSB1c2VkIGZvciBkZWJ1Z2dpbmcgb3IgdGVzdGluZy5cbiAgICogQGZ1bmN0aW9uIHJ1blxuICAgKi9cbiAgcnVuOiBydW5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ3ljbGU7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBzdmcgPSByZXF1aXJlKFwiLi92aXJ0dWFsLWh5cGVyc2NyaXB0LXN2Z1wiKTtcblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZShcIi4vcmVuZGVyLWRvbVwiKTtcblxudmFyIG1ha2VET01Ecml2ZXIgPSBfcmVxdWlyZS5tYWtlRE9NRHJpdmVyO1xuXG52YXIgX3JlcXVpcmUyID0gcmVxdWlyZShcIi4vcmVuZGVyLWh0bWxcIik7XG5cbnZhciBtYWtlSFRNTERyaXZlciA9IF9yZXF1aXJlMi5tYWtlSFRNTERyaXZlcjtcblxudmFyIG1vY2tET01Tb3VyY2UgPSByZXF1aXJlKFwiLi9tb2NrLWRvbS1zb3VyY2VcIik7XG52YXIgaCA9IHJlcXVpcmUoXCIuL3ZpcnR1YWwtaHlwZXJzY3JpcHRcIik7XG52YXIgaGggPSByZXF1aXJlKFwiaHlwZXJzY3JpcHQtaGVscGVyc1wiKShoKTtcblxudmFyIEN5Y2xlRE9NID0gX2V4dGVuZHMoe1xuICAvKipcbiAgICogQSBmYWN0b3J5IGZvciB0aGUgRE9NIGRyaXZlciBmdW5jdGlvbi4gVGFrZXMgYSBgY29udGFpbmVyYCB0byBkZWZpbmUgdGhlXG4gICAqIHRhcmdldCBvbiB0aGUgZXhpc3RpbmcgRE9NIHdoaWNoIHRoaXMgZHJpdmVyIHdpbGwgb3BlcmF0ZSBvbi4gVGhlIG91dHB1dFxuICAgKiAoXCJzb3VyY2VcIikgb2YgdGhpcyBkcml2ZXIgaXMgYSBjb2xsZWN0aW9uIG9mIE9ic2VydmFibGVzIHF1ZXJpZWQgd2l0aDpcbiAgICogYERPTVNvdXJjZS5zZWxlY3Qoc2VsZWN0b3IpLmV2ZW50cyhldmVudFR5cGUpYCByZXR1cm5zIGFuIE9ic2VydmFibGUgb2ZcbiAgICogZXZlbnRzIG9mIGBldmVudFR5cGVgIGhhcHBlbmluZyBvbiB0aGUgZWxlbWVudCBkZXRlcm1pbmVkIGJ5IGBzZWxlY3RvcmAuXG4gICAqIEp1c3QgYERPTVNvdXJjZS5zZWxlY3Qoc2VsZWN0b3IpLm9ic2VydmFibGVgIHJldHVybnMgYW4gT2JzZXJ2YWJsZSBvZiB0aGVcbiAgICogRE9NIGVsZW1lbnQgbWF0Y2hlZCBieSB0aGUgZ2l2ZW4gc2VsZWN0b3IuIEFsc28sXG4gICAqIGBET01Tb3VyY2Uuc2VsZWN0KCc6cm9vdCcpLm9ic2VydmFibGVgIHJldHVybnMgYW4gT2JzZXJ2YWJsZSBvZiBET00gZWxlbWVudFxuICAgKiBjb3JyZXNwb25kaW5nIHRvIHRoZSByb290IChvciBjb250YWluZXIpIG9mIHRoZSBhcHAgb24gdGhlIERPTS4gVGhlXG4gICAqIGBldmVudHMoKWAgZnVuY3Rpb24gYWxzbyBhbGxvd3MgeW91IHRvIHNwZWNpZnkgdGhlIGB1c2VDYXB0dXJlYCBwYXJhbWV0ZXJcbiAgICogb2YgdGhlIGV2ZW50IGxpc3RlbmVyLiBUaGF0IGlzLCB0aGUgZnVsbCBmdW5jdGlvbiBzaWduYXR1cmUgaXNcbiAgICogYGV2ZW50cyhldmVudFR5cGUsIHVzZUNhcHR1cmUpYCB3aGVyZSBgdXNlQ2FwdHVyZWAgaXMgYnkgZGVmYXVsdCBgZmFsc2VgLlxuICAgKlxuICAgKiBAcGFyYW0geyhTdHJpbmd8SFRNTEVsZW1lbnQpfSBjb250YWluZXIgdGhlIERPTSBzZWxlY3RvciBmb3IgdGhlIGVsZW1lbnRcbiAgICogKG9yIHRoZSBlbGVtZW50IGl0c2VsZikgdG8gY29udGFpbiB0aGUgcmVuZGVyaW5nIG9mIHRoZSBWVHJlZXMuXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0aGUgRE9NIGRyaXZlciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIGV4cGVjdHMgYW5cbiAgICogT2JzZXJ2YWJsZSBvZiBWVHJlZSBhcyBpbnB1dCwgYW5kIG91dHB1dHMgdGhlIHNvdXJjZSBvYmplY3QgZm9yIHRoaXNcbiAgICogZHJpdmVyLCBjb250YWluaW5nIGZ1bmN0aW9ucyBgc2VsZWN0KClgIGFuZCBgZGlzcG9zZSgpYCB0aGF0IGNhbiBiZSB1c2VkXG4gICAqIGZvciBkZWJ1Z2dpbmcgYW5kIHRlc3RpbmcuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIGFuIG9wdGlvbnMgb2JqZWN0IGNvbnRhaW5pbmcgYWRkaXRpb25hbFxuICAgKiBjb25maWd1cmF0aW9ucy4gVGhlIG9wdGlvbnMgb2JqZWN0IGlzIG9wdGlvbmFsLiBUaGVzZSBhcmUgdGhlIHBhcmFtZXRlcnNcbiAgICogdGhhdCBtYXkgYmUgc3BlY2lmaWVkOlxuICAgKiAgIC0gYG9uRXJyb3JgOiBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGhhbmRsZSBlcnJvcnMuIEJ5IGRlZmF1bHQgaXQgaXNcbiAgICogICBgY29uc29sZS5lcnJvcmAuXG4gICAqIEBmdW5jdGlvbiBtYWtlRE9NRHJpdmVyXG4gICAqL1xuICBtYWtlRE9NRHJpdmVyOiBtYWtlRE9NRHJpdmVyLFxuXG4gIC8qKlxuICAgKiBBIGZhY3RvcnkgZm9yIHRoZSBIVE1MIGRyaXZlciBmdW5jdGlvbi5cbiAgICpcbiAgICogQHJldHVybiB7RnVuY3Rpb259IHRoZSBIVE1MIGRyaXZlciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIGV4cGVjdHMgYW5cbiAgICogT2JzZXJ2YWJsZSBvZiBWaXJ0dWFsIERPTSBlbGVtZW50cyBhcyBpbnB1dCwgYW5kIG91dHB1dHMgYW4gT2JzZXJ2YWJsZSBvZlxuICAgKiBzdHJpbmdzIGFzIHRoZSBIVE1MIHJlbmRlcml6YXRpb24gb2YgdGhlIHZpcnR1YWwgRE9NIGVsZW1lbnRzLlxuICAgKiBAZnVuY3Rpb24gbWFrZUhUTUxEcml2ZXJcbiAgICovXG4gIG1ha2VIVE1MRHJpdmVyOiBtYWtlSFRNTERyaXZlcixcblxuICAvKipcbiAgICogQSBzaG9ydGN1dCB0byBbdmlydHVhbC1oeXBlcnNjcmlwdF0oXG4gICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9NYXR0LUVzY2gvdmlydHVhbC1kb20vdHJlZS9tYXN0ZXIvdmlydHVhbC1oeXBlcnNjcmlwdCkuXG4gICAqIFRoaXMgaXMgYSBoZWxwZXIgZm9yIGNyZWF0aW5nIFZUcmVlcyBpbiBWaWV3cy5cbiAgICogQG5hbWUgaFxuICAgKi9cbiAgaDogaFxuXG59LCBoaCwge1xuXG4gIC8qKlxuICAgKiBBbiBhZGFwdGVyIGFyb3VuZCB2aXJ0dWFsLWh5cGVyc2NyaXB0IGBoKClgIHRvIGFsbG93IEpTWCB0byBiZSB1c2VkIGVhc2lseVxuICAgKiB3aXRoIEJhYmVsLiBQbGFjZSB0aGUgW0JhYmVsIGNvbmZpZ3VyYXRpb24gY29tbWVudF0oXG4gICAqIGh0dHA6Ly9iYWJlbGpzLmlvL2RvY3MvYWR2YW5jZWQvdHJhbnNmb3JtZXJzL290aGVyL3JlYWN0LykgYEBqc3ggaEpTWGAgYXRcbiAgICogdGhlIHRvcCBvZiB0aGUgRVM2IGZpbGUsIG1ha2Ugc3VyZSB5b3UgaW1wb3J0IGBoSlNYYCB3aXRoXG4gICAqIGBpbXBvcnQge2hKU1h9IGZyb20gJ0BjeWNsZS9kb20nYCwgYW5kIHRoZW4geW91IGNhbiB1c2UgSlNYIHRvIGNyZWF0ZVxuICAgKiBWVHJlZXMuXG4gICAqXG4gICAqIE5vdGUgdGhhdCB0byBwYXNzIGluIGN1c3RvbSBhdHRyaWJ1dGVzLCBlLmcuIGRhdGEtKiwgeW91IG11c3QgdXNlIHRoZVxuICAgKiBhdHRyaWJ1dGVzIGtleSBsaWtlIGA8dGFnIGF0dHJpYnV0ZXM9e3snZGF0YS1jdXN0b20tYXR0cic6ICdmb28nfX0gLz5gLlxuICAgKlxuICAgKiBAbmFtZSBoSlNYXG4gICAqL1xuICBoSlNYOiBmdW5jdGlvbiBoSlNYKHRhZywgYXR0cnMpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgY2hpbGRyZW4gPSBBcnJheShfbGVuID4gMiA/IF9sZW4gLSAyIDogMCksIF9rZXkgPSAyOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBjaGlsZHJlbltfa2V5IC0gMl0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGgodGFnLCBhdHRycywgY2hpbGRyZW4pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBIHNob3J0Y3V0IHRvIHRoZSBzdmcgaHlwZXJzY3JpcHQgZnVuY3Rpb24uXG4gICAqIEBuYW1lIHN2Z1xuICAgKi9cbiAgc3ZnOiBzdmcsXG5cbiAgLyoqXG4gICAqIEEgdGVzdGluZyB1dGlsaXR5IHdoaWNoIGFpZHMgaW4gY3JlYXRpbmcgYSBxdWVyeWFibGUgY29sbGVjdGlvbiBvZlxuICAgKiBPYnNlcnZhYmxlcy4gQ2FsbCBtb2NrRE9NU291cmNlIGdpdmluZyBpdCBhbiBvYmplY3Qgc3BlY2lmeWluZyBzZWxlY3RvcnMsXG4gICAqIGV2ZW50VHlwZXMgYW5kIHRoZWlyIE9ic2VydmFibGVzLCBhbmQgZ2V0IGFzIG91dHB1dCBhbiBvYmplY3QgZm9sbG93aW5nIHRoZVxuICAgKiBzYW1lIGZvcm1hdCBhcyB0aGUgRE9NIERyaXZlcidzIHNvdXJjZS4gRXhhbXBsZTpcbiAgICpcbiAgICogYGBganNcbiAgICogY29uc3QgZG9tU291cmNlID0gbW9ja0RPTVNvdXJjZSh7XG4gICAqICAgJy5mb28nOiB7XG4gICAqICAgICAnY2xpY2snOiBSeC5PYnNlcnZhYmxlLm9mKHt0YXJnZXQ6IHt9fSksXG4gICAqICAgICAnbW91c2VvdmVyJzogUnguT2JzZXJ2YWJsZS5vZih7dGFyZ2V0OiB7fX0pLFxuICAgKiAgIH0sXG4gICAqICAgJy5iYXInOiB7XG4gICAqICAgICAnc2Nyb2xsJzogUnguT2JzZXJ2YWJsZS5vZih7dGFyZ2V0OiB7fX0pLFxuICAgKiAgICAgb2JzZXJ2YWJsZTogUnguT2JzZXJ2YWJsZS5vZih7dGFnTmFtZTogJ2Rpdid9KSxcbiAgICogICB9XG4gICAqIH0pO1xuICAgKlxuICAgKiAvLyBVc2FnZVxuICAgKiBjb25zdCBjbGljayQgPSBkb21Tb3VyY2Uuc2VsZWN0KCcuZm9vJykuZXZlbnRzKCdjbGljaycpO1xuICAgKiBjb25zdCBlbGVtZW50JCA9IGRvbVNvdXJjZS5zZWxlY3QoJy5iYXInKS5vYnNlcnZhYmxlO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG1vY2tlZFNlbGVjdG9ycyBhbiBvYmplY3Qgd2hlcmUga2V5cyBhcmUgc2VsZWN0b3Igc3RyaW5nc1xuICAgKiBhbmQgdmFsdWVzIGFyZSBvYmplY3RzLiBUaG9zZSBuZXN0ZWQgb2JqZWN0cyBoYXZlIGV2ZW50VHlwZSBzdHJpbmdzIGFzIGtleXNcbiAgICogYW5kIHZhbHVlcyBhcmUgT2JzZXJ2YWJsZXMgeW91IGNyZWF0ZWQuXG4gICAqIEByZXR1cm4ge09iamVjdH0gZmFrZSBET00gc291cmNlIG9iamVjdCwgY29udGFpbmluZyBhIGZ1bmN0aW9uIGBzZWxlY3QoKWBcbiAgICogd2hpY2ggY2FuIGJlIHVzZWQganVzdCBsaWtlIHRoZSBET00gRHJpdmVyJ3Mgc291cmNlLiBDYWxsXG4gICAqIGBzZWxlY3Qoc2VsZWN0b3IpLmV2ZW50cyhldmVudFR5cGUpYCBvbiB0aGUgc291cmNlIG9iamVjdCB0byBnZXQgdGhlXG4gICAqIE9ic2VydmFibGUgeW91IGRlZmluZWQgaW4gdGhlIGlucHV0IG9mIGBtb2NrRE9NU291cmNlYC5cbiAgICogQGZ1bmN0aW9uIG1vY2tET01Tb3VyY2VcbiAgICovXG4gIG1vY2tET01Tb3VyY2U6IG1vY2tET01Tb3VyY2Vcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEN5Y2xlRE9NO1xuLyoqXG4gKiBTaG9ydGN1dHMgdG9cbiAqIFtoeXBlcnNjcmlwdC1oZWxwZXJzXShodHRwczovL2dpdGh1Yi5jb20vb2hhbmhpL2h5cGVyc2NyaXB0LWhlbHBlcnMpLlxuICogVGhpcyBpcyBhIGhlbHBlciBmb3Igd3JpdGluZyB2aXJ0dWFsLWh5cGVyc2NyaXB0LiBDcmVhdGUgdmlydHVhbCBET01cbiAqIGVsZW1lbnRzIHdpdGggYGRpdignLndyYXBwZXInLCBbIGgxKCdIZWFkZXInKSBdKWAgaW5zdGVhZCBvZlxuICogYGgoJ2Rpdi53cmFwcGVyJywgWyBoKCdoMScsICdIZWFkZXInKSBdKWAuXG4gKiBAbmFtZSBoeXBlcnNjcmlwdC1oZWxwZXJzXG4gKi8iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIFJ4ID0gcmVxdWlyZShcInJ4XCIpO1xuXG52YXIgZGlzcG9zYWJsZUNyZWF0ZSA9IFJ4LkRpc3Bvc2FibGUuY3JlYXRlO1xudmFyIENvbXBvc2l0ZURpc3Bvc2FibGUgPSBSeC5Db21wb3NpdGVEaXNwb3NhYmxlO1xudmFyIEFub255bW91c09ic2VydmFibGUgPSBSeC5Bbm9ueW1vdXNPYnNlcnZhYmxlO1xuXG5mdW5jdGlvbiBjcmVhdGVMaXN0ZW5lcihfcmVmKSB7XG4gIHZhciBlbGVtZW50ID0gX3JlZi5lbGVtZW50O1xuICB2YXIgZXZlbnROYW1lID0gX3JlZi5ldmVudE5hbWU7XG4gIHZhciBoYW5kbGVyID0gX3JlZi5oYW5kbGVyO1xuICB2YXIgdXNlQ2FwdHVyZSA9IF9yZWYudXNlQ2FwdHVyZTtcblxuICBpZiAoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlciwgdXNlQ2FwdHVyZSk7XG4gICAgcmV0dXJuIGRpc3Bvc2FibGVDcmVhdGUoZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcigpIHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIHVzZUNhcHR1cmUpO1xuICAgIH0pO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcIk5vIGxpc3RlbmVyIGZvdW5kXCIpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVFdmVudExpc3RlbmVyKF9yZWYyKSB7XG4gIHZhciBlbGVtZW50ID0gX3JlZjIuZWxlbWVudDtcbiAgdmFyIGV2ZW50TmFtZSA9IF9yZWYyLmV2ZW50TmFtZTtcbiAgdmFyIGhhbmRsZXIgPSBfcmVmMi5oYW5kbGVyO1xuICB2YXIgdXNlQ2FwdHVyZSA9IF9yZWYyLnVzZUNhcHR1cmU7XG5cbiAgdmFyIGRpc3Bvc2FibGVzID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcblxuICBpZiAoQXJyYXkuaXNBcnJheShlbGVtZW50KSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBlbGVtZW50Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBkaXNwb3NhYmxlcy5hZGQoY3JlYXRlRXZlbnRMaXN0ZW5lcih7XG4gICAgICAgIGVsZW1lbnQ6IGVsZW1lbnRbaV0sXG4gICAgICAgIGV2ZW50TmFtZTogZXZlbnROYW1lLFxuICAgICAgICBoYW5kbGVyOiBoYW5kbGVyLFxuICAgICAgICB1c2VDYXB0dXJlOiB1c2VDYXB0dXJlXG4gICAgICB9KSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGVsZW1lbnQpIHtcbiAgICBkaXNwb3NhYmxlcy5hZGQoY3JlYXRlTGlzdGVuZXIoeyBlbGVtZW50OiBlbGVtZW50LCBldmVudE5hbWU6IGV2ZW50TmFtZSwgaGFuZGxlcjogaGFuZGxlciwgdXNlQ2FwdHVyZTogdXNlQ2FwdHVyZSB9KSk7XG4gIH1cbiAgcmV0dXJuIGRpc3Bvc2FibGVzO1xufVxuXG5mdW5jdGlvbiBmcm9tRXZlbnQoZWxlbWVudCwgZXZlbnROYW1lKSB7XG4gIHZhciB1c2VDYXB0dXJlID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbMl07XG5cbiAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIHN1YnNjcmliZShvYnNlcnZlcikge1xuICAgIHJldHVybiBjcmVhdGVFdmVudExpc3RlbmVyKHtcbiAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICBldmVudE5hbWU6IGV2ZW50TmFtZSxcbiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgIG9ic2VydmVyLm9uTmV4dChhcmd1bWVudHNbMF0pO1xuICAgICAgfSxcbiAgICAgIHVzZUNhcHR1cmU6IHVzZUNhcHR1cmVcbiAgICB9KTtcbiAgfSkuc2hhcmUoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmcm9tRXZlbnQ7IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgX3J4ID0gcmVxdWlyZSgncngnKTtcblxudmFyIF9yeDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yeCk7XG5cbnZhciBlbXB0eVN0cmVhbSA9IF9yeDJbJ2RlZmF1bHQnXS5PYnNlcnZhYmxlLmVtcHR5KCk7XG5cbmZ1bmN0aW9uIGdldEV2ZW50c1N0cmVhbUZvclNlbGVjdG9yKG1vY2tlZEV2ZW50VHlwZXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGdldEV2ZW50c1N0cmVhbShldmVudFR5cGUpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gbW9ja2VkRXZlbnRUeXBlcykge1xuICAgICAgaWYgKG1vY2tlZEV2ZW50VHlwZXMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBrZXkgPT09IGV2ZW50VHlwZSkge1xuICAgICAgICByZXR1cm4gbW9ja2VkRXZlbnRUeXBlc1trZXldO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZW1wdHlTdHJlYW07XG4gIH07XG59XG5cbmZ1bmN0aW9uIG1vY2tET01Tb3VyY2UoKSB7XG4gIHZhciBtb2NrZWRTZWxlY3RvcnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblxuICByZXR1cm4ge1xuICAgIHNlbGVjdDogZnVuY3Rpb24gc2VsZWN0KHNlbGVjdG9yKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbW9ja2VkU2VsZWN0b3JzKSB7XG4gICAgICAgIGlmIChtb2NrZWRTZWxlY3RvcnMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBrZXkgPT09IHNlbGVjdG9yKSB7XG4gICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBlbXB0eVN0cmVhbTtcbiAgICAgICAgICBpZiAobW9ja2VkU2VsZWN0b3JzW2tleV0uaGFzT3duUHJvcGVydHkoJ29ic2VydmFibGUnKSkge1xuICAgICAgICAgICAgb2JzZXJ2YWJsZSA9IG1vY2tlZFNlbGVjdG9yc1trZXldLm9ic2VydmFibGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvYnNlcnZhYmxlOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgZXZlbnRzOiBnZXRFdmVudHNTdHJlYW1Gb3JTZWxlY3Rvcihtb2NrZWRTZWxlY3RvcnNba2V5XSlcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvYnNlcnZhYmxlOiBlbXB0eVN0cmVhbSxcbiAgICAgICAgZXZlbnRzOiBmdW5jdGlvbiBldmVudHMoKSB7XG4gICAgICAgICAgcmV0dXJuIGVtcHR5U3RyZWFtO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0c1snZGVmYXVsdCddID0gbW9ja0RPTVNvdXJjZTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7IH0gfTsgfSkoKTtcblxudmFyIFJ4ID0gcmVxdWlyZShcInJ4XCIpO1xudmFyIGZyb21FdmVudCA9IHJlcXVpcmUoXCIuL2Zyb21ldmVudFwiKTtcbnZhciBWRE9NID0ge1xuICBoOiByZXF1aXJlKFwiLi92aXJ0dWFsLWh5cGVyc2NyaXB0XCIpLFxuICBkaWZmOiByZXF1aXJlKFwidmlydHVhbC1kb20vZGlmZlwiKSxcbiAgcGF0Y2g6IHJlcXVpcmUoXCJ2aXJ0dWFsLWRvbS9wYXRjaFwiKSxcbiAgcGFyc2U6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyByZXF1aXJlKFwidmRvbS1wYXJzZXJcIikgOiBmdW5jdGlvbiAoKSB7fVxufTtcblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZShcIi4vdHJhbnNwb3NpdGlvblwiKTtcblxudmFyIHRyYW5zcG9zZVZUcmVlID0gX3JlcXVpcmUudHJhbnNwb3NlVlRyZWU7XG5cbnZhciBtYXRjaGVzU2VsZWN0b3IgPSB1bmRlZmluZWQ7XG4vLyBUcnktY2F0Y2ggdG8gcHJldmVudCB1bm5lY2Vzc2FyeSBpbXBvcnQgb2YgRE9NLXNwZWNpZmljcyBpbiBOb2RlLmpzIGVudjpcbnRyeSB7XG4gIG1hdGNoZXNTZWxlY3RvciA9IHJlcXVpcmUoXCJtYXRjaGVzLXNlbGVjdG9yXCIpO1xufSBjYXRjaCAoZXJyKSB7XG4gIG1hdGNoZXNTZWxlY3RvciA9IGZ1bmN0aW9uICgpIHt9O1xufVxuXG5mdW5jdGlvbiBpc0VsZW1lbnQob2JqKSB7XG4gIHJldHVybiB0eXBlb2YgSFRNTEVsZW1lbnQgPT09IFwib2JqZWN0XCIgPyBvYmogaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBvYmogaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50IDogLy9ET00yXG4gIG9iaiAmJiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmIG9iaiAhPT0gbnVsbCAmJiAob2JqLm5vZGVUeXBlID09PSAxIHx8IG9iai5ub2RlVHlwZSA9PT0gMTEpICYmIHR5cGVvZiBvYmoubm9kZU5hbWUgPT09IFwic3RyaW5nXCI7XG59XG5cbmZ1bmN0aW9uIHdyYXBUb3BMZXZlbFZUcmVlKHZ0cmVlLCByb290RWxlbSkge1xuICB2YXIgX3Z0cmVlJHByb3BlcnRpZXMkaWQgPSB2dHJlZS5wcm9wZXJ0aWVzLmlkO1xuICB2YXIgdnRyZWVJZCA9IF92dHJlZSRwcm9wZXJ0aWVzJGlkID09PSB1bmRlZmluZWQgPyBcIlwiIDogX3Z0cmVlJHByb3BlcnRpZXMkaWQ7XG4gIHZhciBfdnRyZWUkcHJvcGVydGllcyRjbGFzc05hbWUgPSB2dHJlZS5wcm9wZXJ0aWVzLmNsYXNzTmFtZTtcbiAgdmFyIHZ0cmVlQ2xhc3MgPSBfdnRyZWUkcHJvcGVydGllcyRjbGFzc05hbWUgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBfdnRyZWUkcHJvcGVydGllcyRjbGFzc05hbWU7XG5cbiAgdmFyIHNhbWVJZCA9IHZ0cmVlSWQgPT09IHJvb3RFbGVtLmlkO1xuICB2YXIgc2FtZUNsYXNzID0gdnRyZWVDbGFzcyA9PT0gcm9vdEVsZW0uY2xhc3NOYW1lO1xuICB2YXIgc2FtZVRhZ05hbWUgPSB2dHJlZS50YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT09IHJvb3RFbGVtLnRhZ05hbWU7XG4gIGlmIChzYW1lSWQgJiYgc2FtZUNsYXNzICYmIHNhbWVUYWdOYW1lKSB7XG4gICAgcmV0dXJuIHZ0cmVlO1xuICB9XG4gIHZhciBhdHRycyA9IHt9O1xuICBpZiAocm9vdEVsZW0uaWQpIHtcbiAgICBhdHRycy5pZCA9IHJvb3RFbGVtLmlkO1xuICB9XG4gIGlmIChyb290RWxlbS5jbGFzc05hbWUpIHtcbiAgICBhdHRycy5jbGFzc05hbWUgPSByb290RWxlbS5jbGFzc05hbWU7XG4gIH1cbiAgcmV0dXJuIFZET00uaChyb290RWxlbS50YWdOYW1lLCBhdHRycywgW3Z0cmVlXSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VEaWZmQW5kUGF0Y2hUb0VsZW1lbnQkKHJvb3RFbGVtKSB7XG4gIHJldHVybiBmdW5jdGlvbiBkaWZmQW5kUGF0Y2hUb0VsZW1lbnQkKF9yZWYpIHtcbiAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKTtcblxuICAgIHZhciBvbGRWVHJlZSA9IF9yZWYyWzBdO1xuICAgIHZhciBuZXdWVHJlZSA9IF9yZWYyWzFdO1xuXG4gICAgaWYgKHR5cGVvZiBuZXdWVHJlZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIFJ4Lk9ic2VydmFibGUuZW1wdHkoKTtcbiAgICB9XG5cbiAgICB2YXIgcHJldlZUcmVlID0gd3JhcFRvcExldmVsVlRyZWUob2xkVlRyZWUsIHJvb3RFbGVtKTtcbiAgICB2YXIgbmV4dFZUcmVlID0gd3JhcFRvcExldmVsVlRyZWUobmV3VlRyZWUsIHJvb3RFbGVtKTtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xuICAgIHJvb3RFbGVtID0gVkRPTS5wYXRjaChyb290RWxlbSwgVkRPTS5kaWZmKHByZXZWVHJlZSwgbmV4dFZUcmVlKSk7XG4gICAgLyogZXNsaW50LWVuYWJsZSAqL1xuICAgIHJldHVybiBSeC5PYnNlcnZhYmxlLmp1c3Qocm9vdEVsZW0pO1xuICB9O1xufVxuXG5mdW5jdGlvbiByZW5kZXJSYXdSb290RWxlbSQodnRyZWUkLCBkb21Db250YWluZXIpIHtcbiAgdmFyIGRpZmZBbmRQYXRjaFRvRWxlbWVudCQgPSBtYWtlRGlmZkFuZFBhdGNoVG9FbGVtZW50JChkb21Db250YWluZXIpO1xuICByZXR1cm4gdnRyZWUkLmZsYXRNYXBMYXRlc3QodHJhbnNwb3NlVlRyZWUpLnN0YXJ0V2l0aChWRE9NLnBhcnNlKGRvbUNvbnRhaW5lcikpLnBhaXJ3aXNlKCkuZmxhdE1hcChkaWZmQW5kUGF0Y2hUb0VsZW1lbnQkKTtcbn1cblxuZnVuY3Rpb24gaXNvbGF0ZVNvdXJjZShzb3VyY2UsIHNjb3BlKSB7XG4gIHJldHVybiBzb3VyY2Uuc2VsZWN0KFwiLmN5Y2xlLXNjb3BlLVwiICsgc2NvcGUpO1xufVxuXG5mdW5jdGlvbiBpc29sYXRlU2luayhzaW5rLCBzY29wZSkge1xuICByZXR1cm4gc2luay5tYXAoZnVuY3Rpb24gKHZ0cmVlKSB7XG4gICAgdmFyIF92dHJlZSRwcm9wZXJ0aWVzJGNsYXNzTmFtZTIgPSB2dHJlZS5wcm9wZXJ0aWVzLmNsYXNzTmFtZTtcbiAgICB2YXIgdnRyZWVDbGFzcyA9IF92dHJlZSRwcm9wZXJ0aWVzJGNsYXNzTmFtZTIgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBfdnRyZWUkcHJvcGVydGllcyRjbGFzc05hbWUyO1xuXG4gICAgaWYgKHZ0cmVlQ2xhc3MuaW5kZXhPZihcImN5Y2xlLXNjb3BlLVwiICsgc2NvcGUpID09PSAtMSkge1xuICAgICAgdmFyIGMgPSAodnRyZWVDbGFzcyArIFwiIGN5Y2xlLXNjb3BlLVwiICsgc2NvcGUpLnRyaW0oKTtcbiAgICAgIHZ0cmVlLnByb3BlcnRpZXMuY2xhc3NOYW1lID0gYztcbiAgICB9XG4gICAgaWYgKHZ0cmVlLnByb3BlcnRpZXMuYXR0cmlidXRlcykge1xuICAgICAgLy8gZm9yIHN2ZyByb290IGVsZW1lbnRzXG4gICAgICB2YXIgdnRyZWVBdHRyQ2xhc3MgPSB2dHJlZS5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNbXCJjbGFzc1wiXSB8fCBcIlwiO1xuICAgICAgaWYgKHZ0cmVlQXR0ckNsYXNzLmluZGV4T2YoXCJjeWNsZS1zY29wZS1cIiArIHNjb3BlKSA9PT0gLTEpIHtcbiAgICAgICAgdmFyIGNhdHRyID0gKHZ0cmVlQXR0ckNsYXNzICsgXCIgY3ljbGUtc2NvcGUtXCIgKyBzY29wZSkudHJpbSgpO1xuICAgICAgICB2dHJlZS5wcm9wZXJ0aWVzLmF0dHJpYnV0ZXNbXCJjbGFzc1wiXSA9IGNhdHRyO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdnRyZWU7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBtYWtlSXNTdHJpY3RseUluUm9vdFNjb3BlKG5hbWVzcGFjZSkge1xuICB2YXIgY2xhc3NJc0ZvcmVpZ24gPSBmdW5jdGlvbiBjbGFzc0lzRm9yZWlnbihjKSB7XG4gICAgdmFyIG1hdGNoZWQgPSBjLm1hdGNoKC9jeWNsZS1zY29wZS0oXFxTKykvKTtcbiAgICByZXR1cm4gbWF0Y2hlZCAmJiBuYW1lc3BhY2UuaW5kZXhPZihcIi5cIiArIGMpID09PSAtMTtcbiAgfTtcbiAgdmFyIGNsYXNzSXNEb21lc3RpYyA9IGZ1bmN0aW9uIGNsYXNzSXNEb21lc3RpYyhjKSB7XG4gICAgdmFyIG1hdGNoZWQgPSBjLm1hdGNoKC9jeWNsZS1zY29wZS0oXFxTKykvKTtcbiAgICByZXR1cm4gbWF0Y2hlZCAmJiBuYW1lc3BhY2UuaW5kZXhPZihcIi5cIiArIGMpICE9PSAtMTtcbiAgfTtcbiAgcmV0dXJuIGZ1bmN0aW9uIGlzU3RyaWN0bHlJblJvb3RTY29wZShsZWFmKSB7XG4gICAgZm9yICh2YXIgZWwgPSBsZWFmOyBlbDsgZWwgPSBlbC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICB2YXIgc3BsaXQgPSBTdHJpbmcucHJvdG90eXBlLnNwbGl0O1xuICAgICAgdmFyIGNsYXNzTGlzdCA9IGVsLmNsYXNzTGlzdCB8fCBzcGxpdC5jYWxsKGVsLmNsYXNzTmFtZSwgXCIgXCIpO1xuICAgICAgaWYgKEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoY2xhc3NMaXN0LCBjbGFzc0lzRG9tZXN0aWMpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoY2xhc3NMaXN0LCBjbGFzc0lzRm9yZWlnbikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbn1cblxudmFyIGV2ZW50VHlwZXNUaGF0RG9udEJ1YmJsZSA9IFtcImxvYWRcIiwgXCJ1bmxvYWRcIiwgXCJmb2N1c1wiLCBcImJsdXJcIiwgXCJtb3VzZWVudGVyXCIsIFwibW91c2VsZWF2ZVwiLCBcInN1Ym1pdFwiLCBcImNoYW5nZVwiLCBcInJlc2V0XCIsIFwidGltZXVwZGF0ZVwiLCBcInBsYXlpbmdcIiwgXCJ3YWl0aW5nXCIsIFwic2Vla2luZ1wiLCBcInNlZWtlZFwiLCBcImVuZGVkXCIsIFwibG9hZGVkbWV0YWRhdGFcIiwgXCJsb2FkZWRkYXRhXCIsIFwiY2FucGxheVwiLCBcImNhbnBsYXl0aHJvdWdoXCIsIFwiZHVyYXRpb25jaGFuZ2VcIiwgXCJwbGF5XCIsIFwicGF1c2VcIiwgXCJyYXRlY2hhbmdlXCIsIFwidm9sdW1lY2hhbmdlXCIsIFwic3VzcGVuZFwiLCBcImVtcHRpZWRcIiwgXCJzdGFsbGVkXCJdO1xuXG5mdW5jdGlvbiBtYXliZU11dGF0ZUV2ZW50UHJvcGFnYXRpb25BdHRyaWJ1dGVzKGV2ZW50KSB7XG4gIGlmICghZXZlbnQuaGFzT3duUHJvcGVydHkoXCJwcm9wYWdhdGlvbkhhc0JlZW5TdG9wcGVkXCIpKSB7XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIGV2ZW50LnByb3BhZ2F0aW9uSGFzQmVlblN0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHZhciBvbGRTdG9wUHJvcGFnYXRpb24gPSBldmVudC5zdG9wUHJvcGFnYXRpb247XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbiBzdG9wUHJvcGFnYXRpb24oKSB7XG4gICAgICAgIG9sZFN0b3BQcm9wYWdhdGlvbi5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnByb3BhZ2F0aW9uSGFzQmVlblN0b3BwZWQgPSB0cnVlO1xuICAgICAgfTtcbiAgICB9KSgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG11dGF0ZUV2ZW50Q3VycmVudFRhcmdldChldmVudCwgY3VycmVudFRhcmdldEVsZW1lbnQpIHtcbiAgdHJ5IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXZlbnQsIFwiY3VycmVudFRhcmdldFwiLCB7XG4gICAgICB2YWx1ZTogY3VycmVudFRhcmdldEVsZW1lbnQsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdm9pZCBlcnI7IC8vIG5vb3BcbiAgfVxuICBldmVudC5vd25lclRhcmdldCA9IGN1cnJlbnRUYXJnZXRFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBtYWtlU2ltdWxhdGVCdWJibGluZyhuYW1lc3BhY2UsIHJvb3RFbCkge1xuICB2YXIgaXNTdHJpY3RseUluUm9vdFNjb3BlID0gbWFrZUlzU3RyaWN0bHlJblJvb3RTY29wZShuYW1lc3BhY2UpO1xuICB2YXIgZGVzY2VuZGFudFNlbCA9IG5hbWVzcGFjZS5qb2luKFwiIFwiKTtcbiAgdmFyIHRvcFNlbCA9IG5hbWVzcGFjZS5qb2luKFwiXCIpO1xuICB2YXIgcm9vZiA9IHJvb3RFbC5wYXJlbnRFbGVtZW50O1xuXG4gIHJldHVybiBmdW5jdGlvbiBzaW11bGF0ZUJ1YmJsaW5nKGV2KSB7XG4gICAgbWF5YmVNdXRhdGVFdmVudFByb3BhZ2F0aW9uQXR0cmlidXRlcyhldik7XG4gICAgaWYgKGV2LnByb3BhZ2F0aW9uSGFzQmVlblN0b3BwZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yICh2YXIgZWwgPSBldi50YXJnZXQ7IGVsICYmIGVsICE9PSByb29mOyBlbCA9IGVsLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgIGlmICghaXNTdHJpY3RseUluUm9vdFNjb3BlKGVsKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXRjaGVzU2VsZWN0b3IoZWwsIGRlc2NlbmRhbnRTZWwpIHx8IG1hdGNoZXNTZWxlY3RvcihlbCwgdG9wU2VsKSkge1xuICAgICAgICBtdXRhdGVFdmVudEN1cnJlbnRUYXJnZXQoZXYsIGVsKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gbWFrZUV2ZW50c1NlbGVjdG9yKHJvb3RFbCQsIG5hbWVzcGFjZSkge1xuICByZXR1cm4gZnVuY3Rpb24gZXZlbnRzKGV2ZW50TmFtZSkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMV07XG5cbiAgICBpZiAodHlwZW9mIGV2ZW50TmFtZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRE9NIGRyaXZlcidzIGV2ZW50cygpIGV4cGVjdHMgYXJndW1lbnQgdG8gYmUgYSBcIiArIFwic3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZXZlbnQgdHlwZSB0byBsaXN0ZW4gZm9yLlwiKTtcbiAgICB9XG4gICAgdmFyIHVzZUNhcHR1cmUgPSBmYWxzZTtcbiAgICBpZiAoZXZlbnRUeXBlc1RoYXREb250QnViYmxlLmluZGV4T2YoZXZlbnROYW1lKSAhPT0gLTEpIHtcbiAgICAgIHVzZUNhcHR1cmUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMudXNlQ2FwdHVyZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHVzZUNhcHR1cmUgPSBvcHRpb25zLnVzZUNhcHR1cmU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJvb3RFbCQuZmlyc3QoKS5mbGF0TWFwTGF0ZXN0KGZ1bmN0aW9uIChyb290RWwpIHtcbiAgICAgIGlmICghbmFtZXNwYWNlIHx8IG5hbWVzcGFjZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZyb21FdmVudChyb290RWwsIGV2ZW50TmFtZSwgdXNlQ2FwdHVyZSk7XG4gICAgICB9XG4gICAgICB2YXIgc2ltdWxhdGVCdWJibGluZyA9IG1ha2VTaW11bGF0ZUJ1YmJsaW5nKG5hbWVzcGFjZSwgcm9vdEVsKTtcbiAgICAgIHJldHVybiBmcm9tRXZlbnQocm9vdEVsLCBldmVudE5hbWUsIHVzZUNhcHR1cmUpLmZpbHRlcihzaW11bGF0ZUJ1YmJsaW5nKTtcbiAgICB9KS5zaGFyZSgpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBtYWtlRWxlbWVudFNlbGVjdG9yKHJvb3RFbCQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHNlbGVjdChzZWxlY3Rvcikge1xuICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkRPTSBkcml2ZXIncyBzZWxlY3QoKSBleHBlY3RzIHRoZSBhcmd1bWVudCB0byBiZSBhIFwiICsgXCJzdHJpbmcgYXMgYSBDU1Mgc2VsZWN0b3JcIik7XG4gICAgfVxuXG4gICAgdmFyIG5hbWVzcGFjZSA9IHRoaXMubmFtZXNwYWNlO1xuICAgIHZhciB0cmltbWVkU2VsZWN0b3IgPSBzZWxlY3Rvci50cmltKCk7XG4gICAgdmFyIGNoaWxkTmFtZXNwYWNlID0gdHJpbW1lZFNlbGVjdG9yID09PSBcIjpyb290XCIgPyBuYW1lc3BhY2UgOiBuYW1lc3BhY2UuY29uY2F0KHRyaW1tZWRTZWxlY3Rvcik7XG4gICAgdmFyIGVsZW1lbnQkID0gcm9vdEVsJC5tYXAoZnVuY3Rpb24gKHJvb3RFbCkge1xuICAgICAgaWYgKGNoaWxkTmFtZXNwYWNlLmpvaW4oXCJcIikgPT09IFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIHJvb3RFbDtcbiAgICAgIH1cbiAgICAgIHZhciBub2RlTGlzdCA9IHJvb3RFbC5xdWVyeVNlbGVjdG9yQWxsKGNoaWxkTmFtZXNwYWNlLmpvaW4oXCIgXCIpKTtcbiAgICAgIGlmIChub2RlTGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbm9kZUxpc3QgPSByb290RWwucXVlcnlTZWxlY3RvckFsbChjaGlsZE5hbWVzcGFjZS5qb2luKFwiXCIpKTtcbiAgICAgIH1cbiAgICAgIHZhciBhcnJheSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG5vZGVMaXN0KTtcbiAgICAgIHJldHVybiBhcnJheS5maWx0ZXIobWFrZUlzU3RyaWN0bHlJblJvb3RTY29wZShjaGlsZE5hbWVzcGFjZSkpO1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICBvYnNlcnZhYmxlOiBlbGVtZW50JCxcbiAgICAgIG5hbWVzcGFjZTogY2hpbGROYW1lc3BhY2UsXG4gICAgICBzZWxlY3Q6IG1ha2VFbGVtZW50U2VsZWN0b3Iocm9vdEVsJCksXG4gICAgICBldmVudHM6IG1ha2VFdmVudHNTZWxlY3Rvcihyb290RWwkLCBjaGlsZE5hbWVzcGFjZSksXG4gICAgICBpc29sYXRlU291cmNlOiBpc29sYXRlU291cmNlLFxuICAgICAgaXNvbGF0ZVNpbms6IGlzb2xhdGVTaW5rXG4gICAgfTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVET01TaW5rKHZ0cmVlJCkge1xuICBpZiAoIXZ0cmVlJCB8fCB0eXBlb2YgdnRyZWUkLnN1YnNjcmliZSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIERPTSBkcml2ZXIgZnVuY3Rpb24gZXhwZWN0cyBhcyBpbnB1dCBhbiBcIiArIFwiT2JzZXJ2YWJsZSBvZiB2aXJ0dWFsIERPTSBlbGVtZW50c1wiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkZWZhdWx0T25FcnJvckZuKG1zZykge1xuICBpZiAoY29uc29sZSAmJiBjb25zb2xlLmVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihtc2cpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKG1zZyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWFrZURPTURyaXZlcihjb250YWluZXIsIG9wdGlvbnMpIHtcbiAgLy8gRmluZCBhbmQgcHJlcGFyZSB0aGUgY29udGFpbmVyXG4gIHZhciBkb21Db250YWluZXIgPSB0eXBlb2YgY29udGFpbmVyID09PSBcInN0cmluZ1wiID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXIpIDogY29udGFpbmVyO1xuICAvLyBDaGVjayBwcmUtY29uZGl0aW9uc1xuICBpZiAodHlwZW9mIGNvbnRhaW5lciA9PT0gXCJzdHJpbmdcIiAmJiBkb21Db250YWluZXIgPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgcmVuZGVyIGludG8gdW5rbm93biBlbGVtZW50IGBcIiArIGNvbnRhaW5lciArIFwiYFwiKTtcbiAgfSBlbHNlIGlmICghaXNFbGVtZW50KGRvbUNvbnRhaW5lcikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJHaXZlbiBjb250YWluZXIgaXMgbm90IGEgRE9NIGVsZW1lbnQgbmVpdGhlciBhIHNlbGVjdG9yIFwiICsgXCJzdHJpbmcuXCIpO1xuICB9XG5cbiAgdmFyIF9yZWYzID0gb3B0aW9ucyB8fCB7fTtcblxuICB2YXIgX3JlZjMkb25FcnJvciA9IF9yZWYzLm9uRXJyb3I7XG4gIHZhciBvbkVycm9yID0gX3JlZjMkb25FcnJvciA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdE9uRXJyb3JGbiA6IF9yZWYzJG9uRXJyb3I7XG5cbiAgaWYgKHR5cGVvZiBvbkVycm9yICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgcHJvdmlkZWQgYW4gYG9uRXJyb3JgIHRvIG1ha2VET01Ecml2ZXIgYnV0IGl0IHdhcyBcIiArIFwibm90IGEgZnVuY3Rpb24uIEl0IHNob3VsZCBiZSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGhhbmRsZSBlcnJvcnMuXCIpO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGRvbURyaXZlcih2dHJlZSQpIHtcbiAgICB2YWxpZGF0ZURPTVNpbmsodnRyZWUkKTtcbiAgICB2YXIgcm9vdEVsZW0kID0gcmVuZGVyUmF3Um9vdEVsZW0kKHZ0cmVlJCwgZG9tQ29udGFpbmVyKS5zdGFydFdpdGgoZG9tQ29udGFpbmVyKS5kb09uRXJyb3Iob25FcnJvcikucmVwbGF5KG51bGwsIDEpO1xuICAgIHZhciBkaXNwb3NhYmxlID0gcm9vdEVsZW0kLmNvbm5lY3QoKTtcbiAgICByZXR1cm4ge1xuICAgICAgb2JzZXJ2YWJsZTogcm9vdEVsZW0kLFxuICAgICAgbmFtZXNwYWNlOiBbXSxcbiAgICAgIHNlbGVjdDogbWFrZUVsZW1lbnRTZWxlY3Rvcihyb290RWxlbSQpLFxuICAgICAgZXZlbnRzOiBtYWtlRXZlbnRzU2VsZWN0b3Iocm9vdEVsZW0kLCBbXSksXG4gICAgICBkaXNwb3NlOiBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgICB9LFxuICAgICAgaXNvbGF0ZVNvdXJjZTogaXNvbGF0ZVNvdXJjZSxcbiAgICAgIGlzb2xhdGVTaW5rOiBpc29sYXRlU2lua1xuICAgIH07XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpc0VsZW1lbnQ6IGlzRWxlbWVudCxcbiAgd3JhcFRvcExldmVsVlRyZWU6IHdyYXBUb3BMZXZlbFZUcmVlLFxuICBtYWtlRGlmZkFuZFBhdGNoVG9FbGVtZW50JDogbWFrZURpZmZBbmRQYXRjaFRvRWxlbWVudCQsXG4gIHJlbmRlclJhd1Jvb3RFbGVtJDogcmVuZGVyUmF3Um9vdEVsZW0kLFxuICB2YWxpZGF0ZURPTVNpbms6IHZhbGlkYXRlRE9NU2luayxcblxuICBtYWtlRE9NRHJpdmVyOiBtYWtlRE9NRHJpdmVyXG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgUnggPSByZXF1aXJlKFwicnhcIik7XG52YXIgdG9IVE1MID0gcmVxdWlyZShcInZkb20tdG8taHRtbFwiKTtcblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZShcIi4vdHJhbnNwb3NpdGlvblwiKTtcblxudmFyIHRyYW5zcG9zZVZUcmVlID0gX3JlcXVpcmUudHJhbnNwb3NlVlRyZWU7XG5cbmZ1bmN0aW9uIG1ha2VCb2d1c1NlbGVjdCgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHNlbGVjdCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb2JzZXJ2YWJsZTogUnguT2JzZXJ2YWJsZS5lbXB0eSgpLFxuICAgICAgZXZlbnRzOiBmdW5jdGlvbiBldmVudHMoKSB7XG4gICAgICAgIHJldHVybiBSeC5PYnNlcnZhYmxlLmVtcHR5KCk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gbWFrZUhUTUxEcml2ZXIoKSB7XG4gIHJldHVybiBmdW5jdGlvbiBodG1sRHJpdmVyKHZ0cmVlJCkge1xuICAgIHZhciBvdXRwdXQkID0gdnRyZWUkLmZsYXRNYXBMYXRlc3QodHJhbnNwb3NlVlRyZWUpLmxhc3QoKS5tYXAodG9IVE1MKTtcbiAgICBvdXRwdXQkLnNlbGVjdCA9IG1ha2VCb2d1c1NlbGVjdCgpO1xuICAgIHJldHVybiBvdXRwdXQkO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbWFrZUJvZ3VzU2VsZWN0OiBtYWtlQm9ndXNTZWxlY3QsXG5cbiAgbWFrZUhUTUxEcml2ZXI6IG1ha2VIVE1MRHJpdmVyXG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgUnggPSByZXF1aXJlKFwicnhcIik7XG52YXIgVmlydHVhbE5vZGUgPSByZXF1aXJlKFwidmlydHVhbC1kb20vdm5vZGUvdm5vZGVcIik7XG5cbi8qKlxuICogQ29udmVydHMgYSB0cmVlIG9mIFZpcnR1YWxOb2RlfE9ic2VydmFibGU8VmlydHVhbE5vZGU+IGludG9cbiAqIE9ic2VydmFibGU8VmlydHVhbE5vZGU+LlxuICovXG5mdW5jdGlvbiB0cmFuc3Bvc2VWVHJlZSh2dHJlZSkge1xuICBpZiAodHlwZW9mIHZ0cmVlLnN1YnNjcmliZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIHZ0cmVlLmZsYXRNYXBMYXRlc3QodHJhbnNwb3NlVlRyZWUpO1xuICB9IGVsc2UgaWYgKHZ0cmVlLnR5cGUgPT09IFwiVmlydHVhbFRleHRcIikge1xuICAgIHJldHVybiBSeC5PYnNlcnZhYmxlLmp1c3QodnRyZWUpO1xuICB9IGVsc2UgaWYgKHZ0cmVlLnR5cGUgPT09IFwiVmlydHVhbE5vZGVcIiAmJiBBcnJheS5pc0FycmF5KHZ0cmVlLmNoaWxkcmVuKSAmJiB2dHJlZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIFJ4Lk9ic2VydmFibGUuY29tYmluZUxhdGVzdCh2dHJlZS5jaGlsZHJlbi5tYXAodHJhbnNwb3NlVlRyZWUpLCBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJyID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFycltfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBWaXJ0dWFsTm9kZSh2dHJlZS50YWdOYW1lLCB2dHJlZS5wcm9wZXJ0aWVzLCBhcnIsIHZ0cmVlLmtleSwgdnRyZWUubmFtZXNwYWNlKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmICh2dHJlZS50eXBlID09PSBcIlZpcnR1YWxOb2RlXCIgfHwgdnRyZWUudHlwZSA9PT0gXCJXaWRnZXRcIiB8fCB2dHJlZS50eXBlID09PSBcIlRodW5rXCIpIHtcbiAgICByZXR1cm4gUnguT2JzZXJ2YWJsZS5qdXN0KHZ0cmVlKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmhhbmRsZWQgY2FzZSBpbiB0cmFuc3Bvc2VWVHJlZSgpXCIpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICB0cmFuc3Bvc2VWVHJlZTogdHJhbnNwb3NlVlRyZWVcbn07IiwiLyplc2xpbnQtZGlzYWJsZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ3gtaXMtYXJyYXknKTtcblxuLy8gU1RBUlQgQ3ljbGUuanMtc3BlY2lmaWMgY29kZSA+Pj4+Pj4+PlxudmFyIGggPSByZXF1aXJlKCcuL3ZpcnR1YWwtaHlwZXJzY3JpcHQnKTtcbi8vIEVORCBDeWNsZS5qcy1zcGVjaWZpYyBjb2RlIDw8PDw8PDw8PDxcblxudmFyIFNWR0F0dHJpYnV0ZU5hbWVzcGFjZSA9IHJlcXVpcmUoJ3ZpcnR1YWwtZG9tL3ZpcnR1YWwtaHlwZXJzY3JpcHQvc3ZnLWF0dHJpYnV0ZS1uYW1lc3BhY2UnKTtcbnZhciBhdHRyaWJ1dGVIb29rID0gcmVxdWlyZSgndmlydHVhbC1kb20vdmlydHVhbC1oeXBlcnNjcmlwdC9ob29rcy9hdHRyaWJ1dGUtaG9vaycpO1xuXG52YXIgU1ZHX05BTUVTUEFDRSA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG5cbm1vZHVsZS5leHBvcnRzID0gc3ZnO1xuXG5mdW5jdGlvbiBzdmcodGFnTmFtZSwgcHJvcGVydGllcywgY2hpbGRyZW4pIHtcbiAgaWYgKCFjaGlsZHJlbiAmJiBpc0NoaWxkcmVuKHByb3BlcnRpZXMpKSB7XG4gICAgY2hpbGRyZW4gPSBwcm9wZXJ0aWVzO1xuICAgIHByb3BlcnRpZXMgPSB7fTtcbiAgfVxuXG4gIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IHt9O1xuXG4gIC8vIHNldCBuYW1lc3BhY2UgZm9yIHN2Z1xuICBwcm9wZXJ0aWVzLm5hbWVzcGFjZSA9IFNWR19OQU1FU1BBQ0U7XG5cbiAgdmFyIGF0dHJpYnV0ZXMgPSBwcm9wZXJ0aWVzLmF0dHJpYnV0ZXMgfHwgKHByb3BlcnRpZXMuYXR0cmlidXRlcyA9IHt9KTtcblxuICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgIGlmICghcHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICB2YXIgbmFtZXNwYWNlID0gU1ZHQXR0cmlidXRlTmFtZXNwYWNlKGtleSk7XG5cbiAgICBpZiAobmFtZXNwYWNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIG5vdCBhIHN2ZyBhdHRyaWJ1dGVcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IHByb3BlcnRpZXNba2V5XTtcblxuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicgJiYgdHlwZW9mIHZhbHVlICE9PSAnYm9vbGVhbicpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChuYW1lc3BhY2UgIT09IG51bGwpIHtcbiAgICAgIC8vIG5hbWVzcGFjZWQgYXR0cmlidXRlXG4gICAgICBwcm9wZXJ0aWVzW2tleV0gPSBhdHRyaWJ1dGVIb29rKG5hbWVzcGFjZSwgdmFsdWUpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgYXR0cmlidXRlc1trZXldID0gdmFsdWU7XG4gICAgcHJvcGVydGllc1trZXldID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgcmV0dXJuIGgodGFnTmFtZSwgcHJvcGVydGllcywgY2hpbGRyZW4pO1xufVxuXG4vLyBTVEFSVCBDeWNsZS5qcy1zcGVjaWZpYyBjb2RlID4+Pj4+Pj4+XG5mdW5jdGlvbiBpc09ic2VydmFibGUoeCkge1xuICByZXR1cm4geCAmJiB0eXBlb2YgeC5zdWJzY3JpYmUgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzQ2hpbGRyZW4oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdzdHJpbmcnIHx8IGlzQXJyYXkoeCkgfHwgaXNPYnNlcnZhYmxlKHgpO1xufVxuLy8gRU5EIEN5Y2xlLmpzLXNwZWNpZmljIGNvZGUgPDw8PDw8PDw8PCIsIi8qIGVzbGludC1kaXNhYmxlICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc0FycmF5ID0gcmVxdWlyZSgneC1pcy1hcnJheScpO1xuXG52YXIgVk5vZGUgPSByZXF1aXJlKCd2aXJ0dWFsLWRvbS92bm9kZS92bm9kZS5qcycpO1xudmFyIFZUZXh0ID0gcmVxdWlyZSgndmlydHVhbC1kb20vdm5vZGUvdnRleHQuanMnKTtcbnZhciBpc1ZOb2RlID0gcmVxdWlyZSgndmlydHVhbC1kb20vdm5vZGUvaXMtdm5vZGUnKTtcbnZhciBpc1ZUZXh0ID0gcmVxdWlyZSgndmlydHVhbC1kb20vdm5vZGUvaXMtdnRleHQnKTtcbnZhciBpc1dpZGdldCA9IHJlcXVpcmUoJ3ZpcnR1YWwtZG9tL3Zub2RlL2lzLXdpZGdldCcpO1xudmFyIGlzSG9vayA9IHJlcXVpcmUoJ3ZpcnR1YWwtZG9tL3Zub2RlL2lzLXZob29rJyk7XG52YXIgaXNWVGh1bmsgPSByZXF1aXJlKCd2aXJ0dWFsLWRvbS92bm9kZS9pcy10aHVuaycpO1xuXG52YXIgcGFyc2VUYWcgPSByZXF1aXJlKCd2aXJ0dWFsLWRvbS92aXJ0dWFsLWh5cGVyc2NyaXB0L3BhcnNlLXRhZy5qcycpO1xudmFyIHNvZnRTZXRIb29rID0gcmVxdWlyZSgndmlydHVhbC1kb20vdmlydHVhbC1oeXBlcnNjcmlwdC9ob29rcy9zb2Z0LXNldC1ob29rLmpzJyk7XG52YXIgZXZIb29rID0gcmVxdWlyZSgndmlydHVhbC1kb20vdmlydHVhbC1oeXBlcnNjcmlwdC9ob29rcy9ldi1ob29rLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gaDtcblxuZnVuY3Rpb24gaCh0YWdOYW1lLCBwcm9wZXJ0aWVzLCBjaGlsZHJlbikge1xuICB2YXIgY2hpbGROb2RlcyA9IFtdO1xuICB2YXIgdGFnLCBwcm9wcywga2V5LCBuYW1lc3BhY2U7XG5cbiAgaWYgKCFjaGlsZHJlbiAmJiBpc0NoaWxkcmVuKHByb3BlcnRpZXMpKSB7XG4gICAgY2hpbGRyZW4gPSBwcm9wZXJ0aWVzO1xuICAgIHByb3BzID0ge307XG4gIH1cblxuICBwcm9wcyA9IHByb3BzIHx8IHByb3BlcnRpZXMgfHwge307XG4gIHRhZyA9IHBhcnNlVGFnKHRhZ05hbWUsIHByb3BzKTtcblxuICAvLyBzdXBwb3J0IGtleXNcbiAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KCdrZXknKSkge1xuICAgIGtleSA9IHByb3BzLmtleTtcbiAgICBwcm9wcy5rZXkgPSB1bmRlZmluZWQ7XG4gIH1cblxuICAvLyBzdXBwb3J0IG5hbWVzcGFjZVxuICBpZiAocHJvcHMuaGFzT3duUHJvcGVydHkoJ25hbWVzcGFjZScpKSB7XG4gICAgbmFtZXNwYWNlID0gcHJvcHMubmFtZXNwYWNlO1xuICAgIHByb3BzLm5hbWVzcGFjZSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8vIGZpeCBjdXJzb3IgYnVnXG4gIGlmICh0YWcgPT09ICdJTlBVVCcgJiYgIW5hbWVzcGFjZSAmJiBwcm9wcy5oYXNPd25Qcm9wZXJ0eSgndmFsdWUnKSAmJiBwcm9wcy52YWx1ZSAhPT0gdW5kZWZpbmVkICYmICFpc0hvb2socHJvcHMudmFsdWUpKSB7XG4gICAgcHJvcHMudmFsdWUgPSBzb2Z0U2V0SG9vayhwcm9wcy52YWx1ZSk7XG4gIH1cblxuICB0cmFuc2Zvcm1Qcm9wZXJ0aWVzKHByb3BzKTtcblxuICBpZiAoY2hpbGRyZW4gIT09IHVuZGVmaW5lZCAmJiBjaGlsZHJlbiAhPT0gbnVsbCkge1xuICAgIGFkZENoaWxkKGNoaWxkcmVuLCBjaGlsZE5vZGVzLCB0YWcsIHByb3BzKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgVk5vZGUodGFnLCBwcm9wcywgY2hpbGROb2Rlcywga2V5LCBuYW1lc3BhY2UpO1xufVxuXG5mdW5jdGlvbiBhZGRDaGlsZChjLCBjaGlsZE5vZGVzLCB0YWcsIHByb3BzKSB7XG4gIGlmICh0eXBlb2YgYyA9PT0gJ3N0cmluZycpIHtcbiAgICBjaGlsZE5vZGVzLnB1c2gobmV3IFZUZXh0KGMpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYyA9PT0gJ251bWJlcicpIHtcbiAgICBjaGlsZE5vZGVzLnB1c2gobmV3IFZUZXh0KFN0cmluZyhjKSkpO1xuICB9IGVsc2UgaWYgKGlzQ2hpbGQoYykpIHtcbiAgICBjaGlsZE5vZGVzLnB1c2goYyk7XG4gIH0gZWxzZSBpZiAoaXNBcnJheShjKSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYy5sZW5ndGg7IGkrKykge1xuICAgICAgYWRkQ2hpbGQoY1tpXSwgY2hpbGROb2RlcywgdGFnLCBwcm9wcyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGMgPT09IG51bGwgfHwgYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2Uge1xuICAgIHRocm93IFVuZXhwZWN0ZWRWaXJ0dWFsRWxlbWVudCh7XG4gICAgICBmb3JlaWduT2JqZWN0OiBjLFxuICAgICAgcGFyZW50Vm5vZGU6IHtcbiAgICAgICAgdGFnTmFtZTogdGFnLFxuICAgICAgICBwcm9wZXJ0aWVzOiBwcm9wc1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVByb3BlcnRpZXMocHJvcHMpIHtcbiAgZm9yICh2YXIgcHJvcE5hbWUgaW4gcHJvcHMpIHtcbiAgICBpZiAocHJvcHMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICB2YXIgdmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG5cbiAgICAgIGlmIChpc0hvb2sodmFsdWUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAocHJvcE5hbWUuc3Vic3RyKDAsIDMpID09PSAnZXYtJykge1xuICAgICAgICAvLyBhZGQgZXYtZm9vIHN1cHBvcnRcbiAgICAgICAgcHJvcHNbcHJvcE5hbWVdID0gZXZIb29rKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLy8gU1RBUlQgQ3ljbGUuanMtc3BlY2lmaWMgY29kZSA+Pj4+Pj4+PlxuZnVuY3Rpb24gaXNPYnNlcnZhYmxlKHgpIHtcbiAgcmV0dXJuIHggJiYgdHlwZW9mIHguc3Vic2NyaWJlID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpc0NoaWxkKHgpIHtcbiAgcmV0dXJuIGlzVk5vZGUoeCkgfHwgaXNWVGV4dCh4KSB8fCBpc09ic2VydmFibGUoeCkgfHwgaXNXaWRnZXQoeCkgfHwgaXNWVGh1bmsoeCk7XG59XG4vLyBFTkQgQ3ljbGUuanMtc3BlY2lmaWMgY29kZSA8PDw8PDw8PDw8XG5cbmZ1bmN0aW9uIGlzQ2hpbGRyZW4oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdzdHJpbmcnIHx8IGlzQXJyYXkoeCkgfHwgaXNDaGlsZCh4KTtcbn1cblxuZnVuY3Rpb24gVW5leHBlY3RlZFZpcnR1YWxFbGVtZW50KGRhdGEpIHtcbiAgdmFyIGVyciA9IG5ldyBFcnJvcigpO1xuXG4gIGVyci50eXBlID0gJ3ZpcnR1YWwtaHlwZXJzY3JpcHQudW5leHBlY3RlZC52aXJ0dWFsLWVsZW1lbnQnO1xuICBlcnIubWVzc2FnZSA9ICdVbmV4cGVjdGVkIHZpcnR1YWwgY2hpbGQgcGFzc2VkIHRvIGgoKS5cXG4nICsgJ0V4cGVjdGVkIGEgVk5vZGUgLyBWdGh1bmsgLyBWV2lkZ2V0IC8gc3RyaW5nIGJ1dDpcXG4nICsgJ2dvdDpcXG4nICsgZXJyb3JTdHJpbmcoZGF0YS5mb3JlaWduT2JqZWN0KSArICcuXFxuJyArICdUaGUgcGFyZW50IHZub2RlIGlzOlxcbicgKyBlcnJvclN0cmluZyhkYXRhLnBhcmVudFZub2RlKTtcbiAgJ1xcbicgKyAnU3VnZ2VzdGVkIGZpeDogY2hhbmdlIHlvdXIgYGgoLi4uLCBbIC4uLiBdKWAgY2FsbHNpdGUuJztcbiAgZXJyLmZvcmVpZ25PYmplY3QgPSBkYXRhLmZvcmVpZ25PYmplY3Q7XG4gIGVyci5wYXJlbnRWbm9kZSA9IGRhdGEucGFyZW50Vm5vZGU7XG5cbiAgcmV0dXJuIGVycjtcbn1cblxuZnVuY3Rpb24gZXJyb3JTdHJpbmcob2JqKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgJyAgICAnKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBTdHJpbmcob2JqKTtcbiAgfVxufVxuLyogZXNsaW50LWVuYWJsZSAqLyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgUnggPSByZXF1aXJlKFwicnhcIik7XG52YXIgc3VwZXJhZ2VudCA9IHJlcXVpcmUoXCJzdXBlcmFnZW50XCIpO1xuXG5mdW5jdGlvbiBvcHRpb25zVG9TdXBlcmFnZW50KF9yZWYpIHtcbiAgdmFyIHVybCA9IF9yZWYudXJsO1xuICB2YXIgX3JlZiRzZW5kID0gX3JlZi5zZW5kO1xuICB2YXIgc2VuZCA9IF9yZWYkc2VuZCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF9yZWYkc2VuZDtcbiAgdmFyIF9yZWYkYWNjZXB0ID0gX3JlZi5hY2NlcHQ7XG4gIHZhciBhY2NlcHQgPSBfcmVmJGFjY2VwdCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF9yZWYkYWNjZXB0O1xuICB2YXIgX3JlZiRxdWVyeSA9IF9yZWYucXVlcnk7XG4gIHZhciBxdWVyeSA9IF9yZWYkcXVlcnkgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBfcmVmJHF1ZXJ5O1xuICB2YXIgX3JlZiR1c2VyID0gX3JlZi51c2VyO1xuICB2YXIgdXNlciA9IF9yZWYkdXNlciA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF9yZWYkdXNlcjtcbiAgdmFyIF9yZWYkcGFzc3dvcmQgPSBfcmVmLnBhc3N3b3JkO1xuICB2YXIgcGFzc3dvcmQgPSBfcmVmJHBhc3N3b3JkID09PSB1bmRlZmluZWQgPyBudWxsIDogX3JlZiRwYXNzd29yZDtcbiAgdmFyIF9yZWYkZmllbGQgPSBfcmVmLmZpZWxkO1xuICB2YXIgZmllbGQgPSBfcmVmJGZpZWxkID09PSB1bmRlZmluZWQgPyBudWxsIDogX3JlZiRmaWVsZDtcbiAgdmFyIF9yZWYkYXR0YWNoID0gX3JlZi5hdHRhY2g7XG4gIHZhciBhdHRhY2ggPSBfcmVmJGF0dGFjaCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF9yZWYkYXR0YWNoO1xuICB2YXIgX3JlZiR3aXRoQ3JlZGVudGlhbHMgPSBfcmVmLndpdGhDcmVkZW50aWFscztcbiAgdmFyIC8vIGlmIHZhbGlkLCBzaG91bGQgYmUgYW4gYXJyYXlcbiAgd2l0aENyZWRlbnRpYWxzID0gX3JlZiR3aXRoQ3JlZGVudGlhbHMgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiR3aXRoQ3JlZGVudGlhbHM7XG4gIHZhciBfcmVmJGhlYWRlcnMgPSBfcmVmLmhlYWRlcnM7XG4gIHZhciBoZWFkZXJzID0gX3JlZiRoZWFkZXJzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkaGVhZGVycztcbiAgdmFyIF9yZWYkcmVkaXJlY3RzID0gX3JlZi5yZWRpcmVjdHM7XG4gIHZhciByZWRpcmVjdHMgPSBfcmVmJHJlZGlyZWN0cyA9PT0gdW5kZWZpbmVkID8gNSA6IF9yZWYkcmVkaXJlY3RzO1xuICB2YXIgX3JlZiR0eXBlID0gX3JlZi50eXBlO1xuICB2YXIgdHlwZSA9IF9yZWYkdHlwZSA9PT0gdW5kZWZpbmVkID8gXCJqc29uXCIgOiBfcmVmJHR5cGU7XG4gIHZhciBfcmVmJG1ldGhvZCA9IF9yZWYubWV0aG9kO1xuICB2YXIgbWV0aG9kID0gX3JlZiRtZXRob2QgPT09IHVuZGVmaW5lZCA/IFwiZ2V0XCIgOiBfcmVmJG1ldGhvZDtcblxuICBpZiAodHlwZW9mIHVybCAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBwcm92aWRlIGEgYHVybGAgcHJvcGVydHkgaW4gdGhlIHJlcXVlc3Qgb3B0aW9ucy5cIik7XG4gIH1cbiAgdmFyIGxvd2VyQ2FzZU1ldGhvZCA9IG1ldGhvZC50b0xvd2VyQ2FzZSgpO1xuICB2YXIgc2FuaXRpemVkTWV0aG9kID0gbG93ZXJDYXNlTWV0aG9kID09PSBcImRlbGV0ZVwiID8gXCJkZWxcIiA6IGxvd2VyQ2FzZU1ldGhvZDtcblxuICB2YXIgcmVxdWVzdCA9IHN1cGVyYWdlbnRbc2FuaXRpemVkTWV0aG9kXSh1cmwpO1xuICBpZiAodHlwZW9mIHJlcXVlc3QucmVkaXJlY3RzID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXF1ZXN0ID0gcmVxdWVzdC5yZWRpcmVjdHMocmVkaXJlY3RzKTtcbiAgfVxuICByZXF1ZXN0ID0gcmVxdWVzdC50eXBlKHR5cGUpO1xuICBpZiAoc2VuZCAhPT0gbnVsbCkge1xuICAgIHJlcXVlc3QgPSByZXF1ZXN0LnNlbmQoc2VuZCk7XG4gIH1cbiAgaWYgKGFjY2VwdCAhPT0gbnVsbCkge1xuICAgIHJlcXVlc3QgPSByZXF1ZXN0LmFjY2VwdChhY2NlcHQpO1xuICB9XG4gIGlmIChxdWVyeSAhPT0gbnVsbCkge1xuICAgIHJlcXVlc3QgPSByZXF1ZXN0LnF1ZXJ5KHF1ZXJ5KTtcbiAgfVxuICBpZiAod2l0aENyZWRlbnRpYWxzKSB7XG4gICAgcmVxdWVzdCA9IHJlcXVlc3Qud2l0aENyZWRlbnRpYWxzKCk7XG4gIH1cbiAgaWYgKHVzZXIgIT09IG51bGwgJiYgcGFzc3dvcmQgIT09IG51bGwpIHtcbiAgICByZXF1ZXN0ID0gcmVxdWVzdC5hdXRoKHVzZXIsIHBhc3N3b3JkKTtcbiAgfVxuICBmb3IgKHZhciBrZXkgaW4gaGVhZGVycykge1xuICAgIGlmIChoZWFkZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHJlcXVlc3QgPSByZXF1ZXN0LnNldChrZXksIGhlYWRlcnNba2V5XSk7XG4gICAgfVxuICB9XG4gIGlmIChmaWVsZCAhPT0gbnVsbCkge1xuICAgIGZvciAodmFyIGtleSBpbiBmaWVsZCkge1xuICAgICAgaWYgKGZpZWxkLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QuZmllbGQoa2V5LCBmaWVsZFtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGF0dGFjaCAhPT0gbnVsbCkge1xuICAgIGZvciAodmFyIGkgPSBhdHRhY2gubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBhID0gYXR0YWNoW2ldO1xuICAgICAgcmVxdWVzdCA9IHJlcXVlc3QuYXR0YWNoKGEubmFtZSwgYS5wYXRoLCBhLmZpbGVuYW1lKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcXVlc3Q7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlJChyZXFPcHRpb25zKSB7XG4gIHJldHVybiBSeC5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICB2YXIgcmVxdWVzdCA9IG9wdGlvbnNUb1N1cGVyYWdlbnQocmVxT3B0aW9ucyk7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKHJlcU9wdGlvbnMucHJvZ3Jlc3MpIHtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3Qub24oXCJwcm9ncmVzc1wiLCBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgcmVzLnJlcXVlc3QgPSByZXFPcHRpb25zO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChyZXMpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJlcXVlc3QuZW5kKGZ1bmN0aW9uIChlcnIsIHJlcykge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcy5yZXF1ZXN0ID0gcmVxT3B0aW9ucztcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQocmVzKTtcbiAgICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIG9ic2VydmVyLm9uRXJyb3IoZXJyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gb25EaXNwb3NlKCkge1xuICAgICAgcmVxdWVzdC5hYm9ydCgpO1xuICAgIH07XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVSZXF1ZXN0T3B0aW9ucyhyZXFPcHRpb25zKSB7XG4gIGlmICh0eXBlb2YgcmVxT3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiB7IHVybDogcmVxT3B0aW9ucyB9O1xuICB9IGVsc2UgaWYgKHR5cGVvZiByZXFPcHRpb25zID09PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIHJlcU9wdGlvbnM7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiT2JzZXJ2YWJsZSBvZiByZXF1ZXN0cyBnaXZlbiB0byBIVFRQIERyaXZlciBtdXN0IGVtaXQgXCIgKyBcImVpdGhlciBVUkwgc3RyaW5ncyBvciBvYmplY3RzIHdpdGggcGFyYW1ldGVycy5cIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNvbGF0ZVNpbmsocmVxdWVzdCQsIHNjb3BlKSB7XG4gIHJldHVybiByZXF1ZXN0JC5tYXAoZnVuY3Rpb24gKHJlcSkge1xuICAgIGlmICh0eXBlb2YgcmVxID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4geyB1cmw6IHJlcSwgX25hbWVzcGFjZTogW3Njb3BlXSB9O1xuICAgIH1cbiAgICByZXEuX25hbWVzcGFjZSA9IHJlcS5fbmFtZXNwYWNlIHx8IFtdO1xuICAgIHJlcS5fbmFtZXNwYWNlLnB1c2goc2NvcGUpO1xuICAgIHJldHVybiByZXE7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpc29sYXRlU291cmNlKHJlc3BvbnNlJCQsIHNjb3BlKSB7XG4gIHZhciBpc29sYXRlZFJlc3BvbnNlJCQgPSByZXNwb25zZSQkLmZpbHRlcihmdW5jdGlvbiAocmVzJCkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHJlcyQucmVxdWVzdC5fbmFtZXNwYWNlKSAmJiByZXMkLnJlcXVlc3QuX25hbWVzcGFjZS5pbmRleE9mKHNjb3BlKSAhPT0gLTE7XG4gIH0pO1xuICBpc29sYXRlZFJlc3BvbnNlJCQuaXNvbGF0ZVNvdXJjZSA9IGlzb2xhdGVTb3VyY2U7XG4gIGlzb2xhdGVkUmVzcG9uc2UkJC5pc29sYXRlU2luayA9IGlzb2xhdGVTaW5rO1xuICByZXR1cm4gaXNvbGF0ZWRSZXNwb25zZSQkO1xufVxuXG5mdW5jdGlvbiBtYWtlSFRUUERyaXZlcigpIHtcbiAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8geyBlYWdlcjogZmFsc2UgfSA6IGFyZ3VtZW50c1swXTtcblxuICB2YXIgX3JlZjIkZWFnZXIgPSBfcmVmMi5lYWdlcjtcbiAgdmFyIGVhZ2VyID0gX3JlZjIkZWFnZXIgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZjIkZWFnZXI7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGh0dHBEcml2ZXIocmVxdWVzdCQpIHtcbiAgICB2YXIgcmVzcG9uc2UkJCA9IHJlcXVlc3QkLm1hcChmdW5jdGlvbiAocmVxdWVzdCkge1xuICAgICAgdmFyIHJlcU9wdGlvbnMgPSBub3JtYWxpemVSZXF1ZXN0T3B0aW9ucyhyZXF1ZXN0KTtcbiAgICAgIHZhciByZXNwb25zZSQgPSBjcmVhdGVSZXNwb25zZSQocmVxT3B0aW9ucyk7XG4gICAgICBpZiAodHlwZW9mIHJlcU9wdGlvbnMuZWFnZXIgPT09IFwiYm9vbGVhblwiID8gcmVxT3B0aW9ucy5lYWdlciA6IGVhZ2VyKSB7XG4gICAgICAgIHJlc3BvbnNlJCA9IHJlc3BvbnNlJC5yZXBsYXkobnVsbCwgMSk7XG4gICAgICAgIHJlc3BvbnNlJC5jb25uZWN0KCk7XG4gICAgICB9XG4gICAgICByZXNwb25zZSQucmVxdWVzdCA9IHJlcU9wdGlvbnM7XG4gICAgICByZXR1cm4gcmVzcG9uc2UkO1xuICAgIH0pLnJlcGxheShudWxsLCAxKTtcbiAgICByZXNwb25zZSQkLmNvbm5lY3QoKTtcbiAgICByZXNwb25zZSQkLmlzb2xhdGVTb3VyY2UgPSBpc29sYXRlU291cmNlO1xuICAgIHJlc3BvbnNlJCQuaXNvbGF0ZVNpbmsgPSBpc29sYXRlU2luaztcbiAgICByZXR1cm4gcmVzcG9uc2UkJDtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIG9wdGlvbnNUb1N1cGVyYWdlbnQ6IG9wdGlvbnNUb1N1cGVyYWdlbnQsXG4gIGNyZWF0ZVJlc3BvbnNlJDogY3JlYXRlUmVzcG9uc2UkLFxuXG4gIG1ha2VIVFRQRHJpdmVyOiBtYWtlSFRUUERyaXZlclxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZShcIi4vaHR0cC1kcml2ZXJcIik7XG5cbnZhciBtYWtlSFRUUERyaXZlciA9IF9yZXF1aXJlLm1ha2VIVFRQRHJpdmVyO1xuXG52YXIgQ3ljbGVIVFRQRHJpdmVyID0ge1xuICAvKipcbiAgICogSFRUUCBEcml2ZXIgZmFjdG9yeS5cbiAgICpcbiAgICogVGhpcyBpcyBhIGZ1bmN0aW9uIHdoaWNoLCB3aGVuIGNhbGxlZCwgcmV0dXJucyBhIEhUVFAgRHJpdmVyIGZvciBDeWNsZS5qc1xuICAgKiBhcHBzLiBUaGUgZHJpdmVyIGlzIGFsc28gYSBmdW5jdGlvbiwgYW5kIGl0IHRha2VzIGFuIE9ic2VydmFibGUgb2YgcmVxdWVzdHNcbiAgICogYXMgaW5wdXQsIGFuZCBnZW5lcmF0ZXMgYSBtZXRhc3RyZWFtIG9mIHJlc3BvbnNlcy5cbiAgICpcbiAgICogKipSZXF1ZXN0cyoqLiBUaGUgT2JzZXJ2YWJsZSBvZiByZXF1ZXN0cyBzaG91bGQgZW1pdCBlaXRoZXIgc3RyaW5ncyBvclxuICAgKiBvYmplY3RzLiBJZiB0aGUgT2JzZXJ2YWJsZSBlbWl0cyBzdHJpbmdzLCB0aG9zZSBzaG91bGQgYmUgdGhlIFVSTCBvZiB0aGVcbiAgICogcmVtb3RlIHJlc291cmNlIG92ZXIgSFRUUC4gSWYgdGhlIE9ic2VydmFibGUgZW1pdHMgb2JqZWN0cywgdGhlc2Ugc2hvdWxkIGJlXG4gICAqIGluc3RydWN0aW9ucyBob3cgc3VwZXJhZ2VudCBzaG91bGQgZXhlY3V0ZSB0aGUgcmVxdWVzdC4gVGhlc2Ugb2JqZWN0c1xuICAgKiBmb2xsb3cgYSBzdHJ1Y3R1cmUgc2ltaWxhciB0byBzdXBlcmFnZW50J3MgcmVxdWVzdCBBUEkgaXRzZWxmLlxuICAgKiBgcmVxdWVzdGAgb2JqZWN0IHByb3BlcnRpZXM6XG4gICAqXG4gICAqIC0gYHVybGAgKihTdHJpbmcpKjogdGhlIHJlbW90ZSByZXNvdXJjZSBwYXRoLiAqKnJlcXVpcmVkKipcbiAgICogLSBgbWV0aG9kYCAqKFN0cmluZykqOiBIVFRQIE1ldGhvZCBmb3IgdGhlIHJlcXVlc3QgKEdFVCwgUE9TVCwgUFVULCBldGMpLlxuICAgKiAtIGBxdWVyeWAgKihPYmplY3QpKjogYW4gb2JqZWN0IHdpdGggdGhlIHBheWxvYWQgZm9yIGBHRVRgIG9yIGBQT1NUYC5cbiAgICogLSBgc2VuZGAgKihPYmplY3QpKjogYW4gb2JqZWN0IHdpdGggdGhlIHBheWxvYWQgZm9yIGBQT1NUYC5cbiAgICogLSBgaGVhZGVyc2AgKihPYmplY3QpKjogb2JqZWN0IHNwZWNpZnlpbmcgSFRUUCBoZWFkZXJzLlxuICAgKiAtIGBhY2NlcHRgICooU3RyaW5nKSo6IHRoZSBBY2NlcHQgaGVhZGVyLlxuICAgKiAtIGB0eXBlYCAqKFN0cmluZykqOiBhIHNob3J0LWhhbmQgZm9yIHNldHRpbmcgQ29udGVudC1UeXBlLlxuICAgKiAtIGB1c2VyYCAqKFN0cmluZykqOiB1c2VybmFtZSBmb3IgYXV0aGVudGljYXRpb24uXG4gICAqIC0gYHBhc3N3b3JkYCAqKFN0cmluZykqOiBwYXNzd29yZCBmb3IgYXV0aGVudGljYXRpb24uXG4gICAqIC0gYGZpZWxkYCAqKE9iamVjdCkqOiBvYmplY3Qgd2hlcmUga2V5L3ZhbHVlcyBhcmUgRm9ybSBmaWVsZHMuXG4gICAqIC0gYHByb2dyZXNzYCAqKEJvb2xlYW4pKjogd2hldGhlciBvciBub3QgdG8gZGV0ZWN0IGFuZCBlbWl0IHByb2dyZXNzIGV2ZW50c1xuICAgKiAgIG9uIHRoZSByZXNwb25zZSBPYnNlcnZhYmxlLlxuICAgKiAtIGBhdHRhY2hgICooQXJyYXkpKjogYXJyYXkgb2Ygb2JqZWN0cywgd2hlcmUgZWFjaCBvYmplY3Qgc3BlY2lmaWVzIGBuYW1lYCxcbiAgICogYHBhdGhgLCBhbmQgYGZpbGVuYW1lYCBvZiBhIHJlc291cmNlIHRvIHVwbG9hZC5cbiAgICogLSBgd2l0aENyZWRlbnRpYWxzYCAqKEJvb2xlYW4pKjogZW5hYmxlcyB0aGUgYWJpbGl0eSB0byBzZW5kIGNvb2tpZXMgZnJvbVxuICAgKiB0aGUgb3JpZ2luLlxuICAgKiAtIGByZWRpcmVjdHNgICooTnVtYmVyKSo6IG51bWJlciBvZiByZWRpcmVjdHMgdG8gZm9sbG93LlxuICAgKiAtIGBlYWdlcmAgKihCb29sZWFuKSo6IHdoZXRoZXIgb3Igbm90IHRvIGV4ZWN1dGUgdGhlIHJlcXVlc3QgcmVnYXJkbGVzcyBvZlxuICAgKiAgIHVzYWdlIG9mIGl0cyBjb3JyZXNwb25kaW5nIHJlc3BvbnNlLiBCeSBkZWZhdWx0IHRoZSBlYWdlciBzZXR0aW5nIG9mIHRoZVxuICAgKiAgIGRyaXZlciBpcyB1c2VkICh3aG9zZSBkZWZhdWx0IGlzIGBmYWxzZWAsIGkuZS4gdGhlIHJlcXVlc3QgaXMgbGF6eSkuXG4gICAqICAgRXhwbGljaXRlbHkgc2V0dGluZyBlYWdlciBpbiB0aGUgcmVxdWVzdCBhbHdheXMgb3ZlcnJpZGVzIHRoZSBkcml2ZXJcbiAgICogICBzZXR0aW5nLiBNYWluIHVzZSBjYXNlIGlzOiBzZXQgdGhpcyBvcHRpb24gdG8gYHRydWVgIGlmIHlvdSBzZW5kIFBPU1RcbiAgICogICByZXF1ZXN0cyBhbmQgeW91IGFyZSBub3QgaW50ZXJlc3RlZCBpbiBpdHMgcmVzcG9uc2UuXG4gICAqXG4gICAqICoqUmVzcG9uc2VzKiouIEEgbWV0YXN0cmVhbSBpcyBhbiBPYnNlcnZhYmxlIG9mIE9ic2VydmFibGVzLiBUaGUgcmVzcG9uc2VcbiAgICogbWV0YXN0cmVhbSBlbWl0cyBPYnNlcnZhYmxlcyBvZiByZXNwb25zZXMuIFRoZXNlIE9ic2VydmFibGVzIG9mIHJlc3BvbnNlc1xuICAgKiBoYXZlIGEgYHJlcXVlc3RgIGZpZWxkIGF0dGFjaGVkIHRvIHRoZW0gKHRvIHRoZSBPYnNlcnZhYmxlIG9iamVjdCBpdHNlbGYpXG4gICAqIGluZGljYXRpbmcgd2hpY2ggcmVxdWVzdCAoZnJvbSB0aGUgZHJpdmVyIGlucHV0KSBnZW5lcmF0ZWQgdGhpcyByZXNwb25zZVxuICAgKiBPYnNlcnZhYmxlLiBUaGUgcmVzcG9uc2UgT2JzZXJ2YWJsZXMgdGhlbXNlbHZlcyBlbWl0IHRoZSByZXNwb25zZSBvYmplY3RcbiAgICogcmVjZWl2ZWQgdGhyb3VnaCBzdXBlcmFnZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBhbiBvYmplY3Qgd2l0aCBzZXR0aW5ncyBvcHRpb25zIHRoYXQgYXBwbHkgZ2xvYmFsbHlcbiAgICogZm9yIGFsbCByZXF1ZXN0cyBwcm9jZXNzZWQgYnkgdGhlIHJldHVybmVkIEhUVFAgRHJpdmVyIGZ1bmN0aW9uLiBUaGVcbiAgICogb3B0aW9ucyBhcmU6XG4gICAqIC0gYGVhZ2VyYCAqKEJvb2xlYW4pKjogZXhlY3V0ZSB0aGUgSFRUUCBlYWdlcmx5LCBldmVuIGlmIGl0c1xuICAgKiAgIHJlc3BvbnNlIE9ic2VydmFibGUgaXMgbm90IHN1YnNjcmliZWQgdG8uIERlZmF1bHQ6ICoqZmFsc2UqKi5cbiAgICogICBDYW4gYmUgb3ZlcnJpZGRlbiBpbiB0aGUgcmVxdWVzdC5cbiAgICogQHJldHVybiB7RnVuY3Rpb259IHRoZSBIVFRQIERyaXZlciBmdW5jdGlvblxuICAgKiBAZnVuY3Rpb24gbWFrZUhUVFBEcml2ZXJcbiAgICovXG4gIG1ha2VIVFRQRHJpdmVyOiBtYWtlSFRUUERyaXZlclxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDeWNsZUhUVFBEcml2ZXI7IiwiLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBFbWl0dGVyID0gcmVxdWlyZSgnZW1pdHRlcicpO1xudmFyIHJlZHVjZSA9IHJlcXVpcmUoJ3JlZHVjZScpO1xuXG4vKipcbiAqIFJvb3QgcmVmZXJlbmNlIGZvciBpZnJhbWVzLlxuICovXG5cbnZhciByb290O1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7IC8vIEJyb3dzZXIgd2luZG93XG4gIHJvb3QgPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykgeyAvLyBXZWIgV29ya2VyXG4gIHJvb3QgPSBzZWxmO1xufSBlbHNlIHsgLy8gT3RoZXIgZW52aXJvbm1lbnRzXG4gIHJvb3QgPSB0aGlzO1xufVxuXG4vKipcbiAqIE5vb3AuXG4gKi9cblxuZnVuY3Rpb24gbm9vcCgpe307XG5cbi8qKlxuICogQ2hlY2sgaWYgYG9iamAgaXMgYSBob3N0IG9iamVjdCxcbiAqIHdlIGRvbid0IHdhbnQgdG8gc2VyaWFsaXplIHRoZXNlIDopXG4gKlxuICogVE9ETzogZnV0dXJlIHByb29mLCBtb3ZlIHRvIGNvbXBvZW50IGxhbmRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gaXNIb3N0KG9iaikge1xuICB2YXIgc3RyID0ge30udG9TdHJpbmcuY2FsbChvYmopO1xuXG4gIHN3aXRjaCAoc3RyKSB7XG4gICAgY2FzZSAnW29iamVjdCBGaWxlXSc6XG4gICAgY2FzZSAnW29iamVjdCBCbG9iXSc6XG4gICAgY2FzZSAnW29iamVjdCBGb3JtRGF0YV0nOlxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIERldGVybWluZSBYSFIuXG4gKi9cblxucmVxdWVzdC5nZXRYSFIgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChyb290LlhNTEh0dHBSZXF1ZXN0XG4gICAgICAmJiAoIXJvb3QubG9jYXRpb24gfHwgJ2ZpbGU6JyAhPSByb290LmxvY2F0aW9uLnByb3RvY29sXG4gICAgICAgICAgfHwgIXJvb3QuQWN0aXZlWE9iamVjdCkpIHtcbiAgICByZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0O1xuICB9IGVsc2Uge1xuICAgIHRyeSB7IHJldHVybiBuZXcgQWN0aXZlWE9iamVjdCgnTWljcm9zb2Z0LlhNTEhUVFAnKTsgfSBjYXRjaChlKSB7fVxuICAgIHRyeSB7IHJldHVybiBuZXcgQWN0aXZlWE9iamVjdCgnTXN4bWwyLlhNTEhUVFAuNi4wJyk7IH0gY2F0Y2goZSkge31cbiAgICB0cnkgeyByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoJ01zeG1sMi5YTUxIVFRQLjMuMCcpOyB9IGNhdGNoKGUpIHt9XG4gICAgdHJ5IHsgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNc3htbDIuWE1MSFRUUCcpOyB9IGNhdGNoKGUpIHt9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UsIGFkZGVkIHRvIHN1cHBvcnQgSUUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbnZhciB0cmltID0gJycudHJpbVxuICA/IGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMudHJpbSgpOyB9XG4gIDogZnVuY3Rpb24ocykgeyByZXR1cm4gcy5yZXBsYWNlKC8oXlxccyp8XFxzKiQpL2csICcnKTsgfTtcblxuLyoqXG4gKiBDaGVjayBpZiBgb2JqYCBpcyBhbiBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICByZXR1cm4gb2JqID09PSBPYmplY3Qob2JqKTtcbn1cblxuLyoqXG4gKiBTZXJpYWxpemUgdGhlIGdpdmVuIGBvYmpgLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZShvYmopIHtcbiAgaWYgKCFpc09iamVjdChvYmopKSByZXR1cm4gb2JqO1xuICB2YXIgcGFpcnMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChudWxsICE9IG9ialtrZXldKSB7XG4gICAgICBwdXNoRW5jb2RlZEtleVZhbHVlUGFpcihwYWlycywga2V5LCBvYmpba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgcmV0dXJuIHBhaXJzLmpvaW4oJyYnKTtcbn1cblxuLyoqXG4gKiBIZWxwcyAnc2VyaWFsaXplJyB3aXRoIHNlcmlhbGl6aW5nIGFycmF5cy5cbiAqIE11dGF0ZXMgdGhlIHBhaXJzIGFycmF5LlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHBhaXJzXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge01peGVkfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiBwdXNoRW5jb2RlZEtleVZhbHVlUGFpcihwYWlycywga2V5LCB2YWwpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgIHJldHVybiB2YWwuZm9yRWFjaChmdW5jdGlvbih2KSB7XG4gICAgICBwdXNoRW5jb2RlZEtleVZhbHVlUGFpcihwYWlycywga2V5LCB2KTtcbiAgICB9KTtcbiAgfVxuICBwYWlycy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpXG4gICAgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsKSk7XG59XG5cbi8qKlxuICogRXhwb3NlIHNlcmlhbGl6YXRpb24gbWV0aG9kLlxuICovXG5cbiByZXF1ZXN0LnNlcmlhbGl6ZU9iamVjdCA9IHNlcmlhbGl6ZTtcblxuIC8qKlxuICAqIFBhcnNlIHRoZSBnaXZlbiB4LXd3dy1mb3JtLXVybGVuY29kZWQgYHN0cmAuXG4gICpcbiAgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gICogQHJldHVybiB7T2JqZWN0fVxuICAqIEBhcGkgcHJpdmF0ZVxuICAqL1xuXG5mdW5jdGlvbiBwYXJzZVN0cmluZyhzdHIpIHtcbiAgdmFyIG9iaiA9IHt9O1xuICB2YXIgcGFpcnMgPSBzdHIuc3BsaXQoJyYnKTtcbiAgdmFyIHBhcnRzO1xuICB2YXIgcGFpcjtcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gcGFpcnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBwYWlyID0gcGFpcnNbaV07XG4gICAgcGFydHMgPSBwYWlyLnNwbGl0KCc9Jyk7XG4gICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChwYXJ0c1swXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzWzFdKTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogRXhwb3NlIHBhcnNlci5cbiAqL1xuXG5yZXF1ZXN0LnBhcnNlU3RyaW5nID0gcGFyc2VTdHJpbmc7XG5cbi8qKlxuICogRGVmYXVsdCBNSU1FIHR5cGUgbWFwLlxuICpcbiAqICAgICBzdXBlcmFnZW50LnR5cGVzLnhtbCA9ICdhcHBsaWNhdGlvbi94bWwnO1xuICpcbiAqL1xuXG5yZXF1ZXN0LnR5cGVzID0ge1xuICBodG1sOiAndGV4dC9odG1sJyxcbiAganNvbjogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICB4bWw6ICdhcHBsaWNhdGlvbi94bWwnLFxuICB1cmxlbmNvZGVkOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgJ2Zvcm0nOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgJ2Zvcm0tZGF0YSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG59O1xuXG4vKipcbiAqIERlZmF1bHQgc2VyaWFsaXphdGlvbiBtYXAuXG4gKlxuICogICAgIHN1cGVyYWdlbnQuc2VyaWFsaXplWydhcHBsaWNhdGlvbi94bWwnXSA9IGZ1bmN0aW9uKG9iail7XG4gKiAgICAgICByZXR1cm4gJ2dlbmVyYXRlZCB4bWwgaGVyZSc7XG4gKiAgICAgfTtcbiAqXG4gKi9cblxuIHJlcXVlc3Quc2VyaWFsaXplID0ge1xuICAgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc6IHNlcmlhbGl6ZSxcbiAgICdhcHBsaWNhdGlvbi9qc29uJzogSlNPTi5zdHJpbmdpZnlcbiB9O1xuXG4gLyoqXG4gICogRGVmYXVsdCBwYXJzZXJzLlxuICAqXG4gICogICAgIHN1cGVyYWdlbnQucGFyc2VbJ2FwcGxpY2F0aW9uL3htbCddID0gZnVuY3Rpb24oc3RyKXtcbiAgKiAgICAgICByZXR1cm4geyBvYmplY3QgcGFyc2VkIGZyb20gc3RyIH07XG4gICogICAgIH07XG4gICpcbiAgKi9cblxucmVxdWVzdC5wYXJzZSA9IHtcbiAgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc6IHBhcnNlU3RyaW5nLFxuICAnYXBwbGljYXRpb24vanNvbic6IEpTT04ucGFyc2Vcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGhlYWRlciBgc3RyYCBpbnRvXG4gKiBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgbWFwcGVkIGZpZWxkcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZUhlYWRlcihzdHIpIHtcbiAgdmFyIGxpbmVzID0gc3RyLnNwbGl0KC9cXHI/XFxuLyk7XG4gIHZhciBmaWVsZHMgPSB7fTtcbiAgdmFyIGluZGV4O1xuICB2YXIgbGluZTtcbiAgdmFyIGZpZWxkO1xuICB2YXIgdmFsO1xuXG4gIGxpbmVzLnBvcCgpOyAvLyB0cmFpbGluZyBDUkxGXG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGxpbmVzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgbGluZSA9IGxpbmVzW2ldO1xuICAgIGluZGV4ID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAgZmllbGQgPSBsaW5lLnNsaWNlKDAsIGluZGV4KS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhbCA9IHRyaW0obGluZS5zbGljZShpbmRleCArIDEpKTtcbiAgICBmaWVsZHNbZmllbGRdID0gdmFsO1xuICB9XG5cbiAgcmV0dXJuIGZpZWxkcztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBgbWltZWAgaXMganNvbiBvciBoYXMgK2pzb24gc3RydWN0dXJlZCBzeW50YXggc3VmZml4LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtaW1lXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gaXNKU09OKG1pbWUpIHtcbiAgcmV0dXJuIC9bXFwvK11qc29uXFxiLy50ZXN0KG1pbWUpO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgbWltZSB0eXBlIGZvciB0aGUgZ2l2ZW4gYHN0cmAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gdHlwZShzdHIpe1xuICByZXR1cm4gc3RyLnNwbGl0KC8gKjsgKi8pLnNoaWZ0KCk7XG59O1xuXG4vKipcbiAqIFJldHVybiBoZWFkZXIgZmllbGQgcGFyYW1ldGVycy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJhbXMoc3RyKXtcbiAgcmV0dXJuIHJlZHVjZShzdHIuc3BsaXQoLyAqOyAqLyksIGZ1bmN0aW9uKG9iaiwgc3RyKXtcbiAgICB2YXIgcGFydHMgPSBzdHIuc3BsaXQoLyAqPSAqLylcbiAgICAgICwga2V5ID0gcGFydHMuc2hpZnQoKVxuICAgICAgLCB2YWwgPSBwYXJ0cy5zaGlmdCgpO1xuXG4gICAgaWYgKGtleSAmJiB2YWwpIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybiBvYmo7XG4gIH0sIHt9KTtcbn07XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBhIG5ldyBgUmVzcG9uc2VgIHdpdGggdGhlIGdpdmVuIGB4aHJgLlxuICpcbiAqICAtIHNldCBmbGFncyAoLm9rLCAuZXJyb3IsIGV0YylcbiAqICAtIHBhcnNlIGhlYWRlclxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICBBbGlhc2luZyBgc3VwZXJhZ2VudGAgYXMgYHJlcXVlc3RgIGlzIG5pY2U6XG4gKlxuICogICAgICByZXF1ZXN0ID0gc3VwZXJhZ2VudDtcbiAqXG4gKiAgV2UgY2FuIHVzZSB0aGUgcHJvbWlzZS1saWtlIEFQSSwgb3IgcGFzcyBjYWxsYmFja3M6XG4gKlxuICogICAgICByZXF1ZXN0LmdldCgnLycpLmVuZChmdW5jdGlvbihyZXMpe30pO1xuICogICAgICByZXF1ZXN0LmdldCgnLycsIGZ1bmN0aW9uKHJlcyl7fSk7XG4gKlxuICogIFNlbmRpbmcgZGF0YSBjYW4gYmUgY2hhaW5lZDpcbiAqXG4gKiAgICAgIHJlcXVlc3RcbiAqICAgICAgICAucG9zdCgnL3VzZXInKVxuICogICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgIC5lbmQoZnVuY3Rpb24ocmVzKXt9KTtcbiAqXG4gKiAgT3IgcGFzc2VkIHRvIGAuc2VuZCgpYDpcbiAqXG4gKiAgICAgIHJlcXVlc3RcbiAqICAgICAgICAucG9zdCgnL3VzZXInKVxuICogICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9LCBmdW5jdGlvbihyZXMpe30pO1xuICpcbiAqICBPciBwYXNzZWQgdG8gYC5wb3N0KClgOlxuICpcbiAqICAgICAgcmVxdWVzdFxuICogICAgICAgIC5wb3N0KCcvdXNlcicsIHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgIC5lbmQoZnVuY3Rpb24ocmVzKXt9KTtcbiAqXG4gKiBPciBmdXJ0aGVyIHJlZHVjZWQgdG8gYSBzaW5nbGUgY2FsbCBmb3Igc2ltcGxlIGNhc2VzOlxuICpcbiAqICAgICAgcmVxdWVzdFxuICogICAgICAgIC5wb3N0KCcvdXNlcicsIHsgbmFtZTogJ3RqJyB9LCBmdW5jdGlvbihyZXMpe30pO1xuICpcbiAqIEBwYXJhbSB7WE1MSFRUUFJlcXVlc3R9IHhoclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIFJlc3BvbnNlKHJlcSwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdGhpcy5yZXEgPSByZXE7XG4gIHRoaXMueGhyID0gdGhpcy5yZXEueGhyO1xuICAvLyByZXNwb25zZVRleHQgaXMgYWNjZXNzaWJsZSBvbmx5IGlmIHJlc3BvbnNlVHlwZSBpcyAnJyBvciAndGV4dCcgYW5kIG9uIG9sZGVyIGJyb3dzZXJzXG4gIHRoaXMudGV4dCA9ICgodGhpcy5yZXEubWV0aG9kICE9J0hFQUQnICYmICh0aGlzLnhoci5yZXNwb25zZVR5cGUgPT09ICcnIHx8IHRoaXMueGhyLnJlc3BvbnNlVHlwZSA9PT0gJ3RleHQnKSkgfHwgdHlwZW9mIHRoaXMueGhyLnJlc3BvbnNlVHlwZSA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgID8gdGhpcy54aHIucmVzcG9uc2VUZXh0XG4gICAgIDogbnVsbDtcbiAgdGhpcy5zdGF0dXNUZXh0ID0gdGhpcy5yZXEueGhyLnN0YXR1c1RleHQ7XG4gIHRoaXMuc2V0U3RhdHVzUHJvcGVydGllcyh0aGlzLnhoci5zdGF0dXMpO1xuICB0aGlzLmhlYWRlciA9IHRoaXMuaGVhZGVycyA9IHBhcnNlSGVhZGVyKHRoaXMueGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTtcbiAgLy8gZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIHNvbWV0aW1lcyBmYWxzZWx5IHJldHVybnMgXCJcIiBmb3IgQ09SUyByZXF1ZXN0cywgYnV0XG4gIC8vIGdldFJlc3BvbnNlSGVhZGVyIHN0aWxsIHdvcmtzLiBzbyB3ZSBnZXQgY29udGVudC10eXBlIGV2ZW4gaWYgZ2V0dGluZ1xuICAvLyBvdGhlciBoZWFkZXJzIGZhaWxzLlxuICB0aGlzLmhlYWRlclsnY29udGVudC10eXBlJ10gPSB0aGlzLnhoci5nZXRSZXNwb25zZUhlYWRlcignY29udGVudC10eXBlJyk7XG4gIHRoaXMuc2V0SGVhZGVyUHJvcGVydGllcyh0aGlzLmhlYWRlcik7XG4gIHRoaXMuYm9keSA9IHRoaXMucmVxLm1ldGhvZCAhPSAnSEVBRCdcbiAgICA/IHRoaXMucGFyc2VCb2R5KHRoaXMudGV4dCA/IHRoaXMudGV4dCA6IHRoaXMueGhyLnJlc3BvbnNlKVxuICAgIDogbnVsbDtcbn1cblxuLyoqXG4gKiBHZXQgY2FzZS1pbnNlbnNpdGl2ZSBgZmllbGRgIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXNwb25zZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oZmllbGQpe1xuICByZXR1cm4gdGhpcy5oZWFkZXJbZmllbGQudG9Mb3dlckNhc2UoKV07XG59O1xuXG4vKipcbiAqIFNldCBoZWFkZXIgcmVsYXRlZCBwcm9wZXJ0aWVzOlxuICpcbiAqICAgLSBgLnR5cGVgIHRoZSBjb250ZW50IHR5cGUgd2l0aG91dCBwYXJhbXNcbiAqXG4gKiBBIHJlc3BvbnNlIG9mIFwiQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluOyBjaGFyc2V0PXV0Zi04XCJcbiAqIHdpbGwgcHJvdmlkZSB5b3Ugd2l0aCBhIGAudHlwZWAgb2YgXCJ0ZXh0L3BsYWluXCIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGhlYWRlclxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVzcG9uc2UucHJvdG90eXBlLnNldEhlYWRlclByb3BlcnRpZXMgPSBmdW5jdGlvbihoZWFkZXIpe1xuICAvLyBjb250ZW50LXR5cGVcbiAgdmFyIGN0ID0gdGhpcy5oZWFkZXJbJ2NvbnRlbnQtdHlwZSddIHx8ICcnO1xuICB0aGlzLnR5cGUgPSB0eXBlKGN0KTtcblxuICAvLyBwYXJhbXNcbiAgdmFyIG9iaiA9IHBhcmFtcyhjdCk7XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHRoaXNba2V5XSA9IG9ialtrZXldO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gYm9keSBgc3RyYC5cbiAqXG4gKiBVc2VkIGZvciBhdXRvLXBhcnNpbmcgb2YgYm9kaWVzLiBQYXJzZXJzXG4gKiBhcmUgZGVmaW5lZCBvbiB0aGUgYHN1cGVyYWdlbnQucGFyc2VgIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtNaXhlZH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS5wYXJzZUJvZHkgPSBmdW5jdGlvbihzdHIpe1xuICB2YXIgcGFyc2UgPSByZXF1ZXN0LnBhcnNlW3RoaXMudHlwZV07XG4gIHJldHVybiBwYXJzZSAmJiBzdHIgJiYgKHN0ci5sZW5ndGggfHwgc3RyIGluc3RhbmNlb2YgT2JqZWN0KVxuICAgID8gcGFyc2Uoc3RyKVxuICAgIDogbnVsbDtcbn07XG5cbi8qKlxuICogU2V0IGZsYWdzIHN1Y2ggYXMgYC5va2AgYmFzZWQgb24gYHN0YXR1c2AuXG4gKlxuICogRm9yIGV4YW1wbGUgYSAyeHggcmVzcG9uc2Ugd2lsbCBnaXZlIHlvdSBhIGAub2tgIG9mIF9fdHJ1ZV9fXG4gKiB3aGVyZWFzIDV4eCB3aWxsIGJlIF9fZmFsc2VfXyBhbmQgYC5lcnJvcmAgd2lsbCBiZSBfX3RydWVfXy4gVGhlXG4gKiBgLmNsaWVudEVycm9yYCBhbmQgYC5zZXJ2ZXJFcnJvcmAgYXJlIGFsc28gYXZhaWxhYmxlIHRvIGJlIG1vcmVcbiAqIHNwZWNpZmljLCBhbmQgYC5zdGF0dXNUeXBlYCBpcyB0aGUgY2xhc3Mgb2YgZXJyb3IgcmFuZ2luZyBmcm9tIDEuLjVcbiAqIHNvbWV0aW1lcyB1c2VmdWwgZm9yIG1hcHBpbmcgcmVzcG9uZCBjb2xvcnMgZXRjLlxuICpcbiAqIFwic3VnYXJcIiBwcm9wZXJ0aWVzIGFyZSBhbHNvIGRlZmluZWQgZm9yIGNvbW1vbiBjYXNlcy4gQ3VycmVudGx5IHByb3ZpZGluZzpcbiAqXG4gKiAgIC0gLm5vQ29udGVudFxuICogICAtIC5iYWRSZXF1ZXN0XG4gKiAgIC0gLnVuYXV0aG9yaXplZFxuICogICAtIC5ub3RBY2NlcHRhYmxlXG4gKiAgIC0gLm5vdEZvdW5kXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVzcG9uc2UucHJvdG90eXBlLnNldFN0YXR1c1Byb3BlcnRpZXMgPSBmdW5jdGlvbihzdGF0dXMpe1xuICAvLyBoYW5kbGUgSUU5IGJ1ZzogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDA0Njk3Mi9tc2llLXJldHVybnMtc3RhdHVzLWNvZGUtb2YtMTIyMy1mb3ItYWpheC1yZXF1ZXN0XG4gIGlmIChzdGF0dXMgPT09IDEyMjMpIHtcbiAgICBzdGF0dXMgPSAyMDQ7XG4gIH1cblxuICB2YXIgdHlwZSA9IHN0YXR1cyAvIDEwMCB8IDA7XG5cbiAgLy8gc3RhdHVzIC8gY2xhc3NcbiAgdGhpcy5zdGF0dXMgPSB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXM7XG4gIHRoaXMuc3RhdHVzVHlwZSA9IHR5cGU7XG5cbiAgLy8gYmFzaWNzXG4gIHRoaXMuaW5mbyA9IDEgPT0gdHlwZTtcbiAgdGhpcy5vayA9IDIgPT0gdHlwZTtcbiAgdGhpcy5jbGllbnRFcnJvciA9IDQgPT0gdHlwZTtcbiAgdGhpcy5zZXJ2ZXJFcnJvciA9IDUgPT0gdHlwZTtcbiAgdGhpcy5lcnJvciA9ICg0ID09IHR5cGUgfHwgNSA9PSB0eXBlKVxuICAgID8gdGhpcy50b0Vycm9yKClcbiAgICA6IGZhbHNlO1xuXG4gIC8vIHN1Z2FyXG4gIHRoaXMuYWNjZXB0ZWQgPSAyMDIgPT0gc3RhdHVzO1xuICB0aGlzLm5vQ29udGVudCA9IDIwNCA9PSBzdGF0dXM7XG4gIHRoaXMuYmFkUmVxdWVzdCA9IDQwMCA9PSBzdGF0dXM7XG4gIHRoaXMudW5hdXRob3JpemVkID0gNDAxID09IHN0YXR1cztcbiAgdGhpcy5ub3RBY2NlcHRhYmxlID0gNDA2ID09IHN0YXR1cztcbiAgdGhpcy5ub3RGb3VuZCA9IDQwNCA9PSBzdGF0dXM7XG4gIHRoaXMuZm9yYmlkZGVuID0gNDAzID09IHN0YXR1cztcbn07XG5cbi8qKlxuICogUmV0dXJuIGFuIGBFcnJvcmAgcmVwcmVzZW50YXRpdmUgb2YgdGhpcyByZXNwb25zZS5cbiAqXG4gKiBAcmV0dXJuIHtFcnJvcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVzcG9uc2UucHJvdG90eXBlLnRvRXJyb3IgPSBmdW5jdGlvbigpe1xuICB2YXIgcmVxID0gdGhpcy5yZXE7XG4gIHZhciBtZXRob2QgPSByZXEubWV0aG9kO1xuICB2YXIgdXJsID0gcmVxLnVybDtcblxuICB2YXIgbXNnID0gJ2Nhbm5vdCAnICsgbWV0aG9kICsgJyAnICsgdXJsICsgJyAoJyArIHRoaXMuc3RhdHVzICsgJyknO1xuICB2YXIgZXJyID0gbmV3IEVycm9yKG1zZyk7XG4gIGVyci5zdGF0dXMgPSB0aGlzLnN0YXR1cztcbiAgZXJyLm1ldGhvZCA9IG1ldGhvZDtcbiAgZXJyLnVybCA9IHVybDtcblxuICByZXR1cm4gZXJyO1xufTtcblxuLyoqXG4gKiBFeHBvc2UgYFJlc3BvbnNlYC5cbiAqL1xuXG5yZXF1ZXN0LlJlc3BvbnNlID0gUmVzcG9uc2U7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBhIG5ldyBgUmVxdWVzdGAgd2l0aCB0aGUgZ2l2ZW4gYG1ldGhvZGAgYW5kIGB1cmxgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gUmVxdWVzdChtZXRob2QsIHVybCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIEVtaXR0ZXIuY2FsbCh0aGlzKTtcbiAgdGhpcy5fcXVlcnkgPSB0aGlzLl9xdWVyeSB8fCBbXTtcbiAgdGhpcy5tZXRob2QgPSBtZXRob2Q7XG4gIHRoaXMudXJsID0gdXJsO1xuICB0aGlzLmhlYWRlciA9IHt9O1xuICB0aGlzLl9oZWFkZXIgPSB7fTtcbiAgdGhpcy5vbignZW5kJywgZnVuY3Rpb24oKXtcbiAgICB2YXIgZXJyID0gbnVsbDtcbiAgICB2YXIgcmVzID0gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICByZXMgPSBuZXcgUmVzcG9uc2Uoc2VsZik7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBlcnIgPSBuZXcgRXJyb3IoJ1BhcnNlciBpcyB1bmFibGUgdG8gcGFyc2UgdGhlIHJlc3BvbnNlJyk7XG4gICAgICBlcnIucGFyc2UgPSB0cnVlO1xuICAgICAgZXJyLm9yaWdpbmFsID0gZTtcbiAgICAgIC8vIGlzc3VlICM2NzU6IHJldHVybiB0aGUgcmF3IHJlc3BvbnNlIGlmIHRoZSByZXNwb25zZSBwYXJzaW5nIGZhaWxzXG4gICAgICBlcnIucmF3UmVzcG9uc2UgPSBzZWxmLnhociAmJiBzZWxmLnhoci5yZXNwb25zZVRleHQgPyBzZWxmLnhoci5yZXNwb25zZVRleHQgOiBudWxsO1xuICAgICAgcmV0dXJuIHNlbGYuY2FsbGJhY2soZXJyKTtcbiAgICB9XG5cbiAgICBzZWxmLmVtaXQoJ3Jlc3BvbnNlJywgcmVzKTtcblxuICAgIGlmIChlcnIpIHtcbiAgICAgIHJldHVybiBzZWxmLmNhbGxiYWNrKGVyciwgcmVzKTtcbiAgICB9XG5cbiAgICBpZiAocmVzLnN0YXR1cyA+PSAyMDAgJiYgcmVzLnN0YXR1cyA8IDMwMCkge1xuICAgICAgcmV0dXJuIHNlbGYuY2FsbGJhY2soZXJyLCByZXMpO1xuICAgIH1cblxuICAgIHZhciBuZXdfZXJyID0gbmV3IEVycm9yKHJlcy5zdGF0dXNUZXh0IHx8ICdVbnN1Y2Nlc3NmdWwgSFRUUCByZXNwb25zZScpO1xuICAgIG5ld19lcnIub3JpZ2luYWwgPSBlcnI7XG4gICAgbmV3X2Vyci5yZXNwb25zZSA9IHJlcztcbiAgICBuZXdfZXJyLnN0YXR1cyA9IHJlcy5zdGF0dXM7XG5cbiAgICBzZWxmLmNhbGxiYWNrKG5ld19lcnIsIHJlcyk7XG4gIH0pO1xufVxuXG4vKipcbiAqIE1peGluIGBFbWl0dGVyYC5cbiAqL1xuXG5FbWl0dGVyKFJlcXVlc3QucHJvdG90eXBlKTtcblxuLyoqXG4gKiBBbGxvdyBmb3IgZXh0ZW5zaW9uXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24oZm4pIHtcbiAgZm4odGhpcyk7XG4gIHJldHVybiB0aGlzO1xufVxuXG4vKipcbiAqIFNldCB0aW1lb3V0IHRvIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUudGltZW91dCA9IGZ1bmN0aW9uKG1zKXtcbiAgdGhpcy5fdGltZW91dCA9IG1zO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQ2xlYXIgcHJldmlvdXMgdGltZW91dC5cbiAqXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuY2xlYXJUaW1lb3V0ID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5fdGltZW91dCA9IDA7XG4gIGNsZWFyVGltZW91dCh0aGlzLl90aW1lcik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBBYm9ydCB0aGUgcmVxdWVzdCwgYW5kIGNsZWFyIHBvdGVudGlhbCB0aW1lb3V0LlxuICpcbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24oKXtcbiAgaWYgKHRoaXMuYWJvcnRlZCkgcmV0dXJuO1xuICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuICB0aGlzLnhoci5hYm9ydCgpO1xuICB0aGlzLmNsZWFyVGltZW91dCgpO1xuICB0aGlzLmVtaXQoJ2Fib3J0Jyk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgaGVhZGVyIGBmaWVsZGAgdG8gYHZhbGAsIG9yIG11bHRpcGxlIGZpZWxkcyB3aXRoIG9uZSBvYmplY3QuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgICByZXEuZ2V0KCcvJylcbiAqICAgICAgICAuc2V0KCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpXG4gKiAgICAgICAgLnNldCgnWC1BUEktS2V5JywgJ2Zvb2JhcicpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogICAgICByZXEuZ2V0KCcvJylcbiAqICAgICAgICAuc2V0KHsgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsICdYLUFQSS1LZXknOiAnZm9vYmFyJyB9KVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZmllbGRcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihmaWVsZCwgdmFsKXtcbiAgaWYgKGlzT2JqZWN0KGZpZWxkKSkge1xuICAgIGZvciAodmFyIGtleSBpbiBmaWVsZCkge1xuICAgICAgdGhpcy5zZXQoa2V5LCBmaWVsZFtrZXldKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgdGhpcy5faGVhZGVyW2ZpZWxkLnRvTG93ZXJDYXNlKCldID0gdmFsO1xuICB0aGlzLmhlYWRlcltmaWVsZF0gPSB2YWw7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgaGVhZGVyIGBmaWVsZGAuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgIHJlcS5nZXQoJy8nKVxuICogICAgICAgIC51bnNldCgnVXNlci1BZ2VudCcpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbihmaWVsZCl7XG4gIGRlbGV0ZSB0aGlzLl9oZWFkZXJbZmllbGQudG9Mb3dlckNhc2UoKV07XG4gIGRlbGV0ZSB0aGlzLmhlYWRlcltmaWVsZF07XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBHZXQgY2FzZS1pbnNlbnNpdGl2ZSBoZWFkZXIgYGZpZWxkYCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZmllbGRcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmdldEhlYWRlciA9IGZ1bmN0aW9uKGZpZWxkKXtcbiAgcmV0dXJuIHRoaXMuX2hlYWRlcltmaWVsZC50b0xvd2VyQ2FzZSgpXTtcbn07XG5cbi8qKlxuICogU2V0IENvbnRlbnQtVHlwZSB0byBgdHlwZWAsIG1hcHBpbmcgdmFsdWVzIGZyb20gYHJlcXVlc3QudHlwZXNgLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgc3VwZXJhZ2VudC50eXBlcy54bWwgPSAnYXBwbGljYXRpb24veG1sJztcbiAqXG4gKiAgICAgIHJlcXVlc3QucG9zdCgnLycpXG4gKiAgICAgICAgLnR5cGUoJ3htbCcpXG4gKiAgICAgICAgLnNlbmQoeG1sc3RyaW5nKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqICAgICAgcmVxdWVzdC5wb3N0KCcvJylcbiAqICAgICAgICAudHlwZSgnYXBwbGljYXRpb24veG1sJylcbiAqICAgICAgICAuc2VuZCh4bWxzdHJpbmcpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS50eXBlID0gZnVuY3Rpb24odHlwZSl7XG4gIHRoaXMuc2V0KCdDb250ZW50LVR5cGUnLCByZXF1ZXN0LnR5cGVzW3R5cGVdIHx8IHR5cGUpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogRm9yY2UgZ2l2ZW4gcGFyc2VyXG4gKlxuICogU2V0cyB0aGUgYm9keSBwYXJzZXIgbm8gbWF0dGVyIHR5cGUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbihmbil7XG4gIHRoaXMuX3BhcnNlciA9IGZuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2V0IEFjY2VwdCB0byBgdHlwZWAsIG1hcHBpbmcgdmFsdWVzIGZyb20gYHJlcXVlc3QudHlwZXNgLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgc3VwZXJhZ2VudC50eXBlcy5qc29uID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICpcbiAqICAgICAgcmVxdWVzdC5nZXQoJy9hZ2VudCcpXG4gKiAgICAgICAgLmFjY2VwdCgnanNvbicpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogICAgICByZXF1ZXN0LmdldCgnL2FnZW50JylcbiAqICAgICAgICAuYWNjZXB0KCdhcHBsaWNhdGlvbi9qc29uJylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYWNjZXB0XG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24odHlwZSl7XG4gIHRoaXMuc2V0KCdBY2NlcHQnLCByZXF1ZXN0LnR5cGVzW3R5cGVdIHx8IHR5cGUpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2V0IEF1dGhvcml6YXRpb24gZmllbGQgdmFsdWUgd2l0aCBgdXNlcmAgYW5kIGBwYXNzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXNlclxuICogQHBhcmFtIHtTdHJpbmd9IHBhc3NcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5hdXRoID0gZnVuY3Rpb24odXNlciwgcGFzcyl7XG4gIHZhciBzdHIgPSBidG9hKHVzZXIgKyAnOicgKyBwYXNzKTtcbiAgdGhpcy5zZXQoJ0F1dGhvcml6YXRpb24nLCAnQmFzaWMgJyArIHN0cik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4qIEFkZCBxdWVyeS1zdHJpbmcgYHZhbGAuXG4qXG4qIEV4YW1wbGVzOlxuKlxuKiAgIHJlcXVlc3QuZ2V0KCcvc2hvZXMnKVxuKiAgICAgLnF1ZXJ5KCdzaXplPTEwJylcbiogICAgIC5xdWVyeSh7IGNvbG9yOiAnYmx1ZScgfSlcbipcbiogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSB2YWxcbiogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4qIEBhcGkgcHVibGljXG4qL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uKHZhbCl7XG4gIGlmICgnc3RyaW5nJyAhPSB0eXBlb2YgdmFsKSB2YWwgPSBzZXJpYWxpemUodmFsKTtcbiAgaWYgKHZhbCkgdGhpcy5fcXVlcnkucHVzaCh2YWwpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogV3JpdGUgdGhlIGZpZWxkIGBuYW1lYCBhbmQgYHZhbGAgZm9yIFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiXG4gKiByZXF1ZXN0IGJvZGllcy5cbiAqXG4gKiBgYGAganNcbiAqIHJlcXVlc3QucG9zdCgnL3VwbG9hZCcpXG4gKiAgIC5maWVsZCgnZm9vJywgJ2JhcicpXG4gKiAgIC5lbmQoY2FsbGJhY2spO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfEJsb2J8RmlsZX0gdmFsXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuZmllbGQgPSBmdW5jdGlvbihuYW1lLCB2YWwpe1xuICBpZiAoIXRoaXMuX2Zvcm1EYXRhKSB0aGlzLl9mb3JtRGF0YSA9IG5ldyByb290LkZvcm1EYXRhKCk7XG4gIHRoaXMuX2Zvcm1EYXRhLmFwcGVuZChuYW1lLCB2YWwpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUXVldWUgdGhlIGdpdmVuIGBmaWxlYCBhcyBhbiBhdHRhY2htZW50IHRvIHRoZSBzcGVjaWZpZWQgYGZpZWxkYCxcbiAqIHdpdGggb3B0aW9uYWwgYGZpbGVuYW1lYC5cbiAqXG4gKiBgYGAganNcbiAqIHJlcXVlc3QucG9zdCgnL3VwbG9hZCcpXG4gKiAgIC5hdHRhY2gobmV3IEJsb2IoWyc8YSBpZD1cImFcIj48YiBpZD1cImJcIj5oZXkhPC9iPjwvYT4nXSwgeyB0eXBlOiBcInRleHQvaHRtbFwifSkpXG4gKiAgIC5lbmQoY2FsbGJhY2spO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkXG4gKiBAcGFyYW0ge0Jsb2J8RmlsZX0gZmlsZVxuICogQHBhcmFtIHtTdHJpbmd9IGZpbGVuYW1lXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuYXR0YWNoID0gZnVuY3Rpb24oZmllbGQsIGZpbGUsIGZpbGVuYW1lKXtcbiAgaWYgKCF0aGlzLl9mb3JtRGF0YSkgdGhpcy5fZm9ybURhdGEgPSBuZXcgcm9vdC5Gb3JtRGF0YSgpO1xuICB0aGlzLl9mb3JtRGF0YS5hcHBlbmQoZmllbGQsIGZpbGUsIGZpbGVuYW1lIHx8IGZpbGUubmFtZSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZW5kIGBkYXRhYCBhcyB0aGUgcmVxdWVzdCBib2R5LCBkZWZhdWx0aW5nIHRoZSBgLnR5cGUoKWAgdG8gXCJqc29uXCIgd2hlblxuICogYW4gb2JqZWN0IGlzIGdpdmVuLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgIC8vIG1hbnVhbCBqc29uXG4gKiAgICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJylcbiAqICAgICAgICAgLnR5cGUoJ2pzb24nKVxuICogICAgICAgICAuc2VuZCgne1wibmFtZVwiOlwidGpcIn0nKVxuICogICAgICAgICAuZW5kKGNhbGxiYWNrKVxuICpcbiAqICAgICAgIC8vIGF1dG8ganNvblxuICogICAgICAgcmVxdWVzdC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgICAuZW5kKGNhbGxiYWNrKVxuICpcbiAqICAgICAgIC8vIG1hbnVhbCB4LXd3dy1mb3JtLXVybGVuY29kZWRcbiAqICAgICAgIHJlcXVlc3QucG9zdCgnL3VzZXInKVxuICogICAgICAgICAudHlwZSgnZm9ybScpXG4gKiAgICAgICAgIC5zZW5kKCduYW1lPXRqJylcbiAqICAgICAgICAgLmVuZChjYWxsYmFjaylcbiAqXG4gKiAgICAgICAvLyBhdXRvIHgtd3d3LWZvcm0tdXJsZW5jb2RlZFxuICogICAgICAgcmVxdWVzdC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgIC50eXBlKCdmb3JtJylcbiAqICAgICAgICAgLnNlbmQoeyBuYW1lOiAndGonIH0pXG4gKiAgICAgICAgIC5lbmQoY2FsbGJhY2spXG4gKlxuICogICAgICAgLy8gZGVmYXVsdHMgdG8geC13d3ctZm9ybS11cmxlbmNvZGVkXG4gICogICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJylcbiAgKiAgICAgICAgLnNlbmQoJ25hbWU9dG9iaScpXG4gICogICAgICAgIC5zZW5kKCdzcGVjaWVzPWZlcnJldCcpXG4gICogICAgICAgIC5lbmQoY2FsbGJhY2spXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBkYXRhXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKGRhdGEpe1xuICB2YXIgb2JqID0gaXNPYmplY3QoZGF0YSk7XG4gIHZhciB0eXBlID0gdGhpcy5nZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScpO1xuXG4gIC8vIG1lcmdlXG4gIGlmIChvYmogJiYgaXNPYmplY3QodGhpcy5fZGF0YSkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgdGhpcy5fZGF0YVtrZXldID0gZGF0YVtrZXldO1xuICAgIH1cbiAgfSBlbHNlIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZGF0YSkge1xuICAgIGlmICghdHlwZSkgdGhpcy50eXBlKCdmb3JtJyk7XG4gICAgdHlwZSA9IHRoaXMuZ2V0SGVhZGVyKCdDb250ZW50LVR5cGUnKTtcbiAgICBpZiAoJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgPT0gdHlwZSkge1xuICAgICAgdGhpcy5fZGF0YSA9IHRoaXMuX2RhdGFcbiAgICAgICAgPyB0aGlzLl9kYXRhICsgJyYnICsgZGF0YVxuICAgICAgICA6IGRhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2RhdGEgPSAodGhpcy5fZGF0YSB8fCAnJykgKyBkYXRhO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgfVxuXG4gIGlmICghb2JqIHx8IGlzSG9zdChkYXRhKSkgcmV0dXJuIHRoaXM7XG4gIGlmICghdHlwZSkgdGhpcy50eXBlKCdqc29uJyk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBJbnZva2UgdGhlIGNhbGxiYWNrIHdpdGggYGVycmAgYW5kIGByZXNgXG4gKiBhbmQgaGFuZGxlIGFyaXR5IGNoZWNrLlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVyclxuICogQHBhcmFtIHtSZXNwb25zZX0gcmVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5jYWxsYmFjayA9IGZ1bmN0aW9uKGVyciwgcmVzKXtcbiAgdmFyIGZuID0gdGhpcy5fY2FsbGJhY2s7XG4gIHRoaXMuY2xlYXJUaW1lb3V0KCk7XG4gIGZuKGVyciwgcmVzKTtcbn07XG5cbi8qKlxuICogSW52b2tlIGNhbGxiYWNrIHdpdGggeC1kb21haW4gZXJyb3IuXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuY3Jvc3NEb21haW5FcnJvciA9IGZ1bmN0aW9uKCl7XG4gIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1JlcXVlc3QgaGFzIGJlZW4gdGVybWluYXRlZFxcblBvc3NpYmxlIGNhdXNlczogdGhlIG5ldHdvcmsgaXMgb2ZmbGluZSwgT3JpZ2luIGlzIG5vdCBhbGxvd2VkIGJ5IEFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiwgdGhlIHBhZ2UgaXMgYmVpbmcgdW5sb2FkZWQsIGV0Yy4nKTtcbiAgZXJyLmNyb3NzRG9tYWluID0gdHJ1ZTtcblxuICBlcnIuc3RhdHVzID0gdGhpcy5zdGF0dXM7XG4gIGVyci5tZXRob2QgPSB0aGlzLm1ldGhvZDtcbiAgZXJyLnVybCA9IHRoaXMudXJsO1xuXG4gIHRoaXMuY2FsbGJhY2soZXJyKTtcbn07XG5cbi8qKlxuICogSW52b2tlIGNhbGxiYWNrIHdpdGggdGltZW91dCBlcnJvci5cbiAqXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS50aW1lb3V0RXJyb3IgPSBmdW5jdGlvbigpe1xuICB2YXIgdGltZW91dCA9IHRoaXMuX3RpbWVvdXQ7XG4gIHZhciBlcnIgPSBuZXcgRXJyb3IoJ3RpbWVvdXQgb2YgJyArIHRpbWVvdXQgKyAnbXMgZXhjZWVkZWQnKTtcbiAgZXJyLnRpbWVvdXQgPSB0aW1lb3V0O1xuICB0aGlzLmNhbGxiYWNrKGVycik7XG59O1xuXG4vKipcbiAqIEVuYWJsZSB0cmFuc21pc3Npb24gb2YgY29va2llcyB3aXRoIHgtZG9tYWluIHJlcXVlc3RzLlxuICpcbiAqIE5vdGUgdGhhdCBmb3IgdGhpcyB0byB3b3JrIHRoZSBvcmlnaW4gbXVzdCBub3QgYmVcbiAqIHVzaW5nIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luXCIgd2l0aCBhIHdpbGRjYXJkLFxuICogYW5kIGFsc28gbXVzdCBzZXQgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFsc1wiXG4gKiB0byBcInRydWVcIi5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLndpdGhDcmVkZW50aWFscyA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuX3dpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBJbml0aWF0ZSByZXF1ZXN0LCBpbnZva2luZyBjYWxsYmFjayBgZm4ocmVzKWBcbiAqIHdpdGggYW4gaW5zdGFuY2VvZiBgUmVzcG9uc2VgLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oZm4pe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciB4aHIgPSB0aGlzLnhociA9IHJlcXVlc3QuZ2V0WEhSKCk7XG4gIHZhciBxdWVyeSA9IHRoaXMuX3F1ZXJ5LmpvaW4oJyYnKTtcbiAgdmFyIHRpbWVvdXQgPSB0aGlzLl90aW1lb3V0O1xuICB2YXIgZGF0YSA9IHRoaXMuX2Zvcm1EYXRhIHx8IHRoaXMuX2RhdGE7XG5cbiAgLy8gc3RvcmUgY2FsbGJhY2tcbiAgdGhpcy5fY2FsbGJhY2sgPSBmbiB8fCBub29wO1xuXG4gIC8vIHN0YXRlIGNoYW5nZVxuICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKXtcbiAgICBpZiAoNCAhPSB4aHIucmVhZHlTdGF0ZSkgcmV0dXJuO1xuXG4gICAgLy8gSW4gSUU5LCByZWFkcyB0byBhbnkgcHJvcGVydHkgKGUuZy4gc3RhdHVzKSBvZmYgb2YgYW4gYWJvcnRlZCBYSFIgd2lsbFxuICAgIC8vIHJlc3VsdCBpbiB0aGUgZXJyb3IgXCJDb3VsZCBub3QgY29tcGxldGUgdGhlIG9wZXJhdGlvbiBkdWUgdG8gZXJyb3IgYzAwYzAyM2ZcIlxuICAgIHZhciBzdGF0dXM7XG4gICAgdHJ5IHsgc3RhdHVzID0geGhyLnN0YXR1cyB9IGNhdGNoKGUpIHsgc3RhdHVzID0gMDsgfVxuXG4gICAgaWYgKDAgPT0gc3RhdHVzKSB7XG4gICAgICBpZiAoc2VsZi50aW1lZG91dCkgcmV0dXJuIHNlbGYudGltZW91dEVycm9yKCk7XG4gICAgICBpZiAoc2VsZi5hYm9ydGVkKSByZXR1cm47XG4gICAgICByZXR1cm4gc2VsZi5jcm9zc0RvbWFpbkVycm9yKCk7XG4gICAgfVxuICAgIHNlbGYuZW1pdCgnZW5kJyk7XG4gIH07XG5cbiAgLy8gcHJvZ3Jlc3NcbiAgdmFyIGhhbmRsZVByb2dyZXNzID0gZnVuY3Rpb24oZSl7XG4gICAgaWYgKGUudG90YWwgPiAwKSB7XG4gICAgICBlLnBlcmNlbnQgPSBlLmxvYWRlZCAvIGUudG90YWwgKiAxMDA7XG4gICAgfVxuICAgIGUuZGlyZWN0aW9uID0gJ2Rvd25sb2FkJztcbiAgICBzZWxmLmVtaXQoJ3Byb2dyZXNzJywgZSk7XG4gIH07XG4gIGlmICh0aGlzLmhhc0xpc3RlbmVycygncHJvZ3Jlc3MnKSkge1xuICAgIHhoci5vbnByb2dyZXNzID0gaGFuZGxlUHJvZ3Jlc3M7XG4gIH1cbiAgdHJ5IHtcbiAgICBpZiAoeGhyLnVwbG9hZCAmJiB0aGlzLmhhc0xpc3RlbmVycygncHJvZ3Jlc3MnKSkge1xuICAgICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gaGFuZGxlUHJvZ3Jlc3M7XG4gICAgfVxuICB9IGNhdGNoKGUpIHtcbiAgICAvLyBBY2Nlc3NpbmcgeGhyLnVwbG9hZCBmYWlscyBpbiBJRSBmcm9tIGEgd2ViIHdvcmtlciwgc28ganVzdCBwcmV0ZW5kIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgLy8gUmVwb3J0ZWQgaGVyZTpcbiAgICAvLyBodHRwczovL2Nvbm5lY3QubWljcm9zb2Z0LmNvbS9JRS9mZWVkYmFjay9kZXRhaWxzLzgzNzI0NS94bWxodHRwcmVxdWVzdC11cGxvYWQtdGhyb3dzLWludmFsaWQtYXJndW1lbnQtd2hlbi11c2VkLWZyb20td2ViLXdvcmtlci1jb250ZXh0XG4gIH1cblxuICAvLyB0aW1lb3V0XG4gIGlmICh0aW1lb3V0ICYmICF0aGlzLl90aW1lcikge1xuICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgc2VsZi50aW1lZG91dCA9IHRydWU7XG4gICAgICBzZWxmLmFib3J0KCk7XG4gICAgfSwgdGltZW91dCk7XG4gIH1cblxuICAvLyBxdWVyeXN0cmluZ1xuICBpZiAocXVlcnkpIHtcbiAgICBxdWVyeSA9IHJlcXVlc3Quc2VyaWFsaXplT2JqZWN0KHF1ZXJ5KTtcbiAgICB0aGlzLnVybCArPSB+dGhpcy51cmwuaW5kZXhPZignPycpXG4gICAgICA/ICcmJyArIHF1ZXJ5XG4gICAgICA6ICc/JyArIHF1ZXJ5O1xuICB9XG5cbiAgLy8gaW5pdGlhdGUgcmVxdWVzdFxuICB4aHIub3Blbih0aGlzLm1ldGhvZCwgdGhpcy51cmwsIHRydWUpO1xuXG4gIC8vIENPUlNcbiAgaWYgKHRoaXMuX3dpdGhDcmVkZW50aWFscykgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG5cbiAgLy8gYm9keVxuICBpZiAoJ0dFVCcgIT0gdGhpcy5tZXRob2QgJiYgJ0hFQUQnICE9IHRoaXMubWV0aG9kICYmICdzdHJpbmcnICE9IHR5cGVvZiBkYXRhICYmICFpc0hvc3QoZGF0YSkpIHtcbiAgICAvLyBzZXJpYWxpemUgc3R1ZmZcbiAgICB2YXIgY29udGVudFR5cGUgPSB0aGlzLmdldEhlYWRlcignQ29udGVudC1UeXBlJyk7XG4gICAgdmFyIHNlcmlhbGl6ZSA9IHRoaXMuX3BhcnNlciB8fCByZXF1ZXN0LnNlcmlhbGl6ZVtjb250ZW50VHlwZSA/IGNvbnRlbnRUeXBlLnNwbGl0KCc7JylbMF0gOiAnJ107XG4gICAgaWYgKCFzZXJpYWxpemUgJiYgaXNKU09OKGNvbnRlbnRUeXBlKSkgc2VyaWFsaXplID0gcmVxdWVzdC5zZXJpYWxpemVbJ2FwcGxpY2F0aW9uL2pzb24nXTtcbiAgICBpZiAoc2VyaWFsaXplKSBkYXRhID0gc2VyaWFsaXplKGRhdGEpO1xuICB9XG5cbiAgLy8gc2V0IGhlYWRlciBmaWVsZHNcbiAgZm9yICh2YXIgZmllbGQgaW4gdGhpcy5oZWFkZXIpIHtcbiAgICBpZiAobnVsbCA9PSB0aGlzLmhlYWRlcltmaWVsZF0pIGNvbnRpbnVlO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGZpZWxkLCB0aGlzLmhlYWRlcltmaWVsZF0pO1xuICB9XG5cbiAgLy8gc2VuZCBzdHVmZlxuICB0aGlzLmVtaXQoJ3JlcXVlc3QnLCB0aGlzKTtcblxuICAvLyBJRTExIHhoci5zZW5kKHVuZGVmaW5lZCkgc2VuZHMgJ3VuZGVmaW5lZCcgc3RyaW5nIGFzIFBPU1QgcGF5bG9hZCAoaW5zdGVhZCBvZiBub3RoaW5nKVxuICAvLyBXZSBuZWVkIG51bGwgaGVyZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICB4aHIuc2VuZCh0eXBlb2YgZGF0YSAhPT0gJ3VuZGVmaW5lZCcgPyBkYXRhIDogbnVsbCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBGYXV4IHByb21pc2Ugc3VwcG9ydFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdFxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKGZ1bGZpbGwsIHJlamVjdCkge1xuICByZXR1cm4gdGhpcy5lbmQoZnVuY3Rpb24oZXJyLCByZXMpIHtcbiAgICBlcnIgPyByZWplY3QoZXJyKSA6IGZ1bGZpbGwocmVzKTtcbiAgfSk7XG59XG5cbi8qKlxuICogRXhwb3NlIGBSZXF1ZXN0YC5cbiAqL1xuXG5yZXF1ZXN0LlJlcXVlc3QgPSBSZXF1ZXN0O1xuXG4vKipcbiAqIElzc3VlIGEgcmVxdWVzdDpcbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICByZXF1ZXN0KCdHRVQnLCAnL3VzZXJzJykuZW5kKGNhbGxiYWNrKVxuICogICAgcmVxdWVzdCgnL3VzZXJzJykuZW5kKGNhbGxiYWNrKVxuICogICAgcmVxdWVzdCgnL3VzZXJzJywgY2FsbGJhY2spXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZFxuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHVybCBvciBjYWxsYmFja1xuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gcmVxdWVzdChtZXRob2QsIHVybCkge1xuICAvLyBjYWxsYmFja1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdXJsKSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0KCdHRVQnLCBtZXRob2QpLmVuZCh1cmwpO1xuICB9XG5cbiAgLy8gdXJsIGZpcnN0XG4gIGlmICgxID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbmV3IFJlcXVlc3QoJ0dFVCcsIG1ldGhvZCk7XG4gIH1cblxuICByZXR1cm4gbmV3IFJlcXVlc3QobWV0aG9kLCB1cmwpO1xufVxuXG4vKipcbiAqIEdFVCBgdXJsYCB3aXRoIG9wdGlvbmFsIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfEZ1bmN0aW9ufSBkYXRhIG9yIGZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucmVxdWVzdC5nZXQgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ0dFVCcsIHVybCk7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSBmbiA9IGRhdGEsIGRhdGEgPSBudWxsO1xuICBpZiAoZGF0YSkgcmVxLnF1ZXJ5KGRhdGEpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcblxuLyoqXG4gKiBIRUFEIGB1cmxgIHdpdGggb3B0aW9uYWwgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7TWl4ZWR8RnVuY3Rpb259IGRhdGEgb3IgZm5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0LmhlYWQgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ0hFQUQnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5zZW5kKGRhdGEpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcblxuLyoqXG4gKiBERUxFVEUgYHVybGAgd2l0aCBvcHRpb25hbCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGRlbCh1cmwsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ0RFTEVURScsIHVybCk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG5yZXF1ZXN0WydkZWwnXSA9IGRlbDtcbnJlcXVlc3RbJ2RlbGV0ZSddID0gZGVsO1xuXG4vKipcbiAqIFBBVENIIGB1cmxgIHdpdGggb3B0aW9uYWwgYGRhdGFgIGFuZCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZH0gZGF0YVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QucGF0Y2ggPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ1BBVENIJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogUE9TVCBgdXJsYCB3aXRoIG9wdGlvbmFsIGBkYXRhYCBhbmQgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7TWl4ZWR9IGRhdGFcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0LnBvc3QgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ1BPU1QnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5zZW5kKGRhdGEpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcblxuLyoqXG4gKiBQVVQgYHVybGAgd2l0aCBvcHRpb25hbCBgZGF0YWAgYW5kIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfEZ1bmN0aW9ufSBkYXRhIG9yIGZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucmVxdWVzdC5wdXQgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ1BVVCcsIHVybCk7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSBmbiA9IGRhdGEsIGRhdGEgPSBudWxsO1xuICBpZiAoZGF0YSkgcmVxLnNlbmQoZGF0YSk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG4vKipcbiAqIEV4cG9zZSBgcmVxdWVzdGAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1ZXN0O1xuIiwiXG5cbi8vQCBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OW1aV3hwY0dWZmJHbHRZUzl3Y21vdmIzTnpMM0p2WW1sdWFHOXZaQzEzWldJdmJtOWtaVjl0YjJSMWJHVnpMMkp5YjNkelpYSXRjbVZ6YjJ4MlpTOWxiWEIwZVM1cWN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaUlpd2labWxzWlNJNkltOTFkQzVxY3k1dFlYQWlMQ0p6YjNWeVkyVnpRMjl1ZEdWdWRDSTZXeUlpWFgwPSIsIi8qIVxuICogQ3Jvc3MtQnJvd3NlciBTcGxpdCAxLjEuMVxuICogQ29weXJpZ2h0IDIwMDctMjAxMiBTdGV2ZW4gTGV2aXRoYW4gPHN0ZXZlbmxldml0aGFuLmNvbT5cbiAqIEF2YWlsYWJsZSB1bmRlciB0aGUgTUlUIExpY2Vuc2VcbiAqIEVDTUFTY3JpcHQgY29tcGxpYW50LCB1bmlmb3JtIGNyb3NzLWJyb3dzZXIgc3BsaXQgbWV0aG9kXG4gKi9cblxuLyoqXG4gKiBTcGxpdHMgYSBzdHJpbmcgaW50byBhbiBhcnJheSBvZiBzdHJpbmdzIHVzaW5nIGEgcmVnZXggb3Igc3RyaW5nIHNlcGFyYXRvci4gTWF0Y2hlcyBvZiB0aGVcbiAqIHNlcGFyYXRvciBhcmUgbm90IGluY2x1ZGVkIGluIHRoZSByZXN1bHQgYXJyYXkuIEhvd2V2ZXIsIGlmIGBzZXBhcmF0b3JgIGlzIGEgcmVnZXggdGhhdCBjb250YWluc1xuICogY2FwdHVyaW5nIGdyb3VwcywgYmFja3JlZmVyZW5jZXMgYXJlIHNwbGljZWQgaW50byB0aGUgcmVzdWx0IGVhY2ggdGltZSBgc2VwYXJhdG9yYCBpcyBtYXRjaGVkLlxuICogRml4ZXMgYnJvd3NlciBidWdzIGNvbXBhcmVkIHRvIHRoZSBuYXRpdmUgYFN0cmluZy5wcm90b3R5cGUuc3BsaXRgIGFuZCBjYW4gYmUgdXNlZCByZWxpYWJseVxuICogY3Jvc3MtYnJvd3Nlci5cbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgU3RyaW5nIHRvIHNwbGl0LlxuICogQHBhcmFtIHtSZWdFeHB8U3RyaW5nfSBzZXBhcmF0b3IgUmVnZXggb3Igc3RyaW5nIHRvIHVzZSBmb3Igc2VwYXJhdGluZyB0aGUgc3RyaW5nLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtsaW1pdF0gTWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gaW5jbHVkZSBpbiB0aGUgcmVzdWx0IGFycmF5LlxuICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiBzdWJzdHJpbmdzLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBCYXNpYyB1c2VcbiAqIHNwbGl0KCdhIGIgYyBkJywgJyAnKTtcbiAqIC8vIC0+IFsnYScsICdiJywgJ2MnLCAnZCddXG4gKlxuICogLy8gV2l0aCBsaW1pdFxuICogc3BsaXQoJ2EgYiBjIGQnLCAnICcsIDIpO1xuICogLy8gLT4gWydhJywgJ2InXVxuICpcbiAqIC8vIEJhY2tyZWZlcmVuY2VzIGluIHJlc3VsdCBhcnJheVxuICogc3BsaXQoJy4ud29yZDEgd29yZDIuLicsIC8oW2Etel0rKShcXGQrKS9pKTtcbiAqIC8vIC0+IFsnLi4nLCAnd29yZCcsICcxJywgJyAnLCAnd29yZCcsICcyJywgJy4uJ11cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gc3BsaXQodW5kZWYpIHtcblxuICB2YXIgbmF0aXZlU3BsaXQgPSBTdHJpbmcucHJvdG90eXBlLnNwbGl0LFxuICAgIGNvbXBsaWFudEV4ZWNOcGNnID0gLygpPz8vLmV4ZWMoXCJcIilbMV0gPT09IHVuZGVmLFxuICAgIC8vIE5QQ0c6IG5vbnBhcnRpY2lwYXRpbmcgY2FwdHVyaW5nIGdyb3VwXG4gICAgc2VsZjtcblxuICBzZWxmID0gZnVuY3Rpb24oc3RyLCBzZXBhcmF0b3IsIGxpbWl0KSB7XG4gICAgLy8gSWYgYHNlcGFyYXRvcmAgaXMgbm90IGEgcmVnZXgsIHVzZSBgbmF0aXZlU3BsaXRgXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzZXBhcmF0b3IpICE9PSBcIltvYmplY3QgUmVnRXhwXVwiKSB7XG4gICAgICByZXR1cm4gbmF0aXZlU3BsaXQuY2FsbChzdHIsIHNlcGFyYXRvciwgbGltaXQpO1xuICAgIH1cbiAgICB2YXIgb3V0cHV0ID0gW10sXG4gICAgICBmbGFncyA9IChzZXBhcmF0b3IuaWdub3JlQ2FzZSA/IFwiaVwiIDogXCJcIikgKyAoc2VwYXJhdG9yLm11bHRpbGluZSA/IFwibVwiIDogXCJcIikgKyAoc2VwYXJhdG9yLmV4dGVuZGVkID8gXCJ4XCIgOiBcIlwiKSArIC8vIFByb3Bvc2VkIGZvciBFUzZcbiAgICAgIChzZXBhcmF0b3Iuc3RpY2t5ID8gXCJ5XCIgOiBcIlwiKSxcbiAgICAgIC8vIEZpcmVmb3ggMytcbiAgICAgIGxhc3RMYXN0SW5kZXggPSAwLFxuICAgICAgLy8gTWFrZSBgZ2xvYmFsYCBhbmQgYXZvaWQgYGxhc3RJbmRleGAgaXNzdWVzIGJ5IHdvcmtpbmcgd2l0aCBhIGNvcHlcbiAgICAgIHNlcGFyYXRvciA9IG5ldyBSZWdFeHAoc2VwYXJhdG9yLnNvdXJjZSwgZmxhZ3MgKyBcImdcIiksXG4gICAgICBzZXBhcmF0b3IyLCBtYXRjaCwgbGFzdEluZGV4LCBsYXN0TGVuZ3RoO1xuICAgIHN0ciArPSBcIlwiOyAvLyBUeXBlLWNvbnZlcnRcbiAgICBpZiAoIWNvbXBsaWFudEV4ZWNOcGNnKSB7XG4gICAgICAvLyBEb2Vzbid0IG5lZWQgZmxhZ3MgZ3ksIGJ1dCB0aGV5IGRvbid0IGh1cnRcbiAgICAgIHNlcGFyYXRvcjIgPSBuZXcgUmVnRXhwKFwiXlwiICsgc2VwYXJhdG9yLnNvdXJjZSArIFwiJCg/IVxcXFxzKVwiLCBmbGFncyk7XG4gICAgfVxuICAgIC8qIFZhbHVlcyBmb3IgYGxpbWl0YCwgcGVyIHRoZSBzcGVjOlxuICAgICAqIElmIHVuZGVmaW5lZDogNDI5NDk2NzI5NSAvLyBNYXRoLnBvdygyLCAzMikgLSAxXG4gICAgICogSWYgMCwgSW5maW5pdHksIG9yIE5hTjogMFxuICAgICAqIElmIHBvc2l0aXZlIG51bWJlcjogbGltaXQgPSBNYXRoLmZsb29yKGxpbWl0KTsgaWYgKGxpbWl0ID4gNDI5NDk2NzI5NSkgbGltaXQgLT0gNDI5NDk2NzI5NjtcbiAgICAgKiBJZiBuZWdhdGl2ZSBudW1iZXI6IDQyOTQ5NjcyOTYgLSBNYXRoLmZsb29yKE1hdGguYWJzKGxpbWl0KSlcbiAgICAgKiBJZiBvdGhlcjogVHlwZS1jb252ZXJ0LCB0aGVuIHVzZSB0aGUgYWJvdmUgcnVsZXNcbiAgICAgKi9cbiAgICBsaW1pdCA9IGxpbWl0ID09PSB1bmRlZiA/IC0xID4+PiAwIDogLy8gTWF0aC5wb3coMiwgMzIpIC0gMVxuICAgIGxpbWl0ID4+PiAwOyAvLyBUb1VpbnQzMihsaW1pdClcbiAgICB3aGlsZSAobWF0Y2ggPSBzZXBhcmF0b3IuZXhlYyhzdHIpKSB7XG4gICAgICAvLyBgc2VwYXJhdG9yLmxhc3RJbmRleGAgaXMgbm90IHJlbGlhYmxlIGNyb3NzLWJyb3dzZXJcbiAgICAgIGxhc3RJbmRleCA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgaWYgKGxhc3RJbmRleCA+IGxhc3RMYXN0SW5kZXgpIHtcbiAgICAgICAgb3V0cHV0LnB1c2goc3RyLnNsaWNlKGxhc3RMYXN0SW5kZXgsIG1hdGNoLmluZGV4KSk7XG4gICAgICAgIC8vIEZpeCBicm93c2VycyB3aG9zZSBgZXhlY2AgbWV0aG9kcyBkb24ndCBjb25zaXN0ZW50bHkgcmV0dXJuIGB1bmRlZmluZWRgIGZvclxuICAgICAgICAvLyBub25wYXJ0aWNpcGF0aW5nIGNhcHR1cmluZyBncm91cHNcbiAgICAgICAgaWYgKCFjb21wbGlhbnRFeGVjTnBjZyAmJiBtYXRjaC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgbWF0Y2hbMF0ucmVwbGFjZShzZXBhcmF0b3IyLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aCAtIDI7IGkrKykge1xuICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzW2ldID09PSB1bmRlZikge1xuICAgICAgICAgICAgICAgIG1hdGNoW2ldID0gdW5kZWY7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0Y2gubGVuZ3RoID4gMSAmJiBtYXRjaC5pbmRleCA8IHN0ci5sZW5ndGgpIHtcbiAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShvdXRwdXQsIG1hdGNoLnNsaWNlKDEpKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0TGVuZ3RoID0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICBsYXN0TGFzdEluZGV4ID0gbGFzdEluZGV4O1xuICAgICAgICBpZiAob3V0cHV0Lmxlbmd0aCA+PSBsaW1pdCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc2VwYXJhdG9yLmxhc3RJbmRleCA9PT0gbWF0Y2guaW5kZXgpIHtcbiAgICAgICAgc2VwYXJhdG9yLmxhc3RJbmRleCsrOyAvLyBBdm9pZCBhbiBpbmZpbml0ZSBsb29wXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChsYXN0TGFzdEluZGV4ID09PSBzdHIubGVuZ3RoKSB7XG4gICAgICBpZiAobGFzdExlbmd0aCB8fCAhc2VwYXJhdG9yLnRlc3QoXCJcIikpIHtcbiAgICAgICAgb3V0cHV0LnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dC5wdXNoKHN0ci5zbGljZShsYXN0TGFzdEluZGV4KSk7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQubGVuZ3RoID4gbGltaXQgPyBvdXRwdXQuc2xpY2UoMCwgbGltaXQpIDogb3V0cHV0O1xuICB9O1xuXG4gIHJldHVybiBzZWxmO1xufSkoKTtcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBzZXRUaW1lb3V0KGRyYWluUXVldWUsIDApO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiXG4vKipcbiAqIEV4cG9zZSBgRW1pdHRlcmAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBFbWl0dGVyO1xuXG4vKipcbiAqIEluaXRpYWxpemUgYSBuZXcgYEVtaXR0ZXJgLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gRW1pdHRlcihvYmopIHtcbiAgaWYgKG9iaikgcmV0dXJuIG1peGluKG9iaik7XG59O1xuXG4vKipcbiAqIE1peGluIHRoZSBlbWl0dGVyIHByb3BlcnRpZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7T2JqZWN0fVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbWl4aW4ob2JqKSB7XG4gIGZvciAodmFyIGtleSBpbiBFbWl0dGVyLnByb3RvdHlwZSkge1xuICAgIG9ialtrZXldID0gRW1pdHRlci5wcm90b3R5cGVba2V5XTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7RW1pdHRlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuRW1pdHRlci5wcm90b3R5cGUub24gPVxuRW1pdHRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcbiAgKHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF0gPSB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdIHx8IFtdKVxuICAgIC5wdXNoKGZuKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEFkZHMgYW4gYGV2ZW50YCBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgaW52b2tlZCBhIHNpbmdsZVxuICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5FbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24oZXZlbnQsIGZuKXtcbiAgZnVuY3Rpb24gb24oKSB7XG4gICAgdGhpcy5vZmYoZXZlbnQsIG9uKTtcbiAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgb24uZm4gPSBmbjtcbiAgdGhpcy5vbihldmVudCwgb24pO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGxcbiAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkVtaXR0ZXIucHJvdG90eXBlLm9mZiA9XG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcblxuICAvLyBhbGxcbiAgaWYgKDAgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIHRoaXMuX2NhbGxiYWNrcyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gc3BlY2lmaWMgZXZlbnRcbiAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XG4gIGlmICghY2FsbGJhY2tzKSByZXR1cm4gdGhpcztcblxuICAvLyByZW1vdmUgYWxsIGhhbmRsZXJzXG4gIGlmICgxID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHJlbW92ZSBzcGVjaWZpYyBoYW5kbGVyXG4gIHZhciBjYjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICBjYiA9IGNhbGxiYWNrc1tpXTtcbiAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuICAgICAgY2FsbGJhY2tzLnNwbGljZShpLCAxKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogRW1pdCBgZXZlbnRgIHdpdGggdGhlIGdpdmVuIGFyZ3MuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge01peGVkfSAuLi5cbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XG4gKi9cblxuRW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xuICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKVxuICAgICwgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcblxuICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIGNhbGxiYWNrc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmV0dXJuIGFycmF5IG9mIGNhbGxiYWNrcyBmb3IgYGV2ZW50YC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEByZXR1cm4ge0FycmF5fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5FbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudCl7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcbiAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF0gfHwgW107XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIHRoaXMgZW1pdHRlciBoYXMgYGV2ZW50YCBoYW5kbGVycy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkVtaXR0ZXIucHJvdG90eXBlLmhhc0xpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgcmV0dXJuICEhIHRoaXMubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGg7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX21ha2VIaXN0b3J5RHJpdmVyID0gcmVxdWlyZSgnLi9tYWtlSGlzdG9yeURyaXZlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ21ha2VIaXN0b3J5RHJpdmVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX21ha2VIaXN0b3J5RHJpdmVyLm1ha2VIaXN0b3J5RHJpdmVyO1xuICB9XG59KTtcblxudmFyIF91dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnc3VwcG9ydHNIaXN0b3J5Jywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3V0aWwuc3VwcG9ydHNIaXN0b3J5O1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnY3JlYXRlTG9jYXRpb24nLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfdXRpbC5jcmVhdGVMb2NhdGlvbjtcbiAgfVxufSk7XG5cbnZhciBfc2VydmVySGlzdG9yeSA9IHJlcXVpcmUoJy4vc2VydmVySGlzdG9yeScpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ2NyZWF0ZVNlcnZlckhpc3RvcnknLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfc2VydmVySGlzdG9yeS5jcmVhdGVTZXJ2ZXJIaXN0b3J5O1xuICB9XG59KTsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5tYWtlSGlzdG9yeURyaXZlciA9IHVuZGVmaW5lZDtcblxudmFyIF9yeCA9IHJlcXVpcmUoJ3J4Jyk7XG5cbmZ1bmN0aW9uIG1ha2VQdXNoU3RhdGUoaGlzdG9yeSkge1xuICByZXR1cm4gZnVuY3Rpb24gcHVzaFN0YXRlKHVybCkge1xuICAgIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIHVybCB8fCAnb2JqZWN0JyA9PT0gKHR5cGVvZiB1cmwgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHVybCkpKSB7XG4gICAgICBoaXN0b3J5LnB1c2godXJsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdIaXN0b3J5IERyaXZlciBpbnB1dCBtdXN0IGJlIGEgc3RyaW5nIG9yXFxuICAgICAgICBvYmplY3QgYnV0IHJlY2VpdmVkICcgKyAodHlwZW9mIHVybCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodXJsKSkpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gbWFrZUhpc3RvcnlEcml2ZXIoaGlzdG9yeSkge1xuICBpZiAoIWhpc3RvcnkgfHwgKHR5cGVvZiBoaXN0b3J5ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihoaXN0b3J5KSkgIT09ICdvYmplY3QnIHx8IHR5cGVvZiBoaXN0b3J5Lmxpc3RlbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBFcnJvcignRmlyc3QgYXJndW1lbnQgdG8gbWFrZUhpc3RvcnlEcml2ZXIgbXVzdCBiZSBhIHZhbGlkICcgKyAnaGlzdG9yeSBpbnN0YW5jZSB3aXRoIGEgbGlzdGVuKCkgbWV0aG9kJyk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIGhpc3RvcnlEcml2ZXIoc2luayQpIHtcbiAgICB2YXIgaGlzdG9yeSQgPSBuZXcgX3J4LlJlcGxheVN1YmplY3QoMSk7XG4gICAgaGlzdG9yeS5saXN0ZW4oZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICByZXR1cm4gaGlzdG9yeSQub25OZXh0KGxvY2F0aW9uKTtcbiAgICB9KTtcblxuICAgIHNpbmskLnN1YnNjcmliZShtYWtlUHVzaFN0YXRlKGhpc3RvcnkpKTtcbiAgICBoaXN0b3J5JC5jcmVhdGVIcmVmID0gaGlzdG9yeS5jcmVhdGVIcmVmO1xuICAgIHJldHVybiBoaXN0b3J5JDtcbiAgfTtcbn1cblxuZXhwb3J0cy5tYWtlSGlzdG9yeURyaXZlciA9IG1ha2VIaXN0b3J5RHJpdmVyOyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuY3JlYXRlU2VydmVySGlzdG9yeSA9IHVuZGVmaW5lZDtcblxudmFyIF91dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbmZ1bmN0aW9uIFNlcnZlckhpc3RvcnkoKSB7XG4gIHRoaXMubGlzdGVuZXJzID0gW107XG59XG5cblNlcnZlckhpc3RvcnkucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcikge1xuICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbn07XG5cblNlcnZlckhpc3RvcnkucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiBwdXNoKGxvY2F0aW9uKSB7XG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVycztcbiAgaWYgKCFsaXN0ZW5lcnMgfHwgbGlzdGVuZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlcmUgaXMgbm8gYWN0aXZlIGxpc3RlbmVyJyk7XG4gIH1cbiAgbGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGwpIHtcbiAgICByZXR1cm4gbCgoMCwgX3V0aWwuY3JlYXRlTG9jYXRpb24pKGxvY2F0aW9uKSk7XG4gIH0pO1xufTtcblxuU2VydmVySGlzdG9yeS5wcm90b3R5cGUuY3JlYXRlSHJlZiA9IGZ1bmN0aW9uIGNyZWF0ZUhyZWYocGF0aCkge1xuICByZXR1cm4gcGF0aDtcbn07XG5cblNlcnZlckhpc3RvcnkucHJvdG90eXBlLmNyZWF0ZUxvY2F0aW9uID0gX3V0aWwuY3JlYXRlTG9jYXRpb247XG5cbmZ1bmN0aW9uIGNyZWF0ZVNlcnZlckhpc3RvcnkoKSB7XG4gIHJldHVybiBuZXcgU2VydmVySGlzdG9yeSgpO1xufVxuXG5leHBvcnRzLmNyZWF0ZVNlcnZlckhpc3RvcnkgPSBjcmVhdGVTZXJ2ZXJIaXN0b3J5OyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmZ1bmN0aW9uIHN1cHBvcnRzSGlzdG9yeSgpIHtcbiAgdmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcblxuICBpZiAoKHVhLmluZGV4T2YoJ0FuZHJvaWQgMi4nKSAhPT0gLTEgfHwgdWEuaW5kZXhPZignQW5kcm9pZCA0LjAnKSAhPT0gLTEpICYmIHVhLmluZGV4T2YoJ01vYmlsZSBTYWZhcmknKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignQ2hyb21lJykgPT09IC0xICYmIHVhLmluZGV4T2YoJ1dpbmRvd3MgUGhvbmUnKSA9PT0gLTEpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gd2luZG93Lmhpc3RvcnkgJiYgJ3B1c2hTdGF0ZScgaW4gd2luZG93Lmhpc3Rvcnk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbnZhciBsb2NhdGlvbkRlZmF1bHRzID0ge1xuICBwYXRobmFtZTogJy8nLFxuICBhY3Rpb246ICdQT1AnLFxuICBoYXNoOiAnJyxcbiAgc2VhcmNoOiAnJyxcbiAgc3RhdGU6IG51bGwsXG4gIGtleTogbnVsbFxufTtcblxuZnVuY3Rpb24gY3JlYXRlTG9jYXRpb24oKSB7XG4gIHZhciBsb2NhdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IGxvY2F0aW9uRGVmYXVsdHMgOiBhcmd1bWVudHNbMF07XG5cbiAgaWYgKHR5cGVvZiBsb2NhdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihsb2NhdGlvbkRlZmF1bHRzLCB7IHBhdGhuYW1lOiBsb2NhdGlvbiB9KTtcbiAgfVxuICByZXR1cm4gT2JqZWN0LmFzc2lnbihsb2NhdGlvbkRlZmF1bHRzLCBsb2NhdGlvbik7XG59XG5cbmV4cG9ydHMuc3VwcG9ydHNIaXN0b3J5ID0gc3VwcG9ydHNIaXN0b3J5O1xuZXhwb3J0cy5jcmVhdGVMb2NhdGlvbiA9IGNyZWF0ZUxvY2F0aW9uOyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuY3JlYXRlQVBJID0gdW5kZWZpbmVkO1xuXG52YXIgX3BhdGhGaWx0ZXIgPSByZXF1aXJlKCcuL3BhdGhGaWx0ZXInKTtcblxudmFyIF9kZWZpbml0aW9uUmVzb2x2ZXIgPSByZXF1aXJlKCcuL2RlZmluaXRpb25SZXNvbHZlcicpO1xuXG52YXIgX3V0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuZnVuY3Rpb24gY3JlYXRlQVBJKGhpc3RvcnkkLCBuYW1lc3BhY2UsIGNyZWF0ZUhyZWYpIHtcbiAgdmFyIHJlcGxheWVkSGlzdG9yeSQgPSBoaXN0b3J5JC5yZXBsYXkoMSk7XG4gIHZhciBkaXNwb3NhYmxlID0gcmVwbGF5ZWRIaXN0b3J5JC5jb25uZWN0KCk7XG4gIHJldHVybiB7XG4gICAgcGF0aDogKDAsIF9wYXRoRmlsdGVyLm1ha2VQYXRoRmlsdGVyKShyZXBsYXllZEhpc3RvcnkkLCBuYW1lc3BhY2UsIGNyZWF0ZUhyZWYpLFxuICAgIGRlZmluZTogKDAsIF9kZWZpbml0aW9uUmVzb2x2ZXIubWFrZURlZmluaXRpb25SZXNvbHZlcikocmVwbGF5ZWRIaXN0b3J5JCwgbmFtZXNwYWNlLCBjcmVhdGVIcmVmKSxcbiAgICBvYnNlcnZhYmxlOiByZXBsYXllZEhpc3RvcnkkLFxuICAgIGNyZWF0ZUhyZWY6ICgwLCBfdXRpbC5tYWtlQ3JlYXRlSHJlZikobmFtZXNwYWNlLCBjcmVhdGVIcmVmKSxcbiAgICBkaXNwb3NlOiBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0cy5jcmVhdGVBUEkgPSBjcmVhdGVBUEk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5jcmVhdGVSb3V0ZXIgPSB1bmRlZmluZWQ7XG5cbnZhciBfYXBpID0gcmVxdWlyZSgnLi9hcGknKTtcblxuZnVuY3Rpb24gY3JlYXRlUm91dGVyKGhpc3RvcnkkKSB7XG4gIHJldHVybiAoMCwgX2FwaS5jcmVhdGVBUEkpKGhpc3RvcnkkLCBbXSwgaGlzdG9yeSQuY3JlYXRlSHJlZik7XG59XG5cbmV4cG9ydHMuY3JlYXRlUm91dGVyID0gY3JlYXRlUm91dGVyOyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMubWFrZURlZmluaXRpb25SZXNvbHZlciA9IHVuZGVmaW5lZDtcblxudmFyIF9zd2l0Y2hQYXRoID0gcmVxdWlyZSgnc3dpdGNoLXBhdGgnKTtcblxudmFyIF9zd2l0Y2hQYXRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N3aXRjaFBhdGgpO1xuXG52YXIgX3V0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0UGF0aFZhbHVlKHBhdGhuYW1lLCBkZWZpbml0aW9ucykge1xuICB2YXIgcGF0aCA9IHVuZGVmaW5lZDtcbiAgdmFyIHZhbHVlID0gdW5kZWZpbmVkO1xuICB0cnkge1xuICAgIHZhciBtYXRjaCA9ICgwLCBfc3dpdGNoUGF0aDIuZGVmYXVsdCkocGF0aG5hbWUsIGRlZmluaXRpb25zKTtcbiAgICB2YWx1ZSA9IG1hdGNoLnZhbHVlO1xuICAgIHBhdGggPSBtYXRjaC5wYXRoO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gdHJ5IGhhbmRsaW5nIGRlZmF1bHQgcm91dGVcbiAgICBpZiAoZGVmaW5pdGlvbnNbJyonXSkge1xuICAgICAgcGF0aCA9IHBhdGhuYW1lO1xuICAgICAgdmFsdWUgPSBkZWZpbml0aW9uc1snKiddO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxuICByZXR1cm4geyBwYXRoOiBwYXRoLCB2YWx1ZTogdmFsdWUgfTtcbn1cblxuZnVuY3Rpb24gbWFrZURlZmluaXRpb25SZXNvbHZlcihoaXN0b3J5JCwgbmFtZXNwYWNlLCBjcmVhdGVIcmVmKSB7XG4gIHJldHVybiBmdW5jdGlvbiBkZWZpbml0aW9uUmVzb2x2ZXIoZGVmaW5pdGlvbnMpIHtcbiAgICB2YXIgbWF0Y2hlcyQgPSBoaXN0b3J5JC5tYXAoZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgIHZhciBwYXRobmFtZSA9IF9yZWYucGF0aG5hbWU7XG5cbiAgICAgIHZhciBmaWx0ZXJlZFBhdGggPSAnLycgKyAoMCwgX3V0aWwuZmlsdGVyUGF0aCkoKDAsIF91dGlsLnNwbGl0UGF0aCkocGF0aG5hbWUpLCBuYW1lc3BhY2UpO1xuXG4gICAgICB2YXIgX2dldFBhdGhWYWx1ZSA9IGdldFBhdGhWYWx1ZShmaWx0ZXJlZFBhdGgsIGRlZmluaXRpb25zKTtcblxuICAgICAgdmFyIHBhdGggPSBfZ2V0UGF0aFZhbHVlLnBhdGg7XG4gICAgICB2YXIgdmFsdWUgPSBfZ2V0UGF0aFZhbHVlLnZhbHVlO1xuXG4gICAgICByZXR1cm4geyBwYXRoOiBwYXRoLCB2YWx1ZTogdmFsdWUsIHBhdGhuYW1lOiBwYXRobmFtZSB9O1xuICAgIH0pO1xuXG4gICAgdmFyIHBhdGgkID0gbWF0Y2hlcyQucGx1Y2soJ3BhdGgnKS5yZXBsYXkoMSk7XG4gICAgdmFyIHBhdGhEaXNwb3NhYmxlID0gcGF0aCQuY29ubmVjdCgpO1xuXG4gICAgdmFyIHZhbHVlJCA9IG1hdGNoZXMkLnBsdWNrKCd2YWx1ZScpLnJlcGxheSgxKTtcbiAgICB2YXIgdmFsdWVEaXNwb3NhYmxlID0gdmFsdWUkLmNvbm5lY3QoKTtcblxuICAgIHZhciBmdWxsUGF0aCQgPSBtYXRjaGVzJC5wbHVjaygncGF0aG5hbWUnKS5yZXBsYXkoMSk7XG4gICAgdmFyIGZ1bGxQYXRoRGlzcG9zYWJsZSA9IGZ1bGxQYXRoJC5jb25uZWN0KCk7XG5cbiAgICB2YXIgZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICBwYXRoRGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgICBmdWxsUGF0aERpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgICAgdmFsdWVEaXNwb3NhYmxlLmRpc3Bvc2UoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdGgkOiBwYXRoJCxcbiAgICAgIHZhbHVlJDogdmFsdWUkLFxuICAgICAgZnVsbFBhdGgkOiBmdWxsUGF0aCQsXG4gICAgICBjcmVhdGVIcmVmOiAoMCwgX3V0aWwubWFrZUNyZWF0ZUhyZWYpKG5hbWVzcGFjZSwgY3JlYXRlSHJlZiksXG4gICAgICBkaXNwb3NlOiBkaXNwb3NlXG4gICAgfTtcbiAgfTtcbn1cblxuZXhwb3J0cy5tYWtlRGVmaW5pdGlvblJlc29sdmVyID0gbWFrZURlZmluaXRpb25SZXNvbHZlcjsiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbWFrZVJvdXRlckRyaXZlciA9IHJlcXVpcmUoJy4vbWFrZVJvdXRlckRyaXZlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ21ha2VSb3V0ZXJEcml2ZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfbWFrZVJvdXRlckRyaXZlci5tYWtlUm91dGVyRHJpdmVyO1xuICB9XG59KTtcblxudmFyIF9jcmVhdGVSb3V0ZXIgPSByZXF1aXJlKCcuL2NyZWF0ZVJvdXRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ2NyZWF0ZVJvdXRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9jcmVhdGVSb3V0ZXIuY3JlYXRlUm91dGVyO1xuICB9XG59KTtcblxudmFyIF91dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnc3VwcG9ydHNIaXN0b3J5Jywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3V0aWwuc3VwcG9ydHNIaXN0b3J5O1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnY3JlYXRlTG9jYXRpb24nLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfdXRpbC5jcmVhdGVMb2NhdGlvbjtcbiAgfVxufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5tYWtlUm91dGVyRHJpdmVyID0gdW5kZWZpbmVkO1xuXG52YXIgX2FwaSA9IHJlcXVpcmUoJy4vYXBpJyk7XG5cbmZ1bmN0aW9uIG1ha2VSb3V0ZXJEcml2ZXIoaGlzdG9yeURyaXZlcikge1xuICBpZiAoIWhpc3RvcnlEcml2ZXIgfHwgdHlwZW9mIGhpc3RvcnlEcml2ZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IHRvIG1ha2VSb3V0ZXJEcml2ZXIgbXVzdCBiZSBhIHZhbGlkICcgKyAnaGlzdG9yeSBkcml2ZXInKTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gcm91dGVyRHJpdmVyKHNpbmskKSB7XG4gICAgdmFyIGhpc3RvcnkkID0gaGlzdG9yeURyaXZlcihzaW5rJCk7XG4gICAgcmV0dXJuICgwLCBfYXBpLmNyZWF0ZUFQSSkoaGlzdG9yeSQsIFtdLCBoaXN0b3J5JC5jcmVhdGVIcmVmKTtcbiAgfTtcbn1cblxuZXhwb3J0cy5tYWtlUm91dGVyRHJpdmVyID0gbWFrZVJvdXRlckRyaXZlcjsiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLm1ha2VQYXRoRmlsdGVyID0gdW5kZWZpbmVkO1xuXG52YXIgX2FwaSA9IHJlcXVpcmUoJy4vYXBpJyk7XG5cbnZhciBfdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5mdW5jdGlvbiBpc1N0cmljdGx5SW5TY29wZShuYW1lc3BhY2UsIHBhdGgpIHtcbiAgdmFyIHBhdGhQYXJ0cyA9ICgwLCBfdXRpbC5zcGxpdFBhdGgpKHBhdGgpO1xuICByZXR1cm4gbmFtZXNwYWNlLmV2ZXJ5KGZ1bmN0aW9uICh2LCBpKSB7XG4gICAgcmV0dXJuIHBhdGhQYXJ0c1tpXSA9PT0gdjtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VQYXRoRmlsdGVyKGhpc3RvcnkkLCBuYW1lc3BhY2UsIGNyZWF0ZUhyZWYpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHBhdGhGaWx0ZXIocGF0aCkge1xuICAgIHZhciBzY29wZWROYW1lc3BhY2UgPSBuYW1lc3BhY2UuY29uY2F0KCgwLCBfdXRpbC5zcGxpdFBhdGgpKHBhdGgpKTtcbiAgICB2YXIgc2NvcGVkSGlzdG9yeSQgPSBoaXN0b3J5JC5maWx0ZXIoZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgIHZhciBwYXRobmFtZSA9IF9yZWYucGF0aG5hbWU7XG4gICAgICByZXR1cm4gaXNTdHJpY3RseUluU2NvcGUoc2NvcGVkTmFtZXNwYWNlLCBwYXRobmFtZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgwLCBfYXBpLmNyZWF0ZUFQSSkoc2NvcGVkSGlzdG9yeSQsIHNjb3BlZE5hbWVzcGFjZSwgY3JlYXRlSHJlZik7XG4gIH07XG59XG5cbmV4cG9ydHMubWFrZVBhdGhGaWx0ZXIgPSBtYWtlUGF0aEZpbHRlcjsiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5mdW5jdGlvbiBzdXBwb3J0c0hpc3RvcnkoKSB7XG4gIHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG5cbiAgaWYgKCh1YS5pbmRleE9mKCdBbmRyb2lkIDIuJykgIT09IC0xIHx8IHVhLmluZGV4T2YoJ0FuZHJvaWQgNC4wJykgIT09IC0xKSAmJiB1YS5pbmRleE9mKCdNb2JpbGUgU2FmYXJpJykgIT09IC0xICYmIHVhLmluZGV4T2YoJ0Nocm9tZScpID09PSAtMSAmJiB1YS5pbmRleE9mKCdXaW5kb3dzIFBob25lJykgPT09IC0xKSB7XG4gICAge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiB3aW5kb3cuaGlzdG9yeSAmJiAncHVzaFN0YXRlJyBpbiB3aW5kb3cuaGlzdG9yeTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gc3BsaXRQYXRoKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguc3BsaXQoJy8nKS5maWx0ZXIoZnVuY3Rpb24gKHApIHtcbiAgICByZXR1cm4gcC5sZW5ndGggPiAwO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZmlsdGVyUGF0aChwYXRoUGFydHMsIG5hbWVzcGFjZSkge1xuICByZXR1cm4gcGF0aFBhcnRzLmZpbHRlcihmdW5jdGlvbiAocGFydCkge1xuICAgIHJldHVybiBuYW1lc3BhY2UuaW5kZXhPZihwYXJ0KSA8IDA7XG4gIH0pLmpvaW4oJy8nKTtcbn1cblxudmFyIHN0YXJ0c1dpdGggPSBmdW5jdGlvbiBzdGFydHNXaXRoKHBhcmFtLCB2YWx1ZSkge1xuICByZXR1cm4gcGFyYW1bMF0gPT09IHZhbHVlO1xufTtcblxuZnVuY3Rpb24gbWFrZUNyZWF0ZUhyZWYobmFtZXNwYWNlLCBjcmVhdGVIcmVmKSB7XG4gIHJldHVybiBmdW5jdGlvbiBfY3JlYXRlSHJlZihwYXRoKSB7XG4gICAgdmFyIGZ1bGxQYXRoID0gJycgKyBuYW1lc3BhY2Uuam9pbignLycpICsgcGF0aDtcbiAgICBpZiAoc3RhcnRzV2l0aChmdWxsUGF0aCwgJy8nKSB8fCBzdGFydHNXaXRoKCcjLycpKSB7XG4gICAgICByZXR1cm4gY3JlYXRlSHJlZihmdWxsUGF0aCk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVIcmVmKCcvJyArIGZ1bGxQYXRoKTtcbiAgfTtcbn1cblxudmFyIGxvY2F0aW9uRGVmYXVsdHMgPSB7XG4gIHBhdGhuYW1lOiAnLycsXG4gIGFjdGlvbjogJ1BPUCcsXG4gIGhhc2g6ICcnLFxuICBzZWFyY2g6ICcnLFxuICBzdGF0ZTogbnVsbCxcbiAga2V5OiBudWxsXG59O1xuXG5mdW5jdGlvbiBjcmVhdGVMb2NhdGlvbigpIHtcbiAgdmFyIGxvY2F0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gbG9jYXRpb25EZWZhdWx0cyA6IGFyZ3VtZW50c1swXTtcblxuICBpZiAodHlwZW9mIGxvY2F0aW9uID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGxvY2F0aW9uRGVmYXVsdHMsIHsgcGF0aG5hbWU6IGxvY2F0aW9uIH0pO1xuICB9XG4gIHJldHVybiBPYmplY3QuYXNzaWduKGxvY2F0aW9uRGVmYXVsdHMsIGxvY2F0aW9uKTtcbn1cblxuZXhwb3J0cy5zdXBwb3J0c0hpc3RvcnkgPSBzdXBwb3J0c0hpc3Rvcnk7XG5leHBvcnRzLnNwbGl0UGF0aCA9IHNwbGl0UGF0aDtcbmV4cG9ydHMuZmlsdGVyUGF0aCA9IGZpbHRlclBhdGg7XG5leHBvcnRzLm1ha2VDcmVhdGVIcmVmID0gbWFrZUNyZWF0ZUhyZWY7XG5leHBvcnRzLmNyZWF0ZUxvY2F0aW9uID0gY3JlYXRlTG9jYXRpb247IiwidmFyIHBTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbnZhciBvYmplY3RLZXlzID0gcmVxdWlyZSgnLi9saWIva2V5cy5qcycpO1xudmFyIGlzQXJndW1lbnRzID0gcmVxdWlyZSgnLi9saWIvaXNfYXJndW1lbnRzLmpzJyk7XG5cbnZhciBkZWVwRXF1YWwgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhY3R1YWwsIGV4cGVjdGVkLCBvcHRzKSB7XG4gIGlmICghb3B0cykgb3B0cyA9IHt9O1xuICAvLyA3LjEuIEFsbCBpZGVudGljYWwgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS5cbiAgaWYgKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcblxuICB9IGVsc2UgaWYgKGFjdHVhbCBpbnN0YW5jZW9mIERhdGUgJiYgZXhwZWN0ZWQgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgcmV0dXJuIGFjdHVhbC5nZXRUaW1lKCkgPT09IGV4cGVjdGVkLmdldFRpbWUoKTtcblxuICAvLyA3LjMuIE90aGVyIHBhaXJzIHRoYXQgZG8gbm90IGJvdGggcGFzcyB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcsXG4gIC8vIGVxdWl2YWxlbmNlIGlzIGRldGVybWluZWQgYnkgPT0uXG4gIH0gZWxzZSBpZiAoIWFjdHVhbCB8fCAhZXhwZWN0ZWQgfHwgdHlwZW9mIGFjdHVhbCAhPSAnb2JqZWN0JyAmJiB0eXBlb2YgZXhwZWN0ZWQgIT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gb3B0cy5zdHJpY3QgPyBhY3R1YWwgPT09IGV4cGVjdGVkIDogYWN0dWFsID09IGV4cGVjdGVkO1xuXG4gIC8vIDcuNC4gRm9yIGFsbCBvdGhlciBPYmplY3QgcGFpcnMsIGluY2x1ZGluZyBBcnJheSBvYmplY3RzLCBlcXVpdmFsZW5jZSBpc1xuICAvLyBkZXRlcm1pbmVkIGJ5IGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoYXMgdmVyaWZpZWRcbiAgLy8gd2l0aCBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwpLCB0aGUgc2FtZSBzZXQgb2Yga2V5c1xuICAvLyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSwgZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5XG4gIC8vIGNvcnJlc3BvbmRpbmcga2V5LCBhbmQgYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LiBOb3RlOiB0aGlzXG4gIC8vIGFjY291bnRzIGZvciBib3RoIG5hbWVkIGFuZCBpbmRleGVkIHByb3BlcnRpZXMgb24gQXJyYXlzLlxuICB9IGVsc2Uge1xuICAgIHJldHVybiBvYmpFcXVpdihhY3R1YWwsIGV4cGVjdGVkLCBvcHRzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZE9yTnVsbCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gaXNCdWZmZXIgKHgpIHtcbiAgaWYgKCF4IHx8IHR5cGVvZiB4ICE9PSAnb2JqZWN0JyB8fCB0eXBlb2YgeC5sZW5ndGggIT09ICdudW1iZXInKSByZXR1cm4gZmFsc2U7XG4gIGlmICh0eXBlb2YgeC5jb3B5ICE9PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiB4LnNsaWNlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh4Lmxlbmd0aCA+IDAgJiYgdHlwZW9mIHhbMF0gIT09ICdudW1iZXInKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBvYmpFcXVpdihhLCBiLCBvcHRzKSB7XG4gIHZhciBpLCBrZXk7XG4gIGlmIChpc1VuZGVmaW5lZE9yTnVsbChhKSB8fCBpc1VuZGVmaW5lZE9yTnVsbChiKSlcbiAgICByZXR1cm4gZmFsc2U7XG4gIC8vIGFuIGlkZW50aWNhbCAncHJvdG90eXBlJyBwcm9wZXJ0eS5cbiAgaWYgKGEucHJvdG90eXBlICE9PSBiLnByb3RvdHlwZSkgcmV0dXJuIGZhbHNlO1xuICAvL35+fkkndmUgbWFuYWdlZCB0byBicmVhayBPYmplY3Qua2V5cyB0aHJvdWdoIHNjcmV3eSBhcmd1bWVudHMgcGFzc2luZy5cbiAgLy8gICBDb252ZXJ0aW5nIHRvIGFycmF5IHNvbHZlcyB0aGUgcHJvYmxlbS5cbiAgaWYgKGlzQXJndW1lbnRzKGEpKSB7XG4gICAgaWYgKCFpc0FyZ3VtZW50cyhiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBhID0gcFNsaWNlLmNhbGwoYSk7XG4gICAgYiA9IHBTbGljZS5jYWxsKGIpO1xuICAgIHJldHVybiBkZWVwRXF1YWwoYSwgYiwgb3B0cyk7XG4gIH1cbiAgaWYgKGlzQnVmZmVyKGEpKSB7XG4gICAgaWYgKCFpc0J1ZmZlcihiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhW2ldICE9PSBiW2ldKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHRyeSB7XG4gICAgdmFyIGthID0gb2JqZWN0S2V5cyhhKSxcbiAgICAgICAga2IgPSBvYmplY3RLZXlzKGIpO1xuICB9IGNhdGNoIChlKSB7Ly9oYXBwZW5zIHdoZW4gb25lIGlzIGEgc3RyaW5nIGxpdGVyYWwgYW5kIHRoZSBvdGhlciBpc24ndFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBoYXZpbmcgdGhlIHNhbWUgbnVtYmVyIG9mIG93bmVkIHByb3BlcnRpZXMgKGtleXMgaW5jb3Jwb3JhdGVzXG4gIC8vIGhhc093blByb3BlcnR5KVxuICBpZiAoa2EubGVuZ3RoICE9IGtiLmxlbmd0aClcbiAgICByZXR1cm4gZmFsc2U7XG4gIC8vdGhlIHNhbWUgc2V0IG9mIGtleXMgKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksXG4gIGthLnNvcnQoKTtcbiAga2Iuc29ydCgpO1xuICAvL35+fmNoZWFwIGtleSB0ZXN0XG4gIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaWYgKGthW2ldICE9IGtiW2ldKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5IGNvcnJlc3BvbmRpbmcga2V5LCBhbmRcbiAgLy9+fn5wb3NzaWJseSBleHBlbnNpdmUgZGVlcCB0ZXN0XG4gIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAga2V5ID0ga2FbaV07XG4gICAgaWYgKCFkZWVwRXF1YWwoYVtrZXldLCBiW2tleV0sIG9wdHMpKSByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHR5cGVvZiBhID09PSB0eXBlb2YgYjtcbn1cbiIsInZhciBzdXBwb3J0c0FyZ3VtZW50c0NsYXNzID0gKGZ1bmN0aW9uKCl7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnRzKVxufSkoKSA9PSAnW29iamVjdCBBcmd1bWVudHNdJztcblxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gc3VwcG9ydHNBcmd1bWVudHNDbGFzcyA/IHN1cHBvcnRlZCA6IHVuc3VwcG9ydGVkO1xuXG5leHBvcnRzLnN1cHBvcnRlZCA9IHN1cHBvcnRlZDtcbmZ1bmN0aW9uIHN1cHBvcnRlZChvYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xufTtcblxuZXhwb3J0cy51bnN1cHBvcnRlZCA9IHVuc3VwcG9ydGVkO1xuZnVuY3Rpb24gdW5zdXBwb3J0ZWQob2JqZWN0KXtcbiAgcmV0dXJuIG9iamVjdCAmJlxuICAgIHR5cGVvZiBvYmplY3QgPT0gJ29iamVjdCcgJiZcbiAgICB0eXBlb2Ygb2JqZWN0Lmxlbmd0aCA9PSAnbnVtYmVyJyAmJlxuICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsICdjYWxsZWUnKSAmJlxuICAgICFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwob2JqZWN0LCAnY2FsbGVlJykgfHxcbiAgICBmYWxzZTtcbn07XG4iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2YgT2JqZWN0LmtleXMgPT09ICdmdW5jdGlvbidcbiAgPyBPYmplY3Qua2V5cyA6IHNoaW07XG5cbmV4cG9ydHMuc2hpbSA9IHNoaW07XG5mdW5jdGlvbiBzaGltIChvYmopIHtcbiAgdmFyIGtleXMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikga2V5cy5wdXNoKGtleSk7XG4gIHJldHVybiBrZXlzO1xufVxuIiwiLyohXG4gKiBlc2NhcGUtaHRtbFxuICogQ29weXJpZ2h0KGMpIDIwMTItMjAxMyBUSiBIb2xvd2F5Y2h1a1xuICogQ29weXJpZ2h0KGMpIDIwMTUgQW5kcmVhcyBMdWJiZVxuICogQ29weXJpZ2h0KGMpIDIwMTUgVGlhbmNoZW5nIFwiVGltb3RoeVwiIEd1XG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogTW9kdWxlIHZhcmlhYmxlcy5cbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIG1hdGNoSHRtbFJlZ0V4cCA9IC9bXCInJjw+XS87XG5cbi8qKlxuICogTW9kdWxlIGV4cG9ydHMuXG4gKiBAcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBlc2NhcGVIdG1sO1xuXG4vKipcbiAqIEVzY2FwZSBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gdGhlIGdpdmVuIHN0cmluZyBvZiBodG1sLlxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gZXNjYXBlIGZvciBpbnNlcnRpbmcgaW50byBIVE1MXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiBAcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZXNjYXBlSHRtbChzdHJpbmcpIHtcbiAgdmFyIHN0ciA9ICcnICsgc3RyaW5nO1xuICB2YXIgbWF0Y2ggPSBtYXRjaEh0bWxSZWdFeHAuZXhlYyhzdHIpO1xuXG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG5cbiAgdmFyIGVzY2FwZTtcbiAgdmFyIGh0bWwgPSAnJztcbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIGxhc3RJbmRleCA9IDA7XG5cbiAgZm9yIChpbmRleCA9IG1hdGNoLmluZGV4OyBpbmRleCA8IHN0ci5sZW5ndGg7IGluZGV4KyspIHtcbiAgICBzd2l0Y2ggKHN0ci5jaGFyQ29kZUF0KGluZGV4KSkge1xuICAgICAgY2FzZSAzNDogLy8gXCJcbiAgICAgICAgZXNjYXBlID0gJyZxdW90Oyc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzODogLy8gJlxuICAgICAgICBlc2NhcGUgPSAnJmFtcDsnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzk6IC8vICdcbiAgICAgICAgZXNjYXBlID0gJyYjMzk7JztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDYwOiAvLyA8XG4gICAgICAgIGVzY2FwZSA9ICcmbHQ7JztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDYyOiAvLyA+XG4gICAgICAgIGVzY2FwZSA9ICcmZ3Q7JztcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAobGFzdEluZGV4ICE9PSBpbmRleCkge1xuICAgICAgaHRtbCArPSBzdHIuc3Vic3RyaW5nKGxhc3RJbmRleCwgaW5kZXgpO1xuICAgIH1cblxuICAgIGxhc3RJbmRleCA9IGluZGV4ICsgMTtcbiAgICBodG1sICs9IGVzY2FwZTtcbiAgfVxuXG4gIHJldHVybiBsYXN0SW5kZXggIT09IGluZGV4XG4gICAgPyBodG1sICsgc3RyLnN1YnN0cmluZyhsYXN0SW5kZXgsIGluZGV4KVxuICAgIDogaHRtbDtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIE9uZVZlcnNpb25Db25zdHJhaW50ID0gcmVxdWlyZSgnaW5kaXZpZHVhbC9vbmUtdmVyc2lvbicpO1xuXG52YXIgTVlfVkVSU0lPTiA9ICc3Jztcbk9uZVZlcnNpb25Db25zdHJhaW50KCdldi1zdG9yZScsIE1ZX1ZFUlNJT04pO1xuXG52YXIgaGFzaEtleSA9ICdfX0VWX1NUT1JFX0tFWUAnICsgTVlfVkVSU0lPTjtcblxubW9kdWxlLmV4cG9ydHMgPSBFdlN0b3JlO1xuXG5mdW5jdGlvbiBFdlN0b3JlKGVsZW0pIHtcbiAgICB2YXIgaGFzaCA9IGVsZW1baGFzaEtleV07XG5cbiAgICBpZiAoIWhhc2gpIHtcbiAgICAgICAgaGFzaCA9IGVsZW1baGFzaEtleV0gPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFzaDtcbn1cbiIsInZhciB0b3BMZXZlbCA9IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDpcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHt9XG52YXIgbWluRG9jID0gcmVxdWlyZSgnbWluLWRvY3VtZW50Jyk7XG5cbmlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBkb2N1bWVudDtcbn0gZWxzZSB7XG4gICAgdmFyIGRvY2N5ID0gdG9wTGV2ZWxbJ19fR0xPQkFMX0RPQ1VNRU5UX0NBQ0hFQDQnXTtcblxuICAgIGlmICghZG9jY3kpIHtcbiAgICAgICAgZG9jY3kgPSB0b3BMZXZlbFsnX19HTE9CQUxfRE9DVU1FTlRfQ0FDSEVANCddID0gbWluRG9jO1xuICAgIH1cblxuICAgIG1vZHVsZS5leHBvcnRzID0gZG9jY3k7XG59XG4iLCIvKipcbiAqIEluZGljYXRlcyB0aGF0IG5hdmlnYXRpb24gd2FzIGNhdXNlZCBieSBhIGNhbGwgdG8gaGlzdG9yeS5wdXNoLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG52YXIgUFVTSCA9ICdQVVNIJztcblxuZXhwb3J0cy5QVVNIID0gUFVTSDtcbi8qKlxuICogSW5kaWNhdGVzIHRoYXQgbmF2aWdhdGlvbiB3YXMgY2F1c2VkIGJ5IGEgY2FsbCB0byBoaXN0b3J5LnJlcGxhY2UuXG4gKi9cbnZhciBSRVBMQUNFID0gJ1JFUExBQ0UnO1xuXG5leHBvcnRzLlJFUExBQ0UgPSBSRVBMQUNFO1xuLyoqXG4gKiBJbmRpY2F0ZXMgdGhhdCBuYXZpZ2F0aW9uIHdhcyBjYXVzZWQgYnkgc29tZSBvdGhlciBhY3Rpb24gc3VjaFxuICogYXMgdXNpbmcgYSBicm93c2VyJ3MgYmFjay9mb3J3YXJkIGJ1dHRvbnMgYW5kL29yIG1hbnVhbGx5IG1hbmlwdWxhdGluZ1xuICogdGhlIFVSTCBpbiBhIGJyb3dzZXIncyBsb2NhdGlvbiBiYXIuIFRoaXMgaXMgdGhlIGRlZmF1bHQuXG4gKlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3dFdmVudEhhbmRsZXJzL29ucG9wc3RhdGVcbiAqIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICovXG52YXIgUE9QID0gJ1BPUCc7XG5cbmV4cG9ydHMuUE9QID0gUE9QO1xuZXhwb3J0c1snZGVmYXVsdCddID0ge1xuICBQVVNIOiBQVVNILFxuICBSRVBMQUNFOiBSRVBMQUNFLFxuICBQT1A6IFBPUFxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbnZhciBfc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5leHBvcnRzLmxvb3BBc3luYyA9IGxvb3BBc3luYztcblxuZnVuY3Rpb24gbG9vcEFzeW5jKHR1cm5zLCB3b3JrLCBjYWxsYmFjaykge1xuICB2YXIgY3VycmVudFR1cm4gPSAwLFxuICAgICAgaXNEb25lID0gZmFsc2U7XG4gIHZhciBzeW5jID0gZmFsc2UsXG4gICAgICBoYXNOZXh0ID0gZmFsc2UsXG4gICAgICBkb25lQXJncyA9IHVuZGVmaW5lZDtcblxuICBmdW5jdGlvbiBkb25lKCkge1xuICAgIGlzRG9uZSA9IHRydWU7XG4gICAgaWYgKHN5bmMpIHtcbiAgICAgIC8vIEl0ZXJhdGUgaW5zdGVhZCBvZiByZWN1cnNpbmcgaWYgcG9zc2libGUuXG4gICAgICBkb25lQXJncyA9IFtdLmNvbmNhdChfc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICBpZiAoaXNEb25lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaGFzTmV4dCA9IHRydWU7XG4gICAgaWYgKHN5bmMpIHtcbiAgICAgIC8vIEl0ZXJhdGUgaW5zdGVhZCBvZiByZWN1cnNpbmcgaWYgcG9zc2libGUuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3luYyA9IHRydWU7XG5cbiAgICB3aGlsZSAoIWlzRG9uZSAmJiBjdXJyZW50VHVybiA8IHR1cm5zICYmIGhhc05leHQpIHtcbiAgICAgIGhhc05leHQgPSBmYWxzZTtcbiAgICAgIHdvcmsuY2FsbCh0aGlzLCBjdXJyZW50VHVybisrLCBuZXh0LCBkb25lKTtcbiAgICB9XG5cbiAgICBzeW5jID0gZmFsc2U7XG5cbiAgICBpZiAoaXNEb25lKSB7XG4gICAgICAvLyBUaGlzIG1lYW5zIHRoZSBsb29wIGZpbmlzaGVkIHN5bmNocm9ub3VzbHkuXG4gICAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBkb25lQXJncyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRUdXJuID49IHR1cm5zICYmIGhhc05leHQpIHtcbiAgICAgIGlzRG9uZSA9IHRydWU7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIG5leHQoKTtcbn0iLCIvKmVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLnNhdmVTdGF0ZSA9IHNhdmVTdGF0ZTtcbmV4cG9ydHMucmVhZFN0YXRlID0gcmVhZFN0YXRlO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJ3dhcm5pbmcnKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG52YXIgS2V5UHJlZml4ID0gJ0BASGlzdG9yeS8nO1xudmFyIFF1b3RhRXhjZWVkZWRFcnJvcnMgPSBbJ1F1b3RhRXhjZWVkZWRFcnJvcicsICdRVU9UQV9FWENFRURFRF9FUlInXTtcblxudmFyIFNlY3VyaXR5RXJyb3IgPSAnU2VjdXJpdHlFcnJvcic7XG5cbmZ1bmN0aW9uIGNyZWF0ZUtleShrZXkpIHtcbiAgcmV0dXJuIEtleVByZWZpeCArIGtleTtcbn1cblxuZnVuY3Rpb24gc2F2ZVN0YXRlKGtleSwgc3RhdGUpIHtcbiAgdHJ5IHtcbiAgICBpZiAoc3RhdGUgPT0gbnVsbCkge1xuICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oY3JlYXRlS2V5KGtleSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShjcmVhdGVLZXkoa2V5KSwgSlNPTi5zdHJpbmdpZnkoc3RhdGUpKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yLm5hbWUgPT09IFNlY3VyaXR5RXJyb3IpIHtcbiAgICAgIC8vIEJsb2NraW5nIGNvb2tpZXMgaW4gQ2hyb21lL0ZpcmVmb3gvU2FmYXJpIHRocm93cyBTZWN1cml0eUVycm9yIG9uIGFueVxuICAgICAgLy8gYXR0ZW1wdCB0byBhY2Nlc3Mgd2luZG93LnNlc3Npb25TdG9yYWdlLlxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IF93YXJuaW5nMlsnZGVmYXVsdCddKGZhbHNlLCAnW2hpc3RvcnldIFVuYWJsZSB0byBzYXZlIHN0YXRlOyBzZXNzaW9uU3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlIGR1ZSB0byBzZWN1cml0eSBzZXR0aW5ncycpIDogdW5kZWZpbmVkO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKFF1b3RhRXhjZWVkZWRFcnJvcnMuaW5kZXhPZihlcnJvci5uYW1lKSA+PSAwICYmIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIFNhZmFyaSBcInByaXZhdGUgbW9kZVwiIHRocm93cyBRdW90YUV4Y2VlZGVkRXJyb3IuXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gX3dhcm5pbmcyWydkZWZhdWx0J10oZmFsc2UsICdbaGlzdG9yeV0gVW5hYmxlIHRvIHNhdmUgc3RhdGU7IHNlc3Npb25TdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUgaW4gU2FmYXJpIHByaXZhdGUgbW9kZScpIDogdW5kZWZpbmVkO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVhZFN0YXRlKGtleSkge1xuICB2YXIganNvbiA9IHVuZGVmaW5lZDtcbiAgdHJ5IHtcbiAgICBqc29uID0gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oY3JlYXRlS2V5KGtleSkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvci5uYW1lID09PSBTZWN1cml0eUVycm9yKSB7XG4gICAgICAvLyBCbG9ja2luZyBjb29raWVzIGluIENocm9tZS9GaXJlZm94L1NhZmFyaSB0aHJvd3MgU2VjdXJpdHlFcnJvciBvbiBhbnlcbiAgICAgIC8vIGF0dGVtcHQgdG8gYWNjZXNzIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5cbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBfd2FybmluZzJbJ2RlZmF1bHQnXShmYWxzZSwgJ1toaXN0b3J5XSBVbmFibGUgdG8gcmVhZCBzdGF0ZTsgc2Vzc2lvblN0b3JhZ2UgaXMgbm90IGF2YWlsYWJsZSBkdWUgdG8gc2VjdXJpdHkgc2V0dGluZ3MnKSA6IHVuZGVmaW5lZDtcblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgaWYgKGpzb24pIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIElnbm9yZSBpbnZhbGlkIEpTT04uXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5hZGRFdmVudExpc3RlbmVyID0gYWRkRXZlbnRMaXN0ZW5lcjtcbmV4cG9ydHMucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IHJlbW92ZUV2ZW50TGlzdGVuZXI7XG5leHBvcnRzLmdldEhhc2hQYXRoID0gZ2V0SGFzaFBhdGg7XG5leHBvcnRzLnJlcGxhY2VIYXNoUGF0aCA9IHJlcGxhY2VIYXNoUGF0aDtcbmV4cG9ydHMuZ2V0V2luZG93UGF0aCA9IGdldFdpbmRvd1BhdGg7XG5leHBvcnRzLmdvID0gZ287XG5leHBvcnRzLmdldFVzZXJDb25maXJtYXRpb24gPSBnZXRVc2VyQ29uZmlybWF0aW9uO1xuZXhwb3J0cy5zdXBwb3J0c0hpc3RvcnkgPSBzdXBwb3J0c0hpc3Rvcnk7XG5leHBvcnRzLnN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoID0gc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2g7XG5cbmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIobm9kZSwgZXZlbnQsIGxpc3RlbmVyKSB7XG4gIGlmIChub2RlLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBmYWxzZSk7XG4gIH0gZWxzZSB7XG4gICAgbm9kZS5hdHRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50LCBsaXN0ZW5lcikge1xuICBpZiAobm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpO1xuICB9IGVsc2Uge1xuICAgIG5vZGUuZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0SGFzaFBhdGgoKSB7XG4gIC8vIFdlIGNhbid0IHVzZSB3aW5kb3cubG9jYXRpb24uaGFzaCBoZXJlIGJlY2F1c2UgaXQncyBub3RcbiAgLy8gY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnMgLSBGaXJlZm94IHdpbGwgcHJlLWRlY29kZSBpdCFcbiAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcjJylbMV0gfHwgJyc7XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VIYXNoUGF0aChwYXRoKSB7XG4gIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyAnIycgKyBwYXRoKTtcbn1cblxuZnVuY3Rpb24gZ2V0V2luZG93UGF0aCgpIHtcbiAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyB3aW5kb3cubG9jYXRpb24uaGFzaDtcbn1cblxuZnVuY3Rpb24gZ28obikge1xuICBpZiAobikgd2luZG93Lmhpc3RvcnkuZ28obik7XG59XG5cbmZ1bmN0aW9uIGdldFVzZXJDb25maXJtYXRpb24obWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgY2FsbGJhY2sod2luZG93LmNvbmZpcm0obWVzc2FnZSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgSFRNTDUgaGlzdG9yeSBBUEkgaXMgc3VwcG9ydGVkLiBUYWtlbiBmcm9tIE1vZGVybml6ci5cbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9ibG9iL21hc3Rlci9MSUNFTlNFXG4gKiBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9ibG9iL21hc3Rlci9mZWF0dXJlLWRldGVjdHMvaGlzdG9yeS5qc1xuICogY2hhbmdlZCB0byBhdm9pZCBmYWxzZSBuZWdhdGl2ZXMgZm9yIFdpbmRvd3MgUGhvbmVzOiBodHRwczovL2dpdGh1Yi5jb20vcmFja3QvcmVhY3Qtcm91dGVyL2lzc3Vlcy81ODZcbiAqL1xuXG5mdW5jdGlvbiBzdXBwb3J0c0hpc3RvcnkoKSB7XG4gIHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG4gIGlmICgodWEuaW5kZXhPZignQW5kcm9pZCAyLicpICE9PSAtMSB8fCB1YS5pbmRleE9mKCdBbmRyb2lkIDQuMCcpICE9PSAtMSkgJiYgdWEuaW5kZXhPZignTW9iaWxlIFNhZmFyaScpICE9PSAtMSAmJiB1YS5pbmRleE9mKCdDaHJvbWUnKSA9PT0gLTEgJiYgdWEuaW5kZXhPZignV2luZG93cyBQaG9uZScpID09PSAtMSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gd2luZG93Lmhpc3RvcnkgJiYgJ3B1c2hTdGF0ZScgaW4gd2luZG93Lmhpc3Rvcnk7XG59XG5cbi8qKlxuICogUmV0dXJucyBmYWxzZSBpZiB1c2luZyBnbyhuKSB3aXRoIGhhc2ggaGlzdG9yeSBjYXVzZXMgYSBmdWxsIHBhZ2UgcmVsb2FkLlxuICovXG5cbmZ1bmN0aW9uIHN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoKCkge1xuICB2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICByZXR1cm4gdWEuaW5kZXhPZignRmlyZWZveCcpID09PSAtMTtcbn0iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG52YXIgY2FuVXNlRE9NID0gISEodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcbmV4cG9ydHMuY2FuVXNlRE9NID0gY2FuVXNlRE9NOyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuZXh0cmFjdFBhdGggPSBleHRyYWN0UGF0aDtcbmV4cG9ydHMucGFyc2VQYXRoID0gcGFyc2VQYXRoO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJ3dhcm5pbmcnKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG5mdW5jdGlvbiBleHRyYWN0UGF0aChzdHJpbmcpIHtcbiAgdmFyIG1hdGNoID0gc3RyaW5nLm1hdGNoKC9eaHR0cHM/OlxcL1xcL1teXFwvXSovKTtcblxuICBpZiAobWF0Y2ggPT0gbnVsbCkgcmV0dXJuIHN0cmluZztcblxuICByZXR1cm4gc3RyaW5nLnN1YnN0cmluZyhtYXRjaFswXS5sZW5ndGgpO1xufVxuXG5mdW5jdGlvbiBwYXJzZVBhdGgocGF0aCkge1xuICB2YXIgcGF0aG5hbWUgPSBleHRyYWN0UGF0aChwYXRoKTtcbiAgdmFyIHNlYXJjaCA9ICcnO1xuICB2YXIgaGFzaCA9ICcnO1xuXG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBfd2FybmluZzJbJ2RlZmF1bHQnXShwYXRoID09PSBwYXRobmFtZSwgJ0EgcGF0aCBtdXN0IGJlIHBhdGhuYW1lICsgc2VhcmNoICsgaGFzaCBvbmx5LCBub3QgYSBmdWxseSBxdWFsaWZpZWQgVVJMIGxpa2UgXCIlc1wiJywgcGF0aCkgOiB1bmRlZmluZWQ7XG5cbiAgdmFyIGhhc2hJbmRleCA9IHBhdGhuYW1lLmluZGV4T2YoJyMnKTtcbiAgaWYgKGhhc2hJbmRleCAhPT0gLTEpIHtcbiAgICBoYXNoID0gcGF0aG5hbWUuc3Vic3RyaW5nKGhhc2hJbmRleCk7XG4gICAgcGF0aG5hbWUgPSBwYXRobmFtZS5zdWJzdHJpbmcoMCwgaGFzaEluZGV4KTtcbiAgfVxuXG4gIHZhciBzZWFyY2hJbmRleCA9IHBhdGhuYW1lLmluZGV4T2YoJz8nKTtcbiAgaWYgKHNlYXJjaEluZGV4ICE9PSAtMSkge1xuICAgIHNlYXJjaCA9IHBhdGhuYW1lLnN1YnN0cmluZyhzZWFyY2hJbmRleCk7XG4gICAgcGF0aG5hbWUgPSBwYXRobmFtZS5zdWJzdHJpbmcoMCwgc2VhcmNoSW5kZXgpO1xuICB9XG5cbiAgaWYgKHBhdGhuYW1lID09PSAnJykgcGF0aG5hbWUgPSAnLyc7XG5cbiAgcmV0dXJuIHtcbiAgICBwYXRobmFtZTogcGF0aG5hbWUsXG4gICAgc2VhcmNoOiBzZWFyY2gsXG4gICAgaGFzaDogaGFzaFxuICB9O1xufSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgX2ludmFyaWFudCA9IHJlcXVpcmUoJ2ludmFyaWFudCcpO1xuXG52YXIgX2ludmFyaWFudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbnZhcmlhbnQpO1xuXG52YXIgX0FjdGlvbnMgPSByZXF1aXJlKCcuL0FjdGlvbnMnKTtcblxudmFyIF9QYXRoVXRpbHMgPSByZXF1aXJlKCcuL1BhdGhVdGlscycpO1xuXG52YXIgX0V4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgX0RPTVV0aWxzID0gcmVxdWlyZSgnLi9ET01VdGlscycpO1xuXG52YXIgX0RPTVN0YXRlU3RvcmFnZSA9IHJlcXVpcmUoJy4vRE9NU3RhdGVTdG9yYWdlJyk7XG5cbnZhciBfY3JlYXRlRE9NSGlzdG9yeSA9IHJlcXVpcmUoJy4vY3JlYXRlRE9NSGlzdG9yeScpO1xuXG52YXIgX2NyZWF0ZURPTUhpc3RvcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlRE9NSGlzdG9yeSk7XG5cbi8qKlxuICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgdXNlcyBIVE1MNSdzIGhpc3RvcnkgQVBJXG4gKiAocHVzaFN0YXRlLCByZXBsYWNlU3RhdGUsIGFuZCB0aGUgcG9wc3RhdGUgZXZlbnQpIHRvIG1hbmFnZSBoaXN0b3J5LlxuICogVGhpcyBpcyB0aGUgcmVjb21tZW5kZWQgbWV0aG9kIG9mIG1hbmFnaW5nIGhpc3RvcnkgaW4gYnJvd3NlcnMgYmVjYXVzZVxuICogaXQgcHJvdmlkZXMgdGhlIGNsZWFuZXN0IFVSTHMuXG4gKlxuICogTm90ZTogSW4gYnJvd3NlcnMgdGhhdCBkbyBub3Qgc3VwcG9ydCB0aGUgSFRNTDUgaGlzdG9yeSBBUEkgZnVsbFxuICogcGFnZSByZWxvYWRzIHdpbGwgYmUgdXNlZCB0byBwcmVzZXJ2ZSBVUkxzLlxuICovXG5mdW5jdGlvbiBjcmVhdGVCcm93c2VySGlzdG9yeSgpIHtcbiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblxuICAhX0V4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBfaW52YXJpYW50MlsnZGVmYXVsdCddKGZhbHNlLCAnQnJvd3NlciBoaXN0b3J5IG5lZWRzIGEgRE9NJykgOiBfaW52YXJpYW50MlsnZGVmYXVsdCddKGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICB2YXIgZm9yY2VSZWZyZXNoID0gb3B0aW9ucy5mb3JjZVJlZnJlc2g7XG5cbiAgdmFyIGlzU3VwcG9ydGVkID0gX0RPTVV0aWxzLnN1cHBvcnRzSGlzdG9yeSgpO1xuICB2YXIgdXNlUmVmcmVzaCA9ICFpc1N1cHBvcnRlZCB8fCBmb3JjZVJlZnJlc2g7XG5cbiAgZnVuY3Rpb24gZ2V0Q3VycmVudExvY2F0aW9uKGhpc3RvcnlTdGF0ZSkge1xuICAgIGhpc3RvcnlTdGF0ZSA9IGhpc3RvcnlTdGF0ZSB8fCB3aW5kb3cuaGlzdG9yeS5zdGF0ZSB8fCB7fTtcblxuICAgIHZhciBwYXRoID0gX0RPTVV0aWxzLmdldFdpbmRvd1BhdGgoKTtcbiAgICB2YXIgX2hpc3RvcnlTdGF0ZSA9IGhpc3RvcnlTdGF0ZTtcbiAgICB2YXIga2V5ID0gX2hpc3RvcnlTdGF0ZS5rZXk7XG5cbiAgICB2YXIgc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgaWYgKGtleSkge1xuICAgICAgc3RhdGUgPSBfRE9NU3RhdGVTdG9yYWdlLnJlYWRTdGF0ZShrZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZSA9IG51bGw7XG4gICAgICBrZXkgPSBoaXN0b3J5LmNyZWF0ZUtleSgpO1xuXG4gICAgICBpZiAoaXNTdXBwb3J0ZWQpIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShfZXh0ZW5kcyh7fSwgaGlzdG9yeVN0YXRlLCB7IGtleToga2V5IH0pLCBudWxsLCBwYXRoKTtcbiAgICB9XG5cbiAgICB2YXIgbG9jYXRpb24gPSBfUGF0aFV0aWxzLnBhcnNlUGF0aChwYXRoKTtcblxuICAgIHJldHVybiBoaXN0b3J5LmNyZWF0ZUxvY2F0aW9uKF9leHRlbmRzKHt9LCBsb2NhdGlvbiwgeyBzdGF0ZTogc3RhdGUgfSksIHVuZGVmaW5lZCwga2V5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0UG9wU3RhdGVMaXN0ZW5lcihfcmVmKSB7XG4gICAgdmFyIHRyYW5zaXRpb25UbyA9IF9yZWYudHJhbnNpdGlvblRvO1xuXG4gICAgZnVuY3Rpb24gcG9wU3RhdGVMaXN0ZW5lcihldmVudCkge1xuICAgICAgaWYgKGV2ZW50LnN0YXRlID09PSB1bmRlZmluZWQpIHJldHVybjsgLy8gSWdub3JlIGV4dHJhbmVvdXMgcG9wc3RhdGUgZXZlbnRzIGluIFdlYktpdC5cblxuICAgICAgdHJhbnNpdGlvblRvKGdldEN1cnJlbnRMb2NhdGlvbihldmVudC5zdGF0ZSkpO1xuICAgIH1cblxuICAgIF9ET01VdGlscy5hZGRFdmVudExpc3RlbmVyKHdpbmRvdywgJ3BvcHN0YXRlJywgcG9wU3RhdGVMaXN0ZW5lcik7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgX0RPTVV0aWxzLnJlbW92ZUV2ZW50TGlzdGVuZXIod2luZG93LCAncG9wc3RhdGUnLCBwb3BTdGF0ZUxpc3RlbmVyKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gZmluaXNoVHJhbnNpdGlvbihsb2NhdGlvbikge1xuICAgIHZhciBiYXNlbmFtZSA9IGxvY2F0aW9uLmJhc2VuYW1lO1xuICAgIHZhciBwYXRobmFtZSA9IGxvY2F0aW9uLnBhdGhuYW1lO1xuICAgIHZhciBzZWFyY2ggPSBsb2NhdGlvbi5zZWFyY2g7XG4gICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoO1xuICAgIHZhciBzdGF0ZSA9IGxvY2F0aW9uLnN0YXRlO1xuICAgIHZhciBhY3Rpb24gPSBsb2NhdGlvbi5hY3Rpb247XG4gICAgdmFyIGtleSA9IGxvY2F0aW9uLmtleTtcblxuICAgIGlmIChhY3Rpb24gPT09IF9BY3Rpb25zLlBPUCkgcmV0dXJuOyAvLyBOb3RoaW5nIHRvIGRvLlxuXG4gICAgX0RPTVN0YXRlU3RvcmFnZS5zYXZlU3RhdGUoa2V5LCBzdGF0ZSk7XG5cbiAgICB2YXIgcGF0aCA9IChiYXNlbmFtZSB8fCAnJykgKyBwYXRobmFtZSArIHNlYXJjaCArIGhhc2g7XG4gICAgdmFyIGhpc3RvcnlTdGF0ZSA9IHtcbiAgICAgIGtleToga2V5XG4gICAgfTtcblxuICAgIGlmIChhY3Rpb24gPT09IF9BY3Rpb25zLlBVU0gpIHtcbiAgICAgIGlmICh1c2VSZWZyZXNoKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcGF0aDtcbiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBQcmV2ZW50IGxvY2F0aW9uIHVwZGF0ZS5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKGhpc3RvcnlTdGF0ZSwgbnVsbCwgcGF0aCk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUkVQTEFDRVxuICAgICAgaWYgKHVzZVJlZnJlc2gpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UocGF0aCk7XG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gUHJldmVudCBsb2NhdGlvbiB1cGRhdGUuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShoaXN0b3J5U3RhdGUsIG51bGwsIHBhdGgpO1xuICAgICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIGhpc3RvcnkgPSBfY3JlYXRlRE9NSGlzdG9yeTJbJ2RlZmF1bHQnXShfZXh0ZW5kcyh7fSwgb3B0aW9ucywge1xuICAgIGdldEN1cnJlbnRMb2NhdGlvbjogZ2V0Q3VycmVudExvY2F0aW9uLFxuICAgIGZpbmlzaFRyYW5zaXRpb246IGZpbmlzaFRyYW5zaXRpb24sXG4gICAgc2F2ZVN0YXRlOiBfRE9NU3RhdGVTdG9yYWdlLnNhdmVTdGF0ZVxuICB9KSk7XG5cbiAgdmFyIGxpc3RlbmVyQ291bnQgPSAwLFxuICAgICAgc3RvcFBvcFN0YXRlTGlzdGVuZXIgPSB1bmRlZmluZWQ7XG5cbiAgZnVuY3Rpb24gbGlzdGVuQmVmb3JlKGxpc3RlbmVyKSB7XG4gICAgaWYgKCsrbGlzdGVuZXJDb3VudCA9PT0gMSkgc3RvcFBvcFN0YXRlTGlzdGVuZXIgPSBzdGFydFBvcFN0YXRlTGlzdGVuZXIoaGlzdG9yeSk7XG5cbiAgICB2YXIgdW5saXN0ZW4gPSBoaXN0b3J5Lmxpc3RlbkJlZm9yZShsaXN0ZW5lcik7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdW5saXN0ZW4oKTtcblxuICAgICAgaWYgKC0tbGlzdGVuZXJDb3VudCA9PT0gMCkgc3RvcFBvcFN0YXRlTGlzdGVuZXIoKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgaWYgKCsrbGlzdGVuZXJDb3VudCA9PT0gMSkgc3RvcFBvcFN0YXRlTGlzdGVuZXIgPSBzdGFydFBvcFN0YXRlTGlzdGVuZXIoaGlzdG9yeSk7XG5cbiAgICB2YXIgdW5saXN0ZW4gPSBoaXN0b3J5Lmxpc3RlbihsaXN0ZW5lcik7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdW5saXN0ZW4oKTtcblxuICAgICAgaWYgKC0tbGlzdGVuZXJDb3VudCA9PT0gMCkgc3RvcFBvcFN0YXRlTGlzdGVuZXIoKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBmdW5jdGlvbiByZWdpc3RlclRyYW5zaXRpb25Ib29rKGhvb2spIHtcbiAgICBpZiAoKytsaXN0ZW5lckNvdW50ID09PSAxKSBzdG9wUG9wU3RhdGVMaXN0ZW5lciA9IHN0YXJ0UG9wU3RhdGVMaXN0ZW5lcihoaXN0b3J5KTtcblxuICAgIGhpc3RvcnkucmVnaXN0ZXJUcmFuc2l0aW9uSG9vayhob29rKTtcbiAgfVxuXG4gIC8vIGRlcHJlY2F0ZWRcbiAgZnVuY3Rpb24gdW5yZWdpc3RlclRyYW5zaXRpb25Ib29rKGhvb2spIHtcbiAgICBoaXN0b3J5LnVucmVnaXN0ZXJUcmFuc2l0aW9uSG9vayhob29rKTtcblxuICAgIGlmICgtLWxpc3RlbmVyQ291bnQgPT09IDApIHN0b3BQb3BTdGF0ZUxpc3RlbmVyKCk7XG4gIH1cblxuICByZXR1cm4gX2V4dGVuZHMoe30sIGhpc3RvcnksIHtcbiAgICBsaXN0ZW5CZWZvcmU6IGxpc3RlbkJlZm9yZSxcbiAgICBsaXN0ZW46IGxpc3RlbixcbiAgICByZWdpc3RlclRyYW5zaXRpb25Ib29rOiByZWdpc3RlclRyYW5zaXRpb25Ib29rLFxuICAgIHVucmVnaXN0ZXJUcmFuc2l0aW9uSG9vazogdW5yZWdpc3RlclRyYW5zaXRpb25Ib29rXG4gIH0pO1xufVxuXG5leHBvcnRzWydkZWZhdWx0J10gPSBjcmVhdGVCcm93c2VySGlzdG9yeTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgX2ludmFyaWFudCA9IHJlcXVpcmUoJ2ludmFyaWFudCcpO1xuXG52YXIgX2ludmFyaWFudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbnZhcmlhbnQpO1xuXG52YXIgX0V4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgX0RPTVV0aWxzID0gcmVxdWlyZSgnLi9ET01VdGlscycpO1xuXG52YXIgX2NyZWF0ZUhpc3RvcnkgPSByZXF1aXJlKCcuL2NyZWF0ZUhpc3RvcnknKTtcblxudmFyIF9jcmVhdGVIaXN0b3J5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUhpc3RvcnkpO1xuXG5mdW5jdGlvbiBjcmVhdGVET01IaXN0b3J5KG9wdGlvbnMpIHtcbiAgdmFyIGhpc3RvcnkgPSBfY3JlYXRlSGlzdG9yeTJbJ2RlZmF1bHQnXShfZXh0ZW5kcyh7XG4gICAgZ2V0VXNlckNvbmZpcm1hdGlvbjogX0RPTVV0aWxzLmdldFVzZXJDb25maXJtYXRpb25cbiAgfSwgb3B0aW9ucywge1xuICAgIGdvOiBfRE9NVXRpbHMuZ29cbiAgfSkpO1xuXG4gIGZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcikge1xuICAgICFfRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IF9pbnZhcmlhbnQyWydkZWZhdWx0J10oZmFsc2UsICdET00gaGlzdG9yeSBuZWVkcyBhIERPTScpIDogX2ludmFyaWFudDJbJ2RlZmF1bHQnXShmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICByZXR1cm4gaGlzdG9yeS5saXN0ZW4obGlzdGVuZXIpO1xuICB9XG5cbiAgcmV0dXJuIF9leHRlbmRzKHt9LCBoaXN0b3J5LCB7XG4gICAgbGlzdGVuOiBsaXN0ZW5cbiAgfSk7XG59XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGNyZWF0ZURPTUhpc3Rvcnk7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIF93YXJuaW5nID0gcmVxdWlyZSgnd2FybmluZycpO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbnZhciBfaW52YXJpYW50ID0gcmVxdWlyZSgnaW52YXJpYW50Jyk7XG5cbnZhciBfaW52YXJpYW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ludmFyaWFudCk7XG5cbnZhciBfQWN0aW9ucyA9IHJlcXVpcmUoJy4vQWN0aW9ucycpO1xuXG52YXIgX1BhdGhVdGlscyA9IHJlcXVpcmUoJy4vUGF0aFV0aWxzJyk7XG5cbnZhciBfRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBfRE9NVXRpbHMgPSByZXF1aXJlKCcuL0RPTVV0aWxzJyk7XG5cbnZhciBfRE9NU3RhdGVTdG9yYWdlID0gcmVxdWlyZSgnLi9ET01TdGF0ZVN0b3JhZ2UnKTtcblxudmFyIF9jcmVhdGVET01IaXN0b3J5ID0gcmVxdWlyZSgnLi9jcmVhdGVET01IaXN0b3J5Jyk7XG5cbnZhciBfY3JlYXRlRE9NSGlzdG9yeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVET01IaXN0b3J5KTtcblxuZnVuY3Rpb24gaXNBYnNvbHV0ZVBhdGgocGF0aCkge1xuICByZXR1cm4gdHlwZW9mIHBhdGggPT09ICdzdHJpbmcnICYmIHBhdGguY2hhckF0KDApID09PSAnLyc7XG59XG5cbmZ1bmN0aW9uIGVuc3VyZVNsYXNoKCkge1xuICB2YXIgcGF0aCA9IF9ET01VdGlscy5nZXRIYXNoUGF0aCgpO1xuXG4gIGlmIChpc0Fic29sdXRlUGF0aChwYXRoKSkgcmV0dXJuIHRydWU7XG5cbiAgX0RPTVV0aWxzLnJlcGxhY2VIYXNoUGF0aCgnLycgKyBwYXRoKTtcblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGFkZFF1ZXJ5U3RyaW5nVmFsdWVUb1BhdGgocGF0aCwga2V5LCB2YWx1ZSkge1xuICByZXR1cm4gcGF0aCArIChwYXRoLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgKGtleSArICc9JyArIHZhbHVlKTtcbn1cblxuZnVuY3Rpb24gc3RyaXBRdWVyeVN0cmluZ1ZhbHVlRnJvbVBhdGgocGF0aCwga2V5KSB7XG4gIHJldHVybiBwYXRoLnJlcGxhY2UobmV3IFJlZ0V4cCgnWz8mXT8nICsga2V5ICsgJz1bYS16QS1aMC05XSsnKSwgJycpO1xufVxuXG5mdW5jdGlvbiBnZXRRdWVyeVN0cmluZ1ZhbHVlRnJvbVBhdGgocGF0aCwga2V5KSB7XG4gIHZhciBtYXRjaCA9IHBhdGgubWF0Y2gobmV3IFJlZ0V4cCgnXFxcXD8uKj9cXFxcYicgKyBrZXkgKyAnPSguKz8pXFxcXGInKSk7XG4gIHJldHVybiBtYXRjaCAmJiBtYXRjaFsxXTtcbn1cblxudmFyIERlZmF1bHRRdWVyeUtleSA9ICdfayc7XG5cbmZ1bmN0aW9uIGNyZWF0ZUhhc2hIaXN0b3J5KCkge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdO1xuXG4gICFfRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IF9pbnZhcmlhbnQyWydkZWZhdWx0J10oZmFsc2UsICdIYXNoIGhpc3RvcnkgbmVlZHMgYSBET00nKSA6IF9pbnZhcmlhbnQyWydkZWZhdWx0J10oZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIHZhciBxdWVyeUtleSA9IG9wdGlvbnMucXVlcnlLZXk7XG5cbiAgaWYgKHF1ZXJ5S2V5ID09PSB1bmRlZmluZWQgfHwgISFxdWVyeUtleSkgcXVlcnlLZXkgPSB0eXBlb2YgcXVlcnlLZXkgPT09ICdzdHJpbmcnID8gcXVlcnlLZXkgOiBEZWZhdWx0UXVlcnlLZXk7XG5cbiAgZnVuY3Rpb24gZ2V0Q3VycmVudExvY2F0aW9uKCkge1xuICAgIHZhciBwYXRoID0gX0RPTVV0aWxzLmdldEhhc2hQYXRoKCk7XG5cbiAgICB2YXIga2V5ID0gdW5kZWZpbmVkLFxuICAgICAgICBzdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICBpZiAocXVlcnlLZXkpIHtcbiAgICAgIGtleSA9IGdldFF1ZXJ5U3RyaW5nVmFsdWVGcm9tUGF0aChwYXRoLCBxdWVyeUtleSk7XG4gICAgICBwYXRoID0gc3RyaXBRdWVyeVN0cmluZ1ZhbHVlRnJvbVBhdGgocGF0aCwgcXVlcnlLZXkpO1xuXG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIHN0YXRlID0gX0RPTVN0YXRlU3RvcmFnZS5yZWFkU3RhdGUoa2V5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlID0gbnVsbDtcbiAgICAgICAga2V5ID0gaGlzdG9yeS5jcmVhdGVLZXkoKTtcbiAgICAgICAgX0RPTVV0aWxzLnJlcGxhY2VIYXNoUGF0aChhZGRRdWVyeVN0cmluZ1ZhbHVlVG9QYXRoKHBhdGgsIHF1ZXJ5S2V5LCBrZXkpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAga2V5ID0gc3RhdGUgPSBudWxsO1xuICAgIH1cblxuICAgIHZhciBsb2NhdGlvbiA9IF9QYXRoVXRpbHMucGFyc2VQYXRoKHBhdGgpO1xuXG4gICAgcmV0dXJuIGhpc3RvcnkuY3JlYXRlTG9jYXRpb24oX2V4dGVuZHMoe30sIGxvY2F0aW9uLCB7IHN0YXRlOiBzdGF0ZSB9KSwgdW5kZWZpbmVkLCBrZXkpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnRIYXNoQ2hhbmdlTGlzdGVuZXIoX3JlZikge1xuICAgIHZhciB0cmFuc2l0aW9uVG8gPSBfcmVmLnRyYW5zaXRpb25UbztcblxuICAgIGZ1bmN0aW9uIGhhc2hDaGFuZ2VMaXN0ZW5lcigpIHtcbiAgICAgIGlmICghZW5zdXJlU2xhc2goKSkgcmV0dXJuOyAvLyBBbHdheXMgbWFrZSBzdXJlIGhhc2hlcyBhcmUgcHJlY2VlZGVkIHdpdGggYSAvLlxuXG4gICAgICB0cmFuc2l0aW9uVG8oZ2V0Q3VycmVudExvY2F0aW9uKCkpO1xuICAgIH1cblxuICAgIGVuc3VyZVNsYXNoKCk7XG4gICAgX0RPTVV0aWxzLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAnaGFzaGNoYW5nZScsIGhhc2hDaGFuZ2VMaXN0ZW5lcik7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgX0RPTVV0aWxzLnJlbW92ZUV2ZW50TGlzdGVuZXIod2luZG93LCAnaGFzaGNoYW5nZScsIGhhc2hDaGFuZ2VMaXN0ZW5lcik7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmlzaFRyYW5zaXRpb24obG9jYXRpb24pIHtcbiAgICB2YXIgYmFzZW5hbWUgPSBsb2NhdGlvbi5iYXNlbmFtZTtcbiAgICB2YXIgcGF0aG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZTtcbiAgICB2YXIgc2VhcmNoID0gbG9jYXRpb24uc2VhcmNoO1xuICAgIHZhciBzdGF0ZSA9IGxvY2F0aW9uLnN0YXRlO1xuICAgIHZhciBhY3Rpb24gPSBsb2NhdGlvbi5hY3Rpb247XG4gICAgdmFyIGtleSA9IGxvY2F0aW9uLmtleTtcblxuICAgIGlmIChhY3Rpb24gPT09IF9BY3Rpb25zLlBPUCkgcmV0dXJuOyAvLyBOb3RoaW5nIHRvIGRvLlxuXG4gICAgdmFyIHBhdGggPSAoYmFzZW5hbWUgfHwgJycpICsgcGF0aG5hbWUgKyBzZWFyY2g7XG5cbiAgICBpZiAocXVlcnlLZXkpIHtcbiAgICAgIHBhdGggPSBhZGRRdWVyeVN0cmluZ1ZhbHVlVG9QYXRoKHBhdGgsIHF1ZXJ5S2V5LCBrZXkpO1xuICAgICAgX0RPTVN0YXRlU3RvcmFnZS5zYXZlU3RhdGUoa2V5LCBzdGF0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERyb3Aga2V5IGFuZCBzdGF0ZS5cbiAgICAgIGxvY2F0aW9uLmtleSA9IGxvY2F0aW9uLnN0YXRlID0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgY3VycmVudEhhc2ggPSBfRE9NVXRpbHMuZ2V0SGFzaFBhdGgoKTtcblxuICAgIGlmIChhY3Rpb24gPT09IF9BY3Rpb25zLlBVU0gpIHtcbiAgICAgIGlmIChjdXJyZW50SGFzaCAhPT0gcGF0aCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHBhdGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gX3dhcm5pbmcyWydkZWZhdWx0J10oZmFsc2UsICdZb3UgY2Fubm90IFBVU0ggdGhlIHNhbWUgcGF0aCB1c2luZyBoYXNoIGhpc3RvcnknKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRIYXNoICE9PSBwYXRoKSB7XG4gICAgICAvLyBSRVBMQUNFXG4gICAgICBfRE9NVXRpbHMucmVwbGFjZUhhc2hQYXRoKHBhdGgpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBoaXN0b3J5ID0gX2NyZWF0ZURPTUhpc3RvcnkyWydkZWZhdWx0J10oX2V4dGVuZHMoe30sIG9wdGlvbnMsIHtcbiAgICBnZXRDdXJyZW50TG9jYXRpb246IGdldEN1cnJlbnRMb2NhdGlvbixcbiAgICBmaW5pc2hUcmFuc2l0aW9uOiBmaW5pc2hUcmFuc2l0aW9uLFxuICAgIHNhdmVTdGF0ZTogX0RPTVN0YXRlU3RvcmFnZS5zYXZlU3RhdGVcbiAgfSkpO1xuXG4gIHZhciBsaXN0ZW5lckNvdW50ID0gMCxcbiAgICAgIHN0b3BIYXNoQ2hhbmdlTGlzdGVuZXIgPSB1bmRlZmluZWQ7XG5cbiAgZnVuY3Rpb24gbGlzdGVuQmVmb3JlKGxpc3RlbmVyKSB7XG4gICAgaWYgKCsrbGlzdGVuZXJDb3VudCA9PT0gMSkgc3RvcEhhc2hDaGFuZ2VMaXN0ZW5lciA9IHN0YXJ0SGFzaENoYW5nZUxpc3RlbmVyKGhpc3RvcnkpO1xuXG4gICAgdmFyIHVubGlzdGVuID0gaGlzdG9yeS5saXN0ZW5CZWZvcmUobGlzdGVuZXIpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHVubGlzdGVuKCk7XG5cbiAgICAgIGlmICgtLWxpc3RlbmVyQ291bnQgPT09IDApIHN0b3BIYXNoQ2hhbmdlTGlzdGVuZXIoKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgaWYgKCsrbGlzdGVuZXJDb3VudCA9PT0gMSkgc3RvcEhhc2hDaGFuZ2VMaXN0ZW5lciA9IHN0YXJ0SGFzaENoYW5nZUxpc3RlbmVyKGhpc3RvcnkpO1xuXG4gICAgdmFyIHVubGlzdGVuID0gaGlzdG9yeS5saXN0ZW4obGlzdGVuZXIpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHVubGlzdGVuKCk7XG5cbiAgICAgIGlmICgtLWxpc3RlbmVyQ291bnQgPT09IDApIHN0b3BIYXNoQ2hhbmdlTGlzdGVuZXIoKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gcHVzaChsb2NhdGlvbikge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBfd2FybmluZzJbJ2RlZmF1bHQnXShxdWVyeUtleSB8fCBsb2NhdGlvbi5zdGF0ZSA9PSBudWxsLCAnWW91IGNhbm5vdCB1c2Ugc3RhdGUgd2l0aG91dCBhIHF1ZXJ5S2V5IGl0IHdpbGwgYmUgZHJvcHBlZCcpIDogdW5kZWZpbmVkO1xuXG4gICAgaGlzdG9yeS5wdXNoKGxvY2F0aW9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlcGxhY2UobG9jYXRpb24pIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gX3dhcm5pbmcyWydkZWZhdWx0J10ocXVlcnlLZXkgfHwgbG9jYXRpb24uc3RhdGUgPT0gbnVsbCwgJ1lvdSBjYW5ub3QgdXNlIHN0YXRlIHdpdGhvdXQgYSBxdWVyeUtleSBpdCB3aWxsIGJlIGRyb3BwZWQnKSA6IHVuZGVmaW5lZDtcblxuICAgIGhpc3RvcnkucmVwbGFjZShsb2NhdGlvbik7XG4gIH1cblxuICB2YXIgZ29Jc1N1cHBvcnRlZFdpdGhvdXRSZWxvYWQgPSBfRE9NVXRpbHMuc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2goKTtcblxuICBmdW5jdGlvbiBnbyhuKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IF93YXJuaW5nMlsnZGVmYXVsdCddKGdvSXNTdXBwb3J0ZWRXaXRob3V0UmVsb2FkLCAnSGFzaCBoaXN0b3J5IGdvKG4pIGNhdXNlcyBhIGZ1bGwgcGFnZSByZWxvYWQgaW4gdGhpcyBicm93c2VyJykgOiB1bmRlZmluZWQ7XG5cbiAgICBoaXN0b3J5LmdvKG4pO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlSHJlZihwYXRoKSB7XG4gICAgcmV0dXJuICcjJyArIGhpc3RvcnkuY3JlYXRlSHJlZihwYXRoKTtcbiAgfVxuXG4gIC8vIGRlcHJlY2F0ZWRcbiAgZnVuY3Rpb24gcmVnaXN0ZXJUcmFuc2l0aW9uSG9vayhob29rKSB7XG4gICAgaWYgKCsrbGlzdGVuZXJDb3VudCA9PT0gMSkgc3RvcEhhc2hDaGFuZ2VMaXN0ZW5lciA9IHN0YXJ0SGFzaENoYW5nZUxpc3RlbmVyKGhpc3RvcnkpO1xuXG4gICAgaGlzdG9yeS5yZWdpc3RlclRyYW5zaXRpb25Ib29rKGhvb2spO1xuICB9XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBmdW5jdGlvbiB1bnJlZ2lzdGVyVHJhbnNpdGlvbkhvb2soaG9vaykge1xuICAgIGhpc3RvcnkudW5yZWdpc3RlclRyYW5zaXRpb25Ib29rKGhvb2spO1xuXG4gICAgaWYgKC0tbGlzdGVuZXJDb3VudCA9PT0gMCkgc3RvcEhhc2hDaGFuZ2VMaXN0ZW5lcigpO1xuICB9XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBmdW5jdGlvbiBwdXNoU3RhdGUoc3RhdGUsIHBhdGgpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gX3dhcm5pbmcyWydkZWZhdWx0J10ocXVlcnlLZXkgfHwgc3RhdGUgPT0gbnVsbCwgJ1lvdSBjYW5ub3QgdXNlIHN0YXRlIHdpdGhvdXQgYSBxdWVyeUtleSBpdCB3aWxsIGJlIGRyb3BwZWQnKSA6IHVuZGVmaW5lZDtcblxuICAgIGhpc3RvcnkucHVzaFN0YXRlKHN0YXRlLCBwYXRoKTtcbiAgfVxuXG4gIC8vIGRlcHJlY2F0ZWRcbiAgZnVuY3Rpb24gcmVwbGFjZVN0YXRlKHN0YXRlLCBwYXRoKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IF93YXJuaW5nMlsnZGVmYXVsdCddKHF1ZXJ5S2V5IHx8IHN0YXRlID09IG51bGwsICdZb3UgY2Fubm90IHVzZSBzdGF0ZSB3aXRob3V0IGEgcXVlcnlLZXkgaXQgd2lsbCBiZSBkcm9wcGVkJykgOiB1bmRlZmluZWQ7XG5cbiAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShzdGF0ZSwgcGF0aCk7XG4gIH1cblxuICByZXR1cm4gX2V4dGVuZHMoe30sIGhpc3RvcnksIHtcbiAgICBsaXN0ZW5CZWZvcmU6IGxpc3RlbkJlZm9yZSxcbiAgICBsaXN0ZW46IGxpc3RlbixcbiAgICBwdXNoOiBwdXNoLFxuICAgIHJlcGxhY2U6IHJlcGxhY2UsXG4gICAgZ286IGdvLFxuICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYsXG5cbiAgICByZWdpc3RlclRyYW5zaXRpb25Ib29rOiByZWdpc3RlclRyYW5zaXRpb25Ib29rLCAvLyBkZXByZWNhdGVkIC0gd2FybmluZyBpcyBpbiBjcmVhdGVIaXN0b3J5XG4gICAgdW5yZWdpc3RlclRyYW5zaXRpb25Ib29rOiB1bnJlZ2lzdGVyVHJhbnNpdGlvbkhvb2ssIC8vIGRlcHJlY2F0ZWQgLSB3YXJuaW5nIGlzIGluIGNyZWF0ZUhpc3RvcnlcbiAgICBwdXNoU3RhdGU6IHB1c2hTdGF0ZSwgLy8gZGVwcmVjYXRlZCAtIHdhcm5pbmcgaXMgaW4gY3JlYXRlSGlzdG9yeVxuICAgIHJlcGxhY2VTdGF0ZTogcmVwbGFjZVN0YXRlIC8vIGRlcHJlY2F0ZWQgLSB3YXJuaW5nIGlzIGluIGNyZWF0ZUhpc3RvcnlcbiAgfSk7XG59XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGNyZWF0ZUhhc2hIaXN0b3J5O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJ3dhcm5pbmcnKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG52YXIgX2RlZXBFcXVhbCA9IHJlcXVpcmUoJ2RlZXAtZXF1YWwnKTtcblxudmFyIF9kZWVwRXF1YWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVlcEVxdWFsKTtcblxudmFyIF9QYXRoVXRpbHMgPSByZXF1aXJlKCcuL1BhdGhVdGlscycpO1xuXG52YXIgX0FzeW5jVXRpbHMgPSByZXF1aXJlKCcuL0FzeW5jVXRpbHMnKTtcblxudmFyIF9BY3Rpb25zID0gcmVxdWlyZSgnLi9BY3Rpb25zJyk7XG5cbnZhciBfY3JlYXRlTG9jYXRpb24yID0gcmVxdWlyZSgnLi9jcmVhdGVMb2NhdGlvbicpO1xuXG52YXIgX2NyZWF0ZUxvY2F0aW9uMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUxvY2F0aW9uMik7XG5cbnZhciBfcnVuVHJhbnNpdGlvbkhvb2sgPSByZXF1aXJlKCcuL3J1blRyYW5zaXRpb25Ib29rJyk7XG5cbnZhciBfcnVuVHJhbnNpdGlvbkhvb2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcnVuVHJhbnNpdGlvbkhvb2spO1xuXG52YXIgX2RlcHJlY2F0ZSA9IHJlcXVpcmUoJy4vZGVwcmVjYXRlJyk7XG5cbnZhciBfZGVwcmVjYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlcHJlY2F0ZSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVJhbmRvbUtleShsZW5ndGgpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCBsZW5ndGgpO1xufVxuXG5mdW5jdGlvbiBsb2NhdGlvbnNBcmVFcXVhbChhLCBiKSB7XG4gIHJldHVybiBhLnBhdGhuYW1lID09PSBiLnBhdGhuYW1lICYmIGEuc2VhcmNoID09PSBiLnNlYXJjaCAmJlxuICAvL2EuYWN0aW9uID09PSBiLmFjdGlvbiAmJiAvLyBEaWZmZXJlbnQgYWN0aW9uICE9PSBsb2NhdGlvbiBjaGFuZ2UuXG4gIGEua2V5ID09PSBiLmtleSAmJiBfZGVlcEVxdWFsMlsnZGVmYXVsdCddKGEuc3RhdGUsIGIuc3RhdGUpO1xufVxuXG52YXIgRGVmYXVsdEtleUxlbmd0aCA9IDY7XG5cbmZ1bmN0aW9uIGNyZWF0ZUhpc3RvcnkoKSB7XG4gIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG4gIHZhciBnZXRDdXJyZW50TG9jYXRpb24gPSBvcHRpb25zLmdldEN1cnJlbnRMb2NhdGlvbjtcbiAgdmFyIGZpbmlzaFRyYW5zaXRpb24gPSBvcHRpb25zLmZpbmlzaFRyYW5zaXRpb247XG4gIHZhciBzYXZlU3RhdGUgPSBvcHRpb25zLnNhdmVTdGF0ZTtcbiAgdmFyIGdvID0gb3B0aW9ucy5nbztcbiAgdmFyIGdldFVzZXJDb25maXJtYXRpb24gPSBvcHRpb25zLmdldFVzZXJDb25maXJtYXRpb247XG4gIHZhciBrZXlMZW5ndGggPSBvcHRpb25zLmtleUxlbmd0aDtcblxuICBpZiAodHlwZW9mIGtleUxlbmd0aCAhPT0gJ251bWJlcicpIGtleUxlbmd0aCA9IERlZmF1bHRLZXlMZW5ndGg7XG5cbiAgdmFyIHRyYW5zaXRpb25Ib29rcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIGxpc3RlbkJlZm9yZShob29rKSB7XG4gICAgdHJhbnNpdGlvbkhvb2tzLnB1c2goaG9vayk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdHJhbnNpdGlvbkhvb2tzID0gdHJhbnNpdGlvbkhvb2tzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbSAhPT0gaG9vaztcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cblxuICB2YXIgYWxsS2V5cyA9IFtdO1xuICB2YXIgY2hhbmdlTGlzdGVuZXJzID0gW107XG4gIHZhciBsb2NhdGlvbiA9IHVuZGVmaW5lZDtcblxuICBmdW5jdGlvbiBnZXRDdXJyZW50KCkge1xuICAgIGlmIChwZW5kaW5nTG9jYXRpb24gJiYgcGVuZGluZ0xvY2F0aW9uLmFjdGlvbiA9PT0gX0FjdGlvbnMuUE9QKSB7XG4gICAgICByZXR1cm4gYWxsS2V5cy5pbmRleE9mKHBlbmRpbmdMb2NhdGlvbi5rZXkpO1xuICAgIH0gZWxzZSBpZiAobG9jYXRpb24pIHtcbiAgICAgIHJldHVybiBhbGxLZXlzLmluZGV4T2YobG9jYXRpb24ua2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxvY2F0aW9uKG5ld0xvY2F0aW9uKSB7XG4gICAgdmFyIGN1cnJlbnQgPSBnZXRDdXJyZW50KCk7XG5cbiAgICBsb2NhdGlvbiA9IG5ld0xvY2F0aW9uO1xuXG4gICAgaWYgKGxvY2F0aW9uLmFjdGlvbiA9PT0gX0FjdGlvbnMuUFVTSCkge1xuICAgICAgYWxsS2V5cyA9IFtdLmNvbmNhdChhbGxLZXlzLnNsaWNlKDAsIGN1cnJlbnQgKyAxKSwgW2xvY2F0aW9uLmtleV0pO1xuICAgIH0gZWxzZSBpZiAobG9jYXRpb24uYWN0aW9uID09PSBfQWN0aW9ucy5SRVBMQUNFKSB7XG4gICAgICBhbGxLZXlzW2N1cnJlbnRdID0gbG9jYXRpb24ua2V5O1xuICAgIH1cblxuICAgIGNoYW5nZUxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgbGlzdGVuZXIobG9jYXRpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKSB7XG4gICAgY2hhbmdlTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuXG4gICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICBsaXN0ZW5lcihsb2NhdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBfbG9jYXRpb24gPSBnZXRDdXJyZW50TG9jYXRpb24oKTtcbiAgICAgIGFsbEtleXMgPSBbX2xvY2F0aW9uLmtleV07XG4gICAgICB1cGRhdGVMb2NhdGlvbihfbG9jYXRpb24pO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGFuZ2VMaXN0ZW5lcnMgPSBjaGFuZ2VMaXN0ZW5lcnMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtICE9PSBsaXN0ZW5lcjtcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBjb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBjYWxsYmFjaykge1xuICAgIF9Bc3luY1V0aWxzLmxvb3BBc3luYyh0cmFuc2l0aW9uSG9va3MubGVuZ3RoLCBmdW5jdGlvbiAoaW5kZXgsIG5leHQsIGRvbmUpIHtcbiAgICAgIF9ydW5UcmFuc2l0aW9uSG9vazJbJ2RlZmF1bHQnXSh0cmFuc2l0aW9uSG9va3NbaW5kZXhdLCBsb2NhdGlvbiwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICBkb25lKHJlc3VsdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgaWYgKGdldFVzZXJDb25maXJtYXRpb24gJiYgdHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGdldFVzZXJDb25maXJtYXRpb24obWVzc2FnZSwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICAgICAgY2FsbGJhY2sob2sgIT09IGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayhtZXNzYWdlICE9PSBmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICB2YXIgcGVuZGluZ0xvY2F0aW9uID0gdW5kZWZpbmVkO1xuXG4gIGZ1bmN0aW9uIHRyYW5zaXRpb25UbyhuZXh0TG9jYXRpb24pIHtcbiAgICBpZiAobG9jYXRpb24gJiYgbG9jYXRpb25zQXJlRXF1YWwobG9jYXRpb24sIG5leHRMb2NhdGlvbikpIHJldHVybjsgLy8gTm90aGluZyB0byBkby5cblxuICAgIHBlbmRpbmdMb2NhdGlvbiA9IG5leHRMb2NhdGlvbjtcblxuICAgIGNvbmZpcm1UcmFuc2l0aW9uVG8obmV4dExvY2F0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmIChwZW5kaW5nTG9jYXRpb24gIT09IG5leHRMb2NhdGlvbikgcmV0dXJuOyAvLyBUcmFuc2l0aW9uIHdhcyBpbnRlcnJ1cHRlZC5cblxuICAgICAgaWYgKG9rKSB7XG4gICAgICAgIC8vIHRyZWF0IFBVU0ggdG8gY3VycmVudCBwYXRoIGxpa2UgUkVQTEFDRSB0byBiZSBjb25zaXN0ZW50IHdpdGggYnJvd3NlcnNcbiAgICAgICAgaWYgKG5leHRMb2NhdGlvbi5hY3Rpb24gPT09IF9BY3Rpb25zLlBVU0gpIHtcbiAgICAgICAgICB2YXIgcHJldlBhdGggPSBjcmVhdGVQYXRoKGxvY2F0aW9uKTtcbiAgICAgICAgICB2YXIgbmV4dFBhdGggPSBjcmVhdGVQYXRoKG5leHRMb2NhdGlvbik7XG5cbiAgICAgICAgICBpZiAobmV4dFBhdGggPT09IHByZXZQYXRoICYmIF9kZWVwRXF1YWwyWydkZWZhdWx0J10obG9jYXRpb24uc3RhdGUsIG5leHRMb2NhdGlvbi5zdGF0ZSkpIG5leHRMb2NhdGlvbi5hY3Rpb24gPSBfQWN0aW9ucy5SRVBMQUNFO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbmlzaFRyYW5zaXRpb24obmV4dExvY2F0aW9uKSAhPT0gZmFsc2UpIHVwZGF0ZUxvY2F0aW9uKG5leHRMb2NhdGlvbik7XG4gICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uICYmIG5leHRMb2NhdGlvbi5hY3Rpb24gPT09IF9BY3Rpb25zLlBPUCkge1xuICAgICAgICB2YXIgcHJldkluZGV4ID0gYWxsS2V5cy5pbmRleE9mKGxvY2F0aW9uLmtleSk7XG4gICAgICAgIHZhciBuZXh0SW5kZXggPSBhbGxLZXlzLmluZGV4T2YobmV4dExvY2F0aW9uLmtleSk7XG5cbiAgICAgICAgaWYgKHByZXZJbmRleCAhPT0gLTEgJiYgbmV4dEluZGV4ICE9PSAtMSkgZ28ocHJldkluZGV4IC0gbmV4dEluZGV4KTsgLy8gUmVzdG9yZSB0aGUgVVJMLlxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHVzaChsb2NhdGlvbikge1xuICAgIHRyYW5zaXRpb25UbyhjcmVhdGVMb2NhdGlvbihsb2NhdGlvbiwgX0FjdGlvbnMuUFVTSCwgY3JlYXRlS2V5KCkpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlcGxhY2UobG9jYXRpb24pIHtcbiAgICB0cmFuc2l0aW9uVG8oY3JlYXRlTG9jYXRpb24obG9jYXRpb24sIF9BY3Rpb25zLlJFUExBQ0UsIGNyZWF0ZUtleSgpKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnb0JhY2soKSB7XG4gICAgZ28oLTEpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ29Gb3J3YXJkKCkge1xuICAgIGdvKDEpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlS2V5KCkge1xuICAgIHJldHVybiBjcmVhdGVSYW5kb21LZXkoa2V5TGVuZ3RoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVBhdGgobG9jYXRpb24pIHtcbiAgICBpZiAobG9jYXRpb24gPT0gbnVsbCB8fCB0eXBlb2YgbG9jYXRpb24gPT09ICdzdHJpbmcnKSByZXR1cm4gbG9jYXRpb247XG5cbiAgICB2YXIgcGF0aG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZTtcbiAgICB2YXIgc2VhcmNoID0gbG9jYXRpb24uc2VhcmNoO1xuICAgIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaDtcblxuICAgIHZhciByZXN1bHQgPSBwYXRobmFtZTtcblxuICAgIGlmIChzZWFyY2gpIHJlc3VsdCArPSBzZWFyY2g7XG5cbiAgICBpZiAoaGFzaCkgcmVzdWx0ICs9IGhhc2g7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlSHJlZihsb2NhdGlvbikge1xuICAgIHJldHVybiBjcmVhdGVQYXRoKGxvY2F0aW9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUxvY2F0aW9uKGxvY2F0aW9uLCBhY3Rpb24pIHtcbiAgICB2YXIga2V5ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gY3JlYXRlS2V5KCkgOiBhcmd1bWVudHNbMl07XG5cbiAgICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBfd2FybmluZzJbJ2RlZmF1bHQnXShmYWxzZSwgJ1RoZSBzdGF0ZSAoMm5kKSBhcmd1bWVudCB0byBoaXN0b3J5LmNyZWF0ZUxvY2F0aW9uIGlzIGRlcHJlY2F0ZWQ7IHVzZSBhICcgKyAnbG9jYXRpb24gZGVzY3JpcHRvciBpbnN0ZWFkJykgOiB1bmRlZmluZWQ7XG5cbiAgICAgIGlmICh0eXBlb2YgbG9jYXRpb24gPT09ICdzdHJpbmcnKSBsb2NhdGlvbiA9IF9QYXRoVXRpbHMucGFyc2VQYXRoKGxvY2F0aW9uKTtcblxuICAgICAgbG9jYXRpb24gPSBfZXh0ZW5kcyh7fSwgbG9jYXRpb24sIHsgc3RhdGU6IGFjdGlvbiB9KTtcblxuICAgICAgYWN0aW9uID0ga2V5O1xuICAgICAga2V5ID0gYXJndW1lbnRzWzNdIHx8IGNyZWF0ZUtleSgpO1xuICAgIH1cblxuICAgIHJldHVybiBfY3JlYXRlTG9jYXRpb24zWydkZWZhdWx0J10obG9jYXRpb24sIGFjdGlvbiwga2V5KTtcbiAgfVxuXG4gIC8vIGRlcHJlY2F0ZWRcbiAgZnVuY3Rpb24gc2V0U3RhdGUoc3RhdGUpIHtcbiAgICBpZiAobG9jYXRpb24pIHtcbiAgICAgIHVwZGF0ZUxvY2F0aW9uU3RhdGUobG9jYXRpb24sIHN0YXRlKTtcbiAgICAgIHVwZGF0ZUxvY2F0aW9uKGxvY2F0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdXBkYXRlTG9jYXRpb25TdGF0ZShnZXRDdXJyZW50TG9jYXRpb24oKSwgc3RhdGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxvY2F0aW9uU3RhdGUobG9jYXRpb24sIHN0YXRlKSB7XG4gICAgbG9jYXRpb24uc3RhdGUgPSBfZXh0ZW5kcyh7fSwgbG9jYXRpb24uc3RhdGUsIHN0YXRlKTtcbiAgICBzYXZlU3RhdGUobG9jYXRpb24ua2V5LCBsb2NhdGlvbi5zdGF0ZSk7XG4gIH1cblxuICAvLyBkZXByZWNhdGVkXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyVHJhbnNpdGlvbkhvb2soaG9vaykge1xuICAgIGlmICh0cmFuc2l0aW9uSG9va3MuaW5kZXhPZihob29rKSA9PT0gLTEpIHRyYW5zaXRpb25Ib29rcy5wdXNoKGhvb2spO1xuICB9XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBmdW5jdGlvbiB1bnJlZ2lzdGVyVHJhbnNpdGlvbkhvb2soaG9vaykge1xuICAgIHRyYW5zaXRpb25Ib29rcyA9IHRyYW5zaXRpb25Ib29rcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtICE9PSBob29rO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBmdW5jdGlvbiBwdXNoU3RhdGUoc3RhdGUsIHBhdGgpIHtcbiAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSBwYXRoID0gX1BhdGhVdGlscy5wYXJzZVBhdGgocGF0aCk7XG5cbiAgICBwdXNoKF9leHRlbmRzKHsgc3RhdGU6IHN0YXRlIH0sIHBhdGgpKTtcbiAgfVxuXG4gIC8vIGRlcHJlY2F0ZWRcbiAgZnVuY3Rpb24gcmVwbGFjZVN0YXRlKHN0YXRlLCBwYXRoKSB7XG4gICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykgcGF0aCA9IF9QYXRoVXRpbHMucGFyc2VQYXRoKHBhdGgpO1xuXG4gICAgcmVwbGFjZShfZXh0ZW5kcyh7IHN0YXRlOiBzdGF0ZSB9LCBwYXRoKSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGxpc3RlbkJlZm9yZTogbGlzdGVuQmVmb3JlLFxuICAgIGxpc3RlbjogbGlzdGVuLFxuICAgIHRyYW5zaXRpb25UbzogdHJhbnNpdGlvblRvLFxuICAgIHB1c2g6IHB1c2gsXG4gICAgcmVwbGFjZTogcmVwbGFjZSxcbiAgICBnbzogZ28sXG4gICAgZ29CYWNrOiBnb0JhY2ssXG4gICAgZ29Gb3J3YXJkOiBnb0ZvcndhcmQsXG4gICAgY3JlYXRlS2V5OiBjcmVhdGVLZXksXG4gICAgY3JlYXRlUGF0aDogY3JlYXRlUGF0aCxcbiAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLFxuICAgIGNyZWF0ZUxvY2F0aW9uOiBjcmVhdGVMb2NhdGlvbixcblxuICAgIHNldFN0YXRlOiBfZGVwcmVjYXRlMlsnZGVmYXVsdCddKHNldFN0YXRlLCAnc2V0U3RhdGUgaXMgZGVwcmVjYXRlZDsgdXNlIGxvY2F0aW9uLmtleSB0byBzYXZlIHN0YXRlIGluc3RlYWQnKSxcbiAgICByZWdpc3RlclRyYW5zaXRpb25Ib29rOiBfZGVwcmVjYXRlMlsnZGVmYXVsdCddKHJlZ2lzdGVyVHJhbnNpdGlvbkhvb2ssICdyZWdpc3RlclRyYW5zaXRpb25Ib29rIGlzIGRlcHJlY2F0ZWQ7IHVzZSBsaXN0ZW5CZWZvcmUgaW5zdGVhZCcpLFxuICAgIHVucmVnaXN0ZXJUcmFuc2l0aW9uSG9vazogX2RlcHJlY2F0ZTJbJ2RlZmF1bHQnXSh1bnJlZ2lzdGVyVHJhbnNpdGlvbkhvb2ssICd1bnJlZ2lzdGVyVHJhbnNpdGlvbkhvb2sgaXMgZGVwcmVjYXRlZDsgdXNlIHRoZSBjYWxsYmFjayByZXR1cm5lZCBmcm9tIGxpc3RlbkJlZm9yZSBpbnN0ZWFkJyksXG4gICAgcHVzaFN0YXRlOiBfZGVwcmVjYXRlMlsnZGVmYXVsdCddKHB1c2hTdGF0ZSwgJ3B1c2hTdGF0ZSBpcyBkZXByZWNhdGVkOyB1c2UgcHVzaCBpbnN0ZWFkJyksXG4gICAgcmVwbGFjZVN0YXRlOiBfZGVwcmVjYXRlMlsnZGVmYXVsdCddKHJlcGxhY2VTdGF0ZSwgJ3JlcGxhY2VTdGF0ZSBpcyBkZXByZWNhdGVkOyB1c2UgcmVwbGFjZSBpbnN0ZWFkJylcbiAgfTtcbn1cblxuZXhwb3J0c1snZGVmYXVsdCddID0gY3JlYXRlSGlzdG9yeTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgX3dhcm5pbmcgPSByZXF1aXJlKCd3YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxudmFyIF9BY3Rpb25zID0gcmVxdWlyZSgnLi9BY3Rpb25zJyk7XG5cbnZhciBfUGF0aFV0aWxzID0gcmVxdWlyZSgnLi9QYXRoVXRpbHMnKTtcblxuZnVuY3Rpb24gY3JlYXRlTG9jYXRpb24oKSB7XG4gIHZhciBsb2NhdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/ICcvJyA6IGFyZ3VtZW50c1swXTtcbiAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IF9BY3Rpb25zLlBPUCA6IGFyZ3VtZW50c1sxXTtcbiAgdmFyIGtleSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbMl07XG5cbiAgdmFyIF9mb3VydGhBcmcgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzNdO1xuXG4gIGlmICh0eXBlb2YgbG9jYXRpb24gPT09ICdzdHJpbmcnKSBsb2NhdGlvbiA9IF9QYXRoVXRpbHMucGFyc2VQYXRoKGxvY2F0aW9uKTtcblxuICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ29iamVjdCcpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gX3dhcm5pbmcyWydkZWZhdWx0J10oZmFsc2UsICdUaGUgc3RhdGUgKDJuZCkgYXJndW1lbnQgdG8gY3JlYXRlTG9jYXRpb24gaXMgZGVwcmVjYXRlZDsgdXNlIGEgJyArICdsb2NhdGlvbiBkZXNjcmlwdG9yIGluc3RlYWQnKSA6IHVuZGVmaW5lZDtcblxuICAgIGxvY2F0aW9uID0gX2V4dGVuZHMoe30sIGxvY2F0aW9uLCB7IHN0YXRlOiBhY3Rpb24gfSk7XG5cbiAgICBhY3Rpb24gPSBrZXkgfHwgX0FjdGlvbnMuUE9QO1xuICAgIGtleSA9IF9mb3VydGhBcmc7XG4gIH1cblxuICB2YXIgcGF0aG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZSB8fCAnLyc7XG4gIHZhciBzZWFyY2ggPSBsb2NhdGlvbi5zZWFyY2ggfHwgJyc7XG4gIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaCB8fCAnJztcbiAgdmFyIHN0YXRlID0gbG9jYXRpb24uc3RhdGUgfHwgbnVsbDtcblxuICByZXR1cm4ge1xuICAgIHBhdGhuYW1lOiBwYXRobmFtZSxcbiAgICBzZWFyY2g6IHNlYXJjaCxcbiAgICBoYXNoOiBoYXNoLFxuICAgIHN0YXRlOiBzdGF0ZSxcbiAgICBhY3Rpb246IGFjdGlvbixcbiAgICBrZXk6IGtleVxuICB9O1xufVxuXG5leHBvcnRzWydkZWZhdWx0J10gPSBjcmVhdGVMb2NhdGlvbjtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgX3dhcm5pbmcgPSByZXF1aXJlKCd3YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxudmFyIF9pbnZhcmlhbnQgPSByZXF1aXJlKCdpbnZhcmlhbnQnKTtcblxudmFyIF9pbnZhcmlhbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW52YXJpYW50KTtcblxudmFyIF9QYXRoVXRpbHMgPSByZXF1aXJlKCcuL1BhdGhVdGlscycpO1xuXG52YXIgX0FjdGlvbnMgPSByZXF1aXJlKCcuL0FjdGlvbnMnKTtcblxudmFyIF9jcmVhdGVIaXN0b3J5ID0gcmVxdWlyZSgnLi9jcmVhdGVIaXN0b3J5Jyk7XG5cbnZhciBfY3JlYXRlSGlzdG9yeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVIaXN0b3J5KTtcblxuZnVuY3Rpb24gY3JlYXRlU3RhdGVTdG9yYWdlKGVudHJpZXMpIHtcbiAgcmV0dXJuIGVudHJpZXMuZmlsdGVyKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgIHJldHVybiBlbnRyeS5zdGF0ZTtcbiAgfSkucmVkdWNlKGZ1bmN0aW9uIChtZW1vLCBlbnRyeSkge1xuICAgIG1lbW9bZW50cnkua2V5XSA9IGVudHJ5LnN0YXRlO1xuICAgIHJldHVybiBtZW1vO1xuICB9LCB7fSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU1lbW9yeUhpc3RvcnkoKSB7XG4gIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucykpIHtcbiAgICBvcHRpb25zID0geyBlbnRyaWVzOiBvcHRpb25zIH07XG4gIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7XG4gICAgb3B0aW9ucyA9IHsgZW50cmllczogW29wdGlvbnNdIH07XG4gIH1cblxuICB2YXIgaGlzdG9yeSA9IF9jcmVhdGVIaXN0b3J5MlsnZGVmYXVsdCddKF9leHRlbmRzKHt9LCBvcHRpb25zLCB7XG4gICAgZ2V0Q3VycmVudExvY2F0aW9uOiBnZXRDdXJyZW50TG9jYXRpb24sXG4gICAgZmluaXNoVHJhbnNpdGlvbjogZmluaXNoVHJhbnNpdGlvbixcbiAgICBzYXZlU3RhdGU6IHNhdmVTdGF0ZSxcbiAgICBnbzogZ29cbiAgfSkpO1xuXG4gIHZhciBfb3B0aW9ucyA9IG9wdGlvbnM7XG4gIHZhciBlbnRyaWVzID0gX29wdGlvbnMuZW50cmllcztcbiAgdmFyIGN1cnJlbnQgPSBfb3B0aW9ucy5jdXJyZW50O1xuXG4gIGlmICh0eXBlb2YgZW50cmllcyA9PT0gJ3N0cmluZycpIHtcbiAgICBlbnRyaWVzID0gW2VudHJpZXNdO1xuICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KGVudHJpZXMpKSB7XG4gICAgZW50cmllcyA9IFsnLyddO1xuICB9XG5cbiAgZW50cmllcyA9IGVudHJpZXMubWFwKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgIHZhciBrZXkgPSBoaXN0b3J5LmNyZWF0ZUtleSgpO1xuXG4gICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gJ3N0cmluZycpIHJldHVybiB7IHBhdGhuYW1lOiBlbnRyeSwga2V5OiBrZXkgfTtcblxuICAgIGlmICh0eXBlb2YgZW50cnkgPT09ICdvYmplY3QnICYmIGVudHJ5KSByZXR1cm4gX2V4dGVuZHMoe30sIGVudHJ5LCB7IGtleToga2V5IH0pO1xuXG4gICAgIWZhbHNlID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IF9pbnZhcmlhbnQyWydkZWZhdWx0J10oZmFsc2UsICdVbmFibGUgdG8gY3JlYXRlIGhpc3RvcnkgZW50cnkgZnJvbSAlcycsIGVudHJ5KSA6IF9pbnZhcmlhbnQyWydkZWZhdWx0J10oZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9KTtcblxuICBpZiAoY3VycmVudCA9PSBudWxsKSB7XG4gICAgY3VycmVudCA9IGVudHJpZXMubGVuZ3RoIC0gMTtcbiAgfSBlbHNlIHtcbiAgICAhKGN1cnJlbnQgPj0gMCAmJiBjdXJyZW50IDwgZW50cmllcy5sZW5ndGgpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IF9pbnZhcmlhbnQyWydkZWZhdWx0J10oZmFsc2UsICdDdXJyZW50IGluZGV4IG11c3QgYmUgPj0gMCBhbmQgPCAlcywgd2FzICVzJywgZW50cmllcy5sZW5ndGgsIGN1cnJlbnQpIDogX2ludmFyaWFudDJbJ2RlZmF1bHQnXShmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH1cblxuICB2YXIgc3RvcmFnZSA9IGNyZWF0ZVN0YXRlU3RvcmFnZShlbnRyaWVzKTtcblxuICBmdW5jdGlvbiBzYXZlU3RhdGUoa2V5LCBzdGF0ZSkge1xuICAgIHN0b3JhZ2Vba2V5XSA9IHN0YXRlO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVhZFN0YXRlKGtleSkge1xuICAgIHJldHVybiBzdG9yYWdlW2tleV07XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDdXJyZW50TG9jYXRpb24oKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tjdXJyZW50XTtcbiAgICB2YXIgYmFzZW5hbWUgPSBlbnRyeS5iYXNlbmFtZTtcbiAgICB2YXIgcGF0aG5hbWUgPSBlbnRyeS5wYXRobmFtZTtcbiAgICB2YXIgc2VhcmNoID0gZW50cnkuc2VhcmNoO1xuXG4gICAgdmFyIHBhdGggPSAoYmFzZW5hbWUgfHwgJycpICsgcGF0aG5hbWUgKyAoc2VhcmNoIHx8ICcnKTtcblxuICAgIHZhciBrZXkgPSB1bmRlZmluZWQsXG4gICAgICAgIHN0YXRlID0gdW5kZWZpbmVkO1xuICAgIGlmIChlbnRyeS5rZXkpIHtcbiAgICAgIGtleSA9IGVudHJ5LmtleTtcbiAgICAgIHN0YXRlID0gcmVhZFN0YXRlKGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSA9IGhpc3RvcnkuY3JlYXRlS2V5KCk7XG4gICAgICBzdGF0ZSA9IG51bGw7XG4gICAgICBlbnRyeS5rZXkgPSBrZXk7XG4gICAgfVxuXG4gICAgdmFyIGxvY2F0aW9uID0gX1BhdGhVdGlscy5wYXJzZVBhdGgocGF0aCk7XG5cbiAgICByZXR1cm4gaGlzdG9yeS5jcmVhdGVMb2NhdGlvbihfZXh0ZW5kcyh7fSwgbG9jYXRpb24sIHsgc3RhdGU6IHN0YXRlIH0pLCB1bmRlZmluZWQsIGtleSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5HbyhuKSB7XG4gICAgdmFyIGluZGV4ID0gY3VycmVudCArIG47XG4gICAgcmV0dXJuIGluZGV4ID49IDAgJiYgaW5kZXggPCBlbnRyaWVzLmxlbmd0aDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdvKG4pIHtcbiAgICBpZiAobikge1xuICAgICAgaWYgKCFjYW5HbyhuKSkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gX3dhcm5pbmcyWydkZWZhdWx0J10oZmFsc2UsICdDYW5ub3QgZ28oJXMpIHRoZXJlIGlzIG5vdCBlbm91Z2ggaGlzdG9yeScsIG4pIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnQgKz0gbjtcblxuICAgICAgdmFyIGN1cnJlbnRMb2NhdGlvbiA9IGdldEN1cnJlbnRMb2NhdGlvbigpO1xuXG4gICAgICAvLyBjaGFuZ2UgYWN0aW9uIHRvIFBPUFxuICAgICAgaGlzdG9yeS50cmFuc2l0aW9uVG8oX2V4dGVuZHMoe30sIGN1cnJlbnRMb2NhdGlvbiwgeyBhY3Rpb246IF9BY3Rpb25zLlBPUCB9KSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZmluaXNoVHJhbnNpdGlvbihsb2NhdGlvbikge1xuICAgIHN3aXRjaCAobG9jYXRpb24uYWN0aW9uKSB7XG4gICAgICBjYXNlIF9BY3Rpb25zLlBVU0g6XG4gICAgICAgIGN1cnJlbnQgKz0gMTtcblxuICAgICAgICAvLyBpZiB3ZSBhcmUgbm90IG9uIHRoZSB0b3Agb2Ygc3RhY2tcbiAgICAgICAgLy8gcmVtb3ZlIHJlc3QgYW5kIHB1c2ggbmV3XG4gICAgICAgIGlmIChjdXJyZW50IDwgZW50cmllcy5sZW5ndGgpIGVudHJpZXMuc3BsaWNlKGN1cnJlbnQpO1xuXG4gICAgICAgIGVudHJpZXMucHVzaChsb2NhdGlvbik7XG4gICAgICAgIHNhdmVTdGF0ZShsb2NhdGlvbi5rZXksIGxvY2F0aW9uLnN0YXRlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIF9BY3Rpb25zLlJFUExBQ0U6XG4gICAgICAgIGVudHJpZXNbY3VycmVudF0gPSBsb2NhdGlvbjtcbiAgICAgICAgc2F2ZVN0YXRlKGxvY2F0aW9uLmtleSwgbG9jYXRpb24uc3RhdGUpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaGlzdG9yeTtcbn1cblxuZXhwb3J0c1snZGVmYXVsdCddID0gY3JlYXRlTWVtb3J5SGlzdG9yeTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgX3dhcm5pbmcgPSByZXF1aXJlKCd3YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxuZnVuY3Rpb24gZGVwcmVjYXRlKGZuLCBtZXNzYWdlKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IF93YXJuaW5nMlsnZGVmYXVsdCddKGZhbHNlLCAnW2hpc3RvcnldICcgKyBtZXNzYWdlKSA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZXhwb3J0c1snZGVmYXVsdCddID0gZGVwcmVjYXRlO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfZGVwcmVjYXRlID0gcmVxdWlyZSgnLi9kZXByZWNhdGUnKTtcblxudmFyIF9kZXByZWNhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVwcmVjYXRlKTtcblxudmFyIF91c2VCZWZvcmVVbmxvYWQgPSByZXF1aXJlKCcuL3VzZUJlZm9yZVVubG9hZCcpO1xuXG52YXIgX3VzZUJlZm9yZVVubG9hZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2VCZWZvcmVVbmxvYWQpO1xuXG5leHBvcnRzWydkZWZhdWx0J10gPSBfZGVwcmVjYXRlMlsnZGVmYXVsdCddKF91c2VCZWZvcmVVbmxvYWQyWydkZWZhdWx0J10sICdlbmFibGVCZWZvcmVVbmxvYWQgaXMgZGVwcmVjYXRlZCwgdXNlIHVzZUJlZm9yZVVubG9hZCBpbnN0ZWFkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIF9kZXByZWNhdGUgPSByZXF1aXJlKCcuL2RlcHJlY2F0ZScpO1xuXG52YXIgX2RlcHJlY2F0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZXByZWNhdGUpO1xuXG52YXIgX3VzZVF1ZXJpZXMgPSByZXF1aXJlKCcuL3VzZVF1ZXJpZXMnKTtcblxudmFyIF91c2VRdWVyaWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VzZVF1ZXJpZXMpO1xuXG5leHBvcnRzWydkZWZhdWx0J10gPSBfZGVwcmVjYXRlMlsnZGVmYXVsdCddKF91c2VRdWVyaWVzMlsnZGVmYXVsdCddLCAnZW5hYmxlUXVlcmllcyBpcyBkZXByZWNhdGVkLCB1c2UgdXNlUXVlcmllcyBpbnN0ZWFkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIF9kZXByZWNhdGUgPSByZXF1aXJlKCcuL2RlcHJlY2F0ZScpO1xuXG52YXIgX2RlcHJlY2F0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZXByZWNhdGUpO1xuXG52YXIgX2NyZWF0ZUxvY2F0aW9uMiA9IHJlcXVpcmUoJy4vY3JlYXRlTG9jYXRpb24nKTtcblxudmFyIF9jcmVhdGVMb2NhdGlvbjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVMb2NhdGlvbjIpO1xuXG52YXIgX2NyZWF0ZUJyb3dzZXJIaXN0b3J5ID0gcmVxdWlyZSgnLi9jcmVhdGVCcm93c2VySGlzdG9yeScpO1xuXG52YXIgX2NyZWF0ZUJyb3dzZXJIaXN0b3J5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUJyb3dzZXJIaXN0b3J5KTtcblxuZXhwb3J0cy5jcmVhdGVIaXN0b3J5ID0gX2NyZWF0ZUJyb3dzZXJIaXN0b3J5MlsnZGVmYXVsdCddO1xuXG52YXIgX2NyZWF0ZUhhc2hIaXN0b3J5MiA9IHJlcXVpcmUoJy4vY3JlYXRlSGFzaEhpc3RvcnknKTtcblxudmFyIF9jcmVhdGVIYXNoSGlzdG9yeTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVIYXNoSGlzdG9yeTIpO1xuXG5leHBvcnRzLmNyZWF0ZUhhc2hIaXN0b3J5ID0gX2NyZWF0ZUhhc2hIaXN0b3J5M1snZGVmYXVsdCddO1xuXG52YXIgX2NyZWF0ZU1lbW9yeUhpc3RvcnkyID0gcmVxdWlyZSgnLi9jcmVhdGVNZW1vcnlIaXN0b3J5Jyk7XG5cbnZhciBfY3JlYXRlTWVtb3J5SGlzdG9yeTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVNZW1vcnlIaXN0b3J5Mik7XG5cbmV4cG9ydHMuY3JlYXRlTWVtb3J5SGlzdG9yeSA9IF9jcmVhdGVNZW1vcnlIaXN0b3J5M1snZGVmYXVsdCddO1xuXG52YXIgX3VzZUJhc2VuYW1lMiA9IHJlcXVpcmUoJy4vdXNlQmFzZW5hbWUnKTtcblxudmFyIF91c2VCYXNlbmFtZTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2VCYXNlbmFtZTIpO1xuXG5leHBvcnRzLnVzZUJhc2VuYW1lID0gX3VzZUJhc2VuYW1lM1snZGVmYXVsdCddO1xuXG52YXIgX3VzZUJlZm9yZVVubG9hZDIgPSByZXF1aXJlKCcuL3VzZUJlZm9yZVVubG9hZCcpO1xuXG52YXIgX3VzZUJlZm9yZVVubG9hZDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2VCZWZvcmVVbmxvYWQyKTtcblxuZXhwb3J0cy51c2VCZWZvcmVVbmxvYWQgPSBfdXNlQmVmb3JlVW5sb2FkM1snZGVmYXVsdCddO1xuXG52YXIgX3VzZVF1ZXJpZXMyID0gcmVxdWlyZSgnLi91c2VRdWVyaWVzJyk7XG5cbnZhciBfdXNlUXVlcmllczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2VRdWVyaWVzMik7XG5cbmV4cG9ydHMudXNlUXVlcmllcyA9IF91c2VRdWVyaWVzM1snZGVmYXVsdCddO1xuXG52YXIgX0FjdGlvbnMyID0gcmVxdWlyZSgnLi9BY3Rpb25zJyk7XG5cbnZhciBfQWN0aW9uczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BY3Rpb25zMik7XG5cbmV4cG9ydHMuQWN0aW9ucyA9IF9BY3Rpb25zM1snZGVmYXVsdCddO1xuXG4vLyBkZXByZWNhdGVkXG5cbnZhciBfZW5hYmxlQmVmb3JlVW5sb2FkMiA9IHJlcXVpcmUoJy4vZW5hYmxlQmVmb3JlVW5sb2FkJyk7XG5cbnZhciBfZW5hYmxlQmVmb3JlVW5sb2FkMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VuYWJsZUJlZm9yZVVubG9hZDIpO1xuXG5leHBvcnRzLmVuYWJsZUJlZm9yZVVubG9hZCA9IF9lbmFibGVCZWZvcmVVbmxvYWQzWydkZWZhdWx0J107XG5cbnZhciBfZW5hYmxlUXVlcmllczIgPSByZXF1aXJlKCcuL2VuYWJsZVF1ZXJpZXMnKTtcblxudmFyIF9lbmFibGVRdWVyaWVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VuYWJsZVF1ZXJpZXMyKTtcblxuZXhwb3J0cy5lbmFibGVRdWVyaWVzID0gX2VuYWJsZVF1ZXJpZXMzWydkZWZhdWx0J107XG52YXIgY3JlYXRlTG9jYXRpb24gPSBfZGVwcmVjYXRlMlsnZGVmYXVsdCddKF9jcmVhdGVMb2NhdGlvbjNbJ2RlZmF1bHQnXSwgJ1VzaW5nIGNyZWF0ZUxvY2F0aW9uIHdpdGhvdXQgYSBoaXN0b3J5IGluc3RhbmNlIGlzIGRlcHJlY2F0ZWQ7IHBsZWFzZSB1c2UgaGlzdG9yeS5jcmVhdGVMb2NhdGlvbiBpbnN0ZWFkJyk7XG5leHBvcnRzLmNyZWF0ZUxvY2F0aW9uID0gY3JlYXRlTG9jYXRpb247IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJ3dhcm5pbmcnKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG5mdW5jdGlvbiBydW5UcmFuc2l0aW9uSG9vayhob29rLCBsb2NhdGlvbiwgY2FsbGJhY2spIHtcbiAgdmFyIHJlc3VsdCA9IGhvb2sobG9jYXRpb24sIGNhbGxiYWNrKTtcblxuICBpZiAoaG9vay5sZW5ndGggPCAyKSB7XG4gICAgLy8gQXNzdW1lIHRoZSBob29rIHJ1bnMgc3luY2hyb25vdXNseSBhbmQgYXV0b21hdGljYWxseVxuICAgIC8vIGNhbGwgdGhlIGNhbGxiYWNrIHdpdGggdGhlIHJldHVybiB2YWx1ZS5cbiAgICBjYWxsYmFjayhyZXN1bHQpO1xuICB9IGVsc2Uge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBfd2FybmluZzJbJ2RlZmF1bHQnXShyZXN1bHQgPT09IHVuZGVmaW5lZCwgJ1lvdSBzaG91bGQgbm90IFwicmV0dXJuXCIgaW4gYSB0cmFuc2l0aW9uIGhvb2sgd2l0aCBhIGNhbGxiYWNrIGFyZ3VtZW50OyBjYWxsIHRoZSBjYWxsYmFjayBpbnN0ZWFkJykgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuZXhwb3J0c1snZGVmYXVsdCddID0gcnVuVHJhbnNpdGlvbkhvb2s7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIF9FeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIF9QYXRoVXRpbHMgPSByZXF1aXJlKCcuL1BhdGhVdGlscycpO1xuXG52YXIgX3J1blRyYW5zaXRpb25Ib29rID0gcmVxdWlyZSgnLi9ydW5UcmFuc2l0aW9uSG9vaycpO1xuXG52YXIgX3J1blRyYW5zaXRpb25Ib29rMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3J1blRyYW5zaXRpb25Ib29rKTtcblxudmFyIF9kZXByZWNhdGUgPSByZXF1aXJlKCcuL2RlcHJlY2F0ZScpO1xuXG52YXIgX2RlcHJlY2F0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZXByZWNhdGUpO1xuXG5mdW5jdGlvbiB1c2VCYXNlbmFtZShjcmVhdGVIaXN0b3J5KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblxuICAgIHZhciBoaXN0b3J5ID0gY3JlYXRlSGlzdG9yeShvcHRpb25zKTtcblxuICAgIHZhciBiYXNlbmFtZSA9IG9wdGlvbnMuYmFzZW5hbWU7XG5cbiAgICAvLyBBdXRvbWF0aWNhbGx5IHVzZSB0aGUgdmFsdWUgb2YgPGJhc2UgaHJlZj4gaW4gSFRNTFxuICAgIC8vIGRvY3VtZW50cyBhcyBiYXNlbmFtZSBpZiBpdCdzIG5vdCBleHBsaWNpdGx5IGdpdmVuLlxuICAgIGlmIChiYXNlbmFtZSA9PSBudWxsICYmIF9FeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcbiAgICAgIHZhciBiYXNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2Jhc2UnKVswXTtcblxuICAgICAgaWYgKGJhc2UpIGJhc2VuYW1lID0gX1BhdGhVdGlscy5leHRyYWN0UGF0aChiYXNlLmhyZWYpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZEJhc2VuYW1lKGxvY2F0aW9uKSB7XG4gICAgICBpZiAoYmFzZW5hbWUgJiYgbG9jYXRpb24uYmFzZW5hbWUgPT0gbnVsbCkge1xuICAgICAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZihiYXNlbmFtZSkgPT09IDApIHtcbiAgICAgICAgICBsb2NhdGlvbi5wYXRobmFtZSA9IGxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cmluZyhiYXNlbmFtZS5sZW5ndGgpO1xuICAgICAgICAgIGxvY2F0aW9uLmJhc2VuYW1lID0gYmFzZW5hbWU7XG5cbiAgICAgICAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUgPT09ICcnKSBsb2NhdGlvbi5wYXRobmFtZSA9ICcvJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsb2NhdGlvbi5iYXNlbmFtZSA9ICcnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsb2NhdGlvbjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcmVwZW5kQmFzZW5hbWUobG9jYXRpb24pIHtcbiAgICAgIGlmICghYmFzZW5hbWUpIHJldHVybiBsb2NhdGlvbjtcblxuICAgICAgaWYgKHR5cGVvZiBsb2NhdGlvbiA9PT0gJ3N0cmluZycpIGxvY2F0aW9uID0gX1BhdGhVdGlscy5wYXJzZVBhdGgobG9jYXRpb24pO1xuXG4gICAgICB2YXIgcG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZTtcbiAgICAgIHZhciBub3JtYWxpemVkQmFzZW5hbWUgPSBiYXNlbmFtZS5zbGljZSgtMSkgPT09ICcvJyA/IGJhc2VuYW1lIDogYmFzZW5hbWUgKyAnLyc7XG4gICAgICB2YXIgbm9ybWFsaXplZFBhdGhuYW1lID0gcG5hbWUuY2hhckF0KDApID09PSAnLycgPyBwbmFtZS5zbGljZSgxKSA6IHBuYW1lO1xuICAgICAgdmFyIHBhdGhuYW1lID0gbm9ybWFsaXplZEJhc2VuYW1lICsgbm9ybWFsaXplZFBhdGhuYW1lO1xuXG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIGxvY2F0aW9uLCB7XG4gICAgICAgIHBhdGhuYW1lOiBwYXRobmFtZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gT3ZlcnJpZGUgYWxsIHJlYWQgbWV0aG9kcyB3aXRoIGJhc2VuYW1lLWF3YXJlIHZlcnNpb25zLlxuICAgIGZ1bmN0aW9uIGxpc3RlbkJlZm9yZShob29rKSB7XG4gICAgICByZXR1cm4gaGlzdG9yeS5saXN0ZW5CZWZvcmUoZnVuY3Rpb24gKGxvY2F0aW9uLCBjYWxsYmFjaykge1xuICAgICAgICBfcnVuVHJhbnNpdGlvbkhvb2syWydkZWZhdWx0J10oaG9vaywgYWRkQmFzZW5hbWUobG9jYXRpb24pLCBjYWxsYmFjayk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaXN0ZW4obGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBoaXN0b3J5Lmxpc3RlbihmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgbGlzdGVuZXIoYWRkQmFzZW5hbWUobG9jYXRpb24pKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE92ZXJyaWRlIGFsbCB3cml0ZSBtZXRob2RzIHdpdGggYmFzZW5hbWUtYXdhcmUgdmVyc2lvbnMuXG4gICAgZnVuY3Rpb24gcHVzaChsb2NhdGlvbikge1xuICAgICAgaGlzdG9yeS5wdXNoKHByZXBlbmRCYXNlbmFtZShsb2NhdGlvbikpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlcGxhY2UobG9jYXRpb24pIHtcbiAgICAgIGhpc3RvcnkucmVwbGFjZShwcmVwZW5kQmFzZW5hbWUobG9jYXRpb24pKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVQYXRoKGxvY2F0aW9uKSB7XG4gICAgICByZXR1cm4gaGlzdG9yeS5jcmVhdGVQYXRoKHByZXBlbmRCYXNlbmFtZShsb2NhdGlvbikpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUhyZWYobG9jYXRpb24pIHtcbiAgICAgIHJldHVybiBoaXN0b3J5LmNyZWF0ZUhyZWYocHJlcGVuZEJhc2VuYW1lKGxvY2F0aW9uKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlTG9jYXRpb24obG9jYXRpb24pIHtcbiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFkZEJhc2VuYW1lKGhpc3RvcnkuY3JlYXRlTG9jYXRpb24uYXBwbHkoaGlzdG9yeSwgW3ByZXBlbmRCYXNlbmFtZShsb2NhdGlvbildLmNvbmNhdChhcmdzKSkpO1xuICAgIH1cblxuICAgIC8vIGRlcHJlY2F0ZWRcbiAgICBmdW5jdGlvbiBwdXNoU3RhdGUoc3RhdGUsIHBhdGgpIHtcbiAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHBhdGggPSBfUGF0aFV0aWxzLnBhcnNlUGF0aChwYXRoKTtcblxuICAgICAgcHVzaChfZXh0ZW5kcyh7IHN0YXRlOiBzdGF0ZSB9LCBwYXRoKSk7XG4gICAgfVxuXG4gICAgLy8gZGVwcmVjYXRlZFxuICAgIGZ1bmN0aW9uIHJlcGxhY2VTdGF0ZShzdGF0ZSwgcGF0aCkge1xuICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykgcGF0aCA9IF9QYXRoVXRpbHMucGFyc2VQYXRoKHBhdGgpO1xuXG4gICAgICByZXBsYWNlKF9leHRlbmRzKHsgc3RhdGU6IHN0YXRlIH0sIHBhdGgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gX2V4dGVuZHMoe30sIGhpc3RvcnksIHtcbiAgICAgIGxpc3RlbkJlZm9yZTogbGlzdGVuQmVmb3JlLFxuICAgICAgbGlzdGVuOiBsaXN0ZW4sXG4gICAgICBwdXNoOiBwdXNoLFxuICAgICAgcmVwbGFjZTogcmVwbGFjZSxcbiAgICAgIGNyZWF0ZVBhdGg6IGNyZWF0ZVBhdGgsXG4gICAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLFxuICAgICAgY3JlYXRlTG9jYXRpb246IGNyZWF0ZUxvY2F0aW9uLFxuXG4gICAgICBwdXNoU3RhdGU6IF9kZXByZWNhdGUyWydkZWZhdWx0J10ocHVzaFN0YXRlLCAncHVzaFN0YXRlIGlzIGRlcHJlY2F0ZWQ7IHVzZSBwdXNoIGluc3RlYWQnKSxcbiAgICAgIHJlcGxhY2VTdGF0ZTogX2RlcHJlY2F0ZTJbJ2RlZmF1bHQnXShyZXBsYWNlU3RhdGUsICdyZXBsYWNlU3RhdGUgaXMgZGVwcmVjYXRlZDsgdXNlIHJlcGxhY2UgaW5zdGVhZCcpXG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHVzZUJhc2VuYW1lO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJ3dhcm5pbmcnKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG52YXIgX0V4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgX0RPTVV0aWxzID0gcmVxdWlyZSgnLi9ET01VdGlscycpO1xuXG52YXIgX2RlcHJlY2F0ZSA9IHJlcXVpcmUoJy4vZGVwcmVjYXRlJyk7XG5cbnZhciBfZGVwcmVjYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlcHJlY2F0ZSk7XG5cbmZ1bmN0aW9uIHN0YXJ0QmVmb3JlVW5sb2FkTGlzdGVuZXIoZ2V0QmVmb3JlVW5sb2FkUHJvbXB0TWVzc2FnZSkge1xuICBmdW5jdGlvbiBsaXN0ZW5lcihldmVudCkge1xuICAgIHZhciBtZXNzYWdlID0gZ2V0QmVmb3JlVW5sb2FkUHJvbXB0TWVzc2FnZSgpO1xuXG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJykge1xuICAgICAgKGV2ZW50IHx8IHdpbmRvdy5ldmVudCkucmV0dXJuVmFsdWUgPSBtZXNzYWdlO1xuICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfVxuICB9XG5cbiAgX0RPTVV0aWxzLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAnYmVmb3JldW5sb2FkJywgbGlzdGVuZXIpO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgX0RPTVV0aWxzLnJlbW92ZUV2ZW50TGlzdGVuZXIod2luZG93LCAnYmVmb3JldW5sb2FkJywgbGlzdGVuZXIpO1xuICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBuZXcgY3JlYXRlSGlzdG9yeSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGNyZWF0ZVxuICogaGlzdG9yeSBvYmplY3RzIHRoYXQga25vdyBob3cgdG8gdXNlIHRoZSBiZWZvcmV1bmxvYWQgZXZlbnQgaW4gd2ViXG4gKiBicm93c2VycyB0byBjYW5jZWwgbmF2aWdhdGlvbi5cbiAqL1xuZnVuY3Rpb24gdXNlQmVmb3JlVW5sb2FkKGNyZWF0ZUhpc3RvcnkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgdmFyIGhpc3RvcnkgPSBjcmVhdGVIaXN0b3J5KG9wdGlvbnMpO1xuXG4gICAgdmFyIHN0b3BCZWZvcmVVbmxvYWRMaXN0ZW5lciA9IHVuZGVmaW5lZDtcbiAgICB2YXIgYmVmb3JlVW5sb2FkSG9va3MgPSBbXTtcblxuICAgIGZ1bmN0aW9uIGdldEJlZm9yZVVubG9hZFByb21wdE1lc3NhZ2UoKSB7XG4gICAgICB2YXIgbWVzc2FnZSA9IHVuZGVmaW5lZDtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJlZm9yZVVubG9hZEhvb2tzLmxlbmd0aDsgbWVzc2FnZSA9PSBudWxsICYmIGkgPCBsZW47ICsraSkge1xuICAgICAgICBtZXNzYWdlID0gYmVmb3JlVW5sb2FkSG9va3NbaV0uY2FsbCgpO1xuICAgICAgfXJldHVybiBtZXNzYWdlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpc3RlbkJlZm9yZVVubG9hZChob29rKSB7XG4gICAgICBiZWZvcmVVbmxvYWRIb29rcy5wdXNoKGhvb2spO1xuXG4gICAgICBpZiAoYmVmb3JlVW5sb2FkSG9va3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGlmIChfRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gICAgICAgICAgc3RvcEJlZm9yZVVubG9hZExpc3RlbmVyID0gc3RhcnRCZWZvcmVVbmxvYWRMaXN0ZW5lcihnZXRCZWZvcmVVbmxvYWRQcm9tcHRNZXNzYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gX3dhcm5pbmcyWydkZWZhdWx0J10oZmFsc2UsICdsaXN0ZW5CZWZvcmVVbmxvYWQgb25seSB3b3JrcyBpbiBET00gZW52aXJvbm1lbnRzJykgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYmVmb3JlVW5sb2FkSG9va3MgPSBiZWZvcmVVbmxvYWRIb29rcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICByZXR1cm4gaXRlbSAhPT0gaG9vaztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGJlZm9yZVVubG9hZEhvb2tzLmxlbmd0aCA9PT0gMCAmJiBzdG9wQmVmb3JlVW5sb2FkTGlzdGVuZXIpIHtcbiAgICAgICAgICBzdG9wQmVmb3JlVW5sb2FkTGlzdGVuZXIoKTtcbiAgICAgICAgICBzdG9wQmVmb3JlVW5sb2FkTGlzdGVuZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIGRlcHJlY2F0ZWRcbiAgICBmdW5jdGlvbiByZWdpc3RlckJlZm9yZVVubG9hZEhvb2soaG9vaykge1xuICAgICAgaWYgKF9FeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgYmVmb3JlVW5sb2FkSG9va3MuaW5kZXhPZihob29rKSA9PT0gLTEpIHtcbiAgICAgICAgYmVmb3JlVW5sb2FkSG9va3MucHVzaChob29rKTtcblxuICAgICAgICBpZiAoYmVmb3JlVW5sb2FkSG9va3MubGVuZ3RoID09PSAxKSBzdG9wQmVmb3JlVW5sb2FkTGlzdGVuZXIgPSBzdGFydEJlZm9yZVVubG9hZExpc3RlbmVyKGdldEJlZm9yZVVubG9hZFByb21wdE1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGRlcHJlY2F0ZWRcbiAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyQmVmb3JlVW5sb2FkSG9vayhob29rKSB7XG4gICAgICBpZiAoYmVmb3JlVW5sb2FkSG9va3MubGVuZ3RoID4gMCkge1xuICAgICAgICBiZWZvcmVVbmxvYWRIb29rcyA9IGJlZm9yZVVubG9hZEhvb2tzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgIHJldHVybiBpdGVtICE9PSBob29rO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYmVmb3JlVW5sb2FkSG9va3MubGVuZ3RoID09PSAwKSBzdG9wQmVmb3JlVW5sb2FkTGlzdGVuZXIoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gX2V4dGVuZHMoe30sIGhpc3RvcnksIHtcbiAgICAgIGxpc3RlbkJlZm9yZVVubG9hZDogbGlzdGVuQmVmb3JlVW5sb2FkLFxuXG4gICAgICByZWdpc3RlckJlZm9yZVVubG9hZEhvb2s6IF9kZXByZWNhdGUyWydkZWZhdWx0J10ocmVnaXN0ZXJCZWZvcmVVbmxvYWRIb29rLCAncmVnaXN0ZXJCZWZvcmVVbmxvYWRIb29rIGlzIGRlcHJlY2F0ZWQ7IHVzZSBsaXN0ZW5CZWZvcmVVbmxvYWQgaW5zdGVhZCcpLFxuICAgICAgdW5yZWdpc3RlckJlZm9yZVVubG9hZEhvb2s6IF9kZXByZWNhdGUyWydkZWZhdWx0J10odW5yZWdpc3RlckJlZm9yZVVubG9hZEhvb2ssICd1bnJlZ2lzdGVyQmVmb3JlVW5sb2FkSG9vayBpcyBkZXByZWNhdGVkOyB1c2UgdGhlIGNhbGxiYWNrIHJldHVybmVkIGZyb20gbGlzdGVuQmVmb3JlVW5sb2FkIGluc3RlYWQnKVxuICAgIH0pO1xuICB9O1xufVxuXG5leHBvcnRzWydkZWZhdWx0J10gPSB1c2VCZWZvcmVVbmxvYWQ7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIF93YXJuaW5nID0gcmVxdWlyZSgnd2FybmluZycpO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbnZhciBfcXVlcnlTdHJpbmcgPSByZXF1aXJlKCdxdWVyeS1zdHJpbmcnKTtcblxudmFyIF9ydW5UcmFuc2l0aW9uSG9vayA9IHJlcXVpcmUoJy4vcnVuVHJhbnNpdGlvbkhvb2snKTtcblxudmFyIF9ydW5UcmFuc2l0aW9uSG9vazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ydW5UcmFuc2l0aW9uSG9vayk7XG5cbnZhciBfUGF0aFV0aWxzID0gcmVxdWlyZSgnLi9QYXRoVXRpbHMnKTtcblxudmFyIF9kZXByZWNhdGUgPSByZXF1aXJlKCcuL2RlcHJlY2F0ZScpO1xuXG52YXIgX2RlcHJlY2F0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZXByZWNhdGUpO1xuXG52YXIgU0VBUkNIX0JBU0VfS0VZID0gJyRzZWFyY2hCYXNlJztcblxuZnVuY3Rpb24gZGVmYXVsdFN0cmluZ2lmeVF1ZXJ5KHF1ZXJ5KSB7XG4gIHJldHVybiBfcXVlcnlTdHJpbmcuc3RyaW5naWZ5KHF1ZXJ5KS5yZXBsYWNlKC8lMjAvZywgJysnKTtcbn1cblxudmFyIGRlZmF1bHRQYXJzZVF1ZXJ5U3RyaW5nID0gX3F1ZXJ5U3RyaW5nLnBhcnNlO1xuXG5mdW5jdGlvbiBpc05lc3RlZE9iamVjdChvYmplY3QpIHtcbiAgZm9yICh2YXIgcCBpbiBvYmplY3QpIHtcbiAgICBpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KHApICYmIHR5cGVvZiBvYmplY3RbcF0gPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KG9iamVjdFtwXSkgJiYgb2JqZWN0W3BdICE9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgfXJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNyZWF0ZUhpc3RvcnkgZnVuY3Rpb24gdGhhdCBtYXkgYmUgdXNlZCB0byBjcmVhdGVcbiAqIGhpc3Rvcnkgb2JqZWN0cyB0aGF0IGtub3cgaG93IHRvIGhhbmRsZSBVUkwgcXVlcmllcy5cbiAqL1xuZnVuY3Rpb24gdXNlUXVlcmllcyhjcmVhdGVIaXN0b3J5KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblxuICAgIHZhciBoaXN0b3J5ID0gY3JlYXRlSGlzdG9yeShvcHRpb25zKTtcblxuICAgIHZhciBzdHJpbmdpZnlRdWVyeSA9IG9wdGlvbnMuc3RyaW5naWZ5UXVlcnk7XG4gICAgdmFyIHBhcnNlUXVlcnlTdHJpbmcgPSBvcHRpb25zLnBhcnNlUXVlcnlTdHJpbmc7XG5cbiAgICBpZiAodHlwZW9mIHN0cmluZ2lmeVF1ZXJ5ICE9PSAnZnVuY3Rpb24nKSBzdHJpbmdpZnlRdWVyeSA9IGRlZmF1bHRTdHJpbmdpZnlRdWVyeTtcblxuICAgIGlmICh0eXBlb2YgcGFyc2VRdWVyeVN0cmluZyAhPT0gJ2Z1bmN0aW9uJykgcGFyc2VRdWVyeVN0cmluZyA9IGRlZmF1bHRQYXJzZVF1ZXJ5U3RyaW5nO1xuXG4gICAgZnVuY3Rpb24gYWRkUXVlcnkobG9jYXRpb24pIHtcbiAgICAgIGlmIChsb2NhdGlvbi5xdWVyeSA9PSBudWxsKSB7XG4gICAgICAgIHZhciBzZWFyY2ggPSBsb2NhdGlvbi5zZWFyY2g7XG5cbiAgICAgICAgbG9jYXRpb24ucXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKHNlYXJjaC5zdWJzdHJpbmcoMSkpO1xuICAgICAgICBsb2NhdGlvbltTRUFSQ0hfQkFTRV9LRVldID0geyBzZWFyY2g6IHNlYXJjaCwgc2VhcmNoQmFzZTogJycgfTtcbiAgICAgIH1cblxuICAgICAgLy8gVE9ETzogSW5zdGVhZCBvZiBhbGwgdGhlIGJvb2sta2VlcGluZyBoZXJlLCB0aGlzIHNob3VsZCBqdXN0IHN0cmlwIHRoZVxuICAgICAgLy8gc3RyaW5naWZpZWQgcXVlcnkgZnJvbSB0aGUgc2VhcmNoLlxuXG4gICAgICByZXR1cm4gbG9jYXRpb247XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXBwZW5kUXVlcnkobG9jYXRpb24sIHF1ZXJ5KSB7XG4gICAgICB2YXIgX2V4dGVuZHMyO1xuXG4gICAgICB2YXIgc2VhcmNoQmFzZVNwZWMgPSBsb2NhdGlvbltTRUFSQ0hfQkFTRV9LRVldO1xuICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gcXVlcnkgPyBzdHJpbmdpZnlRdWVyeShxdWVyeSkgOiAnJztcbiAgICAgIGlmICghc2VhcmNoQmFzZVNwZWMgJiYgIXF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBsb2NhdGlvbjtcbiAgICAgIH1cblxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IF93YXJuaW5nMlsnZGVmYXVsdCddKHN0cmluZ2lmeVF1ZXJ5ICE9PSBkZWZhdWx0U3RyaW5naWZ5UXVlcnkgfHwgIWlzTmVzdGVkT2JqZWN0KHF1ZXJ5KSwgJ3VzZVF1ZXJpZXMgZG9lcyBub3Qgc3RyaW5naWZ5IG5lc3RlZCBxdWVyeSBvYmplY3RzIGJ5IGRlZmF1bHQ7ICcgKyAndXNlIGEgY3VzdG9tIHN0cmluZ2lmeVF1ZXJ5IGZ1bmN0aW9uJykgOiB1bmRlZmluZWQ7XG5cbiAgICAgIGlmICh0eXBlb2YgbG9jYXRpb24gPT09ICdzdHJpbmcnKSBsb2NhdGlvbiA9IF9QYXRoVXRpbHMucGFyc2VQYXRoKGxvY2F0aW9uKTtcblxuICAgICAgdmFyIHNlYXJjaEJhc2UgPSB1bmRlZmluZWQ7XG4gICAgICBpZiAoc2VhcmNoQmFzZVNwZWMgJiYgbG9jYXRpb24uc2VhcmNoID09PSBzZWFyY2hCYXNlU3BlYy5zZWFyY2gpIHtcbiAgICAgICAgc2VhcmNoQmFzZSA9IHNlYXJjaEJhc2VTcGVjLnNlYXJjaEJhc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWFyY2hCYXNlID0gbG9jYXRpb24uc2VhcmNoIHx8ICcnO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2VhcmNoID0gc2VhcmNoQmFzZTtcbiAgICAgIGlmIChxdWVyeVN0cmluZykge1xuICAgICAgICBzZWFyY2ggKz0gKHNlYXJjaCA/ICcmJyA6ICc/JykgKyBxdWVyeVN0cmluZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBsb2NhdGlvbiwgKF9leHRlbmRzMiA9IHtcbiAgICAgICAgc2VhcmNoOiBzZWFyY2hcbiAgICAgIH0sIF9leHRlbmRzMltTRUFSQ0hfQkFTRV9LRVldID0geyBzZWFyY2g6IHNlYXJjaCwgc2VhcmNoQmFzZTogc2VhcmNoQmFzZSB9LCBfZXh0ZW5kczIpKTtcbiAgICB9XG5cbiAgICAvLyBPdmVycmlkZSBhbGwgcmVhZCBtZXRob2RzIHdpdGggcXVlcnktYXdhcmUgdmVyc2lvbnMuXG4gICAgZnVuY3Rpb24gbGlzdGVuQmVmb3JlKGhvb2spIHtcbiAgICAgIHJldHVybiBoaXN0b3J5Lmxpc3RlbkJlZm9yZShmdW5jdGlvbiAobG9jYXRpb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIF9ydW5UcmFuc2l0aW9uSG9vazJbJ2RlZmF1bHQnXShob29rLCBhZGRRdWVyeShsb2NhdGlvbiksIGNhbGxiYWNrKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIGhpc3RvcnkubGlzdGVuKGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgICBsaXN0ZW5lcihhZGRRdWVyeShsb2NhdGlvbikpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gT3ZlcnJpZGUgYWxsIHdyaXRlIG1ldGhvZHMgd2l0aCBxdWVyeS1hd2FyZSB2ZXJzaW9ucy5cbiAgICBmdW5jdGlvbiBwdXNoKGxvY2F0aW9uKSB7XG4gICAgICBoaXN0b3J5LnB1c2goYXBwZW5kUXVlcnkobG9jYXRpb24sIGxvY2F0aW9uLnF1ZXJ5KSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVwbGFjZShsb2NhdGlvbikge1xuICAgICAgaGlzdG9yeS5yZXBsYWNlKGFwcGVuZFF1ZXJ5KGxvY2F0aW9uLCBsb2NhdGlvbi5xdWVyeSkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVBhdGgobG9jYXRpb24sIHF1ZXJ5KSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gX3dhcm5pbmcyWydkZWZhdWx0J10oIXF1ZXJ5LCAndGhlIHF1ZXJ5IGFyZ3VtZW50IHRvIGNyZWF0ZVBhdGggaXMgZGVwcmVjYXRlZDsgdXNlIGEgbG9jYXRpb24gZGVzY3JpcHRvciBpbnN0ZWFkJykgOiB1bmRlZmluZWQ7XG5cbiAgICAgIHJldHVybiBoaXN0b3J5LmNyZWF0ZVBhdGgoYXBwZW5kUXVlcnkobG9jYXRpb24sIHF1ZXJ5IHx8IGxvY2F0aW9uLnF1ZXJ5KSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlSHJlZihsb2NhdGlvbiwgcXVlcnkpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBfd2FybmluZzJbJ2RlZmF1bHQnXSghcXVlcnksICd0aGUgcXVlcnkgYXJndW1lbnQgdG8gY3JlYXRlSHJlZiBpcyBkZXByZWNhdGVkOyB1c2UgYSBsb2NhdGlvbiBkZXNjcmlwdG9yIGluc3RlYWQnKSA6IHVuZGVmaW5lZDtcblxuICAgICAgcmV0dXJuIGhpc3RvcnkuY3JlYXRlSHJlZihhcHBlbmRRdWVyeShsb2NhdGlvbiwgcXVlcnkgfHwgbG9jYXRpb24ucXVlcnkpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVMb2NhdGlvbihsb2NhdGlvbikge1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICB2YXIgZnVsbExvY2F0aW9uID0gaGlzdG9yeS5jcmVhdGVMb2NhdGlvbi5hcHBseShoaXN0b3J5LCBbYXBwZW5kUXVlcnkobG9jYXRpb24sIGxvY2F0aW9uLnF1ZXJ5KV0uY29uY2F0KGFyZ3MpKTtcbiAgICAgIGlmIChsb2NhdGlvbi5xdWVyeSkge1xuICAgICAgICBmdWxsTG9jYXRpb24ucXVlcnkgPSBsb2NhdGlvbi5xdWVyeTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhZGRRdWVyeShmdWxsTG9jYXRpb24pO1xuICAgIH1cblxuICAgIC8vIGRlcHJlY2F0ZWRcbiAgICBmdW5jdGlvbiBwdXNoU3RhdGUoc3RhdGUsIHBhdGgsIHF1ZXJ5KSB7XG4gICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSBwYXRoID0gX1BhdGhVdGlscy5wYXJzZVBhdGgocGF0aCk7XG5cbiAgICAgIHB1c2goX2V4dGVuZHMoeyBzdGF0ZTogc3RhdGUgfSwgcGF0aCwgeyBxdWVyeTogcXVlcnkgfSkpO1xuICAgIH1cblxuICAgIC8vIGRlcHJlY2F0ZWRcbiAgICBmdW5jdGlvbiByZXBsYWNlU3RhdGUoc3RhdGUsIHBhdGgsIHF1ZXJ5KSB7XG4gICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSBwYXRoID0gX1BhdGhVdGlscy5wYXJzZVBhdGgocGF0aCk7XG5cbiAgICAgIHJlcGxhY2UoX2V4dGVuZHMoeyBzdGF0ZTogc3RhdGUgfSwgcGF0aCwgeyBxdWVyeTogcXVlcnkgfSkpO1xuICAgIH1cblxuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgaGlzdG9yeSwge1xuICAgICAgbGlzdGVuQmVmb3JlOiBsaXN0ZW5CZWZvcmUsXG4gICAgICBsaXN0ZW46IGxpc3RlbixcbiAgICAgIHB1c2g6IHB1c2gsXG4gICAgICByZXBsYWNlOiByZXBsYWNlLFxuICAgICAgY3JlYXRlUGF0aDogY3JlYXRlUGF0aCxcbiAgICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYsXG4gICAgICBjcmVhdGVMb2NhdGlvbjogY3JlYXRlTG9jYXRpb24sXG5cbiAgICAgIHB1c2hTdGF0ZTogX2RlcHJlY2F0ZTJbJ2RlZmF1bHQnXShwdXNoU3RhdGUsICdwdXNoU3RhdGUgaXMgZGVwcmVjYXRlZDsgdXNlIHB1c2ggaW5zdGVhZCcpLFxuICAgICAgcmVwbGFjZVN0YXRlOiBfZGVwcmVjYXRlMlsnZGVmYXVsdCddKHJlcGxhY2VTdGF0ZSwgJ3JlcGxhY2VTdGF0ZSBpcyBkZXByZWNhdGVkOyB1c2UgcmVwbGFjZSBpbnN0ZWFkJylcbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0c1snZGVmYXVsdCddID0gdXNlUXVlcmllcztcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgaXNWYWxpZFN0cmluZyA9IGZ1bmN0aW9uIGlzVmFsaWRTdHJpbmcocGFyYW0pIHtcbiAgcmV0dXJuIHR5cGVvZiBwYXJhbSA9PT0gJ3N0cmluZycgJiYgcGFyYW0ubGVuZ3RoID4gMDtcbn07XG5cbnZhciBzdGFydHNXaXRoID0gZnVuY3Rpb24gc3RhcnRzV2l0aChzdHJpbmcsIHN0YXJ0KSB7XG4gIHJldHVybiBzdHJpbmdbMF0gPT09IHN0YXJ0O1xufTtcblxudmFyIGlzU2VsZWN0b3IgPSBmdW5jdGlvbiBpc1NlbGVjdG9yKHBhcmFtKSB7XG4gIHJldHVybiBpc1ZhbGlkU3RyaW5nKHBhcmFtKSAmJiAoc3RhcnRzV2l0aChwYXJhbSwgJy4nKSB8fCBzdGFydHNXaXRoKHBhcmFtLCAnIycpKTtcbn07XG5cbnZhciBub2RlID0gZnVuY3Rpb24gbm9kZShoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodGFnTmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZmlyc3QpIHtcbiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCByZXN0ID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICByZXN0W19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzU2VsZWN0b3IoZmlyc3QpKSB7XG4gICAgICAgIHJldHVybiBoLmFwcGx5KHVuZGVmaW5lZCwgW3RhZ05hbWUgKyBmaXJzdF0uY29uY2F0KHJlc3QpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBoLmFwcGx5KHVuZGVmaW5lZCwgW3RhZ05hbWUsIGZpcnN0XS5jb25jYXQocmVzdCkpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59O1xuXG52YXIgVEFHX05BTUVTID0gWydhJywgJ2FiYnInLCAnYWRkcmVzcycsICdhcmVhJywgJ2FydGljbGUnLCAnYXNpZGUnLCAnYXVkaW8nLCAnYicsICdiYXNlJywgJ2JkaScsICdiZG8nLCAnYmxvY2txdW90ZScsICdib2R5JywgJ2JyJywgJ2J1dHRvbicsICdjYW52YXMnLCAnY2FwdGlvbicsICdjaXRlJywgJ2NvZGUnLCAnY29sJywgJ2NvbGdyb3VwJywgJ2RkJywgJ2RlbCcsICdkZm4nLCAnZGlyJywgJ2RpdicsICdkbCcsICdkdCcsICdlbScsICdlbWJlZCcsICdmaWVsZHNldCcsICdmaWdjYXB0aW9uJywgJ2ZpZ3VyZScsICdmb290ZXInLCAnZm9ybScsICdoMScsICdoMicsICdoMycsICdoNCcsICdoNScsICdoNicsICdoZWFkJywgJ2hlYWRlcicsICdoZ3JvdXAnLCAnaHInLCAnaHRtbCcsICdpJywgJ2lmcmFtZScsICdpbWcnLCAnaW5wdXQnLCAnaW5zJywgJ2tiZCcsICdrZXlnZW4nLCAnbGFiZWwnLCAnbGVnZW5kJywgJ2xpJywgJ2xpbmsnLCAnbWFpbicsICdtYXAnLCAnbWFyaycsICdtZW51JywgJ21ldGEnLCAnbmF2JywgJ25vc2NyaXB0JywgJ29iamVjdCcsICdvbCcsICdvcHRncm91cCcsICdvcHRpb24nLCAncCcsICdwYXJhbScsICdwcmUnLCAncScsICdycCcsICdydCcsICdydWJ5JywgJ3MnLCAnc2FtcCcsICdzY3JpcHQnLCAnc2VjdGlvbicsICdzZWxlY3QnLCAnc21hbGwnLCAnc291cmNlJywgJ3NwYW4nLCAnc3Ryb25nJywgJ3N0eWxlJywgJ3N1YicsICdzdXAnLCAndGFibGUnLCAndGJvZHknLCAndGQnLCAndGV4dGFyZWEnLCAndGZvb3QnLCAndGgnLCAndGhlYWQnLCAndGl0bGUnLCAndHInLCAndScsICd1bCcsICd2aWRlbyddO1xuXG5leHBvcnRzWydkZWZhdWx0J10gPSBmdW5jdGlvbiAoaCkge1xuICB2YXIgY3JlYXRlVGFnID0gbm9kZShoKTtcbiAgdmFyIGV4cG9ydGVkID0geyBUQUdfTkFNRVM6IFRBR19OQU1FUywgaXNTZWxlY3RvcjogaXNTZWxlY3RvciwgY3JlYXRlVGFnOiBjcmVhdGVUYWcgfTtcbiAgVEFHX05BTUVTLmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICBleHBvcnRlZFtuXSA9IGNyZWF0ZVRhZyhuKTtcbiAgfSk7XG4gIHJldHVybiBleHBvcnRlZDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKmdsb2JhbCB3aW5kb3csIGdsb2JhbCovXG5cbnZhciByb290ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgP1xuICAgIHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID9cbiAgICBnbG9iYWwgOiB7fTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbmRpdmlkdWFsO1xuXG5mdW5jdGlvbiBJbmRpdmlkdWFsKGtleSwgdmFsdWUpIHtcbiAgICBpZiAoa2V5IGluIHJvb3QpIHtcbiAgICAgICAgcmV0dXJuIHJvb3Rba2V5XTtcbiAgICB9XG5cbiAgICByb290W2tleV0gPSB2YWx1ZTtcblxuICAgIHJldHVybiB2YWx1ZTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIEluZGl2aWR1YWwgPSByZXF1aXJlKCcuL2luZGV4LmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gT25lVmVyc2lvbjtcblxuZnVuY3Rpb24gT25lVmVyc2lvbihtb2R1bGVOYW1lLCB2ZXJzaW9uLCBkZWZhdWx0VmFsdWUpIHtcbiAgICB2YXIga2V5ID0gJ19fSU5ESVZJRFVBTF9PTkVfVkVSU0lPTl8nICsgbW9kdWxlTmFtZTtcbiAgICB2YXIgZW5mb3JjZUtleSA9IGtleSArICdfRU5GT1JDRV9TSU5HTEVUT04nO1xuXG4gICAgdmFyIHZlcnNpb25WYWx1ZSA9IEluZGl2aWR1YWwoZW5mb3JjZUtleSwgdmVyc2lvbik7XG5cbiAgICBpZiAodmVyc2lvblZhbHVlICE9PSB2ZXJzaW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FuIG9ubHkgaGF2ZSBvbmUgY29weSBvZiAnICtcbiAgICAgICAgICAgIG1vZHVsZU5hbWUgKyAnLlxcbicgK1xuICAgICAgICAgICAgJ1lvdSBhbHJlYWR5IGhhdmUgdmVyc2lvbiAnICsgdmVyc2lvblZhbHVlICtcbiAgICAgICAgICAgICcgaW5zdGFsbGVkLlxcbicgK1xuICAgICAgICAgICAgJ1RoaXMgbWVhbnMgeW91IGNhbm5vdCBpbnN0YWxsIHZlcnNpb24gJyArIHZlcnNpb24pO1xuICAgIH1cblxuICAgIHJldHVybiBJbmRpdmlkdWFsKGtleSwgZGVmYXVsdFZhbHVlKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBVc2UgaW52YXJpYW50KCkgdG8gYXNzZXJ0IHN0YXRlIHdoaWNoIHlvdXIgcHJvZ3JhbSBhc3N1bWVzIHRvIGJlIHRydWUuXG4gKlxuICogUHJvdmlkZSBzcHJpbnRmLXN0eWxlIGZvcm1hdCAob25seSAlcyBpcyBzdXBwb3J0ZWQpIGFuZCBhcmd1bWVudHNcbiAqIHRvIHByb3ZpZGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBicm9rZSBhbmQgd2hhdCB5b3Ugd2VyZVxuICogZXhwZWN0aW5nLlxuICpcbiAqIFRoZSBpbnZhcmlhbnQgbWVzc2FnZSB3aWxsIGJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24sIGJ1dCB0aGUgaW52YXJpYW50XG4gKiB3aWxsIHJlbWFpbiB0byBlbnN1cmUgbG9naWMgZG9lcyBub3QgZGlmZmVyIGluIHByb2R1Y3Rpb24uXG4gKi9cblxudmFyIGludmFyaWFudCA9IGZ1bmN0aW9uKGNvbmRpdGlvbiwgZm9ybWF0LCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB2YXIgZXJyb3I7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICAgJ01pbmlmaWVkIGV4Y2VwdGlvbiBvY2N1cnJlZDsgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50ICcgK1xuICAgICAgICAnZm9yIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2UgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy4nXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICAgZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJnc1thcmdJbmRleCsrXTsgfSlcbiAgICAgICk7XG4gICAgICBlcnJvci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nO1xuICAgIH1cblxuICAgIGVycm9yLmZyYW1lc1RvUG9wID0gMTsgLy8gd2UgZG9uJ3QgY2FyZSBhYm91dCBpbnZhcmlhbnQncyBvd24gZnJhbWVcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBpbnZhcmlhbnQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc09iamVjdCh4KSB7XG5cdHJldHVybiB0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJiB4ICE9PSBudWxsO1xufTtcbiIsIi8qKlxuICogU3BlY2lhbCBsYW5ndWFnZS1zcGVjaWZpYyBvdmVycmlkZXMuXG4gKlxuICogU291cmNlOiBmdHA6Ly9mdHAudW5pY29kZS5vcmcvUHVibGljL1VDRC9sYXRlc3QvdWNkL1NwZWNpYWxDYXNpbmcudHh0XG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqL1xudmFyIExBTkdVQUdFUyA9IHtcbiAgdHI6IHtcbiAgICByZWdleHA6IC9cXHUwMTMwfFxcdTAwNDl8XFx1MDA0OVxcdTAzMDcvZyxcbiAgICBtYXA6IHtcbiAgICAgICdcXHUwMTMwJzogJ1xcdTAwNjknLFxuICAgICAgJ1xcdTAwNDknOiAnXFx1MDEzMScsXG4gICAgICAnXFx1MDA0OVxcdTAzMDcnOiAnXFx1MDA2OSdcbiAgICB9XG4gIH0sXG4gIGF6OiB7XG4gICAgcmVnZXhwOiAvW1xcdTAxMzBdL2csXG4gICAgbWFwOiB7XG4gICAgICAnXFx1MDEzMCc6ICdcXHUwMDY5JyxcbiAgICAgICdcXHUwMDQ5JzogJ1xcdTAxMzEnLFxuICAgICAgJ1xcdTAwNDlcXHUwMzA3JzogJ1xcdTAwNjknXG4gICAgfVxuICB9LFxuICBsdDoge1xuICAgIHJlZ2V4cDogL1tcXHUwMDQ5XFx1MDA0QVxcdTAxMkVcXHUwMENDXFx1MDBDRFxcdTAxMjhdL2csXG4gICAgbWFwOiB7XG4gICAgICAnXFx1MDA0OSc6ICdcXHUwMDY5XFx1MDMwNycsXG4gICAgICAnXFx1MDA0QSc6ICdcXHUwMDZBXFx1MDMwNycsXG4gICAgICAnXFx1MDEyRSc6ICdcXHUwMTJGXFx1MDMwNycsXG4gICAgICAnXFx1MDBDQyc6ICdcXHUwMDY5XFx1MDMwN1xcdTAzMDAnLFxuICAgICAgJ1xcdTAwQ0QnOiAnXFx1MDA2OVxcdTAzMDdcXHUwMzAxJyxcbiAgICAgICdcXHUwMTI4JzogJ1xcdTAwNjlcXHUwMzA3XFx1MDMwMydcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBMb3dlcmNhc2UgYSBzdHJpbmcuXG4gKlxuICogQHBhcmFtICB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc3RyLCBsb2NhbGUpIHtcbiAgdmFyIGxhbmcgPSBMQU5HVUFHRVNbbG9jYWxlXVxuXG4gIHN0ciA9IHN0ciA9PSBudWxsID8gJycgOiBTdHJpbmcoc3RyKVxuXG4gIGlmIChsYW5nKSB7XG4gICAgc3RyID0gc3RyLnJlcGxhY2UobGFuZy5yZWdleHAsIGZ1bmN0aW9uIChtKSB7IHJldHVybiBsYW5nLm1hcFttXSB9KVxuICB9XG5cbiAgcmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpXG59XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBwcm90byA9IEVsZW1lbnQucHJvdG90eXBlO1xudmFyIHZlbmRvciA9IHByb3RvLm1hdGNoZXNcbiAgfHwgcHJvdG8ubWF0Y2hlc1NlbGVjdG9yXG4gIHx8IHByb3RvLndlYmtpdE1hdGNoZXNTZWxlY3RvclxuICB8fCBwcm90by5tb3pNYXRjaGVzU2VsZWN0b3JcbiAgfHwgcHJvdG8ubXNNYXRjaGVzU2VsZWN0b3JcbiAgfHwgcHJvdG8ub01hdGNoZXNTZWxlY3RvcjtcblxubW9kdWxlLmV4cG9ydHMgPSBtYXRjaDtcblxuLyoqXG4gKiBNYXRjaCBgZWxgIHRvIGBzZWxlY3RvcmAuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBtYXRjaChlbCwgc2VsZWN0b3IpIHtcbiAgaWYgKHZlbmRvcikgcmV0dXJuIHZlbmRvci5jYWxsKGVsLCBzZWxlY3Rvcik7XG4gIHZhciBub2RlcyA9IGVsLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAobm9kZXNbaV0gPT0gZWwpIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn0iLCJ2YXIgc2VudGVuY2VDYXNlID0gcmVxdWlyZSgnc2VudGVuY2UtY2FzZScpXG5cbi8qKlxuICogUGFyYW0gY2FzZSBhIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHN0cmluZ1xuICogQHBhcmFtICB7U3RyaW5nfSBbbG9jYWxlXVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzdHJpbmcsIGxvY2FsZSkge1xuICByZXR1cm4gc2VudGVuY2VDYXNlKHN0cmluZywgbG9jYWxlLCAnLScpXG59XG4iLCIndXNlIHN0cmljdCc7XG52YXIgc3RyaWN0VXJpRW5jb2RlID0gcmVxdWlyZSgnc3RyaWN0LXVyaS1lbmNvZGUnKTtcblxuZXhwb3J0cy5leHRyYWN0ID0gZnVuY3Rpb24gKHN0cikge1xuXHRyZXR1cm4gc3RyLnNwbGl0KCc/JylbMV0gfHwgJyc7XG59O1xuXG5leHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gKHN0cikge1xuXHRpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcblx0XHRyZXR1cm4ge307XG5cdH1cblxuXHRzdHIgPSBzdHIudHJpbSgpLnJlcGxhY2UoL14oXFw/fCN8JikvLCAnJyk7XG5cblx0aWYgKCFzdHIpIHtcblx0XHRyZXR1cm4ge307XG5cdH1cblxuXHRyZXR1cm4gc3RyLnNwbGl0KCcmJykucmVkdWNlKGZ1bmN0aW9uIChyZXQsIHBhcmFtKSB7XG5cdFx0dmFyIHBhcnRzID0gcGFyYW0ucmVwbGFjZSgvXFwrL2csICcgJykuc3BsaXQoJz0nKTtcblx0XHQvLyBGaXJlZm94IChwcmUgNDApIGRlY29kZXMgYCUzRGAgdG8gYD1gXG5cdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy9xdWVyeS1zdHJpbmcvcHVsbC8zN1xuXHRcdHZhciBrZXkgPSBwYXJ0cy5zaGlmdCgpO1xuXHRcdHZhciB2YWwgPSBwYXJ0cy5sZW5ndGggPiAwID8gcGFydHMuam9pbignPScpIDogdW5kZWZpbmVkO1xuXG5cdFx0a2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KGtleSk7XG5cblx0XHQvLyBtaXNzaW5nIGA9YCBzaG91bGQgYmUgYG51bGxgOlxuXHRcdC8vIGh0dHA6Ly93My5vcmcvVFIvMjAxMi9XRC11cmwtMjAxMjA1MjQvI2NvbGxlY3QtdXJsLXBhcmFtZXRlcnNcblx0XHR2YWwgPSB2YWwgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBkZWNvZGVVUklDb21wb25lbnQodmFsKTtcblxuXHRcdGlmICghcmV0Lmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdHJldFtrZXldID0gdmFsO1xuXHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyZXRba2V5XSkpIHtcblx0XHRcdHJldFtrZXldLnB1c2godmFsKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0W2tleV0gPSBbcmV0W2tleV0sIHZhbF07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJldDtcblx0fSwge30pO1xufTtcblxuZXhwb3J0cy5zdHJpbmdpZnkgPSBmdW5jdGlvbiAob2JqKSB7XG5cdHJldHVybiBvYmogPyBPYmplY3Qua2V5cyhvYmopLnNvcnQoKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHRcdHZhciB2YWwgPSBvYmpba2V5XTtcblxuXHRcdGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmV0dXJuICcnO1xuXHRcdH1cblxuXHRcdGlmICh2YWwgPT09IG51bGwpIHtcblx0XHRcdHJldHVybiBrZXk7XG5cdFx0fVxuXG5cdFx0aWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuXHRcdFx0cmV0dXJuIHZhbC5zbGljZSgpLnNvcnQoKS5tYXAoZnVuY3Rpb24gKHZhbDIpIHtcblx0XHRcdFx0cmV0dXJuIHN0cmljdFVyaUVuY29kZShrZXkpICsgJz0nICsgc3RyaWN0VXJpRW5jb2RlKHZhbDIpO1xuXHRcdFx0fSkuam9pbignJicpO1xuXHRcdH1cblxuXHRcdHJldHVybiBzdHJpY3RVcmlFbmNvZGUoa2V5KSArICc9JyArIHN0cmljdFVyaUVuY29kZSh2YWwpO1xuXHR9KS5maWx0ZXIoZnVuY3Rpb24gKHgpIHtcblx0XHRyZXR1cm4geC5sZW5ndGggPiAwO1xuXHR9KS5qb2luKCcmJykgOiAnJztcbn07XG4iLCJcbi8qKlxuICogUmVkdWNlIGBhcnJgIHdpdGggYGZuYC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge01peGVkfSBpbml0aWFsXG4gKlxuICogVE9ETzogY29tYmF0aWJsZSBlcnJvciBoYW5kbGluZz9cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGFyciwgZm4sIGluaXRpYWwpeyAgXG4gIHZhciBpZHggPSAwO1xuICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcbiAgdmFyIGN1cnIgPSBhcmd1bWVudHMubGVuZ3RoID09IDNcbiAgICA/IGluaXRpYWxcbiAgICA6IGFycltpZHgrK107XG5cbiAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgIGN1cnIgPSBmbi5jYWxsKG51bGwsIGN1cnIsIGFycltpZHhdLCArK2lkeCwgYXJyKTtcbiAgfVxuICBcbiAgcmV0dXJuIGN1cnI7XG59OyIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0LCBBbGwgcmlnaHRzIHJlc2VydmVkLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuOyhmdW5jdGlvbiAodW5kZWZpbmVkKSB7XG5cbiAgdmFyIG9iamVjdFR5cGVzID0ge1xuICAgICdmdW5jdGlvbic6IHRydWUsXG4gICAgJ29iamVjdCc6IHRydWVcbiAgfTtcblxuICBmdW5jdGlvbiBjaGVja0dsb2JhbCh2YWx1ZSkge1xuICAgIHJldHVybiAodmFsdWUgJiYgdmFsdWUuT2JqZWN0ID09PSBPYmplY3QpID8gdmFsdWUgOiBudWxsO1xuICB9XG5cbiAgdmFyIGZyZWVFeHBvcnRzID0gKG9iamVjdFR5cGVzW3R5cGVvZiBleHBvcnRzXSAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlKSA/IGV4cG9ydHMgOiBudWxsO1xuICB2YXIgZnJlZU1vZHVsZSA9IChvYmplY3RUeXBlc1t0eXBlb2YgbW9kdWxlXSAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSkgPyBtb2R1bGUgOiBudWxsO1xuICB2YXIgZnJlZUdsb2JhbCA9IGNoZWNrR2xvYmFsKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUgJiYgdHlwZW9mIGdsb2JhbCA9PT0gJ29iamVjdCcgJiYgZ2xvYmFsKTtcbiAgdmFyIGZyZWVTZWxmID0gY2hlY2tHbG9iYWwob2JqZWN0VHlwZXNbdHlwZW9mIHNlbGZdICYmIHNlbGYpO1xuICB2YXIgZnJlZVdpbmRvdyA9IGNoZWNrR2xvYmFsKG9iamVjdFR5cGVzW3R5cGVvZiB3aW5kb3ddICYmIHdpbmRvdyk7XG4gIHZhciBtb2R1bGVFeHBvcnRzID0gKGZyZWVNb2R1bGUgJiYgZnJlZU1vZHVsZS5leHBvcnRzID09PSBmcmVlRXhwb3J0cykgPyBmcmVlRXhwb3J0cyA6IG51bGw7XG4gIHZhciB0aGlzR2xvYmFsID0gY2hlY2tHbG9iYWwob2JqZWN0VHlwZXNbdHlwZW9mIHRoaXNdICYmIHRoaXMpO1xuICB2YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgKChmcmVlV2luZG93ICE9PSAodGhpc0dsb2JhbCAmJiB0aGlzR2xvYmFsLndpbmRvdykpICYmIGZyZWVXaW5kb3cpIHx8IGZyZWVTZWxmIHx8IHRoaXNHbG9iYWwgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuICB2YXIgUnggPSB7XG4gICAgaW50ZXJuYWxzOiB7fSxcbiAgICBjb25maWc6IHtcbiAgICAgIFByb21pc2U6IHJvb3QuUHJvbWlzZVxuICAgIH0sXG4gICAgaGVscGVyczogeyB9XG4gIH07XG5cbiAgLy8gRGVmYXVsdHNcbiAgdmFyIG5vb3AgPSBSeC5oZWxwZXJzLm5vb3AgPSBmdW5jdGlvbiAoKSB7IH0sXG4gICAgaWRlbnRpdHkgPSBSeC5oZWxwZXJzLmlkZW50aXR5ID0gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0sXG4gICAgZGVmYXVsdE5vdyA9IFJ4LmhlbHBlcnMuZGVmYXVsdE5vdyA9IERhdGUubm93LFxuICAgIGRlZmF1bHRDb21wYXJlciA9IFJ4LmhlbHBlcnMuZGVmYXVsdENvbXBhcmVyID0gZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGlzRXF1YWwoeCwgeSk7IH0sXG4gICAgZGVmYXVsdFN1YkNvbXBhcmVyID0gUnguaGVscGVycy5kZWZhdWx0U3ViQ29tcGFyZXIgPSBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCA+IHkgPyAxIDogKHggPCB5ID8gLTEgOiAwKTsgfSxcbiAgICBkZWZhdWx0S2V5U2VyaWFsaXplciA9IFJ4LmhlbHBlcnMuZGVmYXVsdEtleVNlcmlhbGl6ZXIgPSBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC50b1N0cmluZygpOyB9LFxuICAgIGRlZmF1bHRFcnJvciA9IFJ4LmhlbHBlcnMuZGVmYXVsdEVycm9yID0gZnVuY3Rpb24gKGVycikgeyB0aHJvdyBlcnI7IH0sXG4gICAgaXNQcm9taXNlID0gUnguaGVscGVycy5pc1Byb21pc2UgPSBmdW5jdGlvbiAocCkgeyByZXR1cm4gISFwICYmIHR5cGVvZiBwLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgcC50aGVuID09PSAnZnVuY3Rpb24nOyB9LFxuICAgIGlzRnVuY3Rpb24gPSBSeC5oZWxwZXJzLmlzRnVuY3Rpb24gPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgICB2YXIgaXNGbiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicgfHwgZmFsc2U7XG4gICAgICB9O1xuXG4gICAgICAvLyBmYWxsYmFjayBmb3Igb2xkZXIgdmVyc2lvbnMgb2YgQ2hyb21lIGFuZCBTYWZhcmlcbiAgICAgIGlmIChpc0ZuKC94LykpIHtcbiAgICAgICAgaXNGbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpc0ZuO1xuICAgIH0oKSk7XG5cbiAgZnVuY3Rpb24gY2xvbmVBcnJheShhcnIpIHsgZm9yKHZhciBhID0gW10sIGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYS5wdXNoKGFycltpXSk7IH0gcmV0dXJuIGE7fVxuXG4gIHZhciBlcnJvck9iaiA9IHtlOiB7fX07XG4gIFxuICBmdW5jdGlvbiB0cnlDYXRjaGVyR2VuKHRyeUNhdGNoVGFyZ2V0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHRyeUNhdGNoZXIoKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gdHJ5Q2F0Y2hUYXJnZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JPYmouZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgdmFyIHRyeUNhdGNoID0gUnguaW50ZXJuYWxzLnRyeUNhdGNoID0gZnVuY3Rpb24gdHJ5Q2F0Y2goZm4pIHtcbiAgICBpZiAoIWlzRnVuY3Rpb24oZm4pKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ2ZuIG11c3QgYmUgYSBmdW5jdGlvbicpOyB9XG4gICAgcmV0dXJuIHRyeUNhdGNoZXJHZW4oZm4pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHRocm93ZXIoZSkge1xuICAgIHRocm93IGU7XG4gIH1cblxuICBSeC5jb25maWcubG9uZ1N0YWNrU3VwcG9ydCA9IGZhbHNlO1xuICB2YXIgaGFzU3RhY2tzID0gZmFsc2UsIHN0YWNrcyA9IHRyeUNhdGNoKGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKCk7IH0pKCk7XG4gIGhhc1N0YWNrcyA9ICEhc3RhY2tzLmUgJiYgISFzdGFja3MuZS5zdGFjaztcblxuICAvLyBBbGwgY29kZSBhZnRlciB0aGlzIHBvaW50IHdpbGwgYmUgZmlsdGVyZWQgZnJvbSBzdGFjayB0cmFjZXMgcmVwb3J0ZWQgYnkgUnhKU1xuICB2YXIgclN0YXJ0aW5nTGluZSA9IGNhcHR1cmVMaW5lKCksIHJGaWxlTmFtZTtcblxuICB2YXIgU1RBQ0tfSlVNUF9TRVBBUkFUT1IgPSAnRnJvbSBwcmV2aW91cyBldmVudDonO1xuXG4gIGZ1bmN0aW9uIG1ha2VTdGFja1RyYWNlTG9uZyhlcnJvciwgb2JzZXJ2YWJsZSkge1xuICAgIC8vIElmIHBvc3NpYmxlLCB0cmFuc2Zvcm0gdGhlIGVycm9yIHN0YWNrIHRyYWNlIGJ5IHJlbW92aW5nIE5vZGUgYW5kIFJ4SlNcbiAgICAvLyBjcnVmdCwgdGhlbiBjb25jYXRlbmF0aW5nIHdpdGggdGhlIHN0YWNrIHRyYWNlIG9mIGBvYnNlcnZhYmxlYC5cbiAgICBpZiAoaGFzU3RhY2tzICYmXG4gICAgICAgIG9ic2VydmFibGUuc3RhY2sgJiZcbiAgICAgICAgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBlcnJvciAhPT0gbnVsbCAmJlxuICAgICAgICBlcnJvci5zdGFjayAmJlxuICAgICAgICBlcnJvci5zdGFjay5pbmRleE9mKFNUQUNLX0pVTVBfU0VQQVJBVE9SKSA9PT0gLTFcbiAgICApIHtcbiAgICAgIHZhciBzdGFja3MgPSBbXTtcbiAgICAgIGZvciAodmFyIG8gPSBvYnNlcnZhYmxlOyAhIW87IG8gPSBvLnNvdXJjZSkge1xuICAgICAgICBpZiAoby5zdGFjaykge1xuICAgICAgICAgIHN0YWNrcy51bnNoaWZ0KG8uc3RhY2spO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzdGFja3MudW5zaGlmdChlcnJvci5zdGFjayk7XG5cbiAgICAgIHZhciBjb25jYXRlZFN0YWNrcyA9IHN0YWNrcy5qb2luKCdcXG4nICsgU1RBQ0tfSlVNUF9TRVBBUkFUT1IgKyAnXFxuJyk7XG4gICAgICBlcnJvci5zdGFjayA9IGZpbHRlclN0YWNrU3RyaW5nKGNvbmNhdGVkU3RhY2tzKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmaWx0ZXJTdGFja1N0cmluZyhzdGFja1N0cmluZykge1xuICAgIHZhciBsaW5lcyA9IHN0YWNrU3RyaW5nLnNwbGl0KCdcXG4nKSwgZGVzaXJlZExpbmVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGxpbmVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgbGluZSA9IGxpbmVzW2ldO1xuXG4gICAgICBpZiAoIWlzSW50ZXJuYWxGcmFtZShsaW5lKSAmJiAhaXNOb2RlRnJhbWUobGluZSkgJiYgbGluZSkge1xuICAgICAgICBkZXNpcmVkTGluZXMucHVzaChsaW5lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlc2lyZWRMaW5lcy5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzSW50ZXJuYWxGcmFtZShzdGFja0xpbmUpIHtcbiAgICB2YXIgZmlsZU5hbWVBbmRMaW5lTnVtYmVyID0gZ2V0RmlsZU5hbWVBbmRMaW5lTnVtYmVyKHN0YWNrTGluZSk7XG4gICAgaWYgKCFmaWxlTmFtZUFuZExpbmVOdW1iZXIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGZpbGVOYW1lID0gZmlsZU5hbWVBbmRMaW5lTnVtYmVyWzBdLCBsaW5lTnVtYmVyID0gZmlsZU5hbWVBbmRMaW5lTnVtYmVyWzFdO1xuXG4gICAgcmV0dXJuIGZpbGVOYW1lID09PSByRmlsZU5hbWUgJiZcbiAgICAgIGxpbmVOdW1iZXIgPj0gclN0YXJ0aW5nTGluZSAmJlxuICAgICAgbGluZU51bWJlciA8PSByRW5kaW5nTGluZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzTm9kZUZyYW1lKHN0YWNrTGluZSkge1xuICAgIHJldHVybiBzdGFja0xpbmUuaW5kZXhPZignKG1vZHVsZS5qczonKSAhPT0gLTEgfHxcbiAgICAgIHN0YWNrTGluZS5pbmRleE9mKCcobm9kZS5qczonKSAhPT0gLTE7XG4gIH1cblxuICBmdW5jdGlvbiBjYXB0dXJlTGluZSgpIHtcbiAgICBpZiAoIWhhc1N0YWNrcykgeyByZXR1cm47IH1cblxuICAgIHRyeSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB2YXIgbGluZXMgPSBlLnN0YWNrLnNwbGl0KCdcXG4nKTtcbiAgICAgIHZhciBmaXJzdExpbmUgPSBsaW5lc1swXS5pbmRleE9mKCdAJykgPiAwID8gbGluZXNbMV0gOiBsaW5lc1syXTtcbiAgICAgIHZhciBmaWxlTmFtZUFuZExpbmVOdW1iZXIgPSBnZXRGaWxlTmFtZUFuZExpbmVOdW1iZXIoZmlyc3RMaW5lKTtcbiAgICAgIGlmICghZmlsZU5hbWVBbmRMaW5lTnVtYmVyKSB7IHJldHVybjsgfVxuXG4gICAgICByRmlsZU5hbWUgPSBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMF07XG4gICAgICByZXR1cm4gZmlsZU5hbWVBbmRMaW5lTnVtYmVyWzFdO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZpbGVOYW1lQW5kTGluZU51bWJlcihzdGFja0xpbmUpIHtcbiAgICAvLyBOYW1lZCBmdW5jdGlvbnM6ICdhdCBmdW5jdGlvbk5hbWUgKGZpbGVuYW1lOmxpbmVOdW1iZXI6Y29sdW1uTnVtYmVyKSdcbiAgICB2YXIgYXR0ZW1wdDEgPSAvYXQgLisgXFwoKC4rKTooXFxkKyk6KD86XFxkKylcXCkkLy5leGVjKHN0YWNrTGluZSk7XG4gICAgaWYgKGF0dGVtcHQxKSB7IHJldHVybiBbYXR0ZW1wdDFbMV0sIE51bWJlcihhdHRlbXB0MVsyXSldOyB9XG5cbiAgICAvLyBBbm9ueW1vdXMgZnVuY3Rpb25zOiAnYXQgZmlsZW5hbWU6bGluZU51bWJlcjpjb2x1bW5OdW1iZXInXG4gICAgdmFyIGF0dGVtcHQyID0gL2F0IChbXiBdKyk6KFxcZCspOig/OlxcZCspJC8uZXhlYyhzdGFja0xpbmUpO1xuICAgIGlmIChhdHRlbXB0MikgeyByZXR1cm4gW2F0dGVtcHQyWzFdLCBOdW1iZXIoYXR0ZW1wdDJbMl0pXTsgfVxuXG4gICAgLy8gRmlyZWZveCBzdHlsZTogJ2Z1bmN0aW9uQGZpbGVuYW1lOmxpbmVOdW1iZXIgb3IgQGZpbGVuYW1lOmxpbmVOdW1iZXInXG4gICAgdmFyIGF0dGVtcHQzID0gLy4qQCguKyk6KFxcZCspJC8uZXhlYyhzdGFja0xpbmUpO1xuICAgIGlmIChhdHRlbXB0MykgeyByZXR1cm4gW2F0dGVtcHQzWzFdLCBOdW1iZXIoYXR0ZW1wdDNbMl0pXTsgfVxuICB9XG5cbiAgdmFyIEVtcHR5RXJyb3IgPSBSeC5FbXB0eUVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gJ1NlcXVlbmNlIGNvbnRhaW5zIG5vIGVsZW1lbnRzLic7XG4gICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgfTtcbiAgRW1wdHlFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG4gIEVtcHR5RXJyb3IucHJvdG90eXBlLm5hbWUgPSAnRW1wdHlFcnJvcic7XG5cbiAgdmFyIE9iamVjdERpc3Bvc2VkRXJyb3IgPSBSeC5PYmplY3REaXNwb3NlZEVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gJ09iamVjdCBoYXMgYmVlbiBkaXNwb3NlZCc7XG4gICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgfTtcbiAgT2JqZWN0RGlzcG9zZWRFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG4gIE9iamVjdERpc3Bvc2VkRXJyb3IucHJvdG90eXBlLm5hbWUgPSAnT2JqZWN0RGlzcG9zZWRFcnJvcic7XG5cbiAgdmFyIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yID0gUnguQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gJ0FyZ3VtZW50IG91dCBvZiByYW5nZSc7XG4gICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgfTtcbiAgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICBBcmd1bWVudE91dE9mUmFuZ2VFcnJvci5wcm90b3R5cGUubmFtZSA9ICdBcmd1bWVudE91dE9mUmFuZ2VFcnJvcic7XG5cbiAgdmFyIE5vdFN1cHBvcnRlZEVycm9yID0gUnguTm90U3VwcG9ydGVkRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2UgfHwgJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQnO1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gIH07XG4gIE5vdFN1cHBvcnRlZEVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbiAgTm90U3VwcG9ydGVkRXJyb3IucHJvdG90eXBlLm5hbWUgPSAnTm90U3VwcG9ydGVkRXJyb3InO1xuXG4gIHZhciBOb3RJbXBsZW1lbnRlZEVycm9yID0gUnguTm90SW1wbGVtZW50ZWRFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZSB8fCAnVGhpcyBvcGVyYXRpb24gaXMgbm90IGltcGxlbWVudGVkJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBOb3RJbXBsZW1lbnRlZEVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbiAgTm90SW1wbGVtZW50ZWRFcnJvci5wcm90b3R5cGUubmFtZSA9ICdOb3RJbXBsZW1lbnRlZEVycm9yJztcblxuICB2YXIgbm90SW1wbGVtZW50ZWQgPSBSeC5oZWxwZXJzLm5vdEltcGxlbWVudGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gIH07XG5cbiAgdmFyIG5vdFN1cHBvcnRlZCA9IFJ4LmhlbHBlcnMubm90U3VwcG9ydGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRocm93IG5ldyBOb3RTdXBwb3J0ZWRFcnJvcigpO1xuICB9O1xuXG4gIC8vIFNoaW0gaW4gaXRlcmF0b3Igc3VwcG9ydFxuICB2YXIgJGl0ZXJhdG9yJCA9ICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5pdGVyYXRvcikgfHxcbiAgICAnX2VzNnNoaW1faXRlcmF0b3JfJztcbiAgLy8gQnVnIGZvciBtb3ppbGxhIHZlcnNpb25cbiAgaWYgKHJvb3QuU2V0ICYmIHR5cGVvZiBuZXcgcm9vdC5TZXQoKVsnQEBpdGVyYXRvciddID09PSAnZnVuY3Rpb24nKSB7XG4gICAgJGl0ZXJhdG9yJCA9ICdAQGl0ZXJhdG9yJztcbiAgfVxuXG4gIHZhciBkb25lRW51bWVyYXRvciA9IFJ4LmRvbmVFbnVtZXJhdG9yID0geyBkb25lOiB0cnVlLCB2YWx1ZTogdW5kZWZpbmVkIH07XG5cbiAgdmFyIGlzSXRlcmFibGUgPSBSeC5oZWxwZXJzLmlzSXRlcmFibGUgPSBmdW5jdGlvbiAobykge1xuICAgIHJldHVybiBvICYmIG9bJGl0ZXJhdG9yJF0gIT09IHVuZGVmaW5lZDtcbiAgfTtcblxuICB2YXIgaXNBcnJheUxpa2UgPSBSeC5oZWxwZXJzLmlzQXJyYXlMaWtlID0gZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gbyAmJiBvLmxlbmd0aCAhPT0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIFJ4LmhlbHBlcnMuaXRlcmF0b3IgPSAkaXRlcmF0b3IkO1xuXG4gIHZhciBiaW5kQ2FsbGJhY2sgPSBSeC5pbnRlcm5hbHMuYmluZENhbGxiYWNrID0gZnVuY3Rpb24gKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzQXJnID09PSAndW5kZWZpbmVkJykgeyByZXR1cm4gZnVuYzsgfVxuICAgIHN3aXRjaChhcmdDb3VudCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnKVxuICAgICAgICB9O1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmcpO1xuICAgICAgICB9O1xuICAgICAgY2FzZSAyOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgaW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgY2FzZSAzOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfTtcblxuICAvKiogVXNlZCB0byBkZXRlcm1pbmUgaWYgdmFsdWVzIGFyZSBvZiB0aGUgbGFuZ3VhZ2UgdHlwZSBPYmplY3QgKi9cbiAgdmFyIGRvbnRFbnVtcyA9IFsndG9TdHJpbmcnLFxuICAgICd0b0xvY2FsZVN0cmluZycsXG4gICAgJ3ZhbHVlT2YnLFxuICAgICdoYXNPd25Qcm9wZXJ0eScsXG4gICAgJ2lzUHJvdG90eXBlT2YnLFxuICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsXG4gICAgJ2NvbnN0cnVjdG9yJ10sXG4gIGRvbnRFbnVtc0xlbmd0aCA9IGRvbnRFbnVtcy5sZW5ndGg7XG5cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG4gICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG4gICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG4gICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG4gICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG4gICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXScsXG4gICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJztcblxudmFyIGFycmF5QnVmZmVyVGFnID0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyxcbiAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgZmxvYXQ2NFRhZyA9ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nLFxuICAgIGludDhUYWcgPSAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICBpbnQzMlRhZyA9ICdbb2JqZWN0IEludDMyQXJyYXldJyxcbiAgICB1aW50OFRhZyA9ICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuICAgIHVpbnQxNlRhZyA9ICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG4gICAgdWludDMyVGFnID0gJ1tvYmplY3QgVWludDMyQXJyYXldJztcblxudmFyIHR5cGVkQXJyYXlUYWdzID0ge307XG50eXBlZEFycmF5VGFnc1tmbG9hdDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Zsb2F0NjRUYWddID1cbnR5cGVkQXJyYXlUYWdzW2ludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW2ludDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQ4VGFnXSA9XG50eXBlZEFycmF5VGFnc1t1aW50OENsYW1wZWRUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDE2VGFnXSA9XG50eXBlZEFycmF5VGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcbnR5cGVkQXJyYXlUYWdzW2FyZ3NUYWddID0gdHlwZWRBcnJheVRhZ3NbYXJyYXlUYWddID1cbnR5cGVkQXJyYXlUYWdzW2FycmF5QnVmZmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Jvb2xUYWddID1cbnR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID0gdHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID1cbnR5cGVkQXJyYXlUYWdzW2Z1bmNUYWddID0gdHlwZWRBcnJheVRhZ3NbbWFwVGFnXSA9XG50eXBlZEFycmF5VGFnc1tudW1iZXJUYWddID0gdHlwZWRBcnJheVRhZ3Nbb2JqZWN0VGFnXSA9XG50eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID0gdHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9XG50eXBlZEFycmF5VGFnc1tzdHJpbmdUYWddID0gdHlwZWRBcnJheVRhZ3Nbd2Vha01hcFRhZ10gPSBmYWxzZTtcblxudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZSxcbiAgICBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5LFxuICAgIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmcsXG4gICAgTUFYX1NBRkVfSU5URUdFUiA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG5cbnZhciBrZXlzID0gT2JqZWN0LmtleXMgfHwgKGZ1bmN0aW9uKCkge1xuICAgIHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksXG4gICAgICAgIGhhc0RvbnRFbnVtQnVnID0gISh7IHRvU3RyaW5nOiBudWxsIH0pLnByb3BlcnR5SXNFbnVtZXJhYmxlKCd0b1N0cmluZycpLFxuICAgICAgICBkb250RW51bXMgPSBbXG4gICAgICAgICAgJ3RvU3RyaW5nJyxcbiAgICAgICAgICAndG9Mb2NhbGVTdHJpbmcnLFxuICAgICAgICAgICd2YWx1ZU9mJyxcbiAgICAgICAgICAnaGFzT3duUHJvcGVydHknLFxuICAgICAgICAgICdpc1Byb3RvdHlwZU9mJyxcbiAgICAgICAgICAncHJvcGVydHlJc0VudW1lcmFibGUnLFxuICAgICAgICAgICdjb25zdHJ1Y3RvcidcbiAgICAgICAgXSxcbiAgICAgICAgZG9udEVudW1zTGVuZ3RoID0gZG9udEVudW1zLmxlbmd0aDtcblxuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyAmJiAodHlwZW9mIG9iaiAhPT0gJ2Z1bmN0aW9uJyB8fCBvYmogPT09IG51bGwpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5rZXlzIGNhbGxlZCBvbiBub24tb2JqZWN0Jyk7XG4gICAgICB9XG5cbiAgICAgIHZhciByZXN1bHQgPSBbXSwgcHJvcCwgaTtcblxuICAgICAgZm9yIChwcm9wIGluIG9iaikge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2gocHJvcCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGhhc0RvbnRFbnVtQnVnKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBkb250RW51bXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgZG9udEVudW1zW2ldKSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goZG9udEVudW1zW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfSgpKTtcblxuZnVuY3Rpb24gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgdmFyIG9ialByb3BzID0ga2V5cyhvYmplY3QpLFxuICAgICAgb2JqTGVuZ3RoID0gb2JqUHJvcHMubGVuZ3RoLFxuICAgICAgb3RoUHJvcHMgPSBrZXlzKG90aGVyKSxcbiAgICAgIG90aExlbmd0aCA9IG90aFByb3BzLmxlbmd0aDtcblxuICBpZiAob2JqTGVuZ3RoICE9PSBvdGhMZW5ndGggJiYgIWlzTG9vc2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGluZGV4ID0gb2JqTGVuZ3RoLCBrZXk7XG4gIHdoaWxlIChpbmRleC0tKSB7XG4gICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgIGlmICghKGlzTG9vc2UgPyBrZXkgaW4gb3RoZXIgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLCBrZXkpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICB2YXIgc2tpcEN0b3IgPSBpc0xvb3NlO1xuICB3aGlsZSAoKytpbmRleCA8IG9iakxlbmd0aCkge1xuICAgIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltrZXldLFxuICAgICAgICByZXN1bHQ7XG5cbiAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZCA/IGVxdWFsRnVuYyhvYmpWYWx1ZSwgb3RoVmFsdWUsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSA6IHJlc3VsdCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc2tpcEN0b3IgfHwgKHNraXBDdG9yID0ga2V5ID09PSAnY29uc3RydWN0b3InKTtcbiAgfVxuICBpZiAoIXNraXBDdG9yKSB7XG4gICAgdmFyIG9iakN0b3IgPSBvYmplY3QuY29uc3RydWN0b3IsXG4gICAgICAgIG90aEN0b3IgPSBvdGhlci5jb25zdHJ1Y3RvcjtcblxuICAgIGlmIChvYmpDdG9yICE9PSBvdGhDdG9yICYmXG4gICAgICAgICgnY29uc3RydWN0b3InIGluIG9iamVjdCAmJiAnY29uc3RydWN0b3InIGluIG90aGVyKSAmJlxuICAgICAgICAhKHR5cGVvZiBvYmpDdG9yID09PSAnZnVuY3Rpb24nICYmIG9iakN0b3IgaW5zdGFuY2VvZiBvYmpDdG9yICYmXG4gICAgICAgICAgdHlwZW9mIG90aEN0b3IgPT09ICdmdW5jdGlvbicgJiYgb3RoQ3RvciBpbnN0YW5jZW9mIG90aEN0b3IpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIHRhZykge1xuICBzd2l0Y2ggKHRhZykge1xuICAgIGNhc2UgYm9vbFRhZzpcbiAgICBjYXNlIGRhdGVUYWc6XG4gICAgICByZXR1cm4gK29iamVjdCA9PT0gK290aGVyO1xuXG4gICAgY2FzZSBlcnJvclRhZzpcbiAgICAgIHJldHVybiBvYmplY3QubmFtZSA9PT0gb3RoZXIubmFtZSAmJiBvYmplY3QubWVzc2FnZSA9PT0gb3RoZXIubWVzc2FnZTtcblxuICAgIGNhc2UgbnVtYmVyVGFnOlxuICAgICAgcmV0dXJuIChvYmplY3QgIT09ICtvYmplY3QpID9cbiAgICAgICAgb3RoZXIgIT09ICtvdGhlciA6XG4gICAgICAgIG9iamVjdCA9PT0gK290aGVyO1xuXG4gICAgY2FzZSByZWdleHBUYWc6XG4gICAgY2FzZSBzdHJpbmdUYWc6XG4gICAgICByZXR1cm4gb2JqZWN0ID09PSAob3RoZXIgKyAnJyk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgaXNPYmplY3QgPSBSeC5pbnRlcm5hbHMuaXNPYmplY3QgPSBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT09ICdvYmplY3QnIHx8IHR5cGUgPT09ICdmdW5jdGlvbicpO1xufTtcblxuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCc7XG59XG5cbmZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG59XG5cbnZhciBpc0hvc3RPYmplY3QgPSAoZnVuY3Rpb24oKSB7XG4gIHRyeSB7XG4gICAgT2JqZWN0KHsgJ3RvU3RyaW5nJzogMCB9ICsgJycpO1xuICB9IGNhdGNoKGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlLnRvU3RyaW5nICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiAodmFsdWUgKyAnJykgPT09ICdzdHJpbmcnO1xuICB9O1xufSgpKTtcblxuZnVuY3Rpb24gaXNUeXBlZEFycmF5KHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgISF0eXBlZEFycmF5VGFnc1tvYmpUb1N0cmluZy5jYWxsKHZhbHVlKV07XG59XG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09PSBhcnJheVRhZztcbn07XG5cbmZ1bmN0aW9uIGFycmF5U29tZSAoYXJyYXksIHByZWRpY2F0ZSkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSwgb3RoZXIsIGVxdWFsRnVuYywgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICBvdGhMZW5ndGggPSBvdGhlci5sZW5ndGg7XG5cbiAgaWYgKGFyckxlbmd0aCAhPT0gb3RoTGVuZ3RoICYmICEoaXNMb29zZSAmJiBvdGhMZW5ndGggPiBhcnJMZW5ndGgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIElnbm9yZSBub24taW5kZXggcHJvcGVydGllcy5cbiAgd2hpbGUgKCsraW5kZXggPCBhcnJMZW5ndGgpIHtcbiAgICB2YXIgYXJyVmFsdWUgPSBhcnJheVtpbmRleF0sXG4gICAgICAgIG90aFZhbHVlID0gb3RoZXJbaW5kZXhdLFxuICAgICAgICByZXN1bHQ7XG5cbiAgICBpZiAocmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgaWYgKGlzTG9vc2UpIHtcbiAgICAgIGlmICghYXJyYXlTb21lKG90aGVyLCBmdW5jdGlvbihvdGhWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG4gICAgICAgICAgfSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIShhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gYmFzZUlzRXF1YWxEZWVwKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgdmFyIG9iaklzQXJyID0gaXNBcnJheShvYmplY3QpLFxuICAgICAgb3RoSXNBcnIgPSBpc0FycmF5KG90aGVyKSxcbiAgICAgIG9ialRhZyA9IGFycmF5VGFnLFxuICAgICAgb3RoVGFnID0gYXJyYXlUYWc7XG5cbiAgaWYgKCFvYmpJc0Fycikge1xuICAgIG9ialRhZyA9IG9ialRvU3RyaW5nLmNhbGwob2JqZWN0KTtcbiAgICBpZiAob2JqVGFnID09PSBhcmdzVGFnKSB7XG4gICAgICBvYmpUYWcgPSBvYmplY3RUYWc7XG4gICAgfSBlbHNlIGlmIChvYmpUYWcgIT09IG9iamVjdFRhZykge1xuICAgICAgb2JqSXNBcnIgPSBpc1R5cGVkQXJyYXkob2JqZWN0KTtcbiAgICB9XG4gIH1cbiAgaWYgKCFvdGhJc0Fycikge1xuICAgIG90aFRhZyA9IG9ialRvU3RyaW5nLmNhbGwob3RoZXIpO1xuICAgIGlmIChvdGhUYWcgPT09IGFyZ3NUYWcpIHtcbiAgICAgIG90aFRhZyA9IG9iamVjdFRhZztcbiAgICB9XG4gIH1cbiAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09PSBvYmplY3RUYWcgJiYgIWlzSG9zdE9iamVjdChvYmplY3QpLFxuICAgICAgb3RoSXNPYmogPSBvdGhUYWcgPT09IG9iamVjdFRhZyAmJiAhaXNIb3N0T2JqZWN0KG90aGVyKSxcbiAgICAgIGlzU2FtZVRhZyA9IG9ialRhZyA9PT0gb3RoVGFnO1xuXG4gIGlmIChpc1NhbWVUYWcgJiYgIShvYmpJc0FyciB8fCBvYmpJc09iaikpIHtcbiAgICByZXR1cm4gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCBvYmpUYWcpO1xuICB9XG4gIGlmICghaXNMb29zZSkge1xuICAgIHZhciBvYmpJc1dyYXBwZWQgPSBvYmpJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ19fd3JhcHBlZF9fJyksXG4gICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsICdfX3dyYXBwZWRfXycpO1xuXG4gICAgaWYgKG9iaklzV3JhcHBlZCB8fCBvdGhJc1dyYXBwZWQpIHtcbiAgICAgIHJldHVybiBlcXVhbEZ1bmMob2JqSXNXcmFwcGVkID8gb2JqZWN0LnZhbHVlKCkgOiBvYmplY3QsIG90aElzV3JhcHBlZCA/IG90aGVyLnZhbHVlKCkgOiBvdGhlciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuICAgIH1cbiAgfVxuICBpZiAoIWlzU2FtZVRhZykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG4gIC8vIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIGRldGVjdGluZyBjaXJjdWxhciByZWZlcmVuY2VzIHNlZSBodHRwczovL2VzNS5naXRodWIuaW8vI0pPLlxuICBzdGFja0EgfHwgKHN0YWNrQSA9IFtdKTtcbiAgc3RhY2tCIHx8IChzdGFja0IgPSBbXSk7XG5cbiAgdmFyIGxlbmd0aCA9IHN0YWNrQS5sZW5ndGg7XG4gIHdoaWxlIChsZW5ndGgtLSkge1xuICAgIGlmIChzdGFja0FbbGVuZ3RoXSA9PT0gb2JqZWN0KSB7XG4gICAgICByZXR1cm4gc3RhY2tCW2xlbmd0aF0gPT09IG90aGVyO1xuICAgIH1cbiAgfVxuICAvLyBBZGQgYG9iamVjdGAgYW5kIGBvdGhlcmAgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICBzdGFja0EucHVzaChvYmplY3QpO1xuICBzdGFja0IucHVzaChvdGhlcik7XG5cbiAgdmFyIHJlc3VsdCA9IChvYmpJc0FyciA/IGVxdWFsQXJyYXlzIDogZXF1YWxPYmplY3RzKShvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcblxuICBzdGFja0EucG9wKCk7XG4gIHN0YWNrQi5wb3AoKTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gIGlmICh2YWx1ZSA9PT0gb3RoZXIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCB8fCBvdGhlciA9PSBudWxsIHx8ICghaXNPYmplY3QodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyO1xuICB9XG4gIHJldHVybiBiYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiYXNlSXNFcXVhbCwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xufVxuXG52YXIgaXNFcXVhbCA9IFJ4LmludGVybmFscy5pc0VxdWFsID0gZnVuY3Rpb24gKHZhbHVlLCBvdGhlcikge1xuICByZXR1cm4gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyKTtcbn07XG5cbiAgdmFyIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgICAgIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xuXG4gIHZhciBpbmhlcml0cyA9IFJ4LmludGVybmFscy5pbmhlcml0cyA9IGZ1bmN0aW9uIChjaGlsZCwgcGFyZW50KSB7XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfVxuICAgIF9fLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7XG4gICAgY2hpbGQucHJvdG90eXBlID0gbmV3IF9fKCk7XG4gIH07XG5cbiAgdmFyIGFkZFByb3BlcnRpZXMgPSBSeC5pbnRlcm5hbHMuYWRkUHJvcGVydGllcyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICBmb3IodmFyIHNvdXJjZXMgPSBbXSwgaSA9IDEsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykgeyBzb3VyY2VzLnB1c2goYXJndW1lbnRzW2ldKTsgfVxuICAgIGZvciAodmFyIGlkeCA9IDAsIGxuID0gc291cmNlcy5sZW5ndGg7IGlkeCA8IGxuOyBpZHgrKykge1xuICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbaWR4XTtcbiAgICAgIGZvciAodmFyIHByb3AgaW4gc291cmNlKSB7XG4gICAgICAgIG9ialtwcm9wXSA9IHNvdXJjZVtwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gUnggVXRpbHNcbiAgdmFyIGFkZFJlZiA9IFJ4LmludGVybmFscy5hZGRSZWYgPSBmdW5jdGlvbiAoeHMsIHIpIHtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoci5nZXREaXNwb3NhYmxlKCksIHhzLnN1YnNjcmliZShvYnNlcnZlcikpO1xuICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGFycmF5SW5pdGlhbGl6ZShjb3VudCwgZmFjdG9yeSkge1xuICAgIHZhciBhID0gbmV3IEFycmF5KGNvdW50KTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgIGFbaV0gPSBmYWN0b3J5KCk7XG4gICAgfVxuICAgIHJldHVybiBhO1xuICB9XG5cbiAgZnVuY3Rpb24gSW5kZXhlZEl0ZW0oaWQsIHZhbHVlKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgfVxuXG4gIEluZGV4ZWRJdGVtLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICB2YXIgYyA9IHRoaXMudmFsdWUuY29tcGFyZVRvKG90aGVyLnZhbHVlKTtcbiAgICBjID09PSAwICYmIChjID0gdGhpcy5pZCAtIG90aGVyLmlkKTtcbiAgICByZXR1cm4gYztcbiAgfTtcblxuICB2YXIgUHJpb3JpdHlRdWV1ZSA9IFJ4LmludGVybmFscy5Qcmlvcml0eVF1ZXVlID0gZnVuY3Rpb24gKGNhcGFjaXR5KSB7XG4gICAgdGhpcy5pdGVtcyA9IG5ldyBBcnJheShjYXBhY2l0eSk7XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuICB9O1xuXG4gIHZhciBwcmlvcml0eVByb3RvID0gUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGU7XG4gIHByaW9yaXR5UHJvdG8uaXNIaWdoZXJQcmlvcml0eSA9IGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1zW2xlZnRdLmNvbXBhcmVUbyh0aGlzLml0ZW1zW3JpZ2h0XSkgPCAwO1xuICB9O1xuXG4gIHByaW9yaXR5UHJvdG8ucGVyY29sYXRlID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgaWYgKGluZGV4ID49IHRoaXMubGVuZ3RoIHx8IGluZGV4IDwgMCkgeyByZXR1cm47IH1cbiAgICB2YXIgcGFyZW50ID0gaW5kZXggLSAxID4+IDE7XG4gICAgaWYgKHBhcmVudCA8IDAgfHwgcGFyZW50ID09PSBpbmRleCkgeyByZXR1cm47IH1cbiAgICBpZiAodGhpcy5pc0hpZ2hlclByaW9yaXR5KGluZGV4LCBwYXJlbnQpKSB7XG4gICAgICB2YXIgdGVtcCA9IHRoaXMuaXRlbXNbaW5kZXhdO1xuICAgICAgdGhpcy5pdGVtc1tpbmRleF0gPSB0aGlzLml0ZW1zW3BhcmVudF07XG4gICAgICB0aGlzLml0ZW1zW3BhcmVudF0gPSB0ZW1wO1xuICAgICAgdGhpcy5wZXJjb2xhdGUocGFyZW50KTtcbiAgICB9XG4gIH07XG5cbiAgcHJpb3JpdHlQcm90by5oZWFwaWZ5ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgK2luZGV4IHx8IChpbmRleCA9IDApO1xuICAgIGlmIChpbmRleCA+PSB0aGlzLmxlbmd0aCB8fCBpbmRleCA8IDApIHsgcmV0dXJuOyB9XG4gICAgdmFyIGxlZnQgPSAyICogaW5kZXggKyAxLFxuICAgICAgICByaWdodCA9IDIgKiBpbmRleCArIDIsXG4gICAgICAgIGZpcnN0ID0gaW5kZXg7XG4gICAgaWYgKGxlZnQgPCB0aGlzLmxlbmd0aCAmJiB0aGlzLmlzSGlnaGVyUHJpb3JpdHkobGVmdCwgZmlyc3QpKSB7XG4gICAgICBmaXJzdCA9IGxlZnQ7XG4gICAgfVxuICAgIGlmIChyaWdodCA8IHRoaXMubGVuZ3RoICYmIHRoaXMuaXNIaWdoZXJQcmlvcml0eShyaWdodCwgZmlyc3QpKSB7XG4gICAgICBmaXJzdCA9IHJpZ2h0O1xuICAgIH1cbiAgICBpZiAoZmlyc3QgIT09IGluZGV4KSB7XG4gICAgICB2YXIgdGVtcCA9IHRoaXMuaXRlbXNbaW5kZXhdO1xuICAgICAgdGhpcy5pdGVtc1tpbmRleF0gPSB0aGlzLml0ZW1zW2ZpcnN0XTtcbiAgICAgIHRoaXMuaXRlbXNbZmlyc3RdID0gdGVtcDtcbiAgICAgIHRoaXMuaGVhcGlmeShmaXJzdCk7XG4gICAgfVxuICB9O1xuXG4gIHByaW9yaXR5UHJvdG8ucGVlayA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuaXRlbXNbMF0udmFsdWU7IH07XG5cbiAgcHJpb3JpdHlQcm90by5yZW1vdmVBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIHRoaXMuaXRlbXNbaW5kZXhdID0gdGhpcy5pdGVtc1stLXRoaXMubGVuZ3RoXTtcbiAgICB0aGlzLml0ZW1zW3RoaXMubGVuZ3RoXSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmhlYXBpZnkoKTtcbiAgfTtcblxuICBwcmlvcml0eVByb3RvLmRlcXVldWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlc3VsdCA9IHRoaXMucGVlaygpO1xuICAgIHRoaXMucmVtb3ZlQXQoMCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBwcmlvcml0eVByb3RvLmVucXVldWUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIHZhciBpbmRleCA9IHRoaXMubGVuZ3RoKys7XG4gICAgdGhpcy5pdGVtc1tpbmRleF0gPSBuZXcgSW5kZXhlZEl0ZW0oUHJpb3JpdHlRdWV1ZS5jb3VudCsrLCBpdGVtKTtcbiAgICB0aGlzLnBlcmNvbGF0ZShpbmRleCk7XG4gIH07XG5cbiAgcHJpb3JpdHlQcm90by5yZW1vdmUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuaXRlbXNbaV0udmFsdWUgPT09IGl0ZW0pIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdChpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbiAgUHJpb3JpdHlRdWV1ZS5jb3VudCA9IDA7XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgYSBncm91cCBvZiBkaXNwb3NhYmxlIHJlc291cmNlcyB0aGF0IGFyZSBkaXNwb3NlZCB0b2dldGhlci5cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICB2YXIgQ29tcG9zaXRlRGlzcG9zYWJsZSA9IFJ4LkNvbXBvc2l0ZURpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXSwgaSwgbGVuO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgfVxuICAgIHRoaXMuZGlzcG9zYWJsZXMgPSBhcmdzO1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgIHRoaXMubGVuZ3RoID0gYXJncy5sZW5ndGg7XG4gIH07XG5cbiAgdmFyIENvbXBvc2l0ZURpc3Bvc2FibGVQcm90b3R5cGUgPSBDb21wb3NpdGVEaXNwb3NhYmxlLnByb3RvdHlwZTtcblxuICAvKipcbiAgICogQWRkcyBhIGRpc3Bvc2FibGUgdG8gdGhlIENvbXBvc2l0ZURpc3Bvc2FibGUgb3IgZGlzcG9zZXMgdGhlIGRpc3Bvc2FibGUgaWYgdGhlIENvbXBvc2l0ZURpc3Bvc2FibGUgaXMgZGlzcG9zZWQuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGl0ZW0gRGlzcG9zYWJsZSB0byBhZGQuXG4gICAqL1xuICBDb21wb3NpdGVEaXNwb3NhYmxlUHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaWYgKHRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgaXRlbS5kaXNwb3NlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzcG9zYWJsZXMucHVzaChpdGVtKTtcbiAgICAgIHRoaXMubGVuZ3RoKys7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFuZCBkaXNwb3NlcyB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhIGRpc3Bvc2FibGUgZnJvbSB0aGUgQ29tcG9zaXRlRGlzcG9zYWJsZS5cbiAgICogQHBhcmFtIHtNaXhlZH0gaXRlbSBEaXNwb3NhYmxlIHRvIHJlbW92ZS5cbiAgICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgZm91bmQ7IGZhbHNlIG90aGVyd2lzZS5cbiAgICovXG4gIENvbXBvc2l0ZURpc3Bvc2FibGVQcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICB2YXIgc2hvdWxkRGlzcG9zZSA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB2YXIgaWR4ID0gdGhpcy5kaXNwb3NhYmxlcy5pbmRleE9mKGl0ZW0pO1xuICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgc2hvdWxkRGlzcG9zZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZXMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIHRoaXMubGVuZ3RoLS07XG4gICAgICAgIGl0ZW0uZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2hvdWxkRGlzcG9zZTtcbiAgfTtcblxuICAvKipcbiAgICogIERpc3Bvc2VzIGFsbCBkaXNwb3NhYmxlcyBpbiB0aGUgZ3JvdXAgYW5kIHJlbW92ZXMgdGhlbSBmcm9tIHRoZSBncm91cC5cbiAgICovXG4gIENvbXBvc2l0ZURpc3Bvc2FibGVQcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgIHZhciBsZW4gPSB0aGlzLmRpc3Bvc2FibGVzLmxlbmd0aCwgY3VycmVudERpc3Bvc2FibGVzID0gbmV3IEFycmF5KGxlbik7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgY3VycmVudERpc3Bvc2FibGVzW2ldID0gdGhpcy5kaXNwb3NhYmxlc1tpXTsgfVxuICAgICAgdGhpcy5kaXNwb3NhYmxlcyA9IFtdO1xuICAgICAgdGhpcy5sZW5ndGggPSAwO1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgY3VycmVudERpc3Bvc2FibGVzW2ldLmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIGEgc2V0IG9mIHN0YXRpYyBtZXRob2RzIGZvciBjcmVhdGluZyBEaXNwb3NhYmxlcy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZGlzcG9zZSBBY3Rpb24gdG8gcnVuIGR1cmluZyB0aGUgZmlyc3QgY2FsbCB0byBkaXNwb3NlLiBUaGUgYWN0aW9uIGlzIGd1YXJhbnRlZWQgdG8gYmUgcnVuIGF0IG1vc3Qgb25jZS5cbiAgICovXG4gIHZhciBEaXNwb3NhYmxlID0gUnguRGlzcG9zYWJsZSA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB0aGlzLmFjdGlvbiA9IGFjdGlvbiB8fCBub29wO1xuICB9O1xuXG4gIC8qKiBQZXJmb3JtcyB0aGUgdGFzayBvZiBjbGVhbmluZyB1cCByZXNvdXJjZXMuICovXG4gIERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuYWN0aW9uKCk7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGRpc3Bvc2FibGUgb2JqZWN0IHRoYXQgaW52b2tlcyB0aGUgc3BlY2lmaWVkIGFjdGlvbiB3aGVuIGRpc3Bvc2VkLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkaXNwb3NlIEFjdGlvbiB0byBydW4gZHVyaW5nIHRoZSBmaXJzdCBjYWxsIHRvIGRpc3Bvc2UuIFRoZSBhY3Rpb24gaXMgZ3VhcmFudGVlZCB0byBiZSBydW4gYXQgbW9zdCBvbmNlLlxuICAgKiBAcmV0dXJuIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdGhhdCBydW5zIHRoZSBnaXZlbiBhY3Rpb24gdXBvbiBkaXNwb3NhbC5cbiAgICovXG4gIHZhciBkaXNwb3NhYmxlQ3JlYXRlID0gRGlzcG9zYWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoYWN0aW9uKSB7IHJldHVybiBuZXcgRGlzcG9zYWJsZShhY3Rpb24pOyB9O1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBkaXNwb3NhYmxlIHRoYXQgZG9lcyBub3RoaW5nIHdoZW4gZGlzcG9zZWQuXG4gICAqL1xuICB2YXIgZGlzcG9zYWJsZUVtcHR5ID0gRGlzcG9zYWJsZS5lbXB0eSA9IHsgZGlzcG9zZTogbm9vcCB9O1xuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgd2hldGhlciB0aGUgZ2l2ZW4gb2JqZWN0IGlzIGEgZGlzcG9zYWJsZVxuICAgKiBAcGFyYW0ge09iamVjdH0gT2JqZWN0IHRvIHRlc3Qgd2hldGhlciBpdCBoYXMgYSBkaXNwb3NlIG1ldGhvZFxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiBhIGRpc3Bvc2FibGUgb2JqZWN0LCBlbHNlIGZhbHNlLlxuICAgKi9cbiAgdmFyIGlzRGlzcG9zYWJsZSA9IERpc3Bvc2FibGUuaXNEaXNwb3NhYmxlID0gZnVuY3Rpb24gKGQpIHtcbiAgICByZXR1cm4gZCAmJiBpc0Z1bmN0aW9uKGQuZGlzcG9zZSk7XG4gIH07XG5cbiAgdmFyIGNoZWNrRGlzcG9zZWQgPSBEaXNwb3NhYmxlLmNoZWNrRGlzcG9zZWQgPSBmdW5jdGlvbiAoZGlzcG9zYWJsZSkge1xuICAgIGlmIChkaXNwb3NhYmxlLmlzRGlzcG9zZWQpIHsgdGhyb3cgbmV3IE9iamVjdERpc3Bvc2VkRXJyb3IoKTsgfVxuICB9O1xuXG4gIHZhciBkaXNwb3NhYmxlRml4dXAgPSBEaXNwb3NhYmxlLl9maXh1cCA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICByZXR1cm4gaXNEaXNwb3NhYmxlKHJlc3VsdCkgPyByZXN1bHQgOiBkaXNwb3NhYmxlRW1wdHk7XG4gIH07XG5cbiAgLy8gU2luZ2xlIGFzc2lnbm1lbnRcbiAgdmFyIFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlID0gUnguU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcbiAgfTtcbiAgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUucHJvdG90eXBlLmdldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudDtcbiAgfTtcbiAgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUucHJvdG90eXBlLnNldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50KSB7IHRocm93IG5ldyBFcnJvcignRGlzcG9zYWJsZSBoYXMgYWxyZWFkeSBiZWVuIGFzc2lnbmVkJyk7IH1cbiAgICB2YXIgc2hvdWxkRGlzcG9zZSA9IHRoaXMuaXNEaXNwb3NlZDtcbiAgICAhc2hvdWxkRGlzcG9zZSAmJiAodGhpcy5jdXJyZW50ID0gdmFsdWUpO1xuICAgIHNob3VsZERpc3Bvc2UgJiYgdmFsdWUgJiYgdmFsdWUuZGlzcG9zZSgpO1xuICB9O1xuICBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgIHZhciBvbGQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICB0aGlzLmN1cnJlbnQgPSBudWxsO1xuICAgICAgb2xkICYmIG9sZC5kaXNwb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIE11bHRpcGxlIGFzc2lnbm1lbnQgZGlzcG9zYWJsZVxuICB2YXIgU2VyaWFsRGlzcG9zYWJsZSA9IFJ4LlNlcmlhbERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcbiAgfTtcbiAgU2VyaWFsRGlzcG9zYWJsZS5wcm90b3R5cGUuZ2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50O1xuICB9O1xuICBTZXJpYWxEaXNwb3NhYmxlLnByb3RvdHlwZS5zZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFyIHNob3VsZERpc3Bvc2UgPSB0aGlzLmlzRGlzcG9zZWQ7XG4gICAgaWYgKCFzaG91bGREaXNwb3NlKSB7XG4gICAgICB2YXIgb2xkID0gdGhpcy5jdXJyZW50O1xuICAgICAgdGhpcy5jdXJyZW50ID0gdmFsdWU7XG4gICAgfVxuICAgIG9sZCAmJiBvbGQuZGlzcG9zZSgpO1xuICAgIHNob3VsZERpc3Bvc2UgJiYgdmFsdWUgJiYgdmFsdWUuZGlzcG9zZSgpO1xuICB9O1xuICBTZXJpYWxEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgdmFyIG9sZCA9IHRoaXMuY3VycmVudDtcbiAgICAgIHRoaXMuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICAgIG9sZCAmJiBvbGQuZGlzcG9zZSgpO1xuICB9O1xuXG4gIHZhciBCaW5hcnlEaXNwb3NhYmxlID0gUnguQmluYXJ5RGlzcG9zYWJsZSA9IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgdGhpcy5fZmlyc3QgPSBmaXJzdDtcbiAgICB0aGlzLl9zZWNvbmQgPSBzZWNvbmQ7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gIH07XG5cbiAgQmluYXJ5RGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgIHZhciBvbGQxID0gdGhpcy5fZmlyc3Q7XG4gICAgICB0aGlzLl9maXJzdCA9IG51bGw7XG4gICAgICBvbGQxICYmIG9sZDEuZGlzcG9zZSgpO1xuICAgICAgdmFyIG9sZDIgPSB0aGlzLl9zZWNvbmQ7XG4gICAgICB0aGlzLl9zZWNvbmQgPSBudWxsO1xuICAgICAgb2xkMiAmJiBvbGQyLmRpc3Bvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIE5BcnlEaXNwb3NhYmxlID0gUnguTkFyeURpc3Bvc2FibGUgPSBmdW5jdGlvbiAoZGlzcG9zYWJsZXMpIHtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcyA9IGRpc3Bvc2FibGVzO1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICB9O1xuXG4gIE5BcnlEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuX2Rpc3Bvc2FibGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2FibGVzW2ldLmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2Rpc3Bvc2FibGVzLmxlbmd0aCA9IDA7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIGEgZGlzcG9zYWJsZSByZXNvdXJjZSB0aGF0IG9ubHkgZGlzcG9zZXMgaXRzIHVuZGVybHlpbmcgZGlzcG9zYWJsZSByZXNvdXJjZSB3aGVuIGFsbCBkZXBlbmRlbnQgZGlzcG9zYWJsZSBvYmplY3RzIGhhdmUgYmVlbiBkaXNwb3NlZC5cbiAgICovXG4gIHZhciBSZWZDb3VudERpc3Bvc2FibGUgPSBSeC5SZWZDb3VudERpc3Bvc2FibGUgPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgZnVuY3Rpb24gSW5uZXJEaXNwb3NhYmxlKGRpc3Bvc2FibGUpIHtcbiAgICAgIHRoaXMuZGlzcG9zYWJsZSA9IGRpc3Bvc2FibGU7XG4gICAgICB0aGlzLmRpc3Bvc2FibGUuY291bnQrKztcbiAgICAgIHRoaXMuaXNJbm5lckRpc3Bvc2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgSW5uZXJEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLmRpc3Bvc2FibGUuaXNEaXNwb3NlZCAmJiAhdGhpcy5pc0lubmVyRGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy5pc0lubmVyRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmRpc3Bvc2FibGUuY291bnQtLTtcbiAgICAgICAgaWYgKHRoaXMuZGlzcG9zYWJsZS5jb3VudCA9PT0gMCAmJiB0aGlzLmRpc3Bvc2FibGUuaXNQcmltYXJ5RGlzcG9zZWQpIHtcbiAgICAgICAgICB0aGlzLmRpc3Bvc2FibGUuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5kaXNwb3NhYmxlLnVuZGVybHlpbmdEaXNwb3NhYmxlLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgUmVmQ291bnREaXNwb3NhYmxlIHdpdGggdGhlIHNwZWNpZmllZCBkaXNwb3NhYmxlLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RGlzcG9zYWJsZX0gZGlzcG9zYWJsZSBVbmRlcmx5aW5nIGRpc3Bvc2FibGUuXG4gICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlZkNvdW50RGlzcG9zYWJsZShkaXNwb3NhYmxlKSB7XG4gICAgICB0aGlzLnVuZGVybHlpbmdEaXNwb3NhYmxlID0gZGlzcG9zYWJsZTtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc1ByaW1hcnlEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzcG9zZXMgdGhlIHVuZGVybHlpbmcgZGlzcG9zYWJsZSBvbmx5IHdoZW4gYWxsIGRlcGVuZGVudCBkaXNwb3NhYmxlcyBoYXZlIGJlZW4gZGlzcG9zZWRcbiAgICAgKi9cbiAgICBSZWZDb3VudERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCAmJiAhdGhpcy5pc1ByaW1hcnlEaXNwb3NlZCkge1xuICAgICAgICB0aGlzLmlzUHJpbWFyeURpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuY291bnQgPT09IDApIHtcbiAgICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMudW5kZXJseWluZ0Rpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBkZXBlbmRlbnQgZGlzcG9zYWJsZSB0aGF0IHdoZW4gZGlzcG9zZWQgZGVjcmVhc2VzIHRoZSByZWZjb3VudCBvbiB0aGUgdW5kZXJseWluZyBkaXNwb3NhYmxlLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBBIGRlcGVuZGVudCBkaXNwb3NhYmxlIGNvbnRyaWJ1dGluZyB0byB0aGUgcmVmZXJlbmNlIGNvdW50IHRoYXQgbWFuYWdlcyB0aGUgdW5kZXJseWluZyBkaXNwb3NhYmxlJ3MgbGlmZXRpbWUuXG4gICAgICovXG4gICAgUmVmQ291bnREaXNwb3NhYmxlLnByb3RvdHlwZS5nZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNEaXNwb3NlZCA/IGRpc3Bvc2FibGVFbXB0eSA6IG5ldyBJbm5lckRpc3Bvc2FibGUodGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBSZWZDb3VudERpc3Bvc2FibGU7XG4gIH0pKCk7XG5cbiAgZnVuY3Rpb24gU2NoZWR1bGVkRGlzcG9zYWJsZShzY2hlZHVsZXIsIGRpc3Bvc2FibGUpIHtcbiAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB0aGlzLmRpc3Bvc2FibGUgPSBkaXNwb3NhYmxlO1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gc2NoZWR1bGVJdGVtKHMsIHNlbGYpIHtcbiAgICBpZiAoIXNlbGYuaXNEaXNwb3NlZCkge1xuICAgICAgc2VsZi5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgIHNlbGYuZGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgU2NoZWR1bGVkRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZSh0aGlzLCBzY2hlZHVsZUl0ZW0pO1xuICB9O1xuXG4gIHZhciBTY2hlZHVsZWRJdGVtID0gUnguaW50ZXJuYWxzLlNjaGVkdWxlZEl0ZW0gPSBmdW5jdGlvbiAoc2NoZWR1bGVyLCBzdGF0ZSwgYWN0aW9uLCBkdWVUaW1lLCBjb21wYXJlcikge1xuICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLmFjdGlvbiA9IGFjdGlvbjtcbiAgICB0aGlzLmR1ZVRpbWUgPSBkdWVUaW1lO1xuICAgIHRoaXMuY29tcGFyZXIgPSBjb21wYXJlciB8fCBkZWZhdWx0U3ViQ29tcGFyZXI7XG4gICAgdGhpcy5kaXNwb3NhYmxlID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gIH07XG5cbiAgU2NoZWR1bGVkSXRlbS5wcm90b3R5cGUuaW52b2tlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZGlzcG9zYWJsZS5zZXREaXNwb3NhYmxlKHRoaXMuaW52b2tlQ29yZSgpKTtcbiAgfTtcblxuICBTY2hlZHVsZWRJdGVtLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wYXJlcih0aGlzLmR1ZVRpbWUsIG90aGVyLmR1ZVRpbWUpO1xuICB9O1xuXG4gIFNjaGVkdWxlZEl0ZW0ucHJvdG90eXBlLmlzQ2FuY2VsbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmRpc3Bvc2FibGUuaXNEaXNwb3NlZDtcbiAgfTtcblxuICBTY2hlZHVsZWRJdGVtLnByb3RvdHlwZS5pbnZva2VDb3JlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkaXNwb3NhYmxlRml4dXAodGhpcy5hY3Rpb24odGhpcy5zY2hlZHVsZXIsIHRoaXMuc3RhdGUpKTtcbiAgfTtcblxuICAvKiogUHJvdmlkZXMgYSBzZXQgb2Ygc3RhdGljIHByb3BlcnRpZXMgdG8gYWNjZXNzIGNvbW1vbmx5IHVzZWQgc2NoZWR1bGVycy4gKi9cbiAgdmFyIFNjaGVkdWxlciA9IFJ4LlNjaGVkdWxlciA9IChmdW5jdGlvbiAoKSB7XG5cbiAgICBmdW5jdGlvbiBTY2hlZHVsZXIoKSB7IH1cblxuICAgIC8qKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGdpdmVuIG9iamVjdCBpcyBhIHNjaGVkdWxlciAqL1xuICAgIFNjaGVkdWxlci5pc1NjaGVkdWxlciA9IGZ1bmN0aW9uIChzKSB7XG4gICAgICByZXR1cm4gcyBpbnN0YW5jZW9mIFNjaGVkdWxlcjtcbiAgICB9O1xuXG4gICAgdmFyIHNjaGVkdWxlclByb3RvID0gU2NoZWR1bGVyLnByb3RvdHlwZTtcblxuICAgIC8qKlxuICAgKiBTY2hlZHVsZXMgYW4gYWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgKiBAcGFyYW0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cbiAgICovXG4gICAgc2NoZWR1bGVyUHJvdG8uc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgICB9O1xuXG4gIC8qKlxuICAgKiBTY2hlZHVsZXMgYW4gYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGFmdGVyIGR1ZVRpbWUuXG4gICAqIEBwYXJhbSBzdGF0ZSBTdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgUmVsYXRpdmUgdGltZSBhZnRlciB3aGljaCB0byBleGVjdXRlIHRoZSBhY3Rpb24uXG4gICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cbiAgICovXG4gICAgc2NoZWR1bGVyUHJvdG8uc2NoZWR1bGVGdXR1cmUgPSBmdW5jdGlvbiAoc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbikge1xuICAgICAgdmFyIGR0ID0gZHVlVGltZTtcbiAgICAgIGR0IGluc3RhbmNlb2YgRGF0ZSAmJiAoZHQgPSBkdCAtIHRoaXMubm93KCkpO1xuICAgICAgZHQgPSBTY2hlZHVsZXIubm9ybWFsaXplKGR0KTtcblxuICAgICAgaWYgKGR0ID09PSAwKSB7IHJldHVybiB0aGlzLnNjaGVkdWxlKHN0YXRlLCBhY3Rpb24pOyB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZUZ1dHVyZShzdGF0ZSwgZHQsIGFjdGlvbik7XG4gICAgfTtcblxuICAgIHNjaGVkdWxlclByb3RvLl9zY2hlZHVsZUZ1dHVyZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICAgIH07XG5cbiAgICAvKiogR2V0cyB0aGUgY3VycmVudCB0aW1lIGFjY29yZGluZyB0byB0aGUgbG9jYWwgbWFjaGluZSdzIHN5c3RlbSBjbG9jay4gKi9cbiAgICBTY2hlZHVsZXIubm93ID0gZGVmYXVsdE5vdztcblxuICAgIC8qKiBHZXRzIHRoZSBjdXJyZW50IHRpbWUgYWNjb3JkaW5nIHRvIHRoZSBsb2NhbCBtYWNoaW5lJ3Mgc3lzdGVtIGNsb2NrLiAqL1xuICAgIFNjaGVkdWxlci5wcm90b3R5cGUubm93ID0gZGVmYXVsdE5vdztcblxuICAgIC8qKlxuICAgICAqIE5vcm1hbGl6ZXMgdGhlIHNwZWNpZmllZCBUaW1lU3BhbiB2YWx1ZSB0byBhIHBvc2l0aXZlIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lU3BhbiBUaGUgdGltZSBzcGFuIHZhbHVlIHRvIG5vcm1hbGl6ZS5cbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgc3BlY2lmaWVkIFRpbWVTcGFuIHZhbHVlIGlmIGl0IGlzIHplcm8gb3IgcG9zaXRpdmU7IG90aGVyd2lzZSwgMFxuICAgICAqL1xuICAgIFNjaGVkdWxlci5ub3JtYWxpemUgPSBmdW5jdGlvbiAodGltZVNwYW4pIHtcbiAgICAgIHRpbWVTcGFuIDwgMCAmJiAodGltZVNwYW4gPSAwKTtcbiAgICAgIHJldHVybiB0aW1lU3BhbjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNjaGVkdWxlcjtcbiAgfSgpKTtcblxuICB2YXIgbm9ybWFsaXplVGltZSA9IFNjaGVkdWxlci5ub3JtYWxpemUsIGlzU2NoZWR1bGVyID0gU2NoZWR1bGVyLmlzU2NoZWR1bGVyO1xuXG4gIChmdW5jdGlvbiAoc2NoZWR1bGVyUHJvdG8pIHtcblxuICAgIGZ1bmN0aW9uIGludm9rZVJlY0ltbWVkaWF0ZShzY2hlZHVsZXIsIHBhaXIpIHtcbiAgICAgIHZhciBzdGF0ZSA9IHBhaXJbMF0sIGFjdGlvbiA9IHBhaXJbMV0sIGdyb3VwID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcbiAgICAgIGFjdGlvbihzdGF0ZSwgaW5uZXJBY3Rpb24pO1xuICAgICAgcmV0dXJuIGdyb3VwO1xuXG4gICAgICBmdW5jdGlvbiBpbm5lckFjdGlvbihzdGF0ZTIpIHtcbiAgICAgICAgdmFyIGlzQWRkZWQgPSBmYWxzZSwgaXNEb25lID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIGQgPSBzY2hlZHVsZXIuc2NoZWR1bGUoc3RhdGUyLCBzY2hlZHVsZVdvcmspO1xuICAgICAgICBpZiAoIWlzRG9uZSkge1xuICAgICAgICAgIGdyb3VwLmFkZChkKTtcbiAgICAgICAgICBpc0FkZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNjaGVkdWxlV29yayhfLCBzdGF0ZTMpIHtcbiAgICAgICAgICBpZiAoaXNBZGRlZCkge1xuICAgICAgICAgICAgZ3JvdXAucmVtb3ZlKGQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpc0RvbmUgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhY3Rpb24oc3RhdGUzLCBpbm5lckFjdGlvbik7XG4gICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGludm9rZVJlY0RhdGUoc2NoZWR1bGVyLCBwYWlyKSB7XG4gICAgICB2YXIgc3RhdGUgPSBwYWlyWzBdLCBhY3Rpb24gPSBwYWlyWzFdLCBncm91cCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgICBhY3Rpb24oc3RhdGUsIGlubmVyQWN0aW9uKTtcbiAgICAgIHJldHVybiBncm91cDtcblxuICAgICAgZnVuY3Rpb24gaW5uZXJBY3Rpb24oc3RhdGUyLCBkdWVUaW1lMSkge1xuICAgICAgICB2YXIgaXNBZGRlZCA9IGZhbHNlLCBpc0RvbmUgPSBmYWxzZTtcblxuICAgICAgICB2YXIgZCA9IHNjaGVkdWxlci5zY2hlZHVsZUZ1dHVyZShzdGF0ZTIsIGR1ZVRpbWUxLCBzY2hlZHVsZVdvcmspO1xuICAgICAgICBpZiAoIWlzRG9uZSkge1xuICAgICAgICAgIGdyb3VwLmFkZChkKTtcbiAgICAgICAgICBpc0FkZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNjaGVkdWxlV29yayhfLCBzdGF0ZTMpIHtcbiAgICAgICAgICBpZiAoaXNBZGRlZCkge1xuICAgICAgICAgICAgZ3JvdXAucmVtb3ZlKGQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpc0RvbmUgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhY3Rpb24oc3RhdGUzLCBpbm5lckFjdGlvbik7XG4gICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgcmVjdXJzaXZlbHkuXG4gICAgICogQHBhcmFtIHtNaXhlZH0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBleGVjdXRlIHJlY3Vyc2l2ZWx5LiBUaGUgbGFzdCBwYXJhbWV0ZXIgcGFzc2VkIHRvIHRoZSBhY3Rpb24gaXMgdXNlZCB0byB0cmlnZ2VyIHJlY3Vyc2l2ZSBzY2hlZHVsaW5nIG9mIHRoZSBhY3Rpb24sIHBhc3NpbmcgaW4gcmVjdXJzaXZlIGludm9jYXRpb24gc3RhdGUuXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxuICAgICAqL1xuICAgIHNjaGVkdWxlclByb3RvLnNjaGVkdWxlUmVjdXJzaXZlID0gZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlKFtzdGF0ZSwgYWN0aW9uXSwgaW52b2tlUmVjSW1tZWRpYXRlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZCByZWN1cnNpdmVseSBhZnRlciBhIHNwZWNpZmllZCByZWxhdGl2ZSBvciBhYnNvbHV0ZSBkdWUgdGltZS5cbiAgICAgKiBAcGFyYW0ge01peGVkfSBzdGF0ZSBTdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGV4ZWN1dGUgcmVjdXJzaXZlbHkuIFRoZSBsYXN0IHBhcmFtZXRlciBwYXNzZWQgdG8gdGhlIGFjdGlvbiBpcyB1c2VkIHRvIHRyaWdnZXIgcmVjdXJzaXZlIHNjaGVkdWxpbmcgb2YgdGhlIGFjdGlvbiwgcGFzc2luZyBpbiB0aGUgcmVjdXJzaXZlIGR1ZSB0aW1lIGFuZCBpbnZvY2F0aW9uIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyIHwgRGF0ZX0gZHVlVGltZSBSZWxhdGl2ZSBvciBhYnNvbHV0ZSB0aW1lIGFmdGVyIHdoaWNoIHRvIGV4ZWN1dGUgdGhlIGFjdGlvbiBmb3IgdGhlIGZpcnN0IHRpbWUuXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxuICAgICAqL1xuICAgIHNjaGVkdWxlclByb3RvLnNjaGVkdWxlUmVjdXJzaXZlRnV0dXJlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlRnV0dXJlKFtzdGF0ZSwgYWN0aW9uXSwgZHVlVGltZSwgaW52b2tlUmVjRGF0ZSk7XG4gICAgfTtcblxuICB9KFNjaGVkdWxlci5wcm90b3R5cGUpKTtcblxuICAoZnVuY3Rpb24gKHNjaGVkdWxlclByb3RvKSB7XG5cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYSBwZXJpb2RpYyBwaWVjZSBvZiB3b3JrIGJ5IGR5bmFtaWNhbGx5IGRpc2NvdmVyaW5nIHRoZSBzY2hlZHVsZXIncyBjYXBhYmlsaXRpZXMuIFRoZSBwZXJpb2RpYyB0YXNrIHdpbGwgYmUgc2NoZWR1bGVkIHVzaW5nIHdpbmRvdy5zZXRJbnRlcnZhbCBmb3IgdGhlIGJhc2UgaW1wbGVtZW50YXRpb24uXG4gICAgICogQHBhcmFtIHtNaXhlZH0gc3RhdGUgSW5pdGlhbCBzdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB1cG9uIHRoZSBmaXJzdCBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHBlcmlvZCBQZXJpb2QgZm9yIHJ1bm5pbmcgdGhlIHdvcmsgcGVyaW9kaWNhbGx5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gYmUgZXhlY3V0ZWQsIHBvdGVudGlhbGx5IHVwZGF0aW5nIHRoZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgcmVjdXJyaW5nIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxuICAgICAqL1xuICAgIHNjaGVkdWxlclByb3RvLnNjaGVkdWxlUGVyaW9kaWMgPSBmdW5jdGlvbihzdGF0ZSwgcGVyaW9kLCBhY3Rpb24pIHtcbiAgICAgIGlmICh0eXBlb2Ygcm9vdC5zZXRJbnRlcnZhbCA9PT0gJ3VuZGVmaW5lZCcpIHsgdGhyb3cgbmV3IE5vdFN1cHBvcnRlZEVycm9yKCk7IH1cbiAgICAgIHBlcmlvZCA9IG5vcm1hbGl6ZVRpbWUocGVyaW9kKTtcbiAgICAgIHZhciBzID0gc3RhdGUsIGlkID0gcm9vdC5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IHMgPSBhY3Rpb24ocyk7IH0sIHBlcmlvZCk7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUNyZWF0ZShmdW5jdGlvbiAoKSB7IHJvb3QuY2xlYXJJbnRlcnZhbChpZCk7IH0pO1xuICAgIH07XG5cbiAgfShTY2hlZHVsZXIucHJvdG90eXBlKSk7XG5cbiAgKGZ1bmN0aW9uIChzY2hlZHVsZXJQcm90bykge1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzY2hlZHVsZXIgdGhhdCB3cmFwcyB0aGUgb3JpZ2luYWwgc2NoZWR1bGVyLCBhZGRpbmcgZXhjZXB0aW9uIGhhbmRsaW5nIGZvciBzY2hlZHVsZWQgYWN0aW9ucy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIEhhbmRsZXIgdGhhdCdzIHJ1biBpZiBhbiBleGNlcHRpb24gaXMgY2F1Z2h0LiBUaGUgZXhjZXB0aW9uIHdpbGwgYmUgcmV0aHJvd24gaWYgdGhlIGhhbmRsZXIgcmV0dXJucyBmYWxzZS5cbiAgICAgKiBAcmV0dXJucyB7U2NoZWR1bGVyfSBXcmFwcGVyIGFyb3VuZCB0aGUgb3JpZ2luYWwgc2NoZWR1bGVyLCBlbmZvcmNpbmcgZXhjZXB0aW9uIGhhbmRsaW5nLlxuICAgICAqL1xuICAgIHNjaGVkdWxlclByb3RvLmNhdGNoRXJyb3IgPSBzY2hlZHVsZXJQcm90b1snY2F0Y2gnXSA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICByZXR1cm4gbmV3IENhdGNoU2NoZWR1bGVyKHRoaXMsIGhhbmRsZXIpO1xuICAgIH07XG4gIH0oU2NoZWR1bGVyLnByb3RvdHlwZSkpO1xuXG4gIHZhciBTY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlID0gUnguaW50ZXJuYWxzLlNjaGVkdWxlUGVyaW9kaWNSZWN1cnNpdmUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVRpY2soc2VsZikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIHRpY2soY29tbWFuZCwgcmVjdXJzZSkge1xuICAgICAgICByZWN1cnNlKDAsIHNlbGYuX3BlcmlvZCk7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRyeUNhdGNoKHNlbGYuX2FjdGlvbikoc2VsZi5fc3RhdGUpO1xuICAgICAgICBpZiAoc3RhdGUgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgc2VsZi5fY2FuY2VsLmRpc3Bvc2UoKTtcbiAgICAgICAgICB0aHJvd2VyKHN0YXRlLmUpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuX3N0YXRlID0gc3RhdGU7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNjaGVkdWxlUGVyaW9kaWNSZWN1cnNpdmUoc2NoZWR1bGVyLCBzdGF0ZSwgcGVyaW9kLCBhY3Rpb24pIHtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLl9wZXJpb2QgPSBwZXJpb2Q7XG4gICAgICB0aGlzLl9hY3Rpb24gPSBhY3Rpb247XG4gICAgfVxuXG4gICAgU2NoZWR1bGVQZXJpb2RpY1JlY3Vyc2l2ZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5fY2FuY2VsID0gZDtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZSh0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUoMCwgdGhpcy5fcGVyaW9kLCBjcmVhdGVUaWNrKHRoaXMpKSk7XG5cbiAgICAgIHJldHVybiBkO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2NoZWR1bGVQZXJpb2RpY1JlY3Vyc2l2ZTtcbiAgfSgpKTtcblxuICAvKiogR2V0cyBhIHNjaGVkdWxlciB0aGF0IHNjaGVkdWxlcyB3b3JrIGltbWVkaWF0ZWx5IG9uIHRoZSBjdXJyZW50IHRocmVhZC4gKi9cbiAgIHZhciBJbW1lZGlhdGVTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEltbWVkaWF0ZVNjaGVkdWxlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBJbW1lZGlhdGVTY2hlZHVsZXIoKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbW1lZGlhdGVTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHJldHVybiBkaXNwb3NhYmxlRml4dXAoYWN0aW9uKHRoaXMsIHN0YXRlKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBJbW1lZGlhdGVTY2hlZHVsZXI7XG4gIH0oU2NoZWR1bGVyKSk7XG5cbiAgdmFyIGltbWVkaWF0ZVNjaGVkdWxlciA9IFNjaGVkdWxlci5pbW1lZGlhdGUgPSBuZXcgSW1tZWRpYXRlU2NoZWR1bGVyKCk7XG5cbiAgLyoqXG4gICAqIEdldHMgYSBzY2hlZHVsZXIgdGhhdCBzY2hlZHVsZXMgd29yayBhcyBzb29uIGFzIHBvc3NpYmxlIG9uIHRoZSBjdXJyZW50IHRocmVhZC5cbiAgICovXG4gIHZhciBDdXJyZW50VGhyZWFkU2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICB2YXIgcXVldWU7XG5cbiAgICBmdW5jdGlvbiBydW5UcmFtcG9saW5lICgpIHtcbiAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBpdGVtID0gcXVldWUuZGVxdWV1ZSgpO1xuICAgICAgICAhaXRlbS5pc0NhbmNlbGxlZCgpICYmIGl0ZW0uaW52b2tlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoQ3VycmVudFRocmVhZFNjaGVkdWxlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDdXJyZW50VGhyZWFkU2NoZWR1bGVyKCkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQ3VycmVudFRocmVhZFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgdmFyIHNpID0gbmV3IFNjaGVkdWxlZEl0ZW0odGhpcywgc3RhdGUsIGFjdGlvbiwgdGhpcy5ub3coKSk7XG5cbiAgICAgIGlmICghcXVldWUpIHtcbiAgICAgICAgcXVldWUgPSBuZXcgUHJpb3JpdHlRdWV1ZSg0KTtcbiAgICAgICAgcXVldWUuZW5xdWV1ZShzaSk7XG5cbiAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHJ1blRyYW1wb2xpbmUpKCk7XG4gICAgICAgIHF1ZXVlID0gbnVsbDtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgdGhyb3dlcihyZXN1bHQuZSk7IH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlLmVucXVldWUoc2kpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNpLmRpc3Bvc2FibGU7XG4gICAgfTtcblxuICAgIEN1cnJlbnRUaHJlYWRTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlUmVxdWlyZWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAhcXVldWU7IH07XG5cbiAgICByZXR1cm4gQ3VycmVudFRocmVhZFNjaGVkdWxlcjtcbiAgfShTY2hlZHVsZXIpKTtcblxuICB2YXIgY3VycmVudFRocmVhZFNjaGVkdWxlciA9IFNjaGVkdWxlci5jdXJyZW50VGhyZWFkID0gbmV3IEN1cnJlbnRUaHJlYWRTY2hlZHVsZXIoKTtcblxuICB2YXIgc2NoZWR1bGVNZXRob2QsIGNsZWFyTWV0aG9kO1xuXG4gIHZhciBsb2NhbFRpbWVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbG9jYWxTZXRUaW1lb3V0LCBsb2NhbENsZWFyVGltZW91dCA9IG5vb3A7XG4gICAgaWYgKCEhcm9vdC5zZXRUaW1lb3V0KSB7XG4gICAgICBsb2NhbFNldFRpbWVvdXQgPSByb290LnNldFRpbWVvdXQ7XG4gICAgICBsb2NhbENsZWFyVGltZW91dCA9IHJvb3QuY2xlYXJUaW1lb3V0O1xuICAgIH0gZWxzZSBpZiAoISFyb290LldTY3JpcHQpIHtcbiAgICAgIGxvY2FsU2V0VGltZW91dCA9IGZ1bmN0aW9uIChmbiwgdGltZSkge1xuICAgICAgICByb290LldTY3JpcHQuU2xlZXAodGltZSk7XG4gICAgICAgIGZuKCk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgTm90U3VwcG9ydGVkRXJyb3IoKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2V0VGltZW91dDogbG9jYWxTZXRUaW1lb3V0LFxuICAgICAgY2xlYXJUaW1lb3V0OiBsb2NhbENsZWFyVGltZW91dFxuICAgIH07XG4gIH0oKSk7XG4gIHZhciBsb2NhbFNldFRpbWVvdXQgPSBsb2NhbFRpbWVyLnNldFRpbWVvdXQsXG4gICAgbG9jYWxDbGVhclRpbWVvdXQgPSBsb2NhbFRpbWVyLmNsZWFyVGltZW91dDtcblxuICAoZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxLCB0YXNrc0J5SGFuZGxlID0ge30sIGN1cnJlbnRseVJ1bm5pbmcgPSBmYWxzZTtcblxuICAgIGNsZWFyTWV0aG9kID0gZnVuY3Rpb24gKGhhbmRsZSkge1xuICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcnVuVGFzayhoYW5kbGUpIHtcbiAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nKSB7XG4gICAgICAgIGxvY2FsU2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJ1blRhc2soaGFuZGxlKTsgfSwgMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGFzaykoKTtcbiAgICAgICAgICBjbGVhck1ldGhvZChoYW5kbGUpO1xuICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyB0aHJvd2VyKHJlc3VsdC5lKTsgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHJlTmF0aXZlID0gbmV3IFJlZ0V4cCgnXicgK1xuICAgICAgU3RyaW5nKHRvU3RyaW5nKVxuICAgICAgICAucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKVxuICAgICAgICAucmVwbGFjZSgvdG9TdHJpbmd8IGZvciBbXlxcXV0rL2csICcuKj8nKSArICckJ1xuICAgICk7XG5cbiAgICB2YXIgc2V0SW1tZWRpYXRlID0gdHlwZW9mIChzZXRJbW1lZGlhdGUgPSBmcmVlR2xvYmFsICYmIG1vZHVsZUV4cG9ydHMgJiYgZnJlZUdsb2JhbC5zZXRJbW1lZGlhdGUpID09ICdmdW5jdGlvbicgJiZcbiAgICAgICFyZU5hdGl2ZS50ZXN0KHNldEltbWVkaWF0ZSkgJiYgc2V0SW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gcG9zdE1lc3NhZ2VTdXBwb3J0ZWQgKCkge1xuICAgICAgLy8gRW5zdXJlIG5vdCBpbiBhIHdvcmtlclxuICAgICAgaWYgKCFyb290LnBvc3RNZXNzYWdlIHx8IHJvb3QuaW1wb3J0U2NyaXB0cykgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAgIHZhciBpc0FzeW5jID0gZmFsc2UsIG9sZEhhbmRsZXIgPSByb290Lm9ubWVzc2FnZTtcbiAgICAgIC8vIFRlc3QgZm9yIGFzeW5jXG4gICAgICByb290Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpIHsgaXNBc3luYyA9IHRydWU7IH07XG4gICAgICByb290LnBvc3RNZXNzYWdlKCcnLCAnKicpO1xuICAgICAgcm9vdC5vbm1lc3NhZ2UgPSBvbGRIYW5kbGVyO1xuXG4gICAgICByZXR1cm4gaXNBc3luYztcbiAgICB9XG5cbiAgICAvLyBVc2UgaW4gb3JkZXIsIHNldEltbWVkaWF0ZSwgbmV4dFRpY2ssIHBvc3RNZXNzYWdlLCBNZXNzYWdlQ2hhbm5lbCwgc2NyaXB0IHJlYWR5c3RhdGVjaGFuZ2VkLCBzZXRUaW1lb3V0XG4gICAgaWYgKGlzRnVuY3Rpb24oc2V0SW1tZWRpYXRlKSkge1xuICAgICAgc2NoZWR1bGVNZXRob2QgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHZhciBpZCA9IG5leHRIYW5kbGUrKztcbiAgICAgICAgdGFza3NCeUhhbmRsZVtpZF0gPSBhY3Rpb247XG4gICAgICAgIHNldEltbWVkaWF0ZShmdW5jdGlvbiAoKSB7IHJ1blRhc2soaWQpOyB9KTtcblxuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHt9LnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJykge1xuICAgICAgc2NoZWR1bGVNZXRob2QgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHZhciBpZCA9IG5leHRIYW5kbGUrKztcbiAgICAgICAgdGFza3NCeUhhbmRsZVtpZF0gPSBhY3Rpb247XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5UYXNrKGlkKTsgfSk7XG5cbiAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHBvc3RNZXNzYWdlU3VwcG9ydGVkKCkpIHtcbiAgICAgIHZhciBNU0dfUFJFRklYID0gJ21zLnJ4LnNjaGVkdWxlJyArIE1hdGgucmFuZG9tKCk7XG5cbiAgICAgIHZhciBvbkdsb2JhbFBvc3RNZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIE9ubHkgaWYgd2UncmUgYSBtYXRjaCB0byBhdm9pZCBhbnkgb3RoZXIgZ2xvYmFsIGV2ZW50c1xuICAgICAgICBpZiAodHlwZW9mIGV2ZW50LmRhdGEgPT09ICdzdHJpbmcnICYmIGV2ZW50LmRhdGEuc3Vic3RyaW5nKDAsIE1TR19QUkVGSVgubGVuZ3RoKSA9PT0gTVNHX1BSRUZJWCkge1xuICAgICAgICAgIHJ1blRhc2soZXZlbnQuZGF0YS5zdWJzdHJpbmcoTVNHX1BSRUZJWC5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcm9vdC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25HbG9iYWxQb3N0TWVzc2FnZSwgZmFsc2UpO1xuXG4gICAgICBzY2hlZHVsZU1ldGhvZCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIGlkID0gbmV4dEhhbmRsZSsrO1xuICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcbiAgICAgICAgcm9vdC5wb3N0TWVzc2FnZShNU0dfUFJFRklYICsgaWQsICcqJyk7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICghIXJvb3QuTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgIHZhciBjaGFubmVsID0gbmV3IHJvb3QuTWVzc2FnZUNoYW5uZWwoKTtcblxuICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkgeyBydW5UYXNrKGUuZGF0YSk7IH07XG5cbiAgICAgIHNjaGVkdWxlTWV0aG9kID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICB2YXIgaWQgPSBuZXh0SGFuZGxlKys7XG4gICAgICAgIHRhc2tzQnlIYW5kbGVbaWRdID0gYWN0aW9uO1xuICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGlkKTtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKCdkb2N1bWVudCcgaW4gcm9vdCAmJiAnb25yZWFkeXN0YXRlY2hhbmdlJyBpbiByb290LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpKSB7XG5cbiAgICAgIHNjaGVkdWxlTWV0aG9kID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICB2YXIgc2NyaXB0RWxlbWVudCA9IHJvb3QuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgIHZhciBpZCA9IG5leHRIYW5kbGUrKztcbiAgICAgICAgdGFza3NCeUhhbmRsZVtpZF0gPSBhY3Rpb247XG5cbiAgICAgICAgc2NyaXB0RWxlbWVudC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcnVuVGFzayhpZCk7XG4gICAgICAgICAgc2NyaXB0RWxlbWVudC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgIHNjcmlwdEVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHRFbGVtZW50KTtcbiAgICAgICAgICBzY3JpcHRFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgcm9vdC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2NyaXB0RWxlbWVudCk7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH07XG5cbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVNZXRob2QgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHZhciBpZCA9IG5leHRIYW5kbGUrKztcbiAgICAgICAgdGFza3NCeUhhbmRsZVtpZF0gPSBhY3Rpb247XG4gICAgICAgIGxvY2FsU2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcnVuVGFzayhpZCk7XG4gICAgICAgIH0sIDApO1xuXG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH07XG4gICAgfVxuICB9KCkpO1xuXG4gIC8qKlxuICAgKiBHZXRzIGEgc2NoZWR1bGVyIHRoYXQgc2NoZWR1bGVzIHdvcmsgdmlhIGEgdGltZWQgY2FsbGJhY2sgYmFzZWQgdXBvbiBwbGF0Zm9ybS5cbiAgICovXG4gICB2YXIgRGVmYXVsdFNjaGVkdWxlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgIGluaGVyaXRzKERlZmF1bHRTY2hlZHVsZXIsIF9fc3VwZXJfXyk7XG4gICAgIGZ1bmN0aW9uIERlZmF1bHRTY2hlZHVsZXIoKSB7XG4gICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgIH1cblxuICAgICBmdW5jdGlvbiBzY2hlZHVsZUFjdGlvbihkaXNwb3NhYmxlLCBhY3Rpb24sIHNjaGVkdWxlciwgc3RhdGUpIHtcbiAgICAgICByZXR1cm4gZnVuY3Rpb24gc2NoZWR1bGUoKSB7XG4gICAgICAgICBkaXNwb3NhYmxlLnNldERpc3Bvc2FibGUoRGlzcG9zYWJsZS5fZml4dXAoYWN0aW9uKHNjaGVkdWxlciwgc3RhdGUpKSk7XG4gICAgICAgfTtcbiAgICAgfVxuXG4gICAgIGZ1bmN0aW9uIENsZWFyRGlzcG9zYWJsZShpZCkge1xuICAgICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgIH1cblxuICAgICBDbGVhckRpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICBjbGVhck1ldGhvZCh0aGlzLl9pZCk7XG4gICAgICAgfVxuICAgICB9O1xuXG4gICAgIGZ1bmN0aW9uIExvY2FsQ2xlYXJEaXNwb3NhYmxlKGlkKSB7XG4gICAgICAgdGhpcy5faWQgPSBpZDtcbiAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgfVxuXG4gICAgIExvY2FsQ2xlYXJEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgbG9jYWxDbGVhclRpbWVvdXQodGhpcy5faWQpO1xuICAgICAgIH1cbiAgICAgfTtcblxuICAgIERlZmF1bHRTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHZhciBkaXNwb3NhYmxlID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksXG4gICAgICAgICAgaWQgPSBzY2hlZHVsZU1ldGhvZChzY2hlZHVsZUFjdGlvbihkaXNwb3NhYmxlLCBhY3Rpb24sIHRoaXMsIHN0YXRlKSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoZGlzcG9zYWJsZSwgbmV3IENsZWFyRGlzcG9zYWJsZShpZCkpO1xuICAgIH07XG5cbiAgICBEZWZhdWx0U2NoZWR1bGVyLnByb3RvdHlwZS5fc2NoZWR1bGVGdXR1cmUgPSBmdW5jdGlvbiAoc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbikge1xuICAgICAgaWYgKGR1ZVRpbWUgPT09IDApIHsgcmV0dXJuIHRoaXMuc2NoZWR1bGUoc3RhdGUsIGFjdGlvbik7IH1cbiAgICAgIHZhciBkaXNwb3NhYmxlID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksXG4gICAgICAgICAgaWQgPSBsb2NhbFNldFRpbWVvdXQoc2NoZWR1bGVBY3Rpb24oZGlzcG9zYWJsZSwgYWN0aW9uLCB0aGlzLCBzdGF0ZSksIGR1ZVRpbWUpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKGRpc3Bvc2FibGUsIG5ldyBMb2NhbENsZWFyRGlzcG9zYWJsZShpZCkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGVmYXVsdFNjaGVkdWxlcjtcbiAgfShTY2hlZHVsZXIpKTtcblxuICB2YXIgZGVmYXVsdFNjaGVkdWxlciA9IFNjaGVkdWxlclsnZGVmYXVsdCddID0gU2NoZWR1bGVyLmFzeW5jID0gbmV3IERlZmF1bHRTY2hlZHVsZXIoKTtcblxuICB2YXIgQ2F0Y2hTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENhdGNoU2NoZWR1bGVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gQ2F0Y2hTY2hlZHVsZXIoc2NoZWR1bGVyLCBoYW5kbGVyKSB7XG4gICAgICB0aGlzLl9zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICB0aGlzLl9oYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgIHRoaXMuX3JlY3Vyc2l2ZU9yaWdpbmFsID0gbnVsbDtcbiAgICAgIHRoaXMuX3JlY3Vyc2l2ZVdyYXBwZXIgPSBudWxsO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQ2F0Y2hTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGUoc3RhdGUsIHRoaXMuX3dyYXAoYWN0aW9uKSk7XG4gICAgfTtcblxuICAgIENhdGNoU2NoZWR1bGVyLnByb3RvdHlwZS5fc2NoZWR1bGVGdXR1cmUgPSBmdW5jdGlvbiAoc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgZHVlVGltZSwgdGhpcy5fd3JhcChhY3Rpb24pKTtcbiAgICB9O1xuXG4gICAgQ2F0Y2hTY2hlZHVsZXIucHJvdG90eXBlLm5vdyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX3NjaGVkdWxlci5ub3coKTsgfTtcblxuICAgIENhdGNoU2NoZWR1bGVyLnByb3RvdHlwZS5fY2xvbmUgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2F0Y2hTY2hlZHVsZXIoc2NoZWR1bGVyLCB0aGlzLl9oYW5kbGVyKTtcbiAgICB9O1xuXG4gICAgQ2F0Y2hTY2hlZHVsZXIucHJvdG90eXBlLl93cmFwID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgdmFyIHBhcmVudCA9IHRoaXM7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHNlbGYsIHN0YXRlKSB7XG4gICAgICAgIHZhciByZXMgPSB0cnlDYXRjaChhY3Rpb24pKHBhcmVudC5fZ2V0UmVjdXJzaXZlV3JhcHBlcihzZWxmKSwgc3RhdGUpO1xuICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikge1xuICAgICAgICAgIGlmICghcGFyZW50Ll9oYW5kbGVyKHJlcy5lKSkgeyB0aHJvd2VyKHJlcy5lKTsgfVxuICAgICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVGaXh1cChyZXMpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgQ2F0Y2hTY2hlZHVsZXIucHJvdG90eXBlLl9nZXRSZWN1cnNpdmVXcmFwcGVyID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgICAgaWYgKHRoaXMuX3JlY3Vyc2l2ZU9yaWdpbmFsICE9PSBzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy5fcmVjdXJzaXZlT3JpZ2luYWwgPSBzY2hlZHVsZXI7XG4gICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy5fY2xvbmUoc2NoZWR1bGVyKTtcbiAgICAgICAgd3JhcHBlci5fcmVjdXJzaXZlT3JpZ2luYWwgPSBzY2hlZHVsZXI7XG4gICAgICAgIHdyYXBwZXIuX3JlY3Vyc2l2ZVdyYXBwZXIgPSB3cmFwcGVyO1xuICAgICAgICB0aGlzLl9yZWN1cnNpdmVXcmFwcGVyID0gd3JhcHBlcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9yZWN1cnNpdmVXcmFwcGVyO1xuICAgIH07XG5cbiAgICBDYXRjaFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVQZXJpb2RpYyA9IGZ1bmN0aW9uIChzdGF0ZSwgcGVyaW9kLCBhY3Rpb24pIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcywgZmFpbGVkID0gZmFsc2UsIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblxuICAgICAgZC5zZXREaXNwb3NhYmxlKHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVBlcmlvZGljKHN0YXRlLCBwZXJpb2QsIGZ1bmN0aW9uIChzdGF0ZTEpIHtcbiAgICAgICAgaWYgKGZhaWxlZCkgeyByZXR1cm4gbnVsbDsgfVxuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2goYWN0aW9uKShzdGF0ZTEpO1xuICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikge1xuICAgICAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICAgICAgaWYgKCFzZWxmLl9oYW5kbGVyKHJlcy5lKSkgeyB0aHJvd2VyKHJlcy5lKTsgfVxuICAgICAgICAgIGQuZGlzcG9zZSgpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBkO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ2F0Y2hTY2hlZHVsZXI7XG4gIH0oU2NoZWR1bGVyKSk7XG5cbiAgLyoqXG4gICAqICBSZXByZXNlbnRzIGEgbm90aWZpY2F0aW9uIHRvIGFuIG9ic2VydmVyLlxuICAgKi9cbiAgdmFyIE5vdGlmaWNhdGlvbiA9IFJ4Lk5vdGlmaWNhdGlvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTm90aWZpY2F0aW9uKCkge1xuXG4gICAgfVxuXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0ID0gZnVuY3Rpb24gKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gICAgfTtcblxuICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdE9ic2VydmVyID0gZnVuY3Rpb24gKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEludm9rZXMgdGhlIGRlbGVnYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG5vdGlmaWNhdGlvbiBvciB0aGUgb2JzZXJ2ZXIncyBtZXRob2QgY29ycmVzcG9uZGluZyB0byB0aGUgbm90aWZpY2F0aW9uIGFuZCByZXR1cm5zIHRoZSBwcm9kdWNlZCByZXN1bHQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbiB8IE9ic2VydmVyfSBvYnNlcnZlck9yT25OZXh0IEZ1bmN0aW9uIHRvIGludm9rZSBmb3IgYW4gT25OZXh0IG5vdGlmaWNhdGlvbiBvciBPYnNlcnZlciB0byBpbnZva2UgdGhlIG5vdGlmaWNhdGlvbiBvbi4uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25FcnJvciBGdW5jdGlvbiB0byBpbnZva2UgZm9yIGFuIE9uRXJyb3Igbm90aWZpY2F0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uQ29tcGxldGVkIEZ1bmN0aW9uIHRvIGludm9rZSBmb3IgYW4gT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBbnl9IFJlc3VsdCBwcm9kdWNlZCBieSB0aGUgb2JzZXJ2YXRpb24uXG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5hY2NlcHQgPSBmdW5jdGlvbiAob2JzZXJ2ZXJPck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICAgIHJldHVybiBvYnNlcnZlck9yT25OZXh0ICYmIHR5cGVvZiBvYnNlcnZlck9yT25OZXh0ID09PSAnb2JqZWN0JyA/XG4gICAgICAgIHRoaXMuX2FjY2VwdE9ic2VydmVyKG9ic2VydmVyT3JPbk5leHQpIDpcbiAgICAgICAgdGhpcy5fYWNjZXB0KG9ic2VydmVyT3JPbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggYSBzaW5nbGUgbm90aWZpY2F0aW9uLlxuICAgICAqXG4gICAgICogQG1lbWJlck9mIE5vdGlmaWNhdGlvbnNcbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHNlbmQgb3V0IHRoZSBub3RpZmljYXRpb24gY2FsbHMgb24uXG4gICAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc3VyZmFjZXMgdGhlIGJlaGF2aW9yIG9mIHRoZSBub3RpZmljYXRpb24gdXBvbiBzdWJzY3JpcHRpb24uXG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b09ic2VydmFibGUgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBpbW1lZGlhdGVTY2hlZHVsZXIpO1xuICAgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoc2VsZiwgZnVuY3Rpb24gKF8sIG5vdGlmaWNhdGlvbikge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbi5fYWNjZXB0T2JzZXJ2ZXIobyk7XG4gICAgICAgICAgbm90aWZpY2F0aW9uLmtpbmQgPT09ICdOJyAmJiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBOb3RpZmljYXRpb247XG4gIH0pKCk7XG5cbiAgdmFyIE9uTmV4dE5vdGlmaWNhdGlvbiA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoT25OZXh0Tm90aWZpY2F0aW9uLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE9uTmV4dE5vdGlmaWNhdGlvbih2YWx1ZSkge1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy5raW5kID0gJ04nO1xuICAgIH1cblxuICAgIE9uTmV4dE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdCA9IGZ1bmN0aW9uIChvbk5leHQpIHtcbiAgICAgIHJldHVybiBvbk5leHQodGhpcy52YWx1ZSk7XG4gICAgfTtcblxuICAgIE9uTmV4dE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdE9ic2VydmVyID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBvLm9uTmV4dCh0aGlzLnZhbHVlKTtcbiAgICB9O1xuXG4gICAgT25OZXh0Tm90aWZpY2F0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAnT25OZXh0KCcgKyB0aGlzLnZhbHVlICsgJyknO1xuICAgIH07XG5cbiAgICByZXR1cm4gT25OZXh0Tm90aWZpY2F0aW9uO1xuICB9KE5vdGlmaWNhdGlvbikpO1xuXG4gIHZhciBPbkVycm9yTm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPbkVycm9yTm90aWZpY2F0aW9uLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE9uRXJyb3JOb3RpZmljYXRpb24oZXJyb3IpIHtcbiAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICAgIHRoaXMua2luZCA9ICdFJztcbiAgICB9XG5cbiAgICBPbkVycm9yTm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0ID0gZnVuY3Rpb24gKG9uTmV4dCwgb25FcnJvcikge1xuICAgICAgcmV0dXJuIG9uRXJyb3IodGhpcy5lcnJvcik7XG4gICAgfTtcblxuICAgIE9uRXJyb3JOb3RpZmljYXRpb24ucHJvdG90eXBlLl9hY2NlcHRPYnNlcnZlciA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gby5vbkVycm9yKHRoaXMuZXJyb3IpO1xuICAgIH07XG5cbiAgICBPbkVycm9yTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAnT25FcnJvcignICsgdGhpcy5lcnJvciArICcpJztcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9uRXJyb3JOb3RpZmljYXRpb247XG4gIH0oTm90aWZpY2F0aW9uKSk7XG5cbiAgdmFyIE9uQ29tcGxldGVkTm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbiwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbigpIHtcbiAgICAgIHRoaXMua2luZCA9ICdDJztcbiAgICB9XG5cbiAgICBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdCA9IGZ1bmN0aW9uIChvbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG4gICAgICByZXR1cm4gb25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgT25Db21wbGV0ZWROb3RpZmljYXRpb24ucHJvdG90eXBlLl9hY2NlcHRPYnNlcnZlciA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gJ09uQ29tcGxldGVkKCknO1xuICAgIH07XG5cbiAgICByZXR1cm4gT25Db21wbGV0ZWROb3RpZmljYXRpb247XG4gIH0oTm90aWZpY2F0aW9uKSk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhbiBPbk5leHQgbm90aWZpY2F0aW9uIHRvIGFuIG9ic2VydmVyLlxuICAgKiBAcGFyYW0ge0FueX0gdmFsdWUgVGhlIHZhbHVlIGNvbnRhaW5lZCBpbiB0aGUgbm90aWZpY2F0aW9uLlxuICAgKiBAcmV0dXJucyB7Tm90aWZpY2F0aW9ufSBUaGUgT25OZXh0IG5vdGlmaWNhdGlvbiBjb250YWluaW5nIHRoZSB2YWx1ZS5cbiAgICovXG4gIHZhciBub3RpZmljYXRpb25DcmVhdGVPbk5leHQgPSBOb3RpZmljYXRpb24uY3JlYXRlT25OZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIG5ldyBPbk5leHROb3RpZmljYXRpb24odmFsdWUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgYW4gT25FcnJvciBub3RpZmljYXRpb24gdG8gYW4gb2JzZXJ2ZXIuXG4gICAqIEBwYXJhbSB7QW55fSBlcnJvciBUaGUgZXhjZXB0aW9uIGNvbnRhaW5lZCBpbiB0aGUgbm90aWZpY2F0aW9uLlxuICAgKiBAcmV0dXJucyB7Tm90aWZpY2F0aW9ufSBUaGUgT25FcnJvciBub3RpZmljYXRpb24gY29udGFpbmluZyB0aGUgZXhjZXB0aW9uLlxuICAgKi9cbiAgdmFyIG5vdGlmaWNhdGlvbkNyZWF0ZU9uRXJyb3IgPSBOb3RpZmljYXRpb24uY3JlYXRlT25FcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgIHJldHVybiBuZXcgT25FcnJvck5vdGlmaWNhdGlvbihlcnJvcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhbiBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24gdG8gYW4gb2JzZXJ2ZXIuXG4gICAqIEByZXR1cm5zIHtOb3RpZmljYXRpb259IFRoZSBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24uXG4gICAqL1xuICB2YXIgbm90aWZpY2F0aW9uQ3JlYXRlT25Db21wbGV0ZWQgPSBOb3RpZmljYXRpb24uY3JlYXRlT25Db21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbigpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdXBwb3J0cyBwdXNoLXN0eWxlIGl0ZXJhdGlvbiBvdmVyIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqL1xuICB2YXIgT2JzZXJ2ZXIgPSBSeC5PYnNlcnZlciA9IGZ1bmN0aW9uICgpIHsgfTtcblxuICAvKipcbiAgICogIENyZWF0ZXMgYSBub3RpZmljYXRpb24gY2FsbGJhY2sgZnJvbSBhbiBvYnNlcnZlci5cbiAgICogQHJldHVybnMgVGhlIGFjdGlvbiB0aGF0IGZvcndhcmRzIGl0cyBpbnB1dCBub3RpZmljYXRpb24gdG8gdGhlIHVuZGVybHlpbmcgb2JzZXJ2ZXIuXG4gICAqL1xuICBPYnNlcnZlci5wcm90b3R5cGUudG9Ob3RpZmllciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb2JzZXJ2ZXIgPSB0aGlzO1xuICAgIHJldHVybiBmdW5jdGlvbiAobikgeyByZXR1cm4gbi5hY2NlcHQob2JzZXJ2ZXIpOyB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiAgSGlkZXMgdGhlIGlkZW50aXR5IG9mIGFuIG9ic2VydmVyLlxuICAgKiBAcmV0dXJucyBBbiBvYnNlcnZlciB0aGF0IGhpZGVzIHRoZSBpZGVudGl0eSBvZiB0aGUgc3BlY2lmaWVkIG9ic2VydmVyLlxuICAgKi9cbiAgT2JzZXJ2ZXIucHJvdG90eXBlLmFzT2JzZXJ2ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2ZXIoXG4gICAgICBmdW5jdGlvbiAoeCkgeyBzZWxmLm9uTmV4dCh4KTsgfSxcbiAgICAgIGZ1bmN0aW9uIChlcnIpIHsgc2VsZi5vbkVycm9yKGVycik7IH0sXG4gICAgICBmdW5jdGlvbiAoKSB7IHNlbGYub25Db21wbGV0ZWQoKTsgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBDaGVja3MgYWNjZXNzIHRvIHRoZSBvYnNlcnZlciBmb3IgZ3JhbW1hciB2aW9sYXRpb25zLiBUaGlzIGluY2x1ZGVzIGNoZWNraW5nIGZvciBtdWx0aXBsZSBPbkVycm9yIG9yIE9uQ29tcGxldGVkIGNhbGxzLCBhcyB3ZWxsIGFzIHJlZW50cmFuY3kgaW4gYW55IG9mIHRoZSBvYnNlcnZlciBtZXRob2RzLlxuICAgKiAgSWYgYSB2aW9sYXRpb24gaXMgZGV0ZWN0ZWQsIGFuIEVycm9yIGlzIHRocm93biBmcm9tIHRoZSBvZmZlbmRpbmcgb2JzZXJ2ZXIgbWV0aG9kIGNhbGwuXG4gICAqIEByZXR1cm5zIEFuIG9ic2VydmVyIHRoYXQgY2hlY2tzIGNhbGxiYWNrcyBpbnZvY2F0aW9ucyBhZ2FpbnN0IHRoZSBvYnNlcnZlciBncmFtbWFyIGFuZCwgaWYgdGhlIGNoZWNrcyBwYXNzLCBmb3J3YXJkcyB0aG9zZSB0byB0aGUgc3BlY2lmaWVkIG9ic2VydmVyLlxuICAgKi9cbiAgT2JzZXJ2ZXIucHJvdG90eXBlLmNoZWNrZWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgQ2hlY2tlZE9ic2VydmVyKHRoaXMpOyB9O1xuXG4gIC8qKlxuICAgKiAgQ3JlYXRlcyBhbiBvYnNlcnZlciBmcm9tIHRoZSBzcGVjaWZpZWQgT25OZXh0LCBhbG9uZyB3aXRoIG9wdGlvbmFsIE9uRXJyb3IsIGFuZCBPbkNvbXBsZXRlZCBhY3Rpb25zLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25OZXh0XSBPYnNlcnZlcidzIE9uTmV4dCBhY3Rpb24gaW1wbGVtZW50YXRpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkVycm9yXSBPYnNlcnZlcidzIE9uRXJyb3IgYWN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25Db21wbGV0ZWRdIE9ic2VydmVyJ3MgT25Db21wbGV0ZWQgYWN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2ZXJ9IFRoZSBvYnNlcnZlciBvYmplY3QgaW1wbGVtZW50ZWQgdXNpbmcgdGhlIGdpdmVuIGFjdGlvbnMuXG4gICAqL1xuICB2YXIgb2JzZXJ2ZXJDcmVhdGUgPSBPYnNlcnZlci5jcmVhdGUgPSBmdW5jdGlvbiAob25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuICAgIG9uTmV4dCB8fCAob25OZXh0ID0gbm9vcCk7XG4gICAgb25FcnJvciB8fCAob25FcnJvciA9IGRlZmF1bHRFcnJvcik7XG4gICAgb25Db21wbGV0ZWQgfHwgKG9uQ29tcGxldGVkID0gbm9vcCk7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZlcihvbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKTtcbiAgfTtcblxuICAvKipcbiAgICogIENyZWF0ZXMgYW4gb2JzZXJ2ZXIgZnJvbSBhIG5vdGlmaWNhdGlvbiBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBBY3Rpb24gdGhhdCBoYW5kbGVzIGEgbm90aWZpY2F0aW9uLlxuICAgKiBAcmV0dXJucyBUaGUgb2JzZXJ2ZXIgb2JqZWN0IHRoYXQgaW52b2tlcyB0aGUgc3BlY2lmaWVkIGhhbmRsZXIgdXNpbmcgYSBub3RpZmljYXRpb24gY29ycmVzcG9uZGluZyB0byBlYWNoIG1lc3NhZ2UgaXQgcmVjZWl2ZXMuXG4gICAqL1xuICBPYnNlcnZlci5mcm9tTm90aWZpZXIgPSBmdW5jdGlvbiAoaGFuZGxlciwgdGhpc0FyZykge1xuICAgIHZhciBjYiA9IGJpbmRDYWxsYmFjayhoYW5kbGVyLCB0aGlzQXJnLCAxKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmVyKGZ1bmN0aW9uICh4KSB7XG4gICAgICByZXR1cm4gY2Iobm90aWZpY2F0aW9uQ3JlYXRlT25OZXh0KHgpKTtcbiAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIGNiKG5vdGlmaWNhdGlvbkNyZWF0ZU9uRXJyb3IoZSkpO1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBjYihub3RpZmljYXRpb25DcmVhdGVPbkNvbXBsZXRlZCgpKTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogU2NoZWR1bGVzIHRoZSBpbnZvY2F0aW9uIG9mIG9ic2VydmVyIG1ldGhvZHMgb24gdGhlIGdpdmVuIHNjaGVkdWxlci5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdG8gc2NoZWR1bGUgb2JzZXJ2ZXIgbWVzc2FnZXMgb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZlcn0gT2JzZXJ2ZXIgd2hvc2UgbWVzc2FnZXMgYXJlIHNjaGVkdWxlZCBvbiB0aGUgZ2l2ZW4gc2NoZWR1bGVyLlxuICAgKi9cbiAgT2JzZXJ2ZXIucHJvdG90eXBlLm5vdGlmeU9uID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2ZU9uT2JzZXJ2ZXIoc2NoZWR1bGVyLCB0aGlzKTtcbiAgfTtcblxuICBPYnNlcnZlci5wcm90b3R5cGUubWFrZVNhZmUgPSBmdW5jdGlvbihkaXNwb3NhYmxlKSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNTYWZlT2JzZXJ2ZXIodGhpcy5fb25OZXh0LCB0aGlzLl9vbkVycm9yLCB0aGlzLl9vbkNvbXBsZXRlZCwgZGlzcG9zYWJsZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgT2JzZXJ2ZXIgY2xhc3MuXG4gICAqIFRoaXMgYmFzZSBjbGFzcyBlbmZvcmNlcyB0aGUgZ3JhbW1hciBvZiBvYnNlcnZlcnMgd2hlcmUgT25FcnJvciBhbmQgT25Db21wbGV0ZWQgYXJlIHRlcm1pbmFsIG1lc3NhZ2VzLlxuICAgKi9cbiAgdmFyIEFic3RyYWN0T2JzZXJ2ZXIgPSBSeC5pbnRlcm5hbHMuQWJzdHJhY3RPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQWJzdHJhY3RPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgb2JzZXJ2ZXIgaW4gYSBub24tc3RvcHBlZCBzdGF0ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBYnN0cmFjdE9ic2VydmVyKCkge1xuICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBNdXN0IGJlIGltcGxlbWVudGVkIGJ5IG90aGVyIG9ic2VydmVyc1xuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBub3RJbXBsZW1lbnRlZDtcbiAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IG5vdEltcGxlbWVudGVkO1xuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IG5vdEltcGxlbWVudGVkO1xuXG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgdGhlIG9ic2VydmVyIG9mIGEgbmV3IGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAqIEBwYXJhbSB7QW55fSB2YWx1ZSBOZXh0IGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAqL1xuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLm9uTmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgIXRoaXMuaXNTdG9wcGVkICYmIHRoaXMubmV4dCh2YWx1ZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIHRoZSBvYnNlcnZlciB0aGF0IGFuIGV4Y2VwdGlvbiBoYXMgb2NjdXJyZWQuXG4gICAgICogQHBhcmFtIHtBbnl9IGVycm9yIFRoZSBlcnJvciB0aGF0IGhhcyBvY2N1cnJlZC5cbiAgICAgKi9cbiAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIHRoZSBvYnNlcnZlciBvZiB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cbiAgICAgKi9cbiAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5vbkNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlcyB0aGUgb2JzZXJ2ZXIsIGNhdXNpbmcgaXQgdG8gdHJhbnNpdGlvbiB0byB0aGUgc3RvcHBlZCBzdGF0ZS5cbiAgICAgKi9cbiAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkgeyB0aGlzLmlzU3RvcHBlZCA9IHRydWU7IH07XG5cbiAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5mYWlsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmVycm9yKGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICByZXR1cm4gQWJzdHJhY3RPYnNlcnZlcjtcbiAgfShPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBDbGFzcyB0byBjcmVhdGUgYW4gT2JzZXJ2ZXIgaW5zdGFuY2UgZnJvbSBkZWxlZ2F0ZS1iYXNlZCBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIG9uKiBtZXRob2RzLlxuICAgKi9cbiAgdmFyIEFub255bW91c09ic2VydmVyID0gUnguQW5vbnltb3VzT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEFub255bW91c09ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYnNlcnZlciBmcm9tIHRoZSBzcGVjaWZpZWQgT25OZXh0LCBPbkVycm9yLCBhbmQgT25Db21wbGV0ZWQgYWN0aW9ucy5cbiAgICAgKiBAcGFyYW0ge0FueX0gb25OZXh0IE9ic2VydmVyJ3MgT25OZXh0IGFjdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FueX0gb25FcnJvciBPYnNlcnZlcidzIE9uRXJyb3IgYWN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgICAqIEBwYXJhbSB7QW55fSBvbkNvbXBsZXRlZCBPYnNlcnZlcidzIE9uQ29tcGxldGVkIGFjdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBbm9ueW1vdXNPYnNlcnZlcihvbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuX29uTmV4dCA9IG9uTmV4dDtcbiAgICAgIHRoaXMuX29uRXJyb3IgPSBvbkVycm9yO1xuICAgICAgdGhpcy5fb25Db21wbGV0ZWQgPSBvbkNvbXBsZXRlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxscyB0aGUgb25OZXh0IGFjdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FueX0gdmFsdWUgTmV4dCBlbGVtZW50IGluIHRoZSBzZXF1ZW5jZS5cbiAgICAgKi9cbiAgICBBbm9ueW1vdXNPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5fb25OZXh0KHZhbHVlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2FsbHMgdGhlIG9uRXJyb3IgYWN0aW9uLlxuICAgICAqIEBwYXJhbSB7QW55fSBlcnJvciBUaGUgZXJyb3IgdGhhdCBoYXMgb2NjdXJyZWQuXG4gICAgICovXG4gICAgQW5vbnltb3VzT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICB0aGlzLl9vbkVycm9yKGVycm9yKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogIENhbGxzIHRoZSBvbkNvbXBsZXRlZCBhY3Rpb24uXG4gICAgICovXG4gICAgQW5vbnltb3VzT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX29uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBBbm9ueW1vdXNPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgdmFyIENoZWNrZWRPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ2hlY2tlZE9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gQ2hlY2tlZE9ic2VydmVyKG9ic2VydmVyKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuX29ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgICB0aGlzLl9zdGF0ZSA9IDA7IC8vIDAgLSBpZGxlLCAxIC0gYnVzeSwgMiAtIGRvbmVcbiAgICB9XG5cbiAgICB2YXIgQ2hlY2tlZE9ic2VydmVyUHJvdG90eXBlID0gQ2hlY2tlZE9ic2VydmVyLnByb3RvdHlwZTtcblxuICAgIENoZWNrZWRPYnNlcnZlclByb3RvdHlwZS5vbk5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHRoaXMuY2hlY2tBY2Nlc3MoKTtcbiAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9vYnNlcnZlci5vbk5leHQpLmNhbGwodGhpcy5fb2JzZXJ2ZXIsIHZhbHVlKTtcbiAgICAgIHRoaXMuX3N0YXRlID0gMDtcbiAgICAgIHJlcyA9PT0gZXJyb3JPYmogJiYgdGhyb3dlcihyZXMuZSk7XG4gICAgfTtcblxuICAgIENoZWNrZWRPYnNlcnZlclByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgdGhpcy5jaGVja0FjY2VzcygpO1xuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX29ic2VydmVyLm9uRXJyb3IpLmNhbGwodGhpcy5fb2JzZXJ2ZXIsIGVycik7XG4gICAgICB0aGlzLl9zdGF0ZSA9IDI7XG4gICAgICByZXMgPT09IGVycm9yT2JqICYmIHRocm93ZXIocmVzLmUpO1xuICAgIH07XG5cbiAgICBDaGVja2VkT2JzZXJ2ZXJQcm90b3R5cGUub25Db21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNoZWNrQWNjZXNzKCk7XG4gICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fb2JzZXJ2ZXIub25Db21wbGV0ZWQpLmNhbGwodGhpcy5fb2JzZXJ2ZXIpO1xuICAgICAgdGhpcy5fc3RhdGUgPSAyO1xuICAgICAgcmVzID09PSBlcnJvck9iaiAmJiB0aHJvd2VyKHJlcy5lKTtcbiAgICB9O1xuXG4gICAgQ2hlY2tlZE9ic2VydmVyUHJvdG90eXBlLmNoZWNrQWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX3N0YXRlID09PSAxKSB7IHRocm93IG5ldyBFcnJvcignUmUtZW50cmFuY3kgZGV0ZWN0ZWQnKTsgfVxuICAgICAgaWYgKHRoaXMuX3N0YXRlID09PSAyKSB7IHRocm93IG5ldyBFcnJvcignT2JzZXJ2ZXIgY29tcGxldGVkJyk7IH1cbiAgICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gMCkgeyB0aGlzLl9zdGF0ZSA9IDE7IH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIENoZWNrZWRPYnNlcnZlcjtcbiAgfShPYnNlcnZlcikpO1xuXG4gIHZhciBTY2hlZHVsZWRPYnNlcnZlciA9IFJ4LmludGVybmFscy5TY2hlZHVsZWRPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2NoZWR1bGVkT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBTY2hlZHVsZWRPYnNlcnZlcihzY2hlZHVsZXIsIG9ic2VydmVyKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgICAgdGhpcy5pc0FjcXVpcmVkID0gZmFsc2U7XG4gICAgICB0aGlzLmhhc0ZhdWx0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgIHRoaXMuZGlzcG9zYWJsZSA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5xdWV1ZU5leHQob2JzZXJ2ZXIsIHgpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgb2JzZXJ2ZXIub25OZXh0KHgpOyB9OyB9XG4gICAgZnVuY3Rpb24gZW5xdWV1ZUVycm9yKG9ic2VydmVyLCBlKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IG9ic2VydmVyLm9uRXJyb3IoZSk7IH07IH1cbiAgICBmdW5jdGlvbiBlbnF1ZXVlQ29tcGxldGVkKG9ic2VydmVyKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IG9ic2VydmVyLm9uQ29tcGxldGVkKCk7IH07IH1cblxuICAgIFNjaGVkdWxlZE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMucXVldWUucHVzaChlbnF1ZXVlTmV4dCh0aGlzLm9ic2VydmVyLCB4KSk7XG4gICAgfTtcblxuICAgIFNjaGVkdWxlZE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLnF1ZXVlLnB1c2goZW5xdWV1ZUVycm9yKHRoaXMub2JzZXJ2ZXIsIGUpKTtcbiAgICB9O1xuXG4gICAgU2NoZWR1bGVkT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMucXVldWUucHVzaChlbnF1ZXVlQ29tcGxldGVkKHRoaXMub2JzZXJ2ZXIpKTtcbiAgICB9O1xuXG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgdmFyIHdvcms7XG4gICAgICBpZiAoc3RhdGUucXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICB3b3JrID0gc3RhdGUucXVldWUuc2hpZnQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLmlzQWNxdWlyZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHdvcmspKCk7XG4gICAgICBpZiAocmVzID09PSBlcnJvck9iaikge1xuICAgICAgICBzdGF0ZS5xdWV1ZSA9IFtdO1xuICAgICAgICBzdGF0ZS5oYXNGYXVsdGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRocm93ZXIocmVzLmUpO1xuICAgICAgfVxuICAgICAgcmVjdXJzZShzdGF0ZSk7XG4gICAgfVxuXG4gICAgU2NoZWR1bGVkT2JzZXJ2ZXIucHJvdG90eXBlLmVuc3VyZUFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpc093bmVyID0gZmFsc2U7XG4gICAgICBpZiAoIXRoaXMuaGFzRmF1bHRlZCAmJiB0aGlzLnF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaXNPd25lciA9ICF0aGlzLmlzQWNxdWlyZWQ7XG4gICAgICAgIHRoaXMuaXNBY3F1aXJlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpc093bmVyICYmXG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZS5zZXREaXNwb3NhYmxlKHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKHRoaXMsIHNjaGVkdWxlTWV0aG9kKSk7XG4gICAgfTtcblxuICAgIFNjaGVkdWxlZE9ic2VydmVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgX19zdXBlcl9fLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmRpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2NoZWR1bGVkT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIHZhciBPYnNlcnZlT25PYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoT2JzZXJ2ZU9uT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBPYnNlcnZlT25PYnNlcnZlcihzY2hlZHVsZXIsIG9ic2VydmVyLCBjYW5jZWwpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMsIHNjaGVkdWxlciwgb2JzZXJ2ZXIpO1xuICAgICAgdGhpcy5fY2FuY2VsID0gY2FuY2VsO1xuICAgIH1cblxuICAgIE9ic2VydmVPbk9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBfX3N1cGVyX18ucHJvdG90eXBlLm5leHQuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICB0aGlzLmVuc3VyZUFjdGl2ZSgpO1xuICAgIH07XG5cbiAgICBPYnNlcnZlT25PYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgX19zdXBlcl9fLnByb3RvdHlwZS5lcnJvci5jYWxsKHRoaXMsIGUpO1xuICAgICAgdGhpcy5lbnN1cmVBY3RpdmUoKTtcbiAgICB9O1xuXG4gICAgT2JzZXJ2ZU9uT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF9fc3VwZXJfXy5wcm90b3R5cGUuY29tcGxldGVkLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmVuc3VyZUFjdGl2ZSgpO1xuICAgIH07XG5cbiAgICBPYnNlcnZlT25PYnNlcnZlci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF9fc3VwZXJfXy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5fY2FuY2VsICYmIHRoaXMuX2NhbmNlbC5kaXNwb3NlKCk7XG4gICAgICB0aGlzLl9jYW5jZWwgPSBudWxsO1xuICAgIH07XG5cbiAgICByZXR1cm4gT2JzZXJ2ZU9uT2JzZXJ2ZXI7XG4gIH0pKFNjaGVkdWxlZE9ic2VydmVyKTtcblxuICB2YXIgb2JzZXJ2YWJsZVByb3RvO1xuXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIGEgcHVzaC1zdHlsZSBjb2xsZWN0aW9uLlxuICAgKi9cbiAgdmFyIE9ic2VydmFibGUgPSBSeC5PYnNlcnZhYmxlID0gKGZ1bmN0aW9uICgpIHtcblxuICAgIGZ1bmN0aW9uIG1ha2VTdWJzY3JpYmUoc2VsZiwgc3Vic2NyaWJlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgdmFyIG9sZE9uRXJyb3IgPSBvLm9uRXJyb3I7XG4gICAgICAgIG8ub25FcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgbWFrZVN0YWNrVHJhY2VMb25nKGUsIHNlbGYpO1xuICAgICAgICAgIG9sZE9uRXJyb3IuY2FsbChvLCBlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gc3Vic2NyaWJlLmNhbGwoc2VsZiwgbyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoKSB7XG4gICAgICBpZiAoUnguY29uZmlnLmxvbmdTdGFja1N1cHBvcnQgJiYgaGFzU3RhY2tzKSB7XG4gICAgICAgIHZhciBvbGRTdWJzY3JpYmUgPSB0aGlzLl9zdWJzY3JpYmU7XG4gICAgICAgIHZhciBlID0gdHJ5Q2F0Y2godGhyb3dlcikobmV3IEVycm9yKCkpLmU7XG4gICAgICAgIHRoaXMuc3RhY2sgPSBlLnN0YWNrLnN1YnN0cmluZyhlLnN0YWNrLmluZGV4T2YoJ1xcbicpICsgMSk7XG4gICAgICAgIHRoaXMuX3N1YnNjcmliZSA9IG1ha2VTdWJzY3JpYmUodGhpcywgb2xkU3Vic2NyaWJlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBvYnNlcnZhYmxlUHJvdG8gPSBPYnNlcnZhYmxlLnByb3RvdHlwZTtcblxuICAgIC8qKlxuICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBnaXZlbiBvYmplY3QgaXMgYW4gT2JzZXJ2YWJsZVxuICAgICogQHBhcmFtIHtBbnl9IEFuIG9iamVjdCB0byBkZXRlcm1pbmUgd2hldGhlciBpdCBpcyBhbiBPYnNlcnZhYmxlXG4gICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiBhbiBPYnNlcnZhYmxlLCBlbHNlIGZhbHNlLlxuICAgICovXG4gICAgT2JzZXJ2YWJsZS5pc09ic2VydmFibGUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIG8gJiYgaXNGdW5jdGlvbihvLnN1YnNjcmliZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqICBTdWJzY3JpYmVzIGFuIG8gdG8gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogIEBwYXJhbSB7TWl4ZWR9IFtvT3JPbk5leHRdIFRoZSBvYmplY3QgdGhhdCBpcyB0byByZWNlaXZlIG5vdGlmaWNhdGlvbnMgb3IgYW4gYWN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgICAqICBAcGFyYW0ge0Z1bmN0aW9ufSBbb25FcnJvcl0gQWN0aW9uIHRvIGludm9rZSB1cG9uIGV4Y2VwdGlvbmFsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgICAqICBAcGFyYW0ge0Z1bmN0aW9ufSBbb25Db21wbGV0ZWRdIEFjdGlvbiB0byBpbnZva2UgdXBvbiBncmFjZWZ1bCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiAgQHJldHVybnMge0RpcG9zYWJsZX0gQSBkaXNwb3NhYmxlIGhhbmRsaW5nIHRoZSBzdWJzY3JpcHRpb25zIGFuZCB1bnN1YnNjcmlwdGlvbnMuXG4gICAgICovXG4gICAgb2JzZXJ2YWJsZVByb3RvLnN1YnNjcmliZSA9IG9ic2VydmFibGVQcm90by5mb3JFYWNoID0gZnVuY3Rpb24gKG9Pck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUodHlwZW9mIG9Pck9uTmV4dCA9PT0gJ29iamVjdCcgP1xuICAgICAgICBvT3JPbk5leHQgOlxuICAgICAgICBvYnNlcnZlckNyZWF0ZShvT3JPbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZXMgdG8gdGhlIG5leHQgdmFsdWUgaW4gdGhlIHNlcXVlbmNlIHdpdGggYW4gb3B0aW9uYWwgXCJ0aGlzXCIgYXJndW1lbnQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25OZXh0IFRoZSBmdW5jdGlvbiB0byBpbnZva2Ugb24gZWFjaCBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBBIGRpc3Bvc2FibGUgaGFuZGxpbmcgdGhlIHN1YnNjcmlwdGlvbnMgYW5kIHVuc3Vic2NyaXB0aW9ucy5cbiAgICAgKi9cbiAgICBvYnNlcnZhYmxlUHJvdG8uc3Vic2NyaWJlT25OZXh0ID0gZnVuY3Rpb24gKG9uTmV4dCwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShvYnNlcnZlckNyZWF0ZSh0eXBlb2YgdGhpc0FyZyAhPT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbih4KSB7IG9uTmV4dC5jYWxsKHRoaXNBcmcsIHgpOyB9IDogb25OZXh0KSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZXMgdG8gYW4gZXhjZXB0aW9uYWwgY29uZGl0aW9uIGluIHRoZSBzZXF1ZW5jZSB3aXRoIGFuIG9wdGlvbmFsIFwidGhpc1wiIGFyZ3VtZW50LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uRXJyb3IgVGhlIGZ1bmN0aW9uIHRvIGludm9rZSB1cG9uIGV4Y2VwdGlvbmFsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBBIGRpc3Bvc2FibGUgaGFuZGxpbmcgdGhlIHN1YnNjcmlwdGlvbnMgYW5kIHVuc3Vic2NyaXB0aW9ucy5cbiAgICAgKi9cbiAgICBvYnNlcnZhYmxlUHJvdG8uc3Vic2NyaWJlT25FcnJvciA9IGZ1bmN0aW9uIChvbkVycm9yLCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlKG9ic2VydmVyQ3JlYXRlKG51bGwsIHR5cGVvZiB0aGlzQXJnICE9PSAndW5kZWZpbmVkJyA/IGZ1bmN0aW9uKGUpIHsgb25FcnJvci5jYWxsKHRoaXNBcmcsIGUpOyB9IDogb25FcnJvcikpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmVzIHRvIHRoZSBuZXh0IHZhbHVlIGluIHRoZSBzZXF1ZW5jZSB3aXRoIGFuIG9wdGlvbmFsIFwidGhpc1wiIGFyZ3VtZW50LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uQ29tcGxldGVkIFRoZSBmdW5jdGlvbiB0byBpbnZva2UgdXBvbiBncmFjZWZ1bCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gQSBkaXNwb3NhYmxlIGhhbmRsaW5nIHRoZSBzdWJzY3JpcHRpb25zIGFuZCB1bnN1YnNjcmlwdGlvbnMuXG4gICAgICovXG4gICAgb2JzZXJ2YWJsZVByb3RvLnN1YnNjcmliZU9uQ29tcGxldGVkID0gZnVuY3Rpb24gKG9uQ29tcGxldGVkLCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlKG9ic2VydmVyQ3JlYXRlKG51bGwsIG51bGwsIHR5cGVvZiB0aGlzQXJnICE9PSAndW5kZWZpbmVkJyA/IGZ1bmN0aW9uKCkgeyBvbkNvbXBsZXRlZC5jYWxsKHRoaXNBcmcpOyB9IDogb25Db21wbGV0ZWQpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9ic2VydmFibGU7XG4gIH0pKCk7XG5cbiAgdmFyIE9ic2VydmFibGVCYXNlID0gUnguT2JzZXJ2YWJsZUJhc2UgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE9ic2VydmFibGVCYXNlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gZml4U3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG4gICAgICByZXR1cm4gc3Vic2NyaWJlciAmJiBpc0Z1bmN0aW9uKHN1YnNjcmliZXIuZGlzcG9zZSkgPyBzdWJzY3JpYmVyIDpcbiAgICAgICAgaXNGdW5jdGlvbihzdWJzY3JpYmVyKSA/IGRpc3Bvc2FibGVDcmVhdGUoc3Vic2NyaWJlcikgOiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0RGlzcG9zYWJsZShzLCBzdGF0ZSkge1xuICAgICAgdmFyIGFkbyA9IHN0YXRlWzBdLCBzZWxmID0gc3RhdGVbMV07XG4gICAgICB2YXIgc3ViID0gdHJ5Q2F0Y2goc2VsZi5zdWJzY3JpYmVDb3JlKS5jYWxsKHNlbGYsIGFkbyk7XG4gICAgICBpZiAoc3ViID09PSBlcnJvck9iaiAmJiAhYWRvLmZhaWwoZXJyb3JPYmouZSkpIHsgdGhyb3dlcihlcnJvck9iai5lKTsgfVxuICAgICAgYWRvLnNldERpc3Bvc2FibGUoZml4U3Vic2NyaWJlcihzdWIpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBPYnNlcnZhYmxlQmFzZSgpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE9ic2VydmFibGVCYXNlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBhZG8gPSBuZXcgQXV0b0RldGFjaE9ic2VydmVyKG8pLCBzdGF0ZSA9IFthZG8sIHRoaXNdO1xuXG4gICAgICBpZiAoY3VycmVudFRocmVhZFNjaGVkdWxlci5zY2hlZHVsZVJlcXVpcmVkKCkpIHtcbiAgICAgICAgY3VycmVudFRocmVhZFNjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgc2V0RGlzcG9zYWJsZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXREaXNwb3NhYmxlKG51bGwsIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhZG87XG4gICAgfTtcblxuICAgIE9ic2VydmFibGVCYXNlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gbm90SW1wbGVtZW50ZWQ7XG5cbiAgICByZXR1cm4gT2JzZXJ2YWJsZUJhc2U7XG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG52YXIgRmxhdE1hcE9ic2VydmFibGUgPSBSeC5GbGF0TWFwT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcblxuICAgIGluaGVyaXRzKEZsYXRNYXBPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gRmxhdE1hcE9ic2VydmFibGUoc291cmNlLCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSBpc0Z1bmN0aW9uKHJlc3VsdFNlbGVjdG9yKSA/IHJlc3VsdFNlbGVjdG9yIDogbnVsbDtcbiAgICAgIHRoaXMuc2VsZWN0b3IgPSBiaW5kQ2FsbGJhY2soaXNGdW5jdGlvbihzZWxlY3RvcikgPyBzZWxlY3RvciA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gc2VsZWN0b3I7IH0sIHRoaXNBcmcsIDMpO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBGbGF0TWFwT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobywgdGhpcy5zZWxlY3RvciwgdGhpcy5yZXN1bHRTZWxlY3RvciwgdGhpcykpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKG9ic2VydmVyLCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHNvdXJjZSkge1xuICAgICAgdGhpcy5pID0gMDtcbiAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5vID0gb2JzZXJ2ZXI7XG4gICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuX3dyYXBSZXN1bHQgPSBmdW5jdGlvbihyZXN1bHQsIHgsIGkpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlc3VsdFNlbGVjdG9yID9cbiAgICAgICAgcmVzdWx0Lm1hcChmdW5jdGlvbih5LCBpMikgeyByZXR1cm4gdGhpcy5yZXN1bHRTZWxlY3Rvcih4LCB5LCBpLCBpMik7IH0sIHRoaXMpIDpcbiAgICAgICAgcmVzdWx0O1xuICAgIH07XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oeCkge1xuICAgICAgdmFyIGkgPSB0aGlzLmkrKztcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLnNlbGVjdG9yKSh4LCBpLCB0aGlzLnNvdXJjZSk7XG4gICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG5cbiAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG4gICAgICAoaXNBcnJheUxpa2UocmVzdWx0KSB8fCBpc0l0ZXJhYmxlKHJlc3VsdCkpICYmIChyZXN1bHQgPSBPYnNlcnZhYmxlLmZyb20ocmVzdWx0KSk7XG4gICAgICB0aGlzLm8ub25OZXh0KHRoaXMuX3dyYXBSZXN1bHQocmVzdWx0LCB4LCBpKSk7XG4gICAgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24oZSkgeyB0aGlzLm8ub25FcnJvcihlKTsgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uKCkgeyB0aGlzLm8ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBGbGF0TWFwT2JzZXJ2YWJsZTtcblxufShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBFbnVtZXJhYmxlID0gUnguaW50ZXJuYWxzLkVudW1lcmFibGUgPSBmdW5jdGlvbiAoKSB7IH07XG5cbiAgZnVuY3Rpb24gSXNEaXNwb3NlZERpc3Bvc2FibGUoc3RhdGUpIHtcbiAgICB0aGlzLl9zID0gc3RhdGU7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gIH1cblxuICBJc0Rpc3Bvc2VkRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3MuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIHZhciBDb25jYXRFbnVtZXJhYmxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb25jYXRFbnVtZXJhYmxlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb25jYXRFbnVtZXJhYmxlT2JzZXJ2YWJsZShzb3VyY2VzKSB7XG4gICAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIGlmIChzdGF0ZS5pc0Rpc3Bvc2VkKSB7IHJldHVybjsgfVxuICAgICAgdmFyIGN1cnJlbnRJdGVtID0gdHJ5Q2F0Y2goc3RhdGUuZS5uZXh0KS5jYWxsKHN0YXRlLmUpO1xuICAgICAgaWYgKGN1cnJlbnRJdGVtID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKGN1cnJlbnRJdGVtLmUpOyB9XG4gICAgICBpZiAoY3VycmVudEl0ZW0uZG9uZSkgeyByZXR1cm4gc3RhdGUuby5vbkNvbXBsZXRlZCgpOyB9XG5cbiAgICAgIC8vIENoZWNrIGlmIHByb21pc2VcbiAgICAgIHZhciBjdXJyZW50VmFsdWUgPSBjdXJyZW50SXRlbS52YWx1ZTtcbiAgICAgIGlzUHJvbWlzZShjdXJyZW50VmFsdWUpICYmIChjdXJyZW50VmFsdWUgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudFZhbHVlKSk7XG5cbiAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICBzdGF0ZS5zdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZShjdXJyZW50VmFsdWUuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKHN0YXRlLCByZWN1cnNlKSkpO1xuICAgIH1cblxuICAgIENvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBpc0Rpc3Bvc2VkOiBmYWxzZSxcbiAgICAgICAgbzogbyxcbiAgICAgICAgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24sXG4gICAgICAgIGU6IHRoaXMuc291cmNlc1skaXRlcmF0b3IkXSgpXG4gICAgICB9O1xuXG4gICAgICB2YXIgY2FuY2VsYWJsZSA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUoc3RhdGUsIHNjaGVkdWxlTWV0aG9kKTtcbiAgICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoW3N1YnNjcmlwdGlvbiwgY2FuY2VsYWJsZSwgbmV3IElzRGlzcG9zZWREaXNwb3NhYmxlKHN0YXRlKV0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgdGhpcy5fcmVjdXJzZSA9IHJlY3Vyc2U7XG4gICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fc3RhdGUuby5vbk5leHQoeCk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9zdGF0ZS5vLm9uRXJyb3IoZSk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9yZWN1cnNlKHRoaXMuX3N0YXRlKTsgfTtcblxuICAgIHJldHVybiBDb25jYXRFbnVtZXJhYmxlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIEVudW1lcmFibGUucHJvdG90eXBlLmNvbmNhdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IENvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIHZhciBDYXRjaEVycm9yT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBmdW5jdGlvbiBDYXRjaEVycm9yT2JzZXJ2YWJsZShzb3VyY2VzKSB7XG4gICAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoQ2F0Y2hFcnJvck9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgaWYgKHN0YXRlLmlzRGlzcG9zZWQpIHsgcmV0dXJuOyB9XG4gICAgICB2YXIgY3VycmVudEl0ZW0gPSB0cnlDYXRjaChzdGF0ZS5lLm5leHQpLmNhbGwoc3RhdGUuZSk7XG4gICAgICBpZiAoY3VycmVudEl0ZW0gPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3IoY3VycmVudEl0ZW0uZSk7IH1cbiAgICAgIGlmIChjdXJyZW50SXRlbS5kb25lKSB7IHJldHVybiBzdGF0ZS5sYXN0RXJyb3IgIT09IG51bGwgPyBzdGF0ZS5vLm9uRXJyb3Ioc3RhdGUubGFzdEVycm9yKSA6IHN0YXRlLm8ub25Db21wbGV0ZWQoKTsgfVxuXG4gICAgICB2YXIgY3VycmVudFZhbHVlID0gY3VycmVudEl0ZW0udmFsdWU7XG4gICAgICBpc1Byb21pc2UoY3VycmVudFZhbHVlKSAmJiAoY3VycmVudFZhbHVlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGN1cnJlbnRWYWx1ZSkpO1xuXG4gICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgc3RhdGUuc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICBkLnNldERpc3Bvc2FibGUoY3VycmVudFZhbHVlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihzdGF0ZSwgcmVjdXJzZSkpKTtcbiAgICB9XG5cbiAgICBDYXRjaEVycm9yT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcbiAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgaXNEaXNwb3NlZDogZmFsc2UsXG4gICAgICAgIGU6IHRoaXMuc291cmNlc1skaXRlcmF0b3IkXSgpLFxuICAgICAgICBzdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvbixcbiAgICAgICAgbGFzdEVycm9yOiBudWxsLFxuICAgICAgICBvOiBvXG4gICAgICB9O1xuXG4gICAgICB2YXIgY2FuY2VsYWJsZSA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUoc3RhdGUsIHNjaGVkdWxlTWV0aG9kKTtcbiAgICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoW3N1YnNjcmlwdGlvbiwgY2FuY2VsYWJsZSwgbmV3IElzRGlzcG9zZWREaXNwb3NhYmxlKHN0YXRlKV0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgdGhpcy5fcmVjdXJzZSA9IHJlY3Vyc2U7XG4gICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fc3RhdGUuby5vbk5leHQoeCk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9zdGF0ZS5sYXN0RXJyb3IgPSBlOyB0aGlzLl9yZWN1cnNlKHRoaXMuX3N0YXRlKTsgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX3N0YXRlLm8ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBDYXRjaEVycm9yT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIEVudW1lcmFibGUucHJvdG90eXBlLmNhdGNoRXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBDYXRjaEVycm9yT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgUmVwZWF0RW51bWVyYWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUmVwZWF0RW51bWVyYWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBSZXBlYXRFbnVtZXJhYmxlKHYsIGMpIHtcbiAgICAgIHRoaXMudiA9IHY7XG4gICAgICB0aGlzLmMgPSBjID09IG51bGwgPyAtMSA6IGM7XG4gICAgfVxuXG4gICAgUmVwZWF0RW51bWVyYWJsZS5wcm90b3R5cGVbJGl0ZXJhdG9yJF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IFJlcGVhdEVudW1lcmF0b3IodGhpcyk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFJlcGVhdEVudW1lcmF0b3IocCkge1xuICAgICAgdGhpcy52ID0gcC52O1xuICAgICAgdGhpcy5sID0gcC5jO1xuICAgIH1cblxuICAgIFJlcGVhdEVudW1lcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5sID09PSAwKSB7IHJldHVybiBkb25lRW51bWVyYXRvcjsgfVxuICAgICAgaWYgKHRoaXMubCA+IDApIHsgdGhpcy5sLS07IH1cbiAgICAgIHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogdGhpcy52IH07XG4gICAgfTtcblxuICAgIHJldHVybiBSZXBlYXRFbnVtZXJhYmxlO1xuICB9KEVudW1lcmFibGUpKTtcblxuICB2YXIgZW51bWVyYWJsZVJlcGVhdCA9IEVudW1lcmFibGUucmVwZWF0ID0gZnVuY3Rpb24gKHZhbHVlLCByZXBlYXRDb3VudCkge1xuICAgIHJldHVybiBuZXcgUmVwZWF0RW51bWVyYWJsZSh2YWx1ZSwgcmVwZWF0Q291bnQpO1xuICB9O1xuXG4gIHZhciBPZkVudW1lcmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoT2ZFbnVtZXJhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE9mRW51bWVyYWJsZShzLCBmbiwgdGhpc0FyZykge1xuICAgICAgdGhpcy5zID0gcztcbiAgICAgIHRoaXMuZm4gPSBmbiA/IGJpbmRDYWxsYmFjayhmbiwgdGhpc0FyZywgMykgOiBudWxsO1xuICAgIH1cbiAgICBPZkVudW1lcmFibGUucHJvdG90eXBlWyRpdGVyYXRvciRdID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG5ldyBPZkVudW1lcmF0b3IodGhpcyk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIE9mRW51bWVyYXRvcihwKSB7XG4gICAgICB0aGlzLmkgPSAtMTtcbiAgICAgIHRoaXMucyA9IHAucztcbiAgICAgIHRoaXMubCA9IHRoaXMucy5sZW5ndGg7XG4gICAgICB0aGlzLmZuID0gcC5mbjtcbiAgICB9XG5cbiAgICBPZkVudW1lcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgIHJldHVybiArK3RoaXMuaSA8IHRoaXMubCA/XG4gICAgICAgeyBkb25lOiBmYWxzZSwgdmFsdWU6ICF0aGlzLmZuID8gdGhpcy5zW3RoaXMuaV0gOiB0aGlzLmZuKHRoaXMuc1t0aGlzLmldLCB0aGlzLmksIHRoaXMucykgfSA6XG4gICAgICAgZG9uZUVudW1lcmF0b3I7XG4gICAgfTtcblxuICAgIHJldHVybiBPZkVudW1lcmFibGU7XG4gIH0oRW51bWVyYWJsZSkpO1xuXG4gIHZhciBlbnVtZXJhYmxlT2YgPSBFbnVtZXJhYmxlLm9mID0gZnVuY3Rpb24gKHNvdXJjZSwgc2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gbmV3IE9mRW51bWVyYWJsZShzb3VyY2UsIHNlbGVjdG9yLCB0aGlzQXJnKTtcbiAgfTtcblxudmFyIE9ic2VydmVPbk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICBpbmhlcml0cyhPYnNlcnZlT25PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICBmdW5jdGlvbiBPYnNlcnZlT25PYnNlcnZhYmxlKHNvdXJjZSwgcykge1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMuX3MgPSBzO1xuICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICB9XG5cbiAgT2JzZXJ2ZU9uT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgT2JzZXJ2ZU9uT2JzZXJ2ZXIodGhpcy5fcywgbykpO1xuICB9O1xuXG4gIHJldHVybiBPYnNlcnZlT25PYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gICAvKipcbiAgICogIFdyYXBzIHRoZSBzb3VyY2Ugc2VxdWVuY2UgaW4gb3JkZXIgdG8gcnVuIGl0cyBvYnNlcnZlciBjYWxsYmFja3Mgb24gdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIuXG4gICAqXG4gICAqICBUaGlzIG9ubHkgaW52b2tlcyBvYnNlcnZlciBjYWxsYmFja3Mgb24gYSBzY2hlZHVsZXIuIEluIGNhc2UgdGhlIHN1YnNjcmlwdGlvbiBhbmQvb3IgdW5zdWJzY3JpcHRpb24gYWN0aW9ucyBoYXZlIHNpZGUtZWZmZWN0c1xuICAgKiAgdGhhdCByZXF1aXJlIHRvIGJlIHJ1biBvbiBhIHNjaGVkdWxlciwgdXNlIHN1YnNjcmliZU9uLlxuICAgKlxuICAgKiAgQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdG8gbm90aWZ5IG9ic2VydmVycyBvbi5cbiAgICogIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgc291cmNlIHNlcXVlbmNlIHdob3NlIG9ic2VydmF0aW9ucyBoYXBwZW4gb24gdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ub2JzZXJ2ZU9uID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2ZU9uT2JzZXJ2YWJsZSh0aGlzLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIHZhciBTdWJzY3JpYmVPbk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFN1YnNjcmliZU9uT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTdWJzY3JpYmVPbk9ic2VydmFibGUoc291cmNlLCBzKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qoc2NoZWR1bGVyLCBzdGF0ZSkge1xuICAgICAgdmFyIHNvdXJjZSA9IHN0YXRlWzBdLCBkID0gc3RhdGVbMV0sIG8gPSBzdGF0ZVsyXTtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZShuZXcgU2NoZWR1bGVkRGlzcG9zYWJsZShzY2hlZHVsZXIsIHNvdXJjZS5zdWJzY3JpYmUobykpKTtcbiAgICB9XG5cbiAgICBTdWJzY3JpYmVPbk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIG0gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSwgZCA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICBkLnNldERpc3Bvc2FibGUobSk7XG4gICAgICBtLnNldERpc3Bvc2FibGUodGhpcy5fcy5zY2hlZHVsZShbdGhpcy5zb3VyY2UsIGQsIG9dLCBzY2hlZHVsZU1ldGhvZCkpO1xuICAgICAgcmV0dXJuIGQ7XG4gICAgfTtcblxuICAgIHJldHVybiBTdWJzY3JpYmVPbk9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAgLyoqXG4gICAqICBXcmFwcyB0aGUgc291cmNlIHNlcXVlbmNlIGluIG9yZGVyIHRvIHJ1biBpdHMgc3Vic2NyaXB0aW9uIGFuZCB1bnN1YnNjcmlwdGlvbiBsb2dpYyBvbiB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlci4gVGhpcyBvcGVyYXRpb24gaXMgbm90IGNvbW1vbmx5IHVzZWQ7XG4gICAqICBzZWUgdGhlIHJlbWFya3Mgc2VjdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB0aGUgZGlzdGluY3Rpb24gYmV0d2VlbiBzdWJzY3JpYmVPbiBhbmQgb2JzZXJ2ZU9uLlxuXG4gICAqICBUaGlzIG9ubHkgcGVyZm9ybXMgdGhlIHNpZGUtZWZmZWN0cyBvZiBzdWJzY3JpcHRpb24gYW5kIHVuc3Vic2NyaXB0aW9uIG9uIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyLiBJbiBvcmRlciB0byBpbnZva2Ugb2JzZXJ2ZXJcbiAgICogIGNhbGxiYWNrcyBvbiBhIHNjaGVkdWxlciwgdXNlIG9ic2VydmVPbi5cblxuICAgKiAgQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdG8gcGVyZm9ybSBzdWJzY3JpcHRpb24gYW5kIHVuc3Vic2NyaXB0aW9uIGFjdGlvbnMgb24uXG4gICAqICBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSB3aG9zZSBzdWJzY3JpcHRpb25zIGFuZCB1bnN1YnNjcmlwdGlvbnMgaGFwcGVuIG9uIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnN1YnNjcmliZU9uID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgIHJldHVybiBuZXcgU3Vic2NyaWJlT25PYnNlcnZhYmxlKHRoaXMsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIEZyb21Qcm9taXNlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGcm9tUHJvbWlzZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRnJvbVByb21pc2VPYnNlcnZhYmxlKHAsIHMpIHtcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU5leHQocywgc3RhdGUpIHtcbiAgICAgIHZhciBvID0gc3RhdGVbMF0sIGRhdGEgPSBzdGF0ZVsxXTtcbiAgICAgIG8ub25OZXh0KGRhdGEpO1xuICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlRXJyb3Iocywgc3RhdGUpIHtcbiAgICAgIHZhciBvID0gc3RhdGVbMF0sIGVyciA9IHN0YXRlWzFdO1xuICAgICAgby5vbkVycm9yKGVycik7XG4gICAgfVxuXG4gICAgRnJvbVByb21pc2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIHNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLCBzZWxmID0gdGhpcztcblxuICAgICAgdGhpcy5fcFxuICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHNlbGYuX3Muc2NoZWR1bGUoW28sIGRhdGFdLCBzY2hlZHVsZU5leHQpKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHNlbGYuX3Muc2NoZWR1bGUoW28sIGVycl0sIHNjaGVkdWxlRXJyb3IpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzYWQ7XG4gICAgfTtcblxuICAgIHJldHVybiBGcm9tUHJvbWlzZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgKiBDb252ZXJ0cyBhIFByb21pc2UgdG8gYW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZVxuICAqIEBwYXJhbSB7UHJvbWlzZX0gQW4gRVM2IENvbXBsaWFudCBwcm9taXNlLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIHdyYXBzIHRoZSBleGlzdGluZyBwcm9taXNlIHN1Y2Nlc3MgYW5kIGZhaWx1cmUuXG4gICovXG4gIHZhciBvYnNlcnZhYmxlRnJvbVByb21pc2UgPSBPYnNlcnZhYmxlLmZyb21Qcm9taXNlID0gZnVuY3Rpb24gKHByb21pc2UsIHNjaGVkdWxlcikge1xuICAgIHNjaGVkdWxlciB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBGcm9tUHJvbWlzZU9ic2VydmFibGUocHJvbWlzZSwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICAvKlxuICAgKiBDb252ZXJ0cyBhbiBleGlzdGluZyBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGFuIEVTNiBDb21wYXRpYmxlIFByb21pc2VcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHByb21pc2UgPSBSeC5PYnNlcnZhYmxlLnJldHVybig0MikudG9Qcm9taXNlKFJTVlAuUHJvbWlzZSk7XG4gICAqXG4gICAqIC8vIFdpdGggY29uZmlnXG4gICAqIFJ4LmNvbmZpZy5Qcm9taXNlID0gUlNWUC5Qcm9taXNlO1xuICAgKiB2YXIgcHJvbWlzZSA9IFJ4Lk9ic2VydmFibGUucmV0dXJuKDQyKS50b1Byb21pc2UoKTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb21pc2VDdG9yXSBUaGUgY29uc3RydWN0b3Igb2YgdGhlIHByb21pc2UuIElmIG5vdCBwcm92aWRlZCwgaXQgbG9va3MgZm9yIGl0IGluIFJ4LmNvbmZpZy5Qcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQW4gRVM2IGNvbXBhdGlibGUgcHJvbWlzZSB3aXRoIHRoZSBsYXN0IHZhbHVlIGZyb20gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udG9Qcm9taXNlID0gZnVuY3Rpb24gKHByb21pc2VDdG9yKSB7XG4gICAgcHJvbWlzZUN0b3IgfHwgKHByb21pc2VDdG9yID0gUnguY29uZmlnLlByb21pc2UpO1xuICAgIGlmICghcHJvbWlzZUN0b3IpIHsgdGhyb3cgbmV3IE5vdFN1cHBvcnRlZEVycm9yKCdQcm9taXNlIHR5cGUgbm90IHByb3ZpZGVkIG5vciBpbiBSeC5jb25maWcuUHJvbWlzZScpOyB9XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAvLyBObyBjYW5jZWxsYXRpb24gY2FuIGJlIGRvbmVcbiAgICAgIHZhciB2YWx1ZTtcbiAgICAgIHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgdmFsdWUgPSB2O1xuICAgICAgfSwgcmVqZWN0LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIFRvQXJyYXlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRvQXJyYXlPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRvQXJyYXlPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUb0FycmF5T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobykpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKG8pIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLmEgPSBbXTtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuYS5wdXNoKHgpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5vLm9uRXJyb3IoZSk7ICB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5vLm9uTmV4dCh0aGlzLmEpOyB0aGlzLm8ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBUb0FycmF5T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAqIENyZWF0ZXMgYW4gYXJyYXkgZnJvbSBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgZWxlbWVudCB3aXRoIGEgbGlzdCBjb250YWluaW5nIGFsbCB0aGUgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBUb0FycmF5T2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogIENyZWF0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBmcm9tIGEgc3BlY2lmaWVkIHN1YnNjcmliZSBtZXRob2QgaW1wbGVtZW50YXRpb24uXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5jcmVhdGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IH0gKTtcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIFJ4LkRpc3Bvc2FibGUuZW1wdHk7IH0gKTtcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgfSApO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdWJzY3JpYmUgSW1wbGVtZW50YXRpb24gb2YgdGhlIHJlc3VsdGluZyBvYnNlcnZhYmxlIHNlcXVlbmNlJ3Mgc3Vic2NyaWJlIG1ldGhvZCwgcmV0dXJuaW5nIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIHdyYXBwZWQgaW4gYSBEaXNwb3NhYmxlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgc3BlY2lmaWVkIGltcGxlbWVudGF0aW9uIGZvciB0aGUgU3Vic2NyaWJlIG1ldGhvZC5cbiAgICovXG4gIE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHN1YnNjcmliZSwgcGFyZW50KSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKHN1YnNjcmliZSwgcGFyZW50KTtcbiAgfTtcblxuICB2YXIgRGVmZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGVmZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGVmZXIoZmFjdG9yeSkge1xuICAgICAgdGhpcy5fZiA9IGZhY3Rvcnk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEZWZlci5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZikoKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBvYnNlcnZhYmxlVGhyb3cocmVzdWx0LmUpLnN1YnNjcmliZShvKTt9XG4gICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgcmV0dXJuIHJlc3VsdC5zdWJzY3JpYmUobyk7XG4gICAgfTtcblxuICAgIHJldHVybiBEZWZlcjtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaW52b2tlcyB0aGUgc3BlY2lmaWVkIGZhY3RvcnkgZnVuY3Rpb24gd2hlbmV2ZXIgYSBuZXcgb2JzZXJ2ZXIgc3Vic2NyaWJlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmRlZmVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFJ4Lk9ic2VydmFibGUuZnJvbUFycmF5KFsxLDIsM10pOyB9KTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb2JzZXJ2YWJsZUZhY3RvcnkgT2JzZXJ2YWJsZSBmYWN0b3J5IGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBvYnNlcnZlciB0aGF0IHN1YnNjcmliZXMgdG8gdGhlIHJlc3VsdGluZyBzZXF1ZW5jZSBvciBQcm9taXNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBvYnNlcnZlcnMgdHJpZ2dlciBhbiBpbnZvY2F0aW9uIG9mIHRoZSBnaXZlbiBvYnNlcnZhYmxlIGZhY3RvcnkgZnVuY3Rpb24uXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZURlZmVyID0gT2JzZXJ2YWJsZS5kZWZlciA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlRmFjdG9yeSkge1xuICAgIHJldHVybiBuZXcgRGVmZXIob2JzZXJ2YWJsZUZhY3RvcnkpO1xuICB9O1xuXG4gIHZhciBFbXB0eU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRW1wdHlPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRW1wdHlPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgc2luayA9IG5ldyBFbXB0eVNpbmsob2JzZXJ2ZXIsIHRoaXMuc2NoZWR1bGVyKTtcbiAgICAgIHJldHVybiBzaW5rLnJ1bigpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBFbXB0eVNpbmsob2JzZXJ2ZXIsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVJdGVtKHMsIHN0YXRlKSB7XG4gICAgICBzdGF0ZS5vbkNvbXBsZXRlZCgpO1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICB9XG5cbiAgICBFbXB0eVNpbmsucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzdGF0ZSA9IHRoaXMub2JzZXJ2ZXI7XG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZXIgPT09IGltbWVkaWF0ZVNjaGVkdWxlciA/XG4gICAgICAgIHNjaGVkdWxlSXRlbShudWxsLCBzdGF0ZSkgOlxuICAgICAgICB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgc2NoZWR1bGVJdGVtKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEVtcHR5T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBFTVBUWV9PQlNFUlZBQkxFID0gbmV3IEVtcHR5T2JzZXJ2YWJsZShpbW1lZGlhdGVTY2hlZHVsZXIpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBlbXB0eSBvYnNlcnZhYmxlIHNlcXVlbmNlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBzZW5kIG91dCB0aGUgc2luZ2xlIE9uQ29tcGxldGVkIG1lc3NhZ2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5lbXB0eSgpO1xuICAgKiAgdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuZW1wdHkoUnguU2NoZWR1bGVyLnRpbWVvdXQpO1xuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHNlbmQgdGhlIHRlcm1pbmF0aW9uIGNhbGwgb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggbm8gZWxlbWVudHMuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZUVtcHR5ID0gT2JzZXJ2YWJsZS5lbXB0eSA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBpbW1lZGlhdGVTY2hlZHVsZXIpO1xuICAgIHJldHVybiBzY2hlZHVsZXIgPT09IGltbWVkaWF0ZVNjaGVkdWxlciA/IEVNUFRZX09CU0VSVkFCTEUgOiBuZXcgRW1wdHlPYnNlcnZhYmxlKHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIEZyb21PYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZyb21PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZyb21PYnNlcnZhYmxlKGl0ZXJhYmxlLCBmbiwgc2NoZWR1bGVyKSB7XG4gICAgICB0aGlzLl9pdGVyYWJsZSA9IGl0ZXJhYmxlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNjaGVkdWxlTWV0aG9kKG8sIGl0LCBmbikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxvb3BSZWN1cnNpdmUoaSwgcmVjdXJzZSkge1xuICAgICAgICB2YXIgbmV4dCA9IHRyeUNhdGNoKGl0Lm5leHQpLmNhbGwoaXQpO1xuICAgICAgICBpZiAobmV4dCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihuZXh0LmUpOyB9XG4gICAgICAgIGlmIChuZXh0LmRvbmUpIHsgcmV0dXJuIG8ub25Db21wbGV0ZWQoKTsgfVxuXG4gICAgICAgIHZhciByZXN1bHQgPSBuZXh0LnZhbHVlO1xuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuICAgICAgICAgIHJlc3VsdCA9IHRyeUNhdGNoKGZuKShyZXN1bHQsIGkpO1xuICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICAgIH1cblxuICAgICAgICBvLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICByZWN1cnNlKGkgKyAxKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgRnJvbU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGxpc3QgPSBPYmplY3QodGhpcy5faXRlcmFibGUpLFxuICAgICAgICAgIGl0ID0gZ2V0SXRlcmFibGUobGlzdCk7XG5cbiAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUoMCwgY3JlYXRlU2NoZWR1bGVNZXRob2QobywgaXQsIHRoaXMuX2ZuKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBGcm9tT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBtYXhTYWZlSW50ZWdlciA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG5cbiAgZnVuY3Rpb24gU3RyaW5nSXRlcmFibGUocykge1xuICAgIHRoaXMuX3MgPSBzO1xuICB9XG5cbiAgU3RyaW5nSXRlcmFibGUucHJvdG90eXBlWyRpdGVyYXRvciRdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgU3RyaW5nSXRlcmF0b3IodGhpcy5fcyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gU3RyaW5nSXRlcmF0b3Iocykge1xuICAgIHRoaXMuX3MgPSBzO1xuICAgIHRoaXMuX2wgPSBzLmxlbmd0aDtcbiAgICB0aGlzLl9pID0gMDtcbiAgfVxuXG4gIFN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBTdHJpbmdJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5faSA8IHRoaXMuX2wgPyB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogdGhpcy5fcy5jaGFyQXQodGhpcy5faSsrKSB9IDogZG9uZUVudW1lcmF0b3I7XG4gIH07XG5cbiAgZnVuY3Rpb24gQXJyYXlJdGVyYWJsZShhKSB7XG4gICAgdGhpcy5fYSA9IGE7XG4gIH1cblxuICBBcnJheUl0ZXJhYmxlLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IEFycmF5SXRlcmF0b3IodGhpcy5fYSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gQXJyYXlJdGVyYXRvcihhKSB7XG4gICAgdGhpcy5fYSA9IGE7XG4gICAgdGhpcy5fbCA9IHRvTGVuZ3RoKGEpO1xuICAgIHRoaXMuX2kgPSAwO1xuICB9XG5cbiAgQXJyYXlJdGVyYXRvci5wcm90b3R5cGVbJGl0ZXJhdG9yJF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgQXJyYXlJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5faSA8IHRoaXMuX2wgPyB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogdGhpcy5fYVt0aGlzLl9pKytdIH0gOiBkb25lRW51bWVyYXRvcjtcbiAgfTtcblxuICBmdW5jdGlvbiBudW1iZXJJc0Zpbml0ZSh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIHJvb3QuaXNGaW5pdGUodmFsdWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNOYW4obikge1xuICAgIHJldHVybiBuICE9PSBuO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SXRlcmFibGUobykge1xuICAgIHZhciBpID0gb1skaXRlcmF0b3IkXSwgaXQ7XG4gICAgaWYgKCFpICYmIHR5cGVvZiBvID09PSAnc3RyaW5nJykge1xuICAgICAgaXQgPSBuZXcgU3RyaW5nSXRlcmFibGUobyk7XG4gICAgICByZXR1cm4gaXRbJGl0ZXJhdG9yJF0oKTtcbiAgICB9XG4gICAgaWYgKCFpICYmIG8ubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGl0ID0gbmV3IEFycmF5SXRlcmFibGUobyk7XG4gICAgICByZXR1cm4gaXRbJGl0ZXJhdG9yJF0oKTtcbiAgICB9XG4gICAgaWYgKCFpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdCBpcyBub3QgaXRlcmFibGUnKTsgfVxuICAgIHJldHVybiBvWyRpdGVyYXRvciRdKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzaWduKHZhbHVlKSB7XG4gICAgdmFyIG51bWJlciA9ICt2YWx1ZTtcbiAgICBpZiAobnVtYmVyID09PSAwKSB7IHJldHVybiBudW1iZXI7IH1cbiAgICBpZiAoaXNOYU4obnVtYmVyKSkgeyByZXR1cm4gbnVtYmVyOyB9XG4gICAgcmV0dXJuIG51bWJlciA8IDAgPyAtMSA6IDE7XG4gIH1cblxuICBmdW5jdGlvbiB0b0xlbmd0aChvKSB7XG4gICAgdmFyIGxlbiA9ICtvLmxlbmd0aDtcbiAgICBpZiAoaXNOYU4obGVuKSkgeyByZXR1cm4gMDsgfVxuICAgIGlmIChsZW4gPT09IDAgfHwgIW51bWJlcklzRmluaXRlKGxlbikpIHsgcmV0dXJuIGxlbjsgfVxuICAgIGxlbiA9IHNpZ24obGVuKSAqIE1hdGguZmxvb3IoTWF0aC5hYnMobGVuKSk7XG4gICAgaWYgKGxlbiA8PSAwKSB7IHJldHVybiAwOyB9XG4gICAgaWYgKGxlbiA+IG1heFNhZmVJbnRlZ2VyKSB7IHJldHVybiBtYXhTYWZlSW50ZWdlcjsgfVxuICAgIHJldHVybiBsZW47XG4gIH1cblxuICAvKipcbiAgKiBUaGlzIG1ldGhvZCBjcmVhdGVzIGEgbmV3IE9ic2VydmFibGUgc2VxdWVuY2UgZnJvbSBhbiBhcnJheS1saWtlIG9yIGl0ZXJhYmxlIG9iamVjdC5cbiAgKiBAcGFyYW0ge0FueX0gYXJyYXlMaWtlIEFuIGFycmF5LWxpa2Ugb3IgaXRlcmFibGUgb2JqZWN0IHRvIGNvbnZlcnQgdG8gYW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbbWFwRm5dIE1hcCBmdW5jdGlvbiB0byBjYWxsIG9uIGV2ZXJ5IGVsZW1lbnQgb2YgdGhlIGFycmF5LlxuICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gVGhlIGNvbnRleHQgdG8gdXNlIGNhbGxpbmcgdGhlIG1hcEZuIGlmIHByb3ZpZGVkLlxuICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBPcHRpb25hbCBzY2hlZHVsZXIgdG8gdXNlIGZvciBzY2hlZHVsaW5nLiAgSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIuY3VycmVudFRocmVhZC5cbiAgKi9cbiAgdmFyIG9ic2VydmFibGVGcm9tID0gT2JzZXJ2YWJsZS5mcm9tID0gZnVuY3Rpb24gKGl0ZXJhYmxlLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG4gICAgaWYgKGl0ZXJhYmxlID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaXRlcmFibGUgY2Fubm90IGJlIG51bGwuJylcbiAgICB9XG4gICAgaWYgKG1hcEZuICYmICFpc0Z1bmN0aW9uKG1hcEZuKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdtYXBGbiB3aGVuIHByb3ZpZGVkIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgIH1cbiAgICBpZiAobWFwRm4pIHtcbiAgICAgIHZhciBtYXBwZXIgPSBiaW5kQ2FsbGJhY2sobWFwRm4sIHRoaXNBcmcsIDIpO1xuICAgIH1cbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEZyb21PYnNlcnZhYmxlKGl0ZXJhYmxlLCBtYXBwZXIsIHNjaGVkdWxlcik7XG4gIH1cblxuICB2YXIgRnJvbUFycmF5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGcm9tQXJyYXlPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZyb21BcnJheU9ic2VydmFibGUoYXJncywgc2NoZWR1bGVyKSB7XG4gICAgICB0aGlzLl9hcmdzID0gYXJncztcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKG8sIGFyZ3MpIHtcbiAgICAgIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBsb29wUmVjdXJzaXZlIChpLCByZWN1cnNlKSB7XG4gICAgICAgIGlmIChpIDwgbGVuKSB7XG4gICAgICAgICAgby5vbk5leHQoYXJnc1tpXSk7XG4gICAgICAgICAgcmVjdXJzZShpICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIEZyb21BcnJheU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZSgwLCBzY2hlZHVsZU1ldGhvZChvLCB0aGlzLl9hcmdzKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBGcm9tQXJyYXlPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogIENvbnZlcnRzIGFuIGFycmF5IHRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UsIHVzaW5nIGFuIG9wdGlvbmFsIHNjaGVkdWxlciB0byBlbnVtZXJhdGUgdGhlIGFycmF5LlxuICAqIEBkZXByZWNhdGVkIHVzZSBPYnNlcnZhYmxlLmZyb20gb3IgT2JzZXJ2YWJsZS5vZlxuICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSBlbnVtZXJhdGlvbiBvZiB0aGUgaW5wdXQgc2VxdWVuY2Ugb24uXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGFyZSBwdWxsZWQgZnJvbSB0aGUgZ2l2ZW4gZW51bWVyYWJsZSBzZXF1ZW5jZS5cbiAgKi9cbiAgdmFyIG9ic2VydmFibGVGcm9tQXJyYXkgPSBPYnNlcnZhYmxlLmZyb21BcnJheSA9IGZ1bmN0aW9uIChhcnJheSwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gY3VycmVudFRocmVhZFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBGcm9tQXJyYXlPYnNlcnZhYmxlKGFycmF5LCBzY2hlZHVsZXIpXG4gIH07XG5cbiAgdmFyIEdlbmVyYXRlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoR2VuZXJhdGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEdlbmVyYXRlT2JzZXJ2YWJsZShzdGF0ZSwgY25kRm4sIGl0ckZuLCByZXNGbiwgcykge1xuICAgICAgdGhpcy5faW5pdGlhbFN0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLl9jbmRGbiA9IGNuZEZuO1xuICAgICAgdGhpcy5faXRyRm4gPSBpdHJGbjtcbiAgICAgIHRoaXMuX3Jlc0ZuID0gcmVzRm47XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlUmVjdXJzaXZlKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICBpZiAoc3RhdGUuZmlyc3QpIHtcbiAgICAgICAgc3RhdGUuZmlyc3QgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLm5ld1N0YXRlID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5faXRyRm4pKHN0YXRlLm5ld1N0YXRlKTtcbiAgICAgICAgaWYgKHN0YXRlLm5ld1N0YXRlID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKHN0YXRlLm5ld1N0YXRlLmUpOyB9XG4gICAgICB9XG4gICAgICB2YXIgaGFzUmVzdWx0ID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5fY25kRm4pKHN0YXRlLm5ld1N0YXRlKTtcbiAgICAgIGlmIChoYXNSZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3IoaGFzUmVzdWx0LmUpOyB9XG4gICAgICBpZiAoaGFzUmVzdWx0KSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl9yZXNGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgICBzdGF0ZS5vLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICByZWN1cnNlKHN0YXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLm8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBHZW5lcmF0ZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBvOiBvLFxuICAgICAgICBzZWxmOiB0aGlzLFxuICAgICAgICBmaXJzdDogdHJ1ZSxcbiAgICAgICAgbmV3U3RhdGU6IHRoaXMuX2luaXRpYWxTdGF0ZVxuICAgICAgfTtcbiAgICAgIHJldHVybiB0aGlzLl9zLnNjaGVkdWxlUmVjdXJzaXZlKHN0YXRlLCBzY2hlZHVsZVJlY3Vyc2l2ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBHZW5lcmF0ZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIEdlbmVyYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHJ1bm5pbmcgYSBzdGF0ZS1kcml2ZW4gbG9vcCBwcm9kdWNpbmcgdGhlIHNlcXVlbmNlJ3MgZWxlbWVudHMsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHNlbmQgb3V0IG9ic2VydmVyIG1lc3NhZ2VzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuZ2VuZXJhdGUoMCwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggPCAxMDsgfSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggKyAxOyB9LCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XG4gICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5nZW5lcmF0ZSgwLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geCA8IDEwOyB9LCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geCArIDE7IH0sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9LCBSeC5TY2hlZHVsZXIudGltZW91dCk7XG4gICAqIEBwYXJhbSB7TWl4ZWR9IGluaXRpYWxTdGF0ZSBJbml0aWFsIHN0YXRlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25kaXRpb24gQ29uZGl0aW9uIHRvIHRlcm1pbmF0ZSBnZW5lcmF0aW9uICh1cG9uIHJldHVybmluZyBmYWxzZSkuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGUgSXRlcmF0aW9uIHN0ZXAgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc3VsdFNlbGVjdG9yIFNlbGVjdG9yIGZ1bmN0aW9uIGZvciByZXN1bHRzIHByb2R1Y2VkIGluIHRoZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciBvbiB3aGljaCB0byBydW4gdGhlIGdlbmVyYXRvciBsb29wLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci5jdXJyZW50VGhyZWFkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIGdlbmVyYXRlZCBzZXF1ZW5jZS5cbiAgICovXG4gIE9ic2VydmFibGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiAoaW5pdGlhbFN0YXRlLCBjb25kaXRpb24sIGl0ZXJhdGUsIHJlc3VsdFNlbGVjdG9yLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEdlbmVyYXRlT2JzZXJ2YWJsZShpbml0aWFsU3RhdGUsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3IsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZU9mIChzY2hlZHVsZXIsIGFycmF5KSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gY3VycmVudFRocmVhZFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBGcm9tQXJyYXlPYnNlcnZhYmxlKGFycmF5LCBzY2hlZHVsZXIpO1xuICB9XG5cbiAgLyoqXG4gICogIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBuZXcgT2JzZXJ2YWJsZSBpbnN0YW5jZSB3aXRoIGEgdmFyaWFibGUgbnVtYmVyIG9mIGFyZ3VtZW50cywgcmVnYXJkbGVzcyBvZiBudW1iZXIgb3IgdHlwZSBvZiB0aGUgYXJndW1lbnRzLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBlbGVtZW50cyBhcmUgcHVsbGVkIGZyb20gdGhlIGdpdmVuIGFyZ3VtZW50cy5cbiAgKi9cbiAgT2JzZXJ2YWJsZS5vZiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgcmV0dXJuIG5ldyBGcm9tQXJyYXlPYnNlcnZhYmxlKGFyZ3MsIGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICB9O1xuXG4gIC8qKlxuICAqICBUaGlzIG1ldGhvZCBjcmVhdGVzIGEgbmV3IE9ic2VydmFibGUgaW5zdGFuY2Ugd2l0aCBhIHZhcmlhYmxlIG51bWJlciBvZiBhcmd1bWVudHMsIHJlZ2FyZGxlc3Mgb2YgbnVtYmVyIG9yIHR5cGUgb2YgdGhlIGFyZ3VtZW50cy5cbiAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIEEgc2NoZWR1bGVyIHRvIHVzZSBmb3Igc2NoZWR1bGluZyB0aGUgYXJndW1lbnRzLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBlbGVtZW50cyBhcmUgcHVsbGVkIGZyb20gdGhlIGdpdmVuIGFyZ3VtZW50cy5cbiAgKi9cbiAgT2JzZXJ2YWJsZS5vZldpdGhTY2hlZHVsZXIgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0gMSk7XG4gICAgZm9yKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldOyB9XG4gICAgcmV0dXJuIG5ldyBGcm9tQXJyYXlPYnNlcnZhYmxlKGFyZ3MsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZSBmcm9tIGNoYW5nZXMgdG8gYW4gYXJyYXkgdXNpbmcgQXJyYXkub2JzZXJ2ZS5cbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgQW4gYXJyYXkgdG8gb2JzZXJ2ZSBjaGFuZ2VzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGNoYW5nZXMgdG8gYW4gYXJyYXkgZnJvbSBBcnJheS5vYnNlcnZlLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5vZkFycmF5Q2hhbmdlcyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcnJheS5vYnNlcnZlIG9ubHkgYWNjZXB0cyBhcnJheXMuJyk7IH1cbiAgICBpZiAodHlwZW9mIEFycmF5Lm9ic2VydmUgIT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIEFycmF5LnVub2JzZXJ2ZSAhPT0gJ2Z1bmN0aW9uJykgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcnJheS5vYnNlcnZlIGlzIG5vdCBzdXBwb3J0ZWQgb24geW91ciBwbGF0Zm9ybScpIH1cbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24ob2JzZXJ2ZXIpIHtcbiAgICAgIGZ1bmN0aW9uIG9ic2VydmVyRm4oY2hhbmdlcykge1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBjaGFuZ2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGNoYW5nZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIEFycmF5Lm9ic2VydmUoYXJyYXksIG9ic2VydmVyRm4pO1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBBcnJheS51bm9ic2VydmUoYXJyYXksIG9ic2VydmVyRm4pO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlIGZyb20gY2hhbmdlcyB0byBhbiBvYmplY3QgdXNpbmcgT2JqZWN0Lm9ic2VydmUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogQW4gb2JqZWN0IHRvIG9ic2VydmUgY2hhbmdlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBjaGFuZ2VzIHRvIGFuIG9iamVjdCBmcm9tIE9iamVjdC5vYnNlcnZlLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5vZk9iamVjdENoYW5nZXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignb2JqZWN0IG11c3Qgbm90IGJlIG51bGwgb3IgdW5kZWZpbmVkLicpOyB9XG4gICAgaWYgKHR5cGVvZiBPYmplY3Qub2JzZXJ2ZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgT2JqZWN0LnVub2JzZXJ2ZSAhPT0gJ2Z1bmN0aW9uJykgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3Qub2JzZXJ2ZSBpcyBub3Qgc3VwcG9ydGVkIG9uIHlvdXIgcGxhdGZvcm0nKSB9XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uKG9ic2VydmVyKSB7XG4gICAgICBmdW5jdGlvbiBvYnNlcnZlckZuKGNoYW5nZXMpIHtcbiAgICAgICAgZm9yKHZhciBpID0gMCwgbGVuID0gY2hhbmdlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChjaGFuZ2VzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBPYmplY3Qub2JzZXJ2ZShvYmosIG9ic2VydmVyRm4pO1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBPYmplY3QudW5vYnNlcnZlKG9iaiwgb2JzZXJ2ZXJGbik7XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBOZXZlck9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTmV2ZXJPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE5ldmVyT2JzZXJ2YWJsZSgpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE5ldmVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE5ldmVyT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBORVZFUl9PQlNFUlZBQkxFID0gbmV3IE5ldmVyT2JzZXJ2YWJsZSgpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbm9uLXRlcm1pbmF0aW5nIG9ic2VydmFibGUgc2VxdWVuY2UsIHdoaWNoIGNhbiBiZSB1c2VkIHRvIGRlbm90ZSBhbiBpbmZpbml0ZSBkdXJhdGlvbiAoZS5nLiB3aGVuIHVzaW5nIHJlYWN0aXZlIGpvaW5zKS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2Ugb2JzZXJ2ZXJzIHdpbGwgbmV2ZXIgZ2V0IGNhbGxlZC5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlTmV2ZXIgPSBPYnNlcnZhYmxlLm5ldmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBORVZFUl9PQlNFUlZBQkxFO1xuICB9O1xuXG4gIHZhciBQYWlyc09ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUGFpcnNPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFBhaXJzT2JzZXJ2YWJsZShvLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fa2V5cyA9IE9iamVjdC5rZXlzKG8pO1xuICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qobywgb2JqLCBrZXlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gbG9vcFJlY3Vyc2l2ZShpLCByZWN1cnNlKSB7XG4gICAgICAgIGlmIChpIDwga2V5cy5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICBvLm9uTmV4dChba2V5LCBvYmpba2V5XV0pO1xuICAgICAgICAgIHJlY3Vyc2UoaSArIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBQYWlyc09ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZSgwLCBzY2hlZHVsZU1ldGhvZChvLCB0aGlzLl9vLCB0aGlzLl9rZXlzKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBQYWlyc09ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogQ29udmVydCBhbiBvYmplY3QgaW50byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIFtrZXksIHZhbHVlXSBwYWlycy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSBlbnVtZXJhdGlvbiBvZiB0aGUgaW5wdXQgc2VxdWVuY2Ugb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIFtrZXksIHZhbHVlXSBwYWlycyBmcm9tIHRoZSBvYmplY3QuXG4gICAqL1xuICBPYnNlcnZhYmxlLnBhaXJzID0gZnVuY3Rpb24gKG9iaiwgc2NoZWR1bGVyKSB7XG4gICAgc2NoZWR1bGVyIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFBhaXJzT2JzZXJ2YWJsZShvYmosIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgICB2YXIgUmFuZ2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFJhbmdlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBSYW5nZU9ic2VydmFibGUoc3RhcnQsIGNvdW50LCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICAgIHRoaXMucmFuZ2VDb3VudCA9IGNvdW50O1xuICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb29wUmVjdXJzaXZlKHN0YXJ0LCBjb3VudCwgbykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxvb3AgKGksIHJlY3Vyc2UpIHtcbiAgICAgICAgaWYgKGkgPCBjb3VudCkge1xuICAgICAgICAgIG8ub25OZXh0KHN0YXJ0ICsgaSk7XG4gICAgICAgICAgcmVjdXJzZShpICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIFJhbmdlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUoXG4gICAgICAgIDAsXG4gICAgICAgIGxvb3BSZWN1cnNpdmUodGhpcy5zdGFydCwgdGhpcy5yYW5nZUNvdW50LCBvKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJhbmdlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAqICBHZW5lcmF0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiBpbnRlZ3JhbCBudW1iZXJzIHdpdGhpbiBhIHNwZWNpZmllZCByYW5nZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gc2VuZCBvdXQgb2JzZXJ2ZXIgbWVzc2FnZXMuXG4gICogQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0IFRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgaW50ZWdlciBpbiB0aGUgc2VxdWVuY2UuXG4gICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IFRoZSBudW1iZXIgb2Ygc2VxdWVudGlhbCBpbnRlZ2VycyB0byBnZW5lcmF0ZS5cbiAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHJ1biB0aGUgZ2VuZXJhdG9yIGxvb3Agb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci5jdXJyZW50VGhyZWFkLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgYSByYW5nZSBvZiBzZXF1ZW50aWFsIGludGVncmFsIG51bWJlcnMuXG4gICovXG4gIE9ic2VydmFibGUucmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGNvdW50LCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFJhbmdlT2JzZXJ2YWJsZShzdGFydCwgY291bnQsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFJlcGVhdE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUmVwZWF0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBSZXBlYXRPYnNlcnZhYmxlKHZhbHVlLCByZXBlYXRDb3VudCwgc2NoZWR1bGVyKSB7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLnJlcGVhdENvdW50ID0gcmVwZWF0Q291bnQgPT0gbnVsbCA/IC0xIDogcmVwZWF0Q291bnQ7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFJlcGVhdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBzaW5rID0gbmV3IFJlcGVhdFNpbmsob2JzZXJ2ZXIsIHRoaXMpO1xuICAgICAgcmV0dXJuIHNpbmsucnVuKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBSZXBlYXRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgZnVuY3Rpb24gUmVwZWF0U2luayhvYnNlcnZlciwgcGFyZW50KSB7XG4gICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICB9XG5cbiAgUmVwZWF0U2luay5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvYnNlcnZlciA9IHRoaXMub2JzZXJ2ZXIsIHZhbHVlID0gdGhpcy5wYXJlbnQudmFsdWU7XG4gICAgZnVuY3Rpb24gbG9vcFJlY3Vyc2l2ZShpLCByZWN1cnNlKSB7XG4gICAgICBpZiAoaSA9PT0gLTEgfHwgaSA+IDApIHtcbiAgICAgICAgb2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcbiAgICAgICAgaSA+IDAgJiYgaS0tO1xuICAgICAgfVxuICAgICAgaWYgKGkgPT09IDApIHsgcmV0dXJuIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7IH1cbiAgICAgIHJlY3Vyc2UoaSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGFyZW50LnNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZSh0aGlzLnBhcmVudC5yZXBlYXRDb3VudCwgbG9vcFJlY3Vyc2l2ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBHZW5lcmF0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHJlcGVhdHMgdGhlIGdpdmVuIGVsZW1lbnQgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgdGltZXMsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHNlbmQgb3V0IG9ic2VydmVyIG1lc3NhZ2VzLlxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBFbGVtZW50IHRvIHJlcGVhdC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHJlcGVhdENvdW50IFtPcHRpb25hXSBOdW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0IHRoZSBlbGVtZW50LiBJZiBub3Qgc3BlY2lmaWVkLCByZXBlYXRzIGluZGVmaW5pdGVseS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdG8gcnVuIHRoZSBwcm9kdWNlciBsb29wIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIuaW1tZWRpYXRlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHJlcGVhdHMgdGhlIGdpdmVuIGVsZW1lbnQgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgdGltZXMuXG4gICAqL1xuICBPYnNlcnZhYmxlLnJlcGVhdCA9IGZ1bmN0aW9uICh2YWx1ZSwgcmVwZWF0Q291bnQsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgUmVwZWF0T2JzZXJ2YWJsZSh2YWx1ZSwgcmVwZWF0Q291bnQsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIEp1c3RPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEp1c3RPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEp1c3RPYnNlcnZhYmxlKHZhbHVlLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLl9zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBKdXN0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3RhdGUgPSBbdGhpcy5fdmFsdWUsIG9dO1xuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlciA9PT0gaW1tZWRpYXRlU2NoZWR1bGVyID9cbiAgICAgICAgc2NoZWR1bGVJdGVtKG51bGwsIHN0YXRlKSA6XG4gICAgICAgIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgc2NoZWR1bGVJdGVtKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVJdGVtKHMsIHN0YXRlKSB7XG4gICAgICB2YXIgdmFsdWUgPSBzdGF0ZVswXSwgb2JzZXJ2ZXIgPSBzdGF0ZVsxXTtcbiAgICAgIG9ic2VydmVyLm9uTmV4dCh2YWx1ZSk7XG4gICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICB9XG5cbiAgICByZXR1cm4gSnVzdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIGEgc2luZ2xlIGVsZW1lbnQsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHNlbmQgb3V0IG9ic2VydmVyIG1lc3NhZ2VzLlxuICAgKiAgVGhlcmUgaXMgYW4gYWxpYXMgY2FsbGVkICdqdXN0JyBvciBicm93c2VycyA8SUU5LlxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBTaW5nbGUgZWxlbWVudCBpbiB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgU2NoZWR1bGVyIHRvIHNlbmQgdGhlIHNpbmdsZSBlbGVtZW50IG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIuaW1tZWRpYXRlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBzaW5nbGUgc3BlY2lmaWVkIGVsZW1lbnQuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZVJldHVybiA9IE9ic2VydmFibGVbJ3JldHVybiddID0gT2JzZXJ2YWJsZS5qdXN0ID0gZnVuY3Rpb24gKHZhbHVlLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBpbW1lZGlhdGVTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgSnVzdE9ic2VydmFibGUodmFsdWUsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFRocm93T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUaHJvd09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGhyb3dPYnNlcnZhYmxlKGVycm9yLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuX2Vycm9yID0gZXJyb3I7XG4gICAgICB0aGlzLl9zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUaHJvd09ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN0YXRlID0gW3RoaXMuX2Vycm9yLCBvXTtcbiAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZXIgPT09IGltbWVkaWF0ZVNjaGVkdWxlciA/XG4gICAgICAgIHNjaGVkdWxlSXRlbShudWxsLCBzdGF0ZSkgOlxuICAgICAgICB0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGUoc3RhdGUsIHNjaGVkdWxlSXRlbSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlSXRlbShzLCBzdGF0ZSkge1xuICAgICAgdmFyIGUgPSBzdGF0ZVswXSwgbyA9IHN0YXRlWzFdO1xuICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICB9XG5cbiAgICByZXR1cm4gVGhyb3dPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCB0ZXJtaW5hdGVzIHdpdGggYW4gZXhjZXB0aW9uLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBzZW5kIG91dCB0aGUgc2luZ2xlIG9uRXJyb3IgbWVzc2FnZS5cbiAgICogIFRoZXJlIGlzIGFuIGFsaWFzIHRvIHRoaXMgbWV0aG9kIGNhbGxlZCAndGhyb3dFcnJvcicgZm9yIGJyb3dzZXJzIDxJRTkuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGVycm9yIEFuIG9iamVjdCB1c2VkIGZvciB0aGUgc2VxdWVuY2UncyB0ZXJtaW5hdGlvbi5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdG8gc2VuZCB0aGUgZXhjZXB0aW9uYWwgdGVybWluYXRpb24gY2FsbCBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLmltbWVkaWF0ZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgdGVybWluYXRlcyBleGNlcHRpb25hbGx5IHdpdGggdGhlIHNwZWNpZmllZCBleGNlcHRpb24gb2JqZWN0LlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVUaHJvdyA9IE9ic2VydmFibGVbJ3Rocm93J10gPSBmdW5jdGlvbiAoZXJyb3IsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBUaHJvd09ic2VydmFibGUoZXJyb3IsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFVzaW5nT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVXNpbmdPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFVzaW5nT2JzZXJ2YWJsZShyZXNGbiwgb2JzRm4pIHtcbiAgICAgIHRoaXMuX3Jlc0ZuID0gcmVzRm47XG4gICAgICB0aGlzLl9vYnNGbiA9IG9ic0ZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVXNpbmdPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBkaXNwb3NhYmxlID0gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgdmFyIHJlc291cmNlID0gdHJ5Q2F0Y2godGhpcy5fcmVzRm4pKCk7XG4gICAgICBpZiAocmVzb3VyY2UgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShvYnNlcnZhYmxlVGhyb3cocmVzb3VyY2UuZSkuc3Vic2NyaWJlKG8pLCBkaXNwb3NhYmxlKTtcbiAgICAgIH1cbiAgICAgIHJlc291cmNlICYmIChkaXNwb3NhYmxlID0gcmVzb3VyY2UpO1xuICAgICAgdmFyIHNvdXJjZSA9IHRyeUNhdGNoKHRoaXMuX29ic0ZuKShyZXNvdXJjZSk7XG4gICAgICBpZiAoc291cmNlID09PSBlcnJvck9iaikge1xuICAgICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUob2JzZXJ2YWJsZVRocm93KHNvdXJjZS5lKS5zdWJzY3JpYmUobyksIGRpc3Bvc2FibGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUobyksIGRpc3Bvc2FibGUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVXNpbmdPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGRlcGVuZHMgb24gYSByZXNvdXJjZSBvYmplY3QsIHdob3NlIGxpZmV0aW1lIGlzIHRpZWQgdG8gdGhlIHJlc3VsdGluZyBvYnNlcnZhYmxlIHNlcXVlbmNlJ3MgbGlmZXRpbWUuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc291cmNlRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIHRvIG9idGFpbiBhIHJlc291cmNlIG9iamVjdC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb2JzZXJ2YWJsZUZhY3RvcnkgRmFjdG9yeSBmdW5jdGlvbiB0byBvYnRhaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGRlcGVuZHMgb24gdGhlIG9idGFpbmVkIHJlc291cmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBsaWZldGltZSBjb250cm9scyB0aGUgbGlmZXRpbWUgb2YgdGhlIGRlcGVuZGVudCByZXNvdXJjZSBvYmplY3QuXG4gICAqL1xuICBPYnNlcnZhYmxlLnVzaW5nID0gZnVuY3Rpb24gKHJlc291cmNlRmFjdG9yeSwgb2JzZXJ2YWJsZUZhY3RvcnkpIHtcbiAgICByZXR1cm4gbmV3IFVzaW5nT2JzZXJ2YWJsZShyZXNvdXJjZUZhY3RvcnksIG9ic2VydmFibGVGYWN0b3J5KTtcbiAgfTtcblxuICAvKipcbiAgICogUHJvcGFnYXRlcyB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvciBQcm9taXNlIHRoYXQgcmVhY3RzIGZpcnN0LlxuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHJpZ2h0U291cmNlIFNlY29uZCBvYnNlcnZhYmxlIHNlcXVlbmNlIG9yIFByb21pc2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHN1cmZhY2VzIGVpdGhlciBvZiB0aGUgZ2l2ZW4gc2VxdWVuY2VzLCB3aGljaGV2ZXIgcmVhY3RlZCBmaXJzdC5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5hbWIgPSBmdW5jdGlvbiAocmlnaHRTb3VyY2UpIHtcbiAgICB2YXIgbGVmdFNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIGNob2ljZSxcbiAgICAgICAgbGVmdENob2ljZSA9ICdMJywgcmlnaHRDaG9pY2UgPSAnUicsXG4gICAgICAgIGxlZnRTdWJzY3JpcHRpb24gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSxcbiAgICAgICAgcmlnaHRTdWJzY3JpcHRpb24gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblxuICAgICAgaXNQcm9taXNlKHJpZ2h0U291cmNlKSAmJiAocmlnaHRTb3VyY2UgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmlnaHRTb3VyY2UpKTtcblxuICAgICAgZnVuY3Rpb24gY2hvaWNlTCgpIHtcbiAgICAgICAgaWYgKCFjaG9pY2UpIHtcbiAgICAgICAgICBjaG9pY2UgPSBsZWZ0Q2hvaWNlO1xuICAgICAgICAgIHJpZ2h0U3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjaG9pY2VSKCkge1xuICAgICAgICBpZiAoIWNob2ljZSkge1xuICAgICAgICAgIGNob2ljZSA9IHJpZ2h0Q2hvaWNlO1xuICAgICAgICAgIGxlZnRTdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBsZWZ0U3Vic2NyaWJlID0gb2JzZXJ2ZXJDcmVhdGUoXG4gICAgICAgIGZ1bmN0aW9uIChsZWZ0KSB7XG4gICAgICAgICAgY2hvaWNlTCgpO1xuICAgICAgICAgIGNob2ljZSA9PT0gbGVmdENob2ljZSAmJiBvYnNlcnZlci5vbk5leHQobGVmdCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgY2hvaWNlTCgpO1xuICAgICAgICAgIGNob2ljZSA9PT0gbGVmdENob2ljZSAmJiBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2hvaWNlTCgpO1xuICAgICAgICAgIGNob2ljZSA9PT0gbGVmdENob2ljZSAmJiBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgdmFyIHJpZ2h0U3Vic2NyaWJlID0gb2JzZXJ2ZXJDcmVhdGUoXG4gICAgICAgIGZ1bmN0aW9uIChyaWdodCkge1xuICAgICAgICAgIGNob2ljZVIoKTtcbiAgICAgICAgICBjaG9pY2UgPT09IHJpZ2h0Q2hvaWNlICYmIG9ic2VydmVyLm9uTmV4dChyaWdodCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgY2hvaWNlUigpO1xuICAgICAgICAgIGNob2ljZSA9PT0gcmlnaHRDaG9pY2UgJiYgb2JzZXJ2ZXIub25FcnJvcihlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNob2ljZVIoKTtcbiAgICAgICAgICBjaG9pY2UgPT09IHJpZ2h0Q2hvaWNlICYmIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGxlZnRTdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShsZWZ0U291cmNlLnN1YnNjcmliZShsZWZ0U3Vic2NyaWJlKSk7XG4gICAgICByaWdodFN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKHJpZ2h0U291cmNlLnN1YnNjcmliZShyaWdodFN1YnNjcmliZSkpO1xuXG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUobGVmdFN1YnNjcmlwdGlvbiwgcmlnaHRTdWJzY3JpcHRpb24pO1xuICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGFtYihwLCBjKSB7IHJldHVybiBwLmFtYihjKTsgfVxuXG4gIC8qKlxuICAgKiBQcm9wYWdhdGVzIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIG9yIFByb21pc2UgdGhhdCByZWFjdHMgZmlyc3QuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc3VyZmFjZXMgYW55IG9mIHRoZSBnaXZlbiBzZXF1ZW5jZXMsIHdoaWNoZXZlciByZWFjdGVkIGZpcnN0LlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5hbWIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFjYyA9IG9ic2VydmFibGVOZXZlcigpLCBpdGVtcztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICBpdGVtcyA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBpdGVtcyA9IG5ldyBBcnJheShpdGVtcyk7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgaXRlbXNbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGl0ZW1zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBhY2MgPSBhbWIoYWNjLCBpdGVtc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBhY2M7XG4gIH07XG5cbiAgdmFyIENhdGNoT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ2F0Y2hPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENhdGNoT2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDYXRjaE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGQxID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShkMSk7XG4gICAgICBkMS5zZXREaXNwb3NhYmxlKHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgQ2F0Y2hPYnNlcnZlcihvLCBzdWJzY3JpcHRpb24sIHRoaXMuX2ZuKSkpO1xuICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENhdGNoT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBDYXRjaE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENhdGNoT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ2F0Y2hPYnNlcnZlcihvLCBzLCBmbikge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDYXRjaE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fby5vbk5leHQoeCk7IH07XG4gICAgQ2F0Y2hPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuICAgIENhdGNoT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9mbikoZSk7XG4gICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgKHJlc3VsdCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShyZXN1bHQpKTtcblxuICAgICAgdmFyIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHRoaXMuX3Muc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZShyZXN1bHQuc3Vic2NyaWJlKHRoaXMuX28pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENhdGNoT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBDb250aW51ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRlcm1pbmF0ZWQgYnkgYW4gZXhjZXB0aW9uIHdpdGggdGhlIG5leHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtNaXhlZH0gaGFuZGxlck9yU2Vjb25kIEV4Y2VwdGlvbiBoYW5kbGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGdpdmVuIHRoZSBlcnJvciB0aGF0IG9jY3VycmVkIGluIHRoZSBmaXJzdCBzZXF1ZW5jZSwgb3IgYSBzZWNvbmQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB1c2VkIHRvIHByb2R1Y2UgcmVzdWx0cyB3aGVuIGFuIGVycm9yIG9jY3VycmVkIGluIHRoZSBmaXJzdCBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgZmlyc3Qgc2VxdWVuY2UncyBlbGVtZW50cywgZm9sbG93ZWQgYnkgdGhlIGVsZW1lbnRzIG9mIHRoZSBoYW5kbGVyIHNlcXVlbmNlIGluIGNhc2UgYW4gZXhjZXB0aW9uIG9jY3VycmVkLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvWydjYXRjaCddID0gZnVuY3Rpb24gKGhhbmRsZXJPclNlY29uZCkge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKGhhbmRsZXJPclNlY29uZCkgPyBuZXcgQ2F0Y2hPYnNlcnZhYmxlKHRoaXMsIGhhbmRsZXJPclNlY29uZCkgOiBvYnNlcnZhYmxlQ2F0Y2goW3RoaXMsIGhhbmRsZXJPclNlY29uZF0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb250aW51ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRlcm1pbmF0ZWQgYnkgYW4gZXhjZXB0aW9uIHdpdGggdGhlIG5leHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtBcnJheSB8IEFyZ3VtZW50c30gYXJncyBBcmd1bWVudHMgb3IgYW4gYXJyYXkgdG8gdXNlIGFzIHRoZSBuZXh0IHNlcXVlbmNlIGlmIGFuIGVycm9yIG9jY3Vycy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBlbGVtZW50cyBmcm9tIGNvbnNlY3V0aXZlIHNvdXJjZSBzZXF1ZW5jZXMgdW50aWwgYSBzb3VyY2Ugc2VxdWVuY2UgdGVybWluYXRlcyBzdWNjZXNzZnVsbHkuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZUNhdGNoID0gT2JzZXJ2YWJsZVsnY2F0Y2gnXSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaXRlbXM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgaXRlbXMgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgaXRlbXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBpdGVtc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIH1cbiAgICByZXR1cm4gZW51bWVyYWJsZU9mKGl0ZW1zKS5jYXRjaEVycm9yKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1lcmdlcyB0aGUgc3BlY2lmaWVkIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgdXNpbmcgdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIHdoZW5ldmVyIGFueSBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgb3IgUHJvbWlzZXMgcHJvZHVjZXMgYW4gZWxlbWVudC5cbiAgICogVGhpcyBjYW4gYmUgaW4gdGhlIGZvcm0gb2YgYW4gYXJndW1lbnQgbGlzdCBvZiBvYnNlcnZhYmxlcyBvciBhbiBhcnJheS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogMSAtIG9icyA9IG9ic2VydmFibGUuY29tYmluZUxhdGVzdChvYnMxLCBvYnMyLCBvYnMzLCBmdW5jdGlvbiAobzEsIG8yLCBvMykgeyByZXR1cm4gbzEgKyBvMiArIG8zOyB9KTtcbiAgICogMiAtIG9icyA9IG9ic2VydmFibGUuY29tYmluZUxhdGVzdChbb2JzMSwgb2JzMiwgb2JzM10sIGZ1bmN0aW9uIChvMSwgbzIsIG8zKSB7IHJldHVybiBvMSArIG8yICsgbzM7IH0pO1xuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgY29tYmluaW5nIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2VzIHVzaW5nIHRoZSBzcGVjaWZpZWQgcmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmNvbWJpbmVMYXRlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3NbMF0pKSB7XG4gICAgICBhcmdzWzBdLnVuc2hpZnQodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbWJpbmVMYXRlc3QuYXBwbHkodGhpcywgYXJncyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gZmFsc2VGYWN0b3J5KCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgZnVuY3Rpb24gYXJndW1lbnRzVG9BcnJheSgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgcmV0dXJuIGFyZ3M7XG4gIH1cblxuICB2YXIgQ29tYmluZUxhdGVzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ29tYmluZUxhdGVzdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ29tYmluZUxhdGVzdE9ic2VydmFibGUocGFyYW1zLCBjYikge1xuICAgICAgdGhpcy5fcGFyYW1zID0gcGFyYW1zO1xuICAgICAgdGhpcy5fY2IgPSBjYjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIENvbWJpbmVMYXRlc3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24ob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBsZW4gPSB0aGlzLl9wYXJhbXMubGVuZ3RoLFxuICAgICAgICAgIHN1YnNjcmlwdGlvbnMgPSBuZXcgQXJyYXkobGVuKTtcblxuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBoYXNWYWx1ZTogYXJyYXlJbml0aWFsaXplKGxlbiwgZmFsc2VGYWN0b3J5KSxcbiAgICAgICAgaGFzVmFsdWVBbGw6IGZhbHNlLFxuICAgICAgICBpc0RvbmU6IGFycmF5SW5pdGlhbGl6ZShsZW4sIGZhbHNlRmFjdG9yeSksXG4gICAgICAgIHZhbHVlczogbmV3IEFycmF5KGxlbilcbiAgICAgIH07XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuX3BhcmFtc1tpXSwgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIHN1YnNjcmlwdGlvbnNbaV0gPSBzYWQ7XG4gICAgICAgIGlzUHJvbWlzZShzb3VyY2UpICYmIChzb3VyY2UgPSBvYnNlcnZhYmxlRnJvbVByb21pc2Uoc291cmNlKSk7XG4gICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUobmV3IENvbWJpbmVMYXRlc3RPYnNlcnZlcihvYnNlcnZlciwgaSwgdGhpcy5fY2IsIHN0YXRlKSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29tYmluZUxhdGVzdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgQ29tYmluZUxhdGVzdE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb21iaW5lTGF0ZXN0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ29tYmluZUxhdGVzdE9ic2VydmVyKG8sIGksIGNiLCBzdGF0ZSkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9pID0gaTtcbiAgICAgIHRoaXMuX2NiID0gY2I7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbm90VGhlU2FtZShpKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHgsIGopIHtcbiAgICAgICAgcmV0dXJuIGogIT09IGk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIENvbWJpbmVMYXRlc3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9zdGF0ZS52YWx1ZXNbdGhpcy5faV0gPSB4O1xuICAgICAgdGhpcy5fc3RhdGUuaGFzVmFsdWVbdGhpcy5faV0gPSB0cnVlO1xuICAgICAgaWYgKHRoaXMuX3N0YXRlLmhhc1ZhbHVlQWxsIHx8ICh0aGlzLl9zdGF0ZS5oYXNWYWx1ZUFsbCA9IHRoaXMuX3N0YXRlLmhhc1ZhbHVlLmV2ZXJ5KGlkZW50aXR5KSkpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX2NiKS5hcHBseShudWxsLCB0aGlzLl9zdGF0ZS52YWx1ZXMpO1xuICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuICAgICAgICB0aGlzLl9vLm9uTmV4dChyZXMpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9zdGF0ZS5pc0RvbmUuZmlsdGVyKG5vdFRoZVNhbWUodGhpcy5faSkpLmV2ZXJ5KGlkZW50aXR5KSkge1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENvbWJpbmVMYXRlc3RPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBDb21iaW5lTGF0ZXN0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3N0YXRlLmlzRG9uZVt0aGlzLl9pXSA9IHRydWU7XG4gICAgICB0aGlzLl9zdGF0ZS5pc0RvbmUuZXZlcnkoaWRlbnRpdHkpICYmIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbWJpbmVMYXRlc3RPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2hlbmV2ZXIgYW55IG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBvciBQcm9taXNlcyBwcm9kdWNlcyBhbiBlbGVtZW50LlxuICAqXG4gICogQGV4YW1wbGVcbiAgKiAxIC0gb2JzID0gUnguT2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0KG9iczEsIG9iczIsIG9iczMsIGZ1bmN0aW9uIChvMSwgbzIsIG8zKSB7IHJldHVybiBvMSArIG8yICsgbzM7IH0pO1xuICAqIDIgLSBvYnMgPSBSeC5PYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3QoW29iczEsIG9iczIsIG9iczNdLCBmdW5jdGlvbiAobzEsIG8yLCBvMykgeyByZXR1cm4gbzEgKyBvMiArIG8zOyB9KTtcbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgY29tYmluaW5nIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2VzIHVzaW5nIHRoZSBzcGVjaWZpZWQgcmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAqL1xuICB2YXIgY29tYmluZUxhdGVzdCA9IE9ic2VydmFibGUuY29tYmluZUxhdGVzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgdmFyIHJlc3VsdFNlbGVjdG9yID0gaXNGdW5jdGlvbihhcmdzW2xlbiAtIDFdKSA/IGFyZ3MucG9wKCkgOiBhcmd1bWVudHNUb0FycmF5O1xuICAgIEFycmF5LmlzQXJyYXkoYXJnc1swXSkgJiYgKGFyZ3MgPSBhcmdzWzBdKTtcbiAgICByZXR1cm4gbmV3IENvbWJpbmVMYXRlc3RPYnNlcnZhYmxlKGFyZ3MsIHJlc3VsdFNlbGVjdG9yKTtcbiAgfTtcblxuICAvKipcbiAgICogQ29uY2F0ZW5hdGVzIGFsbCB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMuICBUaGlzIHRha2VzIGluIGVpdGhlciBhbiBhcnJheSBvciB2YXJpYWJsZSBhcmd1bWVudHMgdG8gY29uY2F0ZW5hdGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGVhY2ggZ2l2ZW4gc2VxdWVuY2UsIGluIHNlcXVlbnRpYWwgb3JkZXIuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uY29uY2F0ID0gZnVuY3Rpb24gKCkge1xuICAgIGZvcih2YXIgYXJncyA9IFtdLCBpID0gMCwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pOyB9XG4gICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgIHJldHVybiBvYnNlcnZhYmxlQ29uY2F0LmFwcGx5KG51bGwsIGFyZ3MpO1xuICB9O1xuXG4gIHZhciBDb25jYXRPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb25jYXRPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb25jYXRPYnNlcnZlcihzLCBmbikge1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQ29uY2F0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9zLm8ub25OZXh0KHgpOyB9O1xuICAgIENvbmNhdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX3Muby5vbkVycm9yKGUpOyB9O1xuICAgIENvbmNhdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX3MuaSsrOyB0aGlzLl9mbih0aGlzLl9zKTsgfTtcblxuICAgIHJldHVybiBDb25jYXRPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgdmFyIENvbmNhdE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ29uY2F0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb25jYXRPYnNlcnZhYmxlKHNvdXJjZXMpIHtcbiAgICAgIHRoaXMuX3NvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVSZWN1cnNpdmUgKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICBpZiAoc3RhdGUuZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkKSB7IHJldHVybjsgfVxuICAgICAgaWYgKHN0YXRlLmkgPT09IHN0YXRlLnNvdXJjZXMubGVuZ3RoKSB7IHJldHVybiBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7IH1cblxuICAgICAgLy8gQ2hlY2sgaWYgcHJvbWlzZVxuICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IHN0YXRlLnNvdXJjZXNbc3RhdGUuaV07XG4gICAgICBpc1Byb21pc2UoY3VycmVudFZhbHVlKSAmJiAoY3VycmVudFZhbHVlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGN1cnJlbnRWYWx1ZSkpO1xuXG4gICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgc3RhdGUuc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICBkLnNldERpc3Bvc2FibGUoY3VycmVudFZhbHVlLnN1YnNjcmliZShuZXcgQ29uY2F0T2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpKSk7XG4gICAgfVxuXG4gICAgQ29uY2F0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgICAgdmFyIGRpc3Bvc2FibGUgPSBkaXNwb3NhYmxlQ3JlYXRlKG5vb3ApO1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBvOiBvLFxuICAgICAgICBpOiAwLFxuICAgICAgICBzdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvbixcbiAgICAgICAgZGlzcG9zYWJsZTogZGlzcG9zYWJsZSxcbiAgICAgICAgc291cmNlczogdGhpcy5fc291cmNlc1xuICAgICAgfTtcblxuICAgICAgdmFyIGNhbmNlbGFibGUgPSBpbW1lZGlhdGVTY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUoc3RhdGUsIHNjaGVkdWxlUmVjdXJzaXZlKTtcbiAgICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoW3N1YnNjcmlwdGlvbiwgZGlzcG9zYWJsZSwgY2FuY2VsYWJsZV0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29uY2F0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiBDb25jYXRlbmF0ZXMgYWxsIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcy5cbiAgICogQHBhcmFtIHtBcnJheSB8IEFyZ3VtZW50c30gYXJncyBBcmd1bWVudHMgb3IgYW4gYXJyYXkgdG8gY29uY2F0IHRvIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBlYWNoIGdpdmVuIHNlcXVlbmNlLCBpbiBzZXF1ZW50aWFsIG9yZGVyLlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVDb25jYXQgPSBPYnNlcnZhYmxlLmNvbmNhdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICBhcmdzID0gYXJndW1lbnRzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgICAgZm9yKHZhciBpID0gMCwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBDb25jYXRPYnNlcnZhYmxlKGFyZ3MpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb25jYXRlbmF0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiBvYnNlcnZhYmxlIHNlcXVlbmNlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgZWFjaCBvYnNlcnZlZCBpbm5lciBzZXF1ZW5jZSwgaW4gc2VxdWVudGlhbCBvcmRlci5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5jb25jYXRBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVyZ2UoMSk7XG4gIH07XG5cbiAgdmFyIE1lcmdlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTWVyZ2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gTWVyZ2VPYnNlcnZhYmxlKHNvdXJjZSwgbWF4Q29uY3VycmVudCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLm1heENvbmN1cnJlbnQgPSBtYXhDb25jdXJyZW50O1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTWVyZ2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24ob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBnID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcbiAgICAgIGcuYWRkKHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgTWVyZ2VPYnNlcnZlcihvYnNlcnZlciwgdGhpcy5tYXhDb25jdXJyZW50LCBnKSkpO1xuICAgICAgcmV0dXJuIGc7XG4gICAgfTtcblxuICAgIHJldHVybiBNZXJnZU9ic2VydmFibGU7XG5cbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBNZXJnZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBmdW5jdGlvbiBNZXJnZU9ic2VydmVyKG8sIG1heCwgZykge1xuICAgICAgdGhpcy5vID0gbztcbiAgICAgIHRoaXMubWF4ID0gbWF4O1xuICAgICAgdGhpcy5nID0gZztcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgdGhpcy5xID0gW107XG4gICAgICB0aGlzLmFjdGl2ZUNvdW50ID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKE1lcmdlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBNZXJnZU9ic2VydmVyLnByb3RvdHlwZS5oYW5kbGVTdWJzY3JpYmUgPSBmdW5jdGlvbiAoeHMpIHtcbiAgICAgIHZhciBzYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHRoaXMuZy5hZGQoc2FkKTtcbiAgICAgIGlzUHJvbWlzZSh4cykgJiYgKHhzID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHhzKSk7XG4gICAgICBzYWQuc2V0RGlzcG9zYWJsZSh4cy5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIodGhpcywgc2FkKSkpO1xuICAgIH07XG5cbiAgICBNZXJnZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKGlubmVyU291cmNlKSB7XG4gICAgICBpZih0aGlzLmFjdGl2ZUNvdW50IDwgdGhpcy5tYXgpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVDb3VudCsrO1xuICAgICAgICB0aGlzLmhhbmRsZVN1YnNjcmliZShpbm5lclNvdXJjZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnEucHVzaChpbm5lclNvdXJjZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBNZXJnZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuby5vbkVycm9yKGUpOyB9O1xuICAgIE1lcmdlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5kb25lID0gdHJ1ZTsgdGhpcy5hY3RpdmVDb3VudCA9PT0gMCAmJiB0aGlzLm8ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIocGFyZW50LCBzYWQpIHtcbiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgdGhpcy5zYWQgPSBzYWQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMucGFyZW50Lm8ub25OZXh0KHgpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5wYXJlbnQuby5vbkVycm9yKGUpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMucGFyZW50LmcucmVtb3ZlKHRoaXMuc2FkKTtcbiAgICAgIGlmICh0aGlzLnBhcmVudC5xLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5wYXJlbnQuaGFuZGxlU3Vic2NyaWJlKHRoaXMucGFyZW50LnEuc2hpZnQoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBhcmVudC5hY3RpdmVDb3VudC0tO1xuICAgICAgICB0aGlzLnBhcmVudC5kb25lICYmIHRoaXMucGFyZW50LmFjdGl2ZUNvdW50ID09PSAwICYmIHRoaXMucGFyZW50Lm8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIE1lcmdlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAqIE1lcmdlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgbGltaXRpbmcgdGhlIG51bWJlciBvZiBjb25jdXJyZW50IHN1YnNjcmlwdGlvbnMgdG8gaW5uZXIgc2VxdWVuY2VzLlxuICAqIE9yIG1lcmdlcyB0d28gb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBhIHNpbmdsZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEBwYXJhbSB7TWl4ZWR9IFttYXhDb25jdXJyZW50T3JPdGhlcl0gTWF4aW11bSBudW1iZXIgb2YgaW5uZXIgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgYmVpbmcgc3Vic2NyaWJlZCB0byBjb25jdXJyZW50bHkgb3IgdGhlIHNlY29uZCBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IG1lcmdlcyB0aGUgZWxlbWVudHMgb2YgdGhlIGlubmVyIHNlcXVlbmNlcy5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1lcmdlID0gZnVuY3Rpb24gKG1heENvbmN1cnJlbnRPck90aGVyKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBtYXhDb25jdXJyZW50T3JPdGhlciAhPT0gJ251bWJlcicgP1xuICAgICAgb2JzZXJ2YWJsZU1lcmdlKHRoaXMsIG1heENvbmN1cnJlbnRPck90aGVyKSA6XG4gICAgICBuZXcgTWVyZ2VPYnNlcnZhYmxlKHRoaXMsIG1heENvbmN1cnJlbnRPck90aGVyKTtcbiAgfTtcblxuICAvKipcbiAgICogTWVyZ2VzIGFsbCB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBhIHNpbmdsZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBUaGUgc2NoZWR1bGVyIGlzIG9wdGlvbmFsIGFuZCBpZiBub3Qgc3BlY2lmaWVkLCB0aGUgaW1tZWRpYXRlIHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBtZXJnZXMgdGhlIGVsZW1lbnRzIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcy5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlTWVyZ2UgPSBPYnNlcnZhYmxlLm1lcmdlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzY2hlZHVsZXIsIHNvdXJjZXMgPSBbXSwgaSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAoIWFyZ3VtZW50c1swXSkge1xuICAgICAgc2NoZWR1bGVyID0gaW1tZWRpYXRlU2NoZWR1bGVyO1xuICAgICAgZm9yKGkgPSAxOyBpIDwgbGVuOyBpKyspIHsgc291cmNlcy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICB9IGVsc2UgaWYgKGlzU2NoZWR1bGVyKGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIHNjaGVkdWxlciA9IGFyZ3VtZW50c1swXTtcbiAgICAgIGZvcihpID0gMTsgaSA8IGxlbjsgaSsrKSB7IHNvdXJjZXMucHVzaChhcmd1bWVudHNbaV0pOyB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcjtcbiAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7IHNvdXJjZXMucHVzaChhcmd1bWVudHNbaV0pOyB9XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHNvdXJjZXNbMF0pKSB7XG4gICAgICBzb3VyY2VzID0gc291cmNlc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIG9ic2VydmFibGVPZihzY2hlZHVsZXIsIHNvdXJjZXMpLm1lcmdlQWxsKCk7XG4gIH07XG5cbiAgdmFyIE1lcmdlQWxsT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTWVyZ2VBbGxPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gTWVyZ2VBbGxPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBNZXJnZUFsbE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGcgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpLCBtID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICBnLmFkZChtKTtcbiAgICAgIG0uc2V0RGlzcG9zYWJsZSh0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IE1lcmdlQWxsT2JzZXJ2ZXIobywgZykpKTtcbiAgICAgIHJldHVybiBnO1xuICAgIH07XG5cbiAgICByZXR1cm4gTWVyZ2VBbGxPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIE1lcmdlQWxsT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGZ1bmN0aW9uIE1lcmdlQWxsT2JzZXJ2ZXIobywgZykge1xuICAgICAgdGhpcy5vID0gbztcbiAgICAgIHRoaXMuZyA9IGc7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKE1lcmdlQWxsT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBNZXJnZUFsbE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oaW5uZXJTb3VyY2UpIHtcbiAgICAgIHZhciBzYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHRoaXMuZy5hZGQoc2FkKTtcbiAgICAgIGlzUHJvbWlzZShpbm5lclNvdXJjZSkgJiYgKGlubmVyU291cmNlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGlubmVyU291cmNlKSk7XG4gICAgICBzYWQuc2V0RGlzcG9zYWJsZShpbm5lclNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIodGhpcywgc2FkKSkpO1xuICAgIH07XG5cbiAgICBNZXJnZUFsbE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLm8ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgTWVyZ2VBbGxPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgIHRoaXMuZy5sZW5ndGggPT09IDEgJiYgdGhpcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIocGFyZW50LCBzYWQpIHtcbiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgdGhpcy5zYWQgPSBzYWQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLnBhcmVudC5vLm9uTmV4dCh4KTtcbiAgICB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMucGFyZW50Lm8ub25FcnJvcihlKTtcbiAgICB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMucGFyZW50LmcucmVtb3ZlKHRoaXMuc2FkKTtcbiAgICAgIHRoaXMucGFyZW50LmRvbmUgJiYgdGhpcy5wYXJlbnQuZy5sZW5ndGggPT09IDEgJiYgdGhpcy5wYXJlbnQuby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTWVyZ2VBbGxPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogTWVyZ2VzIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2Ygb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IG1lcmdlcyB0aGUgZWxlbWVudHMgb2YgdGhlIGlubmVyIHNlcXVlbmNlcy5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1lcmdlQWxsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgTWVyZ2VBbGxPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIHZhciBDb21wb3NpdGVFcnJvciA9IFJ4LkNvbXBvc2l0ZUVycm9yID0gZnVuY3Rpb24oZXJyb3JzKSB7XG4gICAgdGhpcy5pbm5lckVycm9ycyA9IGVycm9ycztcbiAgICB0aGlzLm1lc3NhZ2UgPSAnVGhpcyBjb250YWlucyBtdWx0aXBsZSBlcnJvcnMuIENoZWNrIHRoZSBpbm5lckVycm9ycyc7XG4gICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgfTtcbiAgQ29tcG9zaXRlRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICBDb21wb3NpdGVFcnJvci5wcm90b3R5cGUubmFtZSA9ICdDb21wb3NpdGVFcnJvcic7XG5cbiAgdmFyIE1lcmdlRGVsYXlFcnJvck9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTWVyZ2VEZWxheUVycm9yT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBncm91cCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCksXG4gICAgICAgIG0gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSxcbiAgICAgICAgc3RhdGUgPSB7IGlzU3RvcHBlZDogZmFsc2UsIGVycm9yczogW10sIG86IG8gfTtcblxuICAgICAgZ3JvdXAuYWRkKG0pO1xuICAgICAgbS5zZXREaXNwb3NhYmxlKHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIoZ3JvdXAsIHN0YXRlKSkpO1xuXG4gICAgICByZXR1cm4gZ3JvdXA7XG4gICAgfTtcblxuICAgIHJldHVybiBNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIE1lcmdlRGVsYXlFcnJvck9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE1lcmdlRGVsYXlFcnJvck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE1lcmdlRGVsYXlFcnJvck9ic2VydmVyKGdyb3VwLCBzdGF0ZSkge1xuICAgICAgdGhpcy5fZ3JvdXAgPSBncm91cDtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRDb21wbGV0aW9uKG8sIGVycm9ycykge1xuICAgICAgaWYgKGVycm9ycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSBlbHNlIGlmIChlcnJvcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIG8ub25FcnJvcihlcnJvcnNbMF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgby5vbkVycm9yKG5ldyBDb21wb3NpdGVFcnJvcihlcnJvcnMpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBNZXJnZURlbGF5RXJyb3JPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgaW5uZXIgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHRoaXMuX2dyb3VwLmFkZChpbm5lcik7XG5cbiAgICAgIC8vIENoZWNrIGZvciBwcm9taXNlcyBzdXBwb3J0XG4gICAgICBpc1Byb21pc2UoeCkgJiYgKHggPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoeCkpO1xuICAgICAgaW5uZXIuc2V0RGlzcG9zYWJsZSh4LnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihpbm5lciwgdGhpcy5fZ3JvdXAsIHRoaXMuX3N0YXRlKSkpO1xuICAgIH07XG5cbiAgICBNZXJnZURlbGF5RXJyb3JPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fc3RhdGUuZXJyb3JzLnB1c2goZSk7XG4gICAgICB0aGlzLl9zdGF0ZS5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fZ3JvdXAubGVuZ3RoID09PSAxICYmIHNldENvbXBsZXRpb24odGhpcy5fc3RhdGUubywgdGhpcy5fc3RhdGUuZXJyb3JzKTtcbiAgICB9O1xuXG4gICAgTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3N0YXRlLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICB0aGlzLl9ncm91cC5sZW5ndGggPT09IDEgJiYgc2V0Q29tcGxldGlvbih0aGlzLl9zdGF0ZS5vLCB0aGlzLl9zdGF0ZS5lcnJvcnMpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIoaW5uZXIsIGdyb3VwLCBzdGF0ZSkge1xuICAgICAgdGhpcy5faW5uZXIgPSBpbm5lcjtcbiAgICAgIHRoaXMuX2dyb3VwID0gZ3JvdXA7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3N0YXRlLm8ub25OZXh0KHgpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX3N0YXRlLmVycm9ycy5wdXNoKGUpO1xuICAgICAgdGhpcy5fZ3JvdXAucmVtb3ZlKHRoaXMuX2lubmVyKTtcbiAgICAgIHRoaXMuX3N0YXRlLmlzU3RvcHBlZCAmJiB0aGlzLl9ncm91cC5sZW5ndGggPT09IDEgJiYgc2V0Q29tcGxldGlvbih0aGlzLl9zdGF0ZS5vLCB0aGlzLl9zdGF0ZS5lcnJvcnMpO1xuICAgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fZ3JvdXAucmVtb3ZlKHRoaXMuX2lubmVyKTtcbiAgICAgIHRoaXMuX3N0YXRlLmlzU3RvcHBlZCAmJiB0aGlzLl9ncm91cC5sZW5ndGggPT09IDEgJiYgc2V0Q29tcGxldGlvbih0aGlzLl9zdGF0ZS5vLCB0aGlzLl9zdGF0ZS5lcnJvcnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAqIEZsYXR0ZW5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBPYnNlcnZhYmxlcyBpbnRvIG9uZSBPYnNlcnZhYmxlLCBpbiBhIHdheSB0aGF0IGFsbG93cyBhbiBPYnNlcnZlciB0b1xuICAqIHJlY2VpdmUgYWxsIHN1Y2Nlc3NmdWxseSBlbWl0dGVkIGl0ZW1zIGZyb20gYWxsIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZXMgd2l0aG91dCBiZWluZyBpbnRlcnJ1cHRlZCBieVxuICAqIGFuIGVycm9yIG5vdGlmaWNhdGlvbiBmcm9tIG9uZSBvZiB0aGVtLlxuICAqXG4gICogVGhpcyBiZWhhdmVzIGxpa2UgT2JzZXJ2YWJsZS5wcm90b3R5cGUubWVyZ2VBbGwgZXhjZXB0IHRoYXQgaWYgYW55IG9mIHRoZSBtZXJnZWQgT2JzZXJ2YWJsZXMgbm90aWZ5IG9mIGFuXG4gICogZXJyb3IgdmlhIHRoZSBPYnNlcnZlcidzIG9uRXJyb3IsIG1lcmdlRGVsYXlFcnJvciB3aWxsIHJlZnJhaW4gZnJvbSBwcm9wYWdhdGluZyB0aGF0XG4gICogZXJyb3Igbm90aWZpY2F0aW9uIHVudGlsIGFsbCBvZiB0aGUgbWVyZ2VkIE9ic2VydmFibGVzIGhhdmUgZmluaXNoZWQgZW1pdHRpbmcgaXRlbXMuXG4gICogQHBhcmFtIHtBcnJheSB8IEFyZ3VtZW50c30gYXJncyBBcmd1bWVudHMgb3IgYW4gYXJyYXkgdG8gbWVyZ2UuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhbGwgb2YgdGhlIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIE9ic2VydmFibGVzIGVtaXR0ZWQgYnkgdGhlIE9ic2VydmFibGVcbiAgKi9cbiAgT2JzZXJ2YWJsZS5tZXJnZURlbGF5RXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICBhcmdzID0gYXJndW1lbnRzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgfVxuICAgIHZhciBzb3VyY2UgPSBvYnNlcnZhYmxlT2YobnVsbCwgYXJncyk7XG4gICAgcmV0dXJuIG5ldyBNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlKHNvdXJjZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnRpbnVlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGVybWluYXRlZCBub3JtYWxseSBvciBieSBhbiBleGNlcHRpb24gd2l0aCB0aGUgbmV4dCBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHNlY29uZCBTZWNvbmQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB1c2VkIHRvIHByb2R1Y2UgcmVzdWx0cyBhZnRlciB0aGUgZmlyc3Qgc2VxdWVuY2UgdGVybWluYXRlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb25jYXRlbmF0ZXMgdGhlIGZpcnN0IGFuZCBzZWNvbmQgc2VxdWVuY2UsIGV2ZW4gaWYgdGhlIGZpcnN0IHNlcXVlbmNlIHRlcm1pbmF0ZXMgZXhjZXB0aW9uYWxseS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5vbkVycm9yUmVzdW1lTmV4dCA9IGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICBpZiAoIXNlY29uZCkgeyB0aHJvdyBuZXcgRXJyb3IoJ1NlY29uZCBvYnNlcnZhYmxlIGlzIHJlcXVpcmVkJyk7IH1cbiAgICByZXR1cm4gb25FcnJvclJlc3VtZU5leHQoW3RoaXMsIHNlY29uZF0pO1xuICB9O1xuXG4gIHZhciBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoT25FcnJvclJlc3VtZU5leHRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2YWJsZShzb3VyY2VzKSB7XG4gICAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIGlmIChzdGF0ZS5wb3MgPCBzdGF0ZS5zb3VyY2VzLmxlbmd0aCkge1xuICAgICAgICB2YXIgY3VycmVudCA9IHN0YXRlLnNvdXJjZXNbc3RhdGUucG9zKytdO1xuICAgICAgICBpc1Byb21pc2UoY3VycmVudCkgJiYgKGN1cnJlbnQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudCkpO1xuICAgICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICBzdGF0ZS5zdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgICAgZC5zZXREaXNwb3NhYmxlKGN1cnJlbnQuc3Vic2NyaWJlKG5ldyBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmVyKHN0YXRlLCByZWN1cnNlKSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUuby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSxcbiAgICAgICAgICBzdGF0ZSA9IHtwb3M6IDAsIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uLCBvOiBvLCBzb3VyY2VzOiB0aGlzLnNvdXJjZXMgfSxcbiAgICAgICAgICBjYW5jZWxsYWJsZSA9IGltbWVkaWF0ZVNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShzdGF0ZSwgc2NoZWR1bGVNZXRob2QpO1xuXG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9uLCBjYW5jZWxsYWJsZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgT25FcnJvclJlc3VtZU5leHRPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPbkVycm9yUmVzdW1lTmV4dE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLl9yZWN1cnNlID0gcmVjdXJzZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9zdGF0ZS5vLm9uTmV4dCh4KTsgfTtcbiAgICBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fcmVjdXJzZSh0aGlzLl9zdGF0ZSk7IH07XG4gICAgT25FcnJvclJlc3VtZU5leHRPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9yZWN1cnNlKHRoaXMuX3N0YXRlKTsgfTtcblxuICAgIHJldHVybiBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogQ29udGludWVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpcyB0ZXJtaW5hdGVkIG5vcm1hbGx5IG9yIGJ5IGFuIGV4Y2VwdGlvbiB3aXRoIHRoZSBuZXh0IG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29uY2F0ZW5hdGVzIHRoZSBzb3VyY2Ugc2VxdWVuY2VzLCBldmVuIGlmIGEgc2VxdWVuY2UgdGVybWluYXRlcyBleGNlcHRpb25hbGx5LlxuICAgKi9cbiAgdmFyIG9uRXJyb3JSZXN1bWVOZXh0ID0gT2JzZXJ2YWJsZS5vbkVycm9yUmVzdW1lTmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc291cmNlcyA9IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIHNvdXJjZXMgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgc291cmNlcyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IHNvdXJjZXNbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmFibGUoc291cmNlcyk7XG4gIH07XG5cbiAgdmFyIFNraXBVbnRpbE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcFVudGlsT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFNraXBVbnRpbE9ic2VydmFibGUoc291cmNlLCBvdGhlcikge1xuICAgICAgdGhpcy5fcyA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX28gPSBpc1Byb21pc2Uob3RoZXIpID8gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKG90aGVyKSA6IG90aGVyO1xuICAgICAgdGhpcy5fb3BlbiA9IGZhbHNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcFVudGlsT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBsZWZ0U3Vic2NyaXB0aW9uID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICBsZWZ0U3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUodGhpcy5fcy5zdWJzY3JpYmUobmV3IFNraXBVbnRpbFNvdXJjZU9ic2VydmVyKG8sIHRoaXMpKSk7XG5cbiAgICAgIGlzUHJvbWlzZSh0aGlzLl9vKSAmJiAodGhpcy5fbyA9IG9ic2VydmFibGVGcm9tUHJvbWlzZSh0aGlzLl9vKSk7XG5cbiAgICAgIHZhciByaWdodFN1YnNjcmlwdGlvbiA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgcmlnaHRTdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZSh0aGlzLl9vLnN1YnNjcmliZShuZXcgU2tpcFVudGlsT3RoZXJPYnNlcnZlcihvLCB0aGlzLCByaWdodFN1YnNjcmlwdGlvbikpKTtcblxuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKGxlZnRTdWJzY3JpcHRpb24sIHJpZ2h0U3Vic2NyaXB0aW9uKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBVbnRpbE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIobywgcCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBVbnRpbFNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3AuX29wZW4gJiYgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgfTtcblxuICAgIFNraXBVbnRpbFNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlcnIpO1xuICAgIH07XG5cbiAgICBTa2lwVW50aWxTb3VyY2VPYnNlcnZlci5wcm90b3R5cGUub25Db21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9wLl9vcGVuICYmIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBVbnRpbFNvdXJjZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICB2YXIgU2tpcFVudGlsT3RoZXJPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwVW50aWxPdGhlck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNraXBVbnRpbE90aGVyT2JzZXJ2ZXIobywgcCwgcikge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIHRoaXMuX3IgPSByO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcFVudGlsT3RoZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3AuX29wZW4gPSB0cnVlO1xuICAgICAgdGhpcy5fci5kaXNwb3NlKCk7XG4gICAgfTtcblxuICAgIFNraXBVbnRpbE90aGVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGVycik7XG4gICAgfTtcblxuICAgIFNraXBVbnRpbE90aGVyT2JzZXJ2ZXIucHJvdG90eXBlLm9uQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fci5kaXNwb3NlKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBTa2lwVW50aWxPdGhlck9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBvYnNlcnZhYmxlIHNlcXVlbmNlIG9ubHkgYWZ0ZXIgdGhlIG90aGVyIG9ic2VydmFibGUgc2VxdWVuY2UgcHJvZHVjZXMgYSB2YWx1ZS5cbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlIHwgUHJvbWlzZX0gb3RoZXIgVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugb3IgUHJvbWlzZSB0aGF0IHRyaWdnZXJzIHByb3BhZ2F0aW9uIG9mIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugc3RhcnRpbmcgZnJvbSB0aGUgcG9pbnQgdGhlIG90aGVyIHNlcXVlbmNlIHRyaWdnZXJlZCBwcm9wYWdhdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5za2lwVW50aWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICByZXR1cm4gbmV3IFNraXBVbnRpbE9ic2VydmFibGUodGhpcywgb3RoZXIpO1xuICB9O1xuXG4gIHZhciBTd2l0Y2hPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFN3aXRjaE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU3dpdGNoT2JzZXJ2YWJsZShzb3VyY2UpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU3dpdGNoT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgaW5uZXIgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLCBzID0gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTd2l0Y2hPYnNlcnZlcihvLCBpbm5lcikpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHMsIGlubmVyKTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdHMoU3dpdGNoT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuICAgIGZ1bmN0aW9uIFN3aXRjaE9ic2VydmVyKG8sIGlubmVyKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy5pbm5lciA9IGlubmVyO1xuICAgICAgdGhpcy5zdG9wcGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmxhdGVzdCA9IDA7XG4gICAgICB0aGlzLmhhc0xhdGVzdCA9IGZhbHNlO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFN3aXRjaE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKGlubmVyU291cmNlKSB7XG4gICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLCBpZCA9ICsrdGhpcy5sYXRlc3Q7XG4gICAgICB0aGlzLmhhc0xhdGVzdCA9IHRydWU7XG4gICAgICB0aGlzLmlubmVyLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICBpc1Byb21pc2UoaW5uZXJTb3VyY2UpICYmIChpbm5lclNvdXJjZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShpbm5lclNvdXJjZSkpO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKGlubmVyU291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcih0aGlzLCBpZCkpKTtcbiAgICB9O1xuXG4gICAgU3dpdGNoT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBTd2l0Y2hPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5zdG9wcGVkID0gdHJ1ZTtcbiAgICAgICF0aGlzLmhhc0xhdGVzdCAmJiB0aGlzLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihwYXJlbnQsIGlkKSB7XG4gICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLnBhcmVudC5sYXRlc3QgPT09IHRoaXMuaWQgJiYgdGhpcy5wYXJlbnQuby5vbk5leHQoeCk7XG4gICAgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMucGFyZW50LmxhdGVzdCA9PT0gdGhpcy5pZCAmJiB0aGlzLnBhcmVudC5vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLnBhcmVudC5sYXRlc3QgPT09IHRoaXMuaWQpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQuaGFzTGF0ZXN0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGFyZW50LnN0b3BwZWQgJiYgdGhpcy5wYXJlbnQuby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gU3dpdGNoT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAqIFRyYW5zZm9ybXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgcHJvZHVjaW5nIHZhbHVlcyBvbmx5IGZyb20gdGhlIG1vc3QgcmVjZW50IG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgYXQgYW55IHBvaW50IGluIHRpbWUgcHJvZHVjZXMgdGhlIGVsZW1lbnRzIG9mIHRoZSBtb3N0IHJlY2VudCBpbm5lciBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaGFzIGJlZW4gcmVjZWl2ZWQuXG4gICovXG4gIG9ic2VydmFibGVQcm90b1snc3dpdGNoJ10gPSBvYnNlcnZhYmxlUHJvdG8uc3dpdGNoTGF0ZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgU3dpdGNoT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgVGFrZVVudGlsT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYWtlVW50aWxPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gVGFrZVVudGlsT2JzZXJ2YWJsZShzb3VyY2UsIG90aGVyKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMub3RoZXIgPSBpc1Byb21pc2Uob3RoZXIpID8gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKG90aGVyKSA6IG90aGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZVVudGlsT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG8pLFxuICAgICAgICB0aGlzLm90aGVyLnN1YnNjcmliZShuZXcgVGFrZVVudGlsT2JzZXJ2ZXIobykpXG4gICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGFrZVVudGlsT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBUYWtlVW50aWxPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYWtlVW50aWxPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUYWtlVW50aWxPYnNlcnZlcihvKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRha2VVbnRpbE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICBUYWtlVW50aWxPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZXJyKTtcbiAgICB9O1xuXG4gICAgVGFrZVVudGlsT2JzZXJ2ZXIucHJvdG90eXBlLm9uQ29tcGxldGVkID0gbm9vcDtcblxuICAgIHJldHVybiBUYWtlVW50aWxPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSBzZXF1ZW5jZSB1bnRpbCB0aGUgb3RoZXIgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNlcyBhIHZhbHVlLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGUgfCBQcm9taXNlfSBvdGhlciBPYnNlcnZhYmxlIHNlcXVlbmNlIG9yIFByb21pc2UgdGhhdCB0ZXJtaW5hdGVzIHByb3BhZ2F0aW9uIG9mIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UgdXAgdG8gdGhlIHBvaW50IHRoZSBvdGhlciBzZXF1ZW5jZSBpbnRlcnJ1cHRlZCBmdXJ0aGVyIHByb3BhZ2F0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRha2VVbnRpbCA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHJldHVybiBuZXcgVGFrZVVudGlsT2JzZXJ2YWJsZSh0aGlzLCBvdGhlcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gZmFsc2VGYWN0b3J5KCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgZnVuY3Rpb24gYXJndW1lbnRzVG9BcnJheSgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgcmV0dXJuIGFyZ3M7XG4gIH1cblxuICB2YXIgV2l0aExhdGVzdEZyb21PYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBXaXRoTGF0ZXN0RnJvbU9ic2VydmFibGUoc291cmNlLCBzb3VyY2VzLCByZXN1bHRTZWxlY3Rvcikge1xuICAgICAgdGhpcy5fcyA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX3NzID0gc291cmNlcztcbiAgICAgIHRoaXMuX2NiID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBXaXRoTGF0ZXN0RnJvbU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGxlbiA9IHRoaXMuX3NzLmxlbmd0aDtcbiAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgaGFzVmFsdWU6IGFycmF5SW5pdGlhbGl6ZShsZW4sIGZhbHNlRmFjdG9yeSksXG4gICAgICAgIGhhc1ZhbHVlQWxsOiBmYWxzZSxcbiAgICAgICAgdmFsdWVzOiBuZXcgQXJyYXkobGVuKVxuICAgICAgfTtcblxuICAgICAgdmFyIG4gPSB0aGlzLl9zcy5sZW5ndGgsIHN1YnNjcmlwdGlvbnMgPSBuZXcgQXJyYXkobiArIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgdmFyIG90aGVyID0gdGhpcy5fc3NbaV0sIHNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICBpc1Byb21pc2Uob3RoZXIpICYmIChvdGhlciA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShvdGhlcikpO1xuICAgICAgICBzYWQuc2V0RGlzcG9zYWJsZShvdGhlci5zdWJzY3JpYmUobmV3IFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlcihvLCBpLCBzdGF0ZSkpKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uc1tpXSA9IHNhZDtcbiAgICAgIH1cblxuICAgICAgdmFyIG91dGVyU2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICBvdXRlclNhZC5zZXREaXNwb3NhYmxlKHRoaXMuX3Muc3Vic2NyaWJlKG5ldyBXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyKG8sIHRoaXMuX2NiLCBzdGF0ZSkpKTtcbiAgICAgIHN1YnNjcmlwdGlvbnNbbl0gPSBvdXRlclNhZDtcblxuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb25zKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBXaXRoTGF0ZXN0RnJvbU90aGVyT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBXaXRoTGF0ZXN0RnJvbU90aGVyT2JzZXJ2ZXIobywgaSwgc3RhdGUpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5faSA9IGk7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3N0YXRlLnZhbHVlc1t0aGlzLl9pXSA9IHg7XG4gICAgICB0aGlzLl9zdGF0ZS5oYXNWYWx1ZVt0aGlzLl9pXSA9IHRydWU7XG4gICAgICB0aGlzLl9zdGF0ZS5oYXNWYWx1ZUFsbCA9IHRoaXMuX3N0YXRlLmhhc1ZhbHVlLmV2ZXJ5KGlkZW50aXR5KTtcbiAgICB9O1xuXG4gICAgV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gbm9vcDtcblxuICAgIHJldHVybiBXaXRoTGF0ZXN0RnJvbU90aGVyT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIHZhciBXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIobywgY2IsIHN0YXRlKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2NiID0gY2I7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgYWxsVmFsdWVzID0gW3hdLmNvbmNhdCh0aGlzLl9zdGF0ZS52YWx1ZXMpO1xuICAgICAgaWYgKCF0aGlzLl9zdGF0ZS5oYXNWYWx1ZUFsbCkgeyByZXR1cm47IH1cbiAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9jYikuYXBwbHkobnVsbCwgYWxsVmFsdWVzKTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICB0aGlzLl9vLm9uTmV4dChyZXMpO1xuICAgIH07XG5cbiAgICBXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBNZXJnZXMgdGhlIHNwZWNpZmllZCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHVzaW5nIHRoZSBzZWxlY3RvciBmdW5jdGlvbiBvbmx5IHdoZW4gdGhlIChmaXJzdCkgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2UgcHJvZHVjZXMgYW4gZWxlbWVudC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIGNvbWJpbmluZyBlbGVtZW50cyBvZiB0aGUgc291cmNlcyB1c2luZyB0aGUgc3BlY2lmaWVkIHJlc3VsdCBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by53aXRoTGF0ZXN0RnJvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgeyB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgYXJndW1lbnRzJyk7IH1cblxuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSBpc0Z1bmN0aW9uKGFyZ3NbbGVuIC0gMV0pID8gYXJncy5wb3AoKSA6IGFyZ3VtZW50c1RvQXJyYXk7XG4gICAgQXJyYXkuaXNBcnJheShhcmdzWzBdKSAmJiAoYXJncyA9IGFyZ3NbMF0pO1xuXG4gICAgcmV0dXJuIG5ldyBXaXRoTGF0ZXN0RnJvbU9ic2VydmFibGUodGhpcywgYXJncywgcmVzdWx0U2VsZWN0b3IpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGZhbHNlRmFjdG9yeSgpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGZ1bmN0aW9uIGVtcHR5QXJyYXlGYWN0b3J5KCkgeyByZXR1cm4gW107IH1cblxuICB2YXIgWmlwT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhaaXBPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFppcE9ic2VydmFibGUoc291cmNlcywgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgIHRoaXMuX3MgPSBzb3VyY2VzO1xuICAgICAgdGhpcy5fY2IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFppcE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvYnNlcnZlcikge1xuICAgICAgdmFyIG4gPSB0aGlzLl9zLmxlbmd0aCxcbiAgICAgICAgICBzdWJzY3JpcHRpb25zID0gbmV3IEFycmF5KG4pLFxuICAgICAgICAgIGRvbmUgPSBhcnJheUluaXRpYWxpemUobiwgZmFsc2VGYWN0b3J5KSxcbiAgICAgICAgICBxID0gYXJyYXlJbml0aWFsaXplKG4sIGVtcHR5QXJyYXlGYWN0b3J5KTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuX3NbaV0sIHNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICBzdWJzY3JpcHRpb25zW2ldID0gc2FkO1xuICAgICAgICBpc1Byb21pc2Uoc291cmNlKSAmJiAoc291cmNlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHNvdXJjZSkpO1xuICAgICAgICBzYWQuc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKG5ldyBaaXBPYnNlcnZlcihvYnNlcnZlciwgaSwgdGhpcywgcSwgZG9uZSkpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb25zKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFppcE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgWmlwT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFppcE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFppcE9ic2VydmVyKG8sIGksIHAsIHEsIGQpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5faSA9IGk7XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIHRoaXMuX3EgPSBxO1xuICAgICAgdGhpcy5fZCA9IGQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3RFbXB0eSh4KSB7IHJldHVybiB4Lmxlbmd0aCA+IDA7IH1cbiAgICBmdW5jdGlvbiBzaGlmdEVhY2goeCkgeyByZXR1cm4geC5zaGlmdCgpOyB9XG4gICAgZnVuY3Rpb24gbm90VGhlU2FtZShpKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHgsIGopIHtcbiAgICAgICAgcmV0dXJuIGogIT09IGk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIFppcE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3FbdGhpcy5faV0ucHVzaCh4KTtcbiAgICAgIGlmICh0aGlzLl9xLmV2ZXJ5KG5vdEVtcHR5KSkge1xuICAgICAgICB2YXIgcXVldWVkVmFsdWVzID0gdGhpcy5fcS5tYXAoc2hpZnRFYWNoKTtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX3AuX2NiKS5hcHBseShudWxsLCBxdWV1ZWRWYWx1ZXMpO1xuICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuICAgICAgICB0aGlzLl9vLm9uTmV4dChyZXMpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9kLmZpbHRlcihub3RUaGVTYW1lKHRoaXMuX2kpKS5ldmVyeShpZGVudGl0eSkpIHtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBaaXBPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBaaXBPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fZFt0aGlzLl9pXSA9IHRydWU7XG4gICAgICB0aGlzLl9kLmV2ZXJ5KGlkZW50aXR5KSAmJiB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBaaXBPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIE1lcmdlcyB0aGUgc3BlY2lmaWVkIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgdXNpbmcgdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIHdoZW5ldmVyIGFsbCBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgb3IgYW4gYXJyYXkgaGF2ZSBwcm9kdWNlZCBhbiBlbGVtZW50IGF0IGEgY29ycmVzcG9uZGluZyBpbmRleC5cbiAgICogVGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgYXJndW1lbnRzIG11c3QgYmUgYSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggc2VyaWVzIG9mIGVsZW1lbnRzIGF0IGNvcnJlc3BvbmRpbmcgaW5kZXhlcyBpbiB0aGUgYXJncy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIGNvbWJpbmluZyBlbGVtZW50cyBvZiB0aGUgYXJncyB1c2luZyB0aGUgc3BlY2lmaWVkIHJlc3VsdCBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by56aXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHsgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGFyZ3VtZW50cycpOyB9XG5cbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgdmFyIHJlc3VsdFNlbGVjdG9yID0gaXNGdW5jdGlvbihhcmdzW2xlbiAtIDFdKSA/IGFyZ3MucG9wKCkgOiBhcmd1bWVudHNUb0FycmF5O1xuICAgIEFycmF5LmlzQXJyYXkoYXJnc1swXSkgJiYgKGFyZ3MgPSBhcmdzWzBdKTtcblxuICAgIHZhciBwYXJlbnQgPSB0aGlzO1xuICAgIGFyZ3MudW5zaGlmdChwYXJlbnQpO1xuXG4gICAgcmV0dXJuIG5ldyBaaXBPYnNlcnZhYmxlKGFyZ3MsIHJlc3VsdFNlbGVjdG9yKTtcbiAgfTtcblxuICAvKipcbiAgICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2hlbmV2ZXIgYWxsIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBoYXZlIHByb2R1Y2VkIGFuIGVsZW1lbnQgYXQgYSBjb3JyZXNwb25kaW5nIGluZGV4LlxuICAgKiBAcGFyYW0gYXJndW1lbnRzIE9ic2VydmFibGUgc291cmNlcy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgRnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIHNlcmllcyBvZiBlbGVtZW50cyBhdCBjb3JyZXNwb25kaW5nIGluZGV4ZXMgaW4gdGhlIHNvdXJjZXMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBjb21iaW5pbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZXMgdXNpbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBPYnNlcnZhYmxlLnppcCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcbiAgICAgIGFyZ3MgPSBpc0Z1bmN0aW9uKGFyZ3NbMV0pID8gYXJnc1swXS5jb25jYXQoYXJnc1sxXSkgOiBhcmdzWzBdO1xuICAgIH1cbiAgICB2YXIgZmlyc3QgPSBhcmdzLnNoaWZ0KCk7XG4gICAgcmV0dXJuIGZpcnN0LnppcC5hcHBseShmaXJzdCwgYXJncyk7XG4gIH07XG5cbmZ1bmN0aW9uIGZhbHNlRmFjdG9yeSgpIHsgcmV0dXJuIGZhbHNlOyB9XG5mdW5jdGlvbiBlbXB0eUFycmF5RmFjdG9yeSgpIHsgcmV0dXJuIFtdOyB9XG5mdW5jdGlvbiBhcmd1bWVudHNUb0FycmF5KCkge1xuICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICByZXR1cm4gYXJncztcbn1cblxudmFyIFppcEl0ZXJhYmxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgaW5oZXJpdHMoWmlwSXRlcmFibGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICBmdW5jdGlvbiBaaXBJdGVyYWJsZU9ic2VydmFibGUoc291cmNlcywgY2IpIHtcbiAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgIHRoaXMuX2NiID0gY2I7XG4gICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gIH1cblxuICBaaXBJdGVyYWJsZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgIHZhciBzb3VyY2VzID0gdGhpcy5zb3VyY2VzLCBsZW4gPSBzb3VyY2VzLmxlbmd0aCwgc3Vic2NyaXB0aW9ucyA9IG5ldyBBcnJheShsZW4pO1xuXG4gICAgdmFyIHN0YXRlID0ge1xuICAgICAgcTogYXJyYXlJbml0aWFsaXplKGxlbiwgZW1wdHlBcnJheUZhY3RvcnkpLFxuICAgICAgZG9uZTogYXJyYXlJbml0aWFsaXplKGxlbiwgZmFsc2VGYWN0b3J5KSxcbiAgICAgIGNiOiB0aGlzLl9jYixcbiAgICAgIG86IG9cbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2ldLCBzYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgKGlzQXJyYXlMaWtlKHNvdXJjZSkgfHwgaXNJdGVyYWJsZShzb3VyY2UpKSAmJiAoc291cmNlID0gb2JzZXJ2YWJsZUZyb20oc291cmNlKSk7XG5cbiAgICAgICAgc3Vic2NyaXB0aW9uc1tpXSA9IHNhZDtcbiAgICAgICAgc2FkLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShuZXcgWmlwSXRlcmFibGVPYnNlcnZlcihzdGF0ZSwgaSkpKTtcbiAgICAgIH0oaSkpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9ucyk7XG4gIH07XG5cbiAgcmV0dXJuIFppcEl0ZXJhYmxlT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZUJhc2UpKTtcblxudmFyIFppcEl0ZXJhYmxlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICBpbmhlcml0cyhaaXBJdGVyYWJsZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICBmdW5jdGlvbiBaaXBJdGVyYWJsZU9ic2VydmVyKHMsIGkpIHtcbiAgICB0aGlzLl9zID0gcztcbiAgICB0aGlzLl9pID0gaTtcbiAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdEVtcHR5KHgpIHsgcmV0dXJuIHgubGVuZ3RoID4gMDsgfVxuICBmdW5jdGlvbiBzaGlmdEVhY2goeCkgeyByZXR1cm4geC5zaGlmdCgpOyB9XG4gIGZ1bmN0aW9uIG5vdFRoZVNhbWUoaSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoeCwgaikge1xuICAgICAgcmV0dXJuIGogIT09IGk7XG4gICAgfTtcbiAgfVxuXG4gIFppcEl0ZXJhYmxlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgIHRoaXMuX3MucVt0aGlzLl9pXS5wdXNoKHgpO1xuICAgIGlmICh0aGlzLl9zLnEuZXZlcnkobm90RW1wdHkpKSB7XG4gICAgICB2YXIgcXVldWVkVmFsdWVzID0gdGhpcy5fcy5xLm1hcChzaGlmdEVhY2gpLFxuICAgICAgICAgIHJlcyA9IHRyeUNhdGNoKHRoaXMuX3MuY2IpLmFwcGx5KG51bGwsIHF1ZXVlZFZhbHVlcyk7XG4gICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fcy5vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICB0aGlzLl9zLm8ub25OZXh0KHJlcyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9zLmRvbmUuZmlsdGVyKG5vdFRoZVNhbWUodGhpcy5faSkpLmV2ZXJ5KGlkZW50aXR5KSkge1xuICAgICAgdGhpcy5fcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfVxuICB9O1xuXG4gIFppcEl0ZXJhYmxlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fcy5vLm9uRXJyb3IoZSk7IH07XG5cbiAgWmlwSXRlcmFibGVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX3MuZG9uZVt0aGlzLl9pXSA9IHRydWU7XG4gICAgdGhpcy5fcy5kb25lLmV2ZXJ5KGlkZW50aXR5KSAmJiB0aGlzLl9zLm8ub25Db21wbGV0ZWQoKTtcbiAgfTtcblxuICByZXR1cm4gWmlwSXRlcmFibGVPYnNlcnZlcjtcbn0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4vKipcbiAqIE1lcmdlcyB0aGUgc3BlY2lmaWVkIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgdXNpbmcgdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIHdoZW5ldmVyIGFsbCBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgb3IgYW4gYXJyYXkgaGF2ZSBwcm9kdWNlZCBhbiBlbGVtZW50IGF0IGEgY29ycmVzcG9uZGluZyBpbmRleC5cbiAqIFRoZSBsYXN0IGVsZW1lbnQgaW4gdGhlIGFyZ3VtZW50cyBtdXN0IGJlIGEgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIHNlcmllcyBvZiBlbGVtZW50cyBhdCBjb3JyZXNwb25kaW5nIGluZGV4ZXMgaW4gdGhlIGFyZ3MuXG4gKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgY29tYmluaW5nIGVsZW1lbnRzIG9mIHRoZSBhcmdzIHVzaW5nIHRoZSBzcGVjaWZpZWQgcmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICovXG5vYnNlcnZhYmxlUHJvdG8uemlwSXRlcmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7IHRocm93IG5ldyBFcnJvcignaW52YWxpZCBhcmd1bWVudHMnKTsgfVxuXG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gIHZhciByZXN1bHRTZWxlY3RvciA9IGlzRnVuY3Rpb24oYXJnc1tsZW4gLSAxXSkgPyBhcmdzLnBvcCgpIDogYXJndW1lbnRzVG9BcnJheTtcblxuICB2YXIgcGFyZW50ID0gdGhpcztcbiAgYXJncy51bnNoaWZ0KHBhcmVudCk7XG4gIHJldHVybiBuZXcgWmlwSXRlcmFibGVPYnNlcnZhYmxlKGFyZ3MsIHJlc3VsdFNlbGVjdG9yKTtcbn07XG5cbiAgZnVuY3Rpb24gYXNPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBzdWJzY3JpYmUobykgeyByZXR1cm4gc291cmNlLnN1YnNjcmliZShvKTsgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgSGlkZXMgdGhlIGlkZW50aXR5IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaGlkZXMgdGhlIGlkZW50aXR5IG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uYXNPYnNlcnZhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShhc09ic2VydmFibGUodGhpcyksIHRoaXMpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHRvQXJyYXkoeCkgeyByZXR1cm4geC50b0FycmF5KCk7IH1cbiAgZnVuY3Rpb24gbm90RW1wdHkoeCkgeyByZXR1cm4geC5sZW5ndGggPiAwOyB9XG5cbiAgLyoqXG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIHplcm8gb3IgbW9yZSBidWZmZXJzIHdoaWNoIGFyZSBwcm9kdWNlZCBiYXNlZCBvbiBlbGVtZW50IGNvdW50IGluZm9ybWF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgTGVuZ3RoIG9mIGVhY2ggYnVmZmVyLlxuICAgKiBAcGFyYW0ge051bWJlcn0gW3NraXBdIE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGJldHdlZW4gY3JlYXRpb24gb2YgY29uc2VjdXRpdmUgYnVmZmVycy4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byB0aGUgY291bnQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIGJ1ZmZlcnMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uYnVmZmVyV2l0aENvdW50ID0gZnVuY3Rpb24gKGNvdW50LCBza2lwKSB7XG4gICAgdHlwZW9mIHNraXAgIT09ICdudW1iZXInICYmIChza2lwID0gY291bnQpO1xuICAgIHJldHVybiB0aGlzLndpbmRvd1dpdGhDb3VudChjb3VudCwgc2tpcClcbiAgICAgIC5mbGF0TWFwKHRvQXJyYXkpXG4gICAgICAuZmlsdGVyKG5vdEVtcHR5KTtcbiAgfTtcblxuICB2YXIgRGVtYXRlcmlhbGl6ZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKERlbWF0ZXJpYWxpemVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERlbWF0ZXJpYWxpemVPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEZW1hdGVyaWFsaXplT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBEZW1hdGVyaWFsaXplT2JzZXJ2ZXIobykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGVtYXRlcmlhbGl6ZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRGVtYXRlcmlhbGl6ZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEZW1hdGVyaWFsaXplT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBEZW1hdGVyaWFsaXplT2JzZXJ2ZXIobykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEZW1hdGVyaWFsaXplT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB4LmFjY2VwdCh0aGlzLl9vKTsgfTtcbiAgICBEZW1hdGVyaWFsaXplT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIERlbWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gRGVtYXRlcmlhbGl6ZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogRGVtYXRlcmlhbGl6ZXMgdGhlIGV4cGxpY2l0IG5vdGlmaWNhdGlvbiB2YWx1ZXMgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhcyBpbXBsaWNpdCBub3RpZmljYXRpb25zLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBleGhpYml0aW5nIHRoZSBiZWhhdmlvciBjb3JyZXNwb25kaW5nIHRvIHRoZSBzb3VyY2Ugc2VxdWVuY2UncyBub3RpZmljYXRpb24gdmFsdWVzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmRlbWF0ZXJpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBEZW1hdGVyaWFsaXplT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGUoc291cmNlLCBrZXlGbiwgY29tcGFyZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5rZXlGbiA9IGtleUZuO1xuICAgICAgdGhpcy5jb21wYXJlciA9IGNvbXBhcmVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIobywgdGhpcy5rZXlGbiwgdGhpcy5jb21wYXJlcikpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyKG8sIGtleUZuLCBjb21wYXJlcikge1xuICAgICAgdGhpcy5vID0gbztcbiAgICAgIHRoaXMua2V5Rm4gPSBrZXlGbjtcbiAgICAgIHRoaXMuY29tcGFyZXIgPSBjb21wYXJlcjtcbiAgICAgIHRoaXMuaGFzQ3VycmVudEtleSA9IGZhbHNlO1xuICAgICAgdGhpcy5jdXJyZW50S2V5ID0gbnVsbDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIGtleSA9IHgsIGNvbXBhcmVyRXF1YWxzO1xuICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5rZXlGbikpIHtcbiAgICAgICAga2V5ID0gdHJ5Q2F0Y2godGhpcy5rZXlGbikoeCk7XG4gICAgICAgIGlmIChrZXkgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLm8ub25FcnJvcihrZXkuZSk7IH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc0N1cnJlbnRLZXkpIHtcbiAgICAgICAgY29tcGFyZXJFcXVhbHMgPSB0cnlDYXRjaCh0aGlzLmNvbXBhcmVyKSh0aGlzLmN1cnJlbnRLZXksIGtleSk7XG4gICAgICAgIGlmIChjb21wYXJlckVxdWFscyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuby5vbkVycm9yKGNvbXBhcmVyRXF1YWxzLmUpOyB9XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuaGFzQ3VycmVudEtleSB8fCAhY29tcGFyZXJFcXVhbHMpIHtcbiAgICAgICAgdGhpcy5oYXNDdXJyZW50S2V5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jdXJyZW50S2V5ID0ga2V5O1xuICAgICAgICB0aGlzLm8ub25OZXh0KHgpO1xuICAgICAgfVxuICAgIH07XG4gICAgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihlKSB7XG4gICAgICB0aGlzLm8ub25FcnJvcihlKTtcbiAgICB9O1xuICAgIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIG9ubHkgZGlzdGluY3QgY29udGlndW91cyBlbGVtZW50cyBhY2NvcmRpbmcgdG8gdGhlIGtleUZuIGFuZCB0aGUgY29tcGFyZXIuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gW2tleUZuXSBBIGZ1bmN0aW9uIHRvIGNvbXB1dGUgdGhlIGNvbXBhcmlzb24ga2V5IGZvciBlYWNoIGVsZW1lbnQuIElmIG5vdCBwcm92aWRlZCwgaXQgcHJvamVjdHMgdGhlIHZhbHVlLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJlcl0gRXF1YWxpdHkgY29tcGFyZXIgZm9yIGNvbXB1dGVkIGtleSB2YWx1ZXMuIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gYW4gZXF1YWxpdHkgY29tcGFyZXIgZnVuY3Rpb24uXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb25seSBjb250YWluaW5nIHRoZSBkaXN0aW5jdCBjb250aWd1b3VzIGVsZW1lbnRzLCBiYXNlZCBvbiBhIGNvbXB1dGVkIGtleSB2YWx1ZSwgZnJvbSB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZGlzdGluY3RVbnRpbENoYW5nZWQgPSBmdW5jdGlvbiAoa2V5Rm4sIGNvbXBhcmVyKSB7XG4gICAgY29tcGFyZXIgfHwgKGNvbXBhcmVyID0gZGVmYXVsdENvbXBhcmVyKTtcbiAgICByZXR1cm4gbmV3IERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2YWJsZSh0aGlzLCBrZXlGbiwgY29tcGFyZXIpO1xuICB9O1xuXG4gIHZhciBUYXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRhcE9ic2VydmFibGUsX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUYXBPYnNlcnZhYmxlKHNvdXJjZSwgb2JzZXJ2ZXJPck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fb04gPSBvYnNlcnZlck9yT25OZXh0O1xuICAgICAgdGhpcy5fb0UgPSBvbkVycm9yO1xuICAgICAgdGhpcy5fb0MgPSBvbkNvbXBsZXRlZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRhcE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKG8sIHRoaXMpKTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihvLCBwKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy50ID0gIXAuX29OIHx8IGlzRnVuY3Rpb24ocC5fb04pID9cbiAgICAgICAgb2JzZXJ2ZXJDcmVhdGUocC5fb04gfHwgbm9vcCwgcC5fb0UgfHwgbm9vcCwgcC5fb0MgfHwgbm9vcCkgOlxuICAgICAgICBwLl9vTjtcbiAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbih4KSB7XG4gICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy50Lm9uTmV4dCkuY2FsbCh0aGlzLnQsIHgpO1xuICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgdGhpcy5vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICB0aGlzLm8ub25OZXh0KHgpO1xuICAgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcbiAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLnQub25FcnJvcikuY2FsbCh0aGlzLnQsIGVycik7XG4gICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICB0aGlzLm8ub25FcnJvcihlcnIpO1xuICAgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy50Lm9uQ29tcGxldGVkKS5jYWxsKHRoaXMudCk7XG4gICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICB0aGlzLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRhcE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgKiAgSW52b2tlcyBhbiBhY3Rpb24gZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhbmQgaW52b2tlcyBhbiBhY3Rpb24gdXBvbiBncmFjZWZ1bCBvciBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiAgVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgZm9yIGRlYnVnZ2luZywgbG9nZ2luZywgZXRjLiBvZiBxdWVyeSBiZWhhdmlvciBieSBpbnRlcmNlcHRpbmcgdGhlIG1lc3NhZ2Ugc3RyZWFtIHRvIHJ1biBhcmJpdHJhcnkgYWN0aW9ucyBmb3IgbWVzc2FnZXMgb24gdGhlIHBpcGVsaW5lLlxuICAqIEBwYXJhbSB7RnVuY3Rpb24gfCBPYnNlcnZlcn0gb2JzZXJ2ZXJPck9uTmV4dCBBY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugb3IgYW4gby5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25FcnJvcl0gIEFjdGlvbiB0byBpbnZva2UgdXBvbiBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS4gVXNlZCBpZiBvbmx5IHRoZSBvYnNlcnZlck9yT25OZXh0IHBhcmFtZXRlciBpcyBhbHNvIGEgZnVuY3Rpb24uXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gW29uQ29tcGxldGVkXSAgQWN0aW9uIHRvIGludm9rZSB1cG9uIGdyYWNlZnVsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLiBVc2VkIGlmIG9ubHkgdGhlIG9ic2VydmVyT3JPbk5leHQgcGFyYW1ldGVyIGlzIGFsc28gYSBmdW5jdGlvbi5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoIHRoZSBzaWRlLWVmZmVjdGluZyBiZWhhdmlvciBhcHBsaWVkLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG9bJ2RvJ10gPSBvYnNlcnZhYmxlUHJvdG8udGFwID0gb2JzZXJ2YWJsZVByb3RvLmRvQWN0aW9uID0gZnVuY3Rpb24gKG9ic2VydmVyT3JPbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG4gICAgcmV0dXJuIG5ldyBUYXBPYnNlcnZhYmxlKHRoaXMsIG9ic2VydmVyT3JPbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKTtcbiAgfTtcblxuICAvKipcbiAgKiAgSW52b2tlcyBhbiBhY3Rpb24gZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiAgVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgZm9yIGRlYnVnZ2luZywgbG9nZ2luZywgZXRjLiBvZiBxdWVyeSBiZWhhdmlvciBieSBpbnRlcmNlcHRpbmcgdGhlIG1lc3NhZ2Ugc3RyZWFtIHRvIHJ1biBhcmJpdHJhcnkgYWN0aW9ucyBmb3IgbWVzc2FnZXMgb24gdGhlIHBpcGVsaW5lLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uTmV4dCBBY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aCB0aGUgc2lkZS1lZmZlY3RpbmcgYmVoYXZpb3IgYXBwbGllZC5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmRvT25OZXh0ID0gb2JzZXJ2YWJsZVByb3RvLnRhcE9uTmV4dCA9IGZ1bmN0aW9uIChvbk5leHQsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gdGhpcy50YXAodHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24gKHgpIHsgb25OZXh0LmNhbGwodGhpc0FyZywgeCk7IH0gOiBvbk5leHQpO1xuICB9O1xuXG4gIC8qKlxuICAqICBJbnZva2VzIGFuIGFjdGlvbiB1cG9uIGV4Y2VwdGlvbmFsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqICBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBmb3IgZGVidWdnaW5nLCBsb2dnaW5nLCBldGMuIG9mIHF1ZXJ5IGJlaGF2aW9yIGJ5IGludGVyY2VwdGluZyB0aGUgbWVzc2FnZSBzdHJlYW0gdG8gcnVuIGFyYml0cmFyeSBhY3Rpb25zIGZvciBtZXNzYWdlcyBvbiB0aGUgcGlwZWxpbmUuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gb25FcnJvciBBY3Rpb24gdG8gaW52b2tlIHVwb24gZXhjZXB0aW9uYWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aCB0aGUgc2lkZS1lZmZlY3RpbmcgYmVoYXZpb3IgYXBwbGllZC5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmRvT25FcnJvciA9IG9ic2VydmFibGVQcm90by50YXBPbkVycm9yID0gZnVuY3Rpb24gKG9uRXJyb3IsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gdGhpcy50YXAobm9vcCwgdHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24gKGUpIHsgb25FcnJvci5jYWxsKHRoaXNBcmcsIGUpOyB9IDogb25FcnJvcik7XG4gIH07XG5cbiAgLyoqXG4gICogIEludm9rZXMgYW4gYWN0aW9uIHVwb24gZ3JhY2VmdWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGZvciBkZWJ1Z2dpbmcsIGxvZ2dpbmcsIGV0Yy4gb2YgcXVlcnkgYmVoYXZpb3IgYnkgaW50ZXJjZXB0aW5nIHRoZSBtZXNzYWdlIHN0cmVhbSB0byBydW4gYXJiaXRyYXJ5IGFjdGlvbnMgZm9yIG1lc3NhZ2VzIG9uIHRoZSBwaXBlbGluZS5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkNvbXBsZXRlZCBBY3Rpb24gdG8gaW52b2tlIHVwb24gZ3JhY2VmdWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aCB0aGUgc2lkZS1lZmZlY3RpbmcgYmVoYXZpb3IgYXBwbGllZC5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmRvT25Db21wbGV0ZWQgPSBvYnNlcnZhYmxlUHJvdG8udGFwT25Db21wbGV0ZWQgPSBmdW5jdGlvbiAob25Db21wbGV0ZWQsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gdGhpcy50YXAobm9vcCwgbnVsbCwgdHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24gKCkgeyBvbkNvbXBsZXRlZC5jYWxsKHRoaXNBcmcpOyB9IDogb25Db21wbGV0ZWQpO1xuICB9O1xuXG4gIHZhciBGaW5hbGx5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRmluYWxseU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRmluYWxseU9ic2VydmFibGUoc291cmNlLCBmbiwgdGhpc0FyZykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbiA9IGJpbmRDYWxsYmFjayhmbiwgdGhpc0FyZywgMCk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBGaW5hbGx5T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZCA9IHRyeUNhdGNoKHRoaXMuc291cmNlLnN1YnNjcmliZSkuY2FsbCh0aGlzLnNvdXJjZSwgbyk7XG4gICAgICBpZiAoZCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgdGhpcy5fZm4oKTtcbiAgICAgICAgdGhyb3dlcihkLmUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEZpbmFsbHlEaXNwb3NhYmxlKGQsIHRoaXMuX2ZuKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gRmluYWxseURpc3Bvc2FibGUocywgZm4pIHtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgIH1cbiAgICBGaW5hbGx5RGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9zLmRpc3Bvc2UpLmNhbGwodGhpcy5fcyk7XG4gICAgICAgIHRoaXMuX2ZuKCk7XG4gICAgICAgIHJlcyA9PT0gZXJyb3JPYmogJiYgdGhyb3dlcihyZXMuZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBGaW5hbGx5T2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBJbnZva2VzIGEgc3BlY2lmaWVkIGFjdGlvbiBhZnRlciB0aGUgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2UgdGVybWluYXRlcyBncmFjZWZ1bGx5IG9yIGV4Y2VwdGlvbmFsbHkuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZpbmFsbHlBY3Rpb24gQWN0aW9uIHRvIGludm9rZSBhZnRlciB0aGUgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2UgdGVybWluYXRlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFNvdXJjZSBzZXF1ZW5jZSB3aXRoIHRoZSBhY3Rpb24taW52b2tpbmcgdGVybWluYXRpb24gYmVoYXZpb3IgYXBwbGllZC5cbiAgICovXG4gIG9ic2VydmFibGVQcm90b1snZmluYWxseSddID0gZnVuY3Rpb24gKGFjdGlvbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBuZXcgRmluYWxseU9ic2VydmFibGUodGhpcywgYWN0aW9uLCB0aGlzQXJnKTtcbiAgfTtcblxuICB2YXIgSWdub3JlRWxlbWVudHNPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKElnbm9yZUVsZW1lbnRzT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIElnbm9yZUVsZW1lbnRzT2JzZXJ2YWJsZShzb3VyY2UpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSWdub3JlRWxlbWVudHNPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobykpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKG8pIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5vbk5leHQgPSBub29wO1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBpZighdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm8ub25FcnJvcihlcnIpO1xuICAgICAgfVxuICAgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUub25Db21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZighdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbigpIHsgdGhpcy5pc1N0b3BwZWQgPSB0cnVlOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmZhaWwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25FcnJvcihlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIElnbm9yZUVsZW1lbnRzT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgSWdub3JlcyBhbGwgZWxlbWVudHMgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBsZWF2aW5nIG9ubHkgdGhlIHRlcm1pbmF0aW9uIG1lc3NhZ2VzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gZW1wdHkgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNpZ25hbHMgdGVybWluYXRpb24sIHN1Y2Nlc3NmdWwgb3IgZXhjZXB0aW9uYWwsIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uaWdub3JlRWxlbWVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBJZ25vcmVFbGVtZW50c09ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbiAgdmFyIE1hdGVyaWFsaXplT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTWF0ZXJpYWxpemVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE1hdGVyaWFsaXplT2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE1hdGVyaWFsaXplT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBNYXRlcmlhbGl6ZU9ic2VydmVyKG8pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1hdGVyaWFsaXplT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBNYXRlcmlhbGl6ZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNYXRlcmlhbGl6ZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gTWF0ZXJpYWxpemVPYnNlcnZlcihvKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE1hdGVyaWFsaXplT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9vLm9uTmV4dChub3RpZmljYXRpb25DcmVhdGVPbk5leHQoeCkpIH07XG4gICAgTWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uTmV4dChub3RpZmljYXRpb25DcmVhdGVPbkVycm9yKGUpKTsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuICAgIE1hdGVyaWFsaXplT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbk5leHQobm90aWZpY2F0aW9uQ3JlYXRlT25Db21wbGV0ZWQoKSk7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBNYXRlcmlhbGl6ZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIE1hdGVyaWFsaXplcyB0aGUgaW1wbGljaXQgbm90aWZpY2F0aW9ucyBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIGV4cGxpY2l0IG5vdGlmaWNhdGlvbiB2YWx1ZXMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIG1hdGVyaWFsaXplZCBub3RpZmljYXRpb24gdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5tYXRlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IE1hdGVyaWFsaXplT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogIFJlcGVhdHMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgYSBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLiBJZiB0aGUgcmVwZWF0IGNvdW50IGlzIG5vdCBzcGVjaWZpZWQsIHRoZSBzZXF1ZW5jZSByZXBlYXRzIGluZGVmaW5pdGVseS5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtyZXBlYXRDb3VudF0gIE51bWJlciBvZiB0aW1lcyB0byByZXBlYXQgdGhlIHNlcXVlbmNlLiBJZiBub3QgcHJvdmlkZWQsIHJlcGVhdHMgdGhlIHNlcXVlbmNlIGluZGVmaW5pdGVseS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHByb2R1Y2luZyB0aGUgZWxlbWVudHMgb2YgdGhlIGdpdmVuIHNlcXVlbmNlIHJlcGVhdGVkbHkuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucmVwZWF0ID0gZnVuY3Rpb24gKHJlcGVhdENvdW50KSB7XG4gICAgcmV0dXJuIGVudW1lcmFibGVSZXBlYXQodGhpcywgcmVwZWF0Q291bnQpLmNvbmNhdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgUmVwZWF0cyB0aGUgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgdGltZXMgb3IgdW50aWwgaXQgc3VjY2Vzc2Z1bGx5IHRlcm1pbmF0ZXMuIElmIHRoZSByZXRyeSBjb3VudCBpcyBub3Qgc3BlY2lmaWVkLCBpdCByZXRyaWVzIGluZGVmaW5pdGVseS5cbiAgICogIE5vdGUgaWYgeW91IGVuY291bnRlciBhbiBlcnJvciBhbmQgd2FudCBpdCB0byByZXRyeSBvbmNlLCB0aGVuIHlvdSBtdXN0IHVzZSAucmV0cnkoMik7XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gcmV0cmllZCA9IHJldHJ5LnJlcGVhdCgpO1xuICAgKiAgdmFyIHJlcyA9IHJldHJpZWQgPSByZXRyeS5yZXBlYXQoMik7XG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbcmV0cnlDb3VudF0gIE51bWJlciBvZiB0aW1lcyB0byByZXRyeSB0aGUgc2VxdWVuY2UuIElmIG5vdCBwcm92aWRlZCwgcmV0cnkgdGhlIHNlcXVlbmNlIGluZGVmaW5pdGVseS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgcHJvZHVjaW5nIHRoZSBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gc2VxdWVuY2UgcmVwZWF0ZWRseSB1bnRpbCBpdCB0ZXJtaW5hdGVzIHN1Y2Nlc3NmdWxseS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5yZXRyeSA9IGZ1bmN0aW9uIChyZXRyeUNvdW50KSB7XG4gICAgcmV0dXJuIGVudW1lcmFibGVSZXBlYXQodGhpcywgcmV0cnlDb3VudCkuY2F0Y2hFcnJvcigpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHJlcGVhdCh2YWx1ZSkge1xuICAgIHJldHVybiB7XG4gICAgICAnQEBpdGVyYXRvcic6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IHZhbHVlIH07XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICB2YXIgUmV0cnlXaGVuT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBmdW5jdGlvbiBjcmVhdGVEaXNwb3NhYmxlKHN0YXRlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc0Rpc3Bvc2VkOiBmYWxzZSxcbiAgICAgICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFJldHJ5V2hlbk9ic2VydmFibGUoc291cmNlLCBub3RpZmllcikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9ub3RpZmllciA9IG5vdGlmaWVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoUmV0cnlXaGVuT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIFJldHJ5V2hlbk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGV4Y2VwdGlvbnMgPSBuZXcgU3ViamVjdCgpLFxuICAgICAgICBub3RpZmllciA9IG5ldyBTdWJqZWN0KCksXG4gICAgICAgIGhhbmRsZWQgPSB0aGlzLl9ub3RpZmllcihleGNlcHRpb25zKSxcbiAgICAgICAgbm90aWZpY2F0aW9uRGlzcG9zYWJsZSA9IGhhbmRsZWQuc3Vic2NyaWJlKG5vdGlmaWVyKTtcblxuICAgICAgdmFyIGUgPSB0aGlzLnNvdXJjZVsnQEBpdGVyYXRvciddKCk7XG5cbiAgICAgIHZhciBzdGF0ZSA9IHsgaXNEaXNwb3NlZDogZmFsc2UgfSxcbiAgICAgICAgbGFzdEVycm9yLFxuICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgICAgdmFyIGNhbmNlbGFibGUgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKG51bGwsIGZ1bmN0aW9uIChfLCByZWN1cnNlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5pc0Rpc3Bvc2VkKSB7IHJldHVybjsgfVxuICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSBlLm5leHQoKTtcblxuICAgICAgICBpZiAoY3VycmVudEl0ZW0uZG9uZSkge1xuICAgICAgICAgIGlmIChsYXN0RXJyb3IpIHtcbiAgICAgICAgICAgIG8ub25FcnJvcihsYXN0RXJyb3IpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHByb21pc2VcbiAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRJdGVtLnZhbHVlO1xuICAgICAgICBpc1Byb21pc2UoY3VycmVudFZhbHVlKSAmJiAoY3VycmVudFZhbHVlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGN1cnJlbnRWYWx1ZSkpO1xuXG4gICAgICAgIHZhciBvdXRlciA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICB2YXIgaW5uZXIgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUobmV3IEJpbmFyeURpc3Bvc2FibGUoaW5uZXIsIG91dGVyKSk7XG4gICAgICAgIG91dGVyLnNldERpc3Bvc2FibGUoY3VycmVudFZhbHVlLnN1YnNjcmliZShcbiAgICAgICAgICBmdW5jdGlvbih4KSB7IG8ub25OZXh0KHgpOyB9LFxuICAgICAgICAgIGZ1bmN0aW9uIChleG4pIHtcbiAgICAgICAgICAgIGlubmVyLnNldERpc3Bvc2FibGUobm90aWZpZXIuc3Vic2NyaWJlKHJlY3Vyc2UsIGZ1bmN0aW9uKGV4KSB7XG4gICAgICAgICAgICAgIG8ub25FcnJvcihleCk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICBleGNlcHRpb25zLm9uTmV4dChleG4pO1xuICAgICAgICAgICAgb3V0ZXIuZGlzcG9zZSgpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24oKSB7IG8ub25Db21wbGV0ZWQoKTsgfSkpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoW25vdGlmaWNhdGlvbkRpc3Bvc2FibGUsIHN1YnNjcmlwdGlvbiwgY2FuY2VsYWJsZSwgY3JlYXRlRGlzcG9zYWJsZShzdGF0ZSldKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJldHJ5V2hlbk9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICBvYnNlcnZhYmxlUHJvdG8ucmV0cnlXaGVuID0gZnVuY3Rpb24gKG5vdGlmaWVyKSB7XG4gICAgcmV0dXJuIG5ldyBSZXRyeVdoZW5PYnNlcnZhYmxlKHJlcGVhdCh0aGlzKSwgbm90aWZpZXIpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHJlcGVhdCh2YWx1ZSkge1xuICAgIHJldHVybiB7XG4gICAgICAnQEBpdGVyYXRvcic6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IHZhbHVlIH07XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICB2YXIgUmVwZWF0V2hlbk9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgZnVuY3Rpb24gY3JlYXRlRGlzcG9zYWJsZShzdGF0ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNEaXNwb3NlZDogZmFsc2UsXG4gICAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHN0YXRlLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBSZXBlYXRXaGVuT2JzZXJ2YWJsZShzb3VyY2UsIG5vdGlmaWVyKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX25vdGlmaWVyID0gbm90aWZpZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhSZXBlYXRXaGVuT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIFJlcGVhdFdoZW5PYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBjb21wbGV0aW9ucyA9IG5ldyBTdWJqZWN0KCksXG4gICAgICAgIG5vdGlmaWVyID0gbmV3IFN1YmplY3QoKSxcbiAgICAgICAgaGFuZGxlZCA9IHRoaXMuX25vdGlmaWVyKGNvbXBsZXRpb25zKSxcbiAgICAgICAgbm90aWZpY2F0aW9uRGlzcG9zYWJsZSA9IGhhbmRsZWQuc3Vic2NyaWJlKG5vdGlmaWVyKTtcblxuICAgICAgdmFyIGUgPSB0aGlzLnNvdXJjZVsnQEBpdGVyYXRvciddKCk7XG5cbiAgICAgIHZhciBzdGF0ZSA9IHsgaXNEaXNwb3NlZDogZmFsc2UgfSxcbiAgICAgICAgbGFzdEVycm9yLFxuICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgICAgdmFyIGNhbmNlbGFibGUgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKG51bGwsIGZ1bmN0aW9uIChfLCByZWN1cnNlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5pc0Rpc3Bvc2VkKSB7IHJldHVybjsgfVxuICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSBlLm5leHQoKTtcblxuICAgICAgICBpZiAoY3VycmVudEl0ZW0uZG9uZSkge1xuICAgICAgICAgIGlmIChsYXN0RXJyb3IpIHtcbiAgICAgICAgICAgIG8ub25FcnJvcihsYXN0RXJyb3IpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHByb21pc2VcbiAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRJdGVtLnZhbHVlO1xuICAgICAgICBpc1Byb21pc2UoY3VycmVudFZhbHVlKSAmJiAoY3VycmVudFZhbHVlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGN1cnJlbnRWYWx1ZSkpO1xuXG4gICAgICAgIHZhciBvdXRlciA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICB2YXIgaW5uZXIgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUobmV3IEJpbmFyeURpc3Bvc2FibGUoaW5uZXIsIG91dGVyKSk7XG4gICAgICAgIG91dGVyLnNldERpc3Bvc2FibGUoY3VycmVudFZhbHVlLnN1YnNjcmliZShcbiAgICAgICAgICBmdW5jdGlvbih4KSB7IG8ub25OZXh0KHgpOyB9LFxuICAgICAgICAgIGZ1bmN0aW9uIChleG4pIHsgby5vbkVycm9yKGV4bik7IH0sXG4gICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbm5lci5zZXREaXNwb3NhYmxlKG5vdGlmaWVyLnN1YnNjcmliZShyZWN1cnNlLCBmdW5jdGlvbihleCkge1xuICAgICAgICAgICAgICBvLm9uRXJyb3IoZXgpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgY29tcGxldGlvbnMub25OZXh0KG51bGwpO1xuICAgICAgICAgICAgb3V0ZXIuZGlzcG9zZSgpO1xuICAgICAgICAgIH0pKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKFtub3RpZmljYXRpb25EaXNwb3NhYmxlLCBzdWJzY3JpcHRpb24sIGNhbmNlbGFibGUsIGNyZWF0ZURpc3Bvc2FibGUoc3RhdGUpXSk7XG4gICAgfTtcblxuICAgIHJldHVybiBSZXBlYXRXaGVuT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIG9ic2VydmFibGVQcm90by5yZXBlYXRXaGVuID0gZnVuY3Rpb24gKG5vdGlmaWVyKSB7XG4gICAgcmV0dXJuIG5ldyBSZXBlYXRXaGVuT2JzZXJ2YWJsZShyZXBlYXQodGhpcyksIG5vdGlmaWVyKTtcbiAgfTtcblxuICB2YXIgU2Nhbk9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2Nhbk9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2Nhbk9ic2VydmFibGUoc291cmNlLCBhY2N1bXVsYXRvciwgaGFzU2VlZCwgc2VlZCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLmFjY3VtdWxhdG9yID0gYWNjdW11bGF0b3I7XG4gICAgICB0aGlzLmhhc1NlZWQgPSBoYXNTZWVkO1xuICAgICAgdGhpcy5zZWVkID0gc2VlZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNjYW5PYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2Nhbk9ic2VydmVyKG8sdGhpcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2Nhbk9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU2Nhbk9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTY2FuT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2Nhbk9ic2VydmVyKG8sIHBhcmVudCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gcGFyZW50O1xuICAgICAgdGhpcy5fZm4gPSBwYXJlbnQuYWNjdW11bGF0b3I7XG4gICAgICB0aGlzLl9ocyA9IHBhcmVudC5oYXNTZWVkO1xuICAgICAgdGhpcy5fcyA9IHBhcmVudC5zZWVkO1xuICAgICAgdGhpcy5faGEgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2EgPSBudWxsO1xuICAgICAgdGhpcy5faHYgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2Nhbk9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICF0aGlzLl9odiAmJiAodGhpcy5faHYgPSB0cnVlKTtcbiAgICAgIGlmICh0aGlzLl9oYSkge1xuICAgICAgICB0aGlzLl9hID0gdHJ5Q2F0Y2godGhpcy5fZm4pKHRoaXMuX2EsIHgsIHRoaXMuX2ksIHRoaXMuX3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYSA9IHRoaXMuX2hzID8gdHJ5Q2F0Y2godGhpcy5fZm4pKHRoaXMuX3MsIHgsIHRoaXMuX2ksIHRoaXMuX3ApIDogeDtcbiAgICAgICAgdGhpcy5faGEgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2EgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IodGhpcy5fYS5lKTsgfVxuICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fYSk7XG4gICAgICB0aGlzLl9pKys7XG4gICAgfTtcblxuICAgIFNjYW5PYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBTY2FuT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICF0aGlzLl9odiAmJiB0aGlzLl9ocyAmJiB0aGlzLl9vLm9uTmV4dCh0aGlzLl9zKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNjYW5PYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogIEFwcGxpZXMgYW4gYWNjdW11bGF0b3IgZnVuY3Rpb24gb3ZlciBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFuZCByZXR1cm5zIGVhY2ggaW50ZXJtZWRpYXRlIHJlc3VsdC4gVGhlIG9wdGlvbmFsIHNlZWQgdmFsdWUgaXMgdXNlZCBhcyB0aGUgaW5pdGlhbCBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgKiAgRm9yIGFnZ3JlZ2F0aW9uIGJlaGF2aW9yIHdpdGggbm8gaW50ZXJtZWRpYXRlIHJlc3VsdHMsIHNlZSBPYnNlcnZhYmxlLmFnZ3JlZ2F0ZS5cbiAgKiBAcGFyYW0ge01peGVkfSBbc2VlZF0gVGhlIGluaXRpYWwgYWNjdW11bGF0b3IgdmFsdWUuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gYWNjdW11bGF0b3IgQW4gYWNjdW11bGF0b3IgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCBvbiBlYWNoIGVsZW1lbnQuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgYWNjdW11bGF0ZWQgdmFsdWVzLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2NhbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaGFzU2VlZCA9IGZhbHNlLCBzZWVkLCBhY2N1bXVsYXRvciA9IGFyZ3VtZW50c1swXTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgaGFzU2VlZCA9IHRydWU7XG4gICAgICBzZWVkID0gYXJndW1lbnRzWzFdO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFNjYW5PYnNlcnZhYmxlKHRoaXMsIGFjY3VtdWxhdG9yLCBoYXNTZWVkLCBzZWVkKTtcbiAgfTtcblxuICB2YXIgU2tpcExhc3RPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwTGFzdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcExhc3RPYnNlcnZhYmxlKHNvdXJjZSwgYykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9jID0gYztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBMYXN0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTa2lwTGFzdE9ic2VydmVyKG8sIHRoaXMuX2MpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBMYXN0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTa2lwTGFzdE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwTGFzdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNraXBMYXN0T2JzZXJ2ZXIobywgYykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9jID0gYztcbiAgICAgIHRoaXMuX3EgPSBbXTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcS5wdXNoKHgpO1xuICAgICAgdGhpcy5fcS5sZW5ndGggPiB0aGlzLl9jICYmIHRoaXMuX28ub25OZXh0KHRoaXMuX3Euc2hpZnQoKSk7XG4gICAgfTtcblxuICAgIFNraXBMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgU2tpcExhc3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcExhc3RPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBCeXBhc3NlcyBhIHNwZWNpZmllZCBudW1iZXIgb2YgZWxlbWVudHMgYXQgdGhlIGVuZCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogIFRoaXMgb3BlcmF0b3IgYWNjdW11bGF0ZXMgYSBxdWV1ZSB3aXRoIGEgbGVuZ3RoIGVub3VnaCB0byBzdG9yZSB0aGUgZmlyc3QgYGNvdW50YCBlbGVtZW50cy4gQXMgbW9yZSBlbGVtZW50cyBhcmVcbiAgICogIHJlY2VpdmVkLCBlbGVtZW50cyBhcmUgdGFrZW4gZnJvbSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIGFuZCBwcm9kdWNlZCBvbiB0aGUgcmVzdWx0IHNlcXVlbmNlLiBUaGlzIGNhdXNlcyBlbGVtZW50cyB0byBiZSBkZWxheWVkLlxuICAgKiBAcGFyYW0gY291bnQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIGJ5cGFzcyBhdCB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSBlbGVtZW50cyBleGNlcHQgZm9yIHRoZSBieXBhc3NlZCBvbmVzIGF0IHRoZSBlbmQuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2tpcExhc3QgPSBmdW5jdGlvbiAoY291bnQpIHtcbiAgICBpZiAoY291bnQgPCAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgcmV0dXJuIG5ldyBTa2lwTGFzdE9ic2VydmFibGUodGhpcywgY291bnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgUHJlcGVuZHMgYSBzZXF1ZW5jZSBvZiB2YWx1ZXMgdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIGFuIG9wdGlvbmFsIHNjaGVkdWxlciBhbmQgYW4gYXJndW1lbnQgbGlzdCBvZiB2YWx1ZXMgdG8gcHJlcGVuZC5cbiAgICogIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gc291cmNlLnN0YXJ0V2l0aCgxLCAyLCAzKTtcbiAgICogIHZhciByZXMgPSBzb3VyY2Uuc3RhcnRXaXRoKFJ4LlNjaGVkdWxlci50aW1lb3V0LCAxLCAyLCAzKTtcbiAgICogQHBhcmFtIHtBcmd1bWVudHN9IGFyZ3MgVGhlIHNwZWNpZmllZCB2YWx1ZXMgdG8gcHJlcGVuZCB0byB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZVxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSBwcmVwZW5kZWQgd2l0aCB0aGUgc3BlY2lmaWVkIHZhbHVlcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zdGFydFdpdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHZhbHVlcywgc2NoZWR1bGVyLCBzdGFydCA9IDA7XG4gICAgaWYgKCEhYXJndW1lbnRzLmxlbmd0aCAmJiBpc1NjaGVkdWxlcihhcmd1bWVudHNbMF0pKSB7XG4gICAgICBzY2hlZHVsZXIgPSBhcmd1bWVudHNbMF07XG4gICAgICBzdGFydCA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcjtcbiAgICB9XG4gICAgZm9yKHZhciBhcmdzID0gW10sIGkgPSBzdGFydCwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pOyB9XG4gICAgcmV0dXJuIGVudW1lcmFibGVPZihbb2JzZXJ2YWJsZUZyb21BcnJheShhcmdzLCBzY2hlZHVsZXIpLCB0aGlzXSkuY29uY2F0KCk7XG4gIH07XG5cbiAgdmFyIFRha2VMYXN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VMYXN0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGFrZUxhc3RPYnNlcnZlcihvLCBjKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2MgPSBjO1xuICAgICAgdGhpcy5fcSA9IFtdO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZUxhc3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9xLnB1c2goeCk7XG4gICAgICB0aGlzLl9xLmxlbmd0aCA+IHRoaXMuX2MgJiYgdGhpcy5fcS5zaGlmdCgpO1xuICAgIH07XG5cbiAgICBUYWtlTGFzdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFRha2VMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdoaWxlICh0aGlzLl9xLmxlbmd0aCA+IDApIHsgdGhpcy5fby5vbk5leHQodGhpcy5fcS5zaGlmdCgpKTsgfVxuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGFrZUxhc3RPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGEgc3BlY2lmaWVkIG51bWJlciBvZiBjb250aWd1b3VzIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogIFRoaXMgb3BlcmF0b3IgYWNjdW11bGF0ZXMgYSBidWZmZXIgd2l0aCBhIGxlbmd0aCBlbm91Z2ggdG8gc3RvcmUgZWxlbWVudHMgY291bnQgZWxlbWVudHMuIFVwb24gY29tcGxldGlvbiBvZlxuICAgKiAgdGhlIHNvdXJjZSBzZXF1ZW5jZSwgdGhpcyBidWZmZXIgaXMgZHJhaW5lZCBvbiB0aGUgcmVzdWx0IHNlcXVlbmNlLiBUaGlzIGNhdXNlcyB0aGUgZWxlbWVudHMgdG8gYmUgZGVsYXllZC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiBlbGVtZW50cyB0byB0YWtlIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRha2VMYXN0ID0gZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgaWYgKGNvdW50IDwgMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFRha2VMYXN0T2JzZXJ2ZXIobywgY291bnQpKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG4gIHZhciBUYWtlTGFzdEJ1ZmZlck9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYWtlTGFzdEJ1ZmZlck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRha2VMYXN0QnVmZmVyT2JzZXJ2ZXIobywgYykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9jID0gYztcbiAgICAgIHRoaXMuX3EgPSBbXTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRha2VMYXN0QnVmZmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcS5wdXNoKHgpO1xuICAgICAgdGhpcy5fcS5sZW5ndGggPiB0aGlzLl9jICYmIHRoaXMuX3Euc2hpZnQoKTtcbiAgICB9O1xuXG4gICAgVGFrZUxhc3RCdWZmZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBUYWtlTGFzdEJ1ZmZlck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9xKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRha2VMYXN0QnVmZmVyT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBhcnJheSB3aXRoIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIGNvbnRpZ3VvdXMgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiAgVGhpcyBvcGVyYXRvciBhY2N1bXVsYXRlcyBhIGJ1ZmZlciB3aXRoIGEgbGVuZ3RoIGVub3VnaCB0byBzdG9yZSBjb3VudCBlbGVtZW50cy4gVXBvbiBjb21wbGV0aW9uIG9mIHRoZVxuICAgKiAgc291cmNlIHNlcXVlbmNlLCB0aGlzIGJ1ZmZlciBpcyBwcm9kdWNlZCBvbiB0aGUgcmVzdWx0IHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHRha2UgZnJvbSB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgYXJyYXkgd2l0aCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50YWtlTGFzdEJ1ZmZlciA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAgIGlmIChjb3VudCA8IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBUYWtlTGFzdEJ1ZmZlck9ic2VydmVyKG8sIGNvdW50KSk7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICAvKipcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gemVybyBvciBtb3JlIHdpbmRvd3Mgd2hpY2ggYXJlIHByb2R1Y2VkIGJhc2VkIG9uIGVsZW1lbnQgY291bnQgaW5mb3JtYXRpb24uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBMZW5ndGggb2YgZWFjaCB3aW5kb3cuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbc2tpcF0gTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYmV0d2VlbiBjcmVhdGlvbiBvZiBjb25zZWN1dGl2ZSB3aW5kb3dzLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byB0aGUgY291bnQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIHdpbmRvd3MuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ud2luZG93V2l0aENvdW50ID0gZnVuY3Rpb24gKGNvdW50LCBza2lwKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgK2NvdW50IHx8IChjb3VudCA9IDApO1xuICAgIE1hdGguYWJzKGNvdW50KSA9PT0gSW5maW5pdHkgJiYgKGNvdW50ID0gMCk7XG4gICAgaWYgKGNvdW50IDw9IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICBza2lwID09IG51bGwgJiYgKHNraXAgPSBjb3VudCk7XG4gICAgK3NraXAgfHwgKHNraXAgPSAwKTtcbiAgICBNYXRoLmFicyhza2lwKSA9PT0gSW5maW5pdHkgJiYgKHNraXAgPSAwKTtcblxuICAgIGlmIChza2lwIDw9IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgbSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLFxuICAgICAgICByZWZDb3VudERpc3Bvc2FibGUgPSBuZXcgUmVmQ291bnREaXNwb3NhYmxlKG0pLFxuICAgICAgICBuID0gMCxcbiAgICAgICAgcSA9IFtdO1xuXG4gICAgICBmdW5jdGlvbiBjcmVhdGVXaW5kb3cgKCkge1xuICAgICAgICB2YXIgcyA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHEucHVzaChzKTtcbiAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZihzLCByZWZDb3VudERpc3Bvc2FibGUpKTtcbiAgICAgIH1cblxuICAgICAgY3JlYXRlV2luZG93KCk7XG5cbiAgICAgIG0uc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBxLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IHFbaV0ub25OZXh0KHgpOyB9XG4gICAgICAgICAgdmFyIGMgPSBuIC0gY291bnQgKyAxO1xuICAgICAgICAgIGMgPj0gMCAmJiBjICUgc2tpcCA9PT0gMCAmJiBxLnNoaWZ0KCkub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICArK24gJSBza2lwID09PSAwICYmIGNyZWF0ZVdpbmRvdygpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHdoaWxlIChxLmxlbmd0aCA+IDApIHsgcS5zaGlmdCgpLm9uRXJyb3IoZSk7IH1cbiAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2hpbGUgKHEubGVuZ3RoID4gMCkgeyBxLnNoaWZ0KCkub25Db21wbGV0ZWQoKTsgfVxuICAgICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgICkpO1xuICAgICAgcmV0dXJuIHJlZkNvdW50RGlzcG9zYWJsZTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNvbmNhdE1hcChzb3VyY2UsIHNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgdmFyIHNlbGVjdG9yRnVuYyA9IGJpbmRDYWxsYmFjayhzZWxlY3RvciwgdGhpc0FyZywgMyk7XG4gICAgcmV0dXJuIHNvdXJjZS5tYXAoZnVuY3Rpb24gKHgsIGkpIHtcbiAgICAgIHZhciByZXN1bHQgPSBzZWxlY3RvckZ1bmMoeCwgaSwgc291cmNlKTtcbiAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG4gICAgICAoaXNBcnJheUxpa2UocmVzdWx0KSB8fCBpc0l0ZXJhYmxlKHJlc3VsdCkpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbShyZXN1bHQpKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSkuY29uY2F0QWxsKCk7XG4gIH1cblxuICAvKipcbiAgICogIE9uZSBvZiB0aGUgRm9sbG93aW5nOlxuICAgKiAgUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhbmQgbWVyZ2VzIHRoZSByZXN1bHRpbmcgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSBzb3VyY2UuY29uY2F0TWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiBSeC5PYnNlcnZhYmxlLnJhbmdlKDAsIHgpOyB9KTtcbiAgICogIE9yOlxuICAgKiAgUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgaW52b2tlcyB0aGUgcmVzdWx0IHNlbGVjdG9yIGZvciB0aGUgc291cmNlIGVsZW1lbnQgYW5kIGVhY2ggb2YgdGhlIGNvcnJlc3BvbmRpbmcgaW5uZXIgc2VxdWVuY2UncyBlbGVtZW50cywgYW5kIG1lcmdlcyB0aGUgcmVzdWx0cyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKlxuICAgKiAgdmFyIHJlcyA9IHNvdXJjZS5jb25jYXRNYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFJ4Lk9ic2VydmFibGUucmFuZ2UoMCwgeCk7IH0sIGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ICsgeTsgfSk7XG4gICAqICBPcjpcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiB0aGUgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2UgdG8gdGhlIG90aGVyIG9ic2VydmFibGUgc2VxdWVuY2UgYW5kIG1lcmdlcyB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqXG4gICAqICB2YXIgcmVzID0gc291cmNlLmNvbmNhdE1hcChSeC5PYnNlcnZhYmxlLmZyb21BcnJheShbMSwyLDNdKSk7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggZWxlbWVudCBvciBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIHByb2plY3QgZWFjaCBlbGVtZW50IGZyb20gdGhlXG4gICAqIHNvdXJjZSBzZXF1ZW5jZSBvbnRvIHdoaWNoIGNvdWxkIGJlIGVpdGhlciBhbiBvYnNlcnZhYmxlIG9yIFByb21pc2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtyZXN1bHRTZWxlY3Rvcl0gIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggZWxlbWVudCBvZiB0aGUgaW50ZXJtZWRpYXRlIHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBlbGVtZW50cyBhcmUgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgb25lLXRvLW1hbnkgdHJhbnNmb3JtIGZ1bmN0aW9uIGNvbGxlY3Rpb25TZWxlY3RvciBvbiBlYWNoIGVsZW1lbnQgb2YgdGhlIGlucHV0IHNlcXVlbmNlIGFuZCB0aGVuIG1hcHBpbmcgZWFjaCBvZiB0aG9zZSBzZXF1ZW5jZSBlbGVtZW50cyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBzb3VyY2UgZWxlbWVudCB0byBhIHJlc3VsdCBlbGVtZW50LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNlbGVjdENvbmNhdCA9IG9ic2VydmFibGVQcm90by5jb25jYXRNYXAgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oc2VsZWN0b3IpICYmIGlzRnVuY3Rpb24ocmVzdWx0U2VsZWN0b3IpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25jYXRNYXAoZnVuY3Rpb24gKHgsIGkpIHtcbiAgICAgICAgdmFyIHNlbGVjdG9yUmVzdWx0ID0gc2VsZWN0b3IoeCwgaSk7XG4gICAgICAgIGlzUHJvbWlzZShzZWxlY3RvclJlc3VsdCkgJiYgKHNlbGVjdG9yUmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHNlbGVjdG9yUmVzdWx0KSk7XG4gICAgICAgIChpc0FycmF5TGlrZShzZWxlY3RvclJlc3VsdCkgfHwgaXNJdGVyYWJsZShzZWxlY3RvclJlc3VsdCkpICYmIChzZWxlY3RvclJlc3VsdCA9IG9ic2VydmFibGVGcm9tKHNlbGVjdG9yUmVzdWx0KSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGVjdG9yUmVzdWx0Lm1hcChmdW5jdGlvbiAoeSwgaTIpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0U2VsZWN0b3IoeCwgeSwgaSwgaTIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gaXNGdW5jdGlvbihzZWxlY3RvcikgP1xuICAgICAgY29uY2F0TWFwKHRoaXMsIHNlbGVjdG9yLCB0aGlzQXJnKSA6XG4gICAgICBjb25jYXRNYXAodGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZWN0b3I7IH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcm9qZWN0cyBlYWNoIG5vdGlmaWNhdGlvbiBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYW5kIGNvbmNhdHMgdGhlIHJlc3VsdGluZyBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbk5leHQgQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBlbGVtZW50OyB0aGUgc2Vjb25kIHBhcmFtZXRlciBvZiB0aGUgZnVuY3Rpb24gcmVwcmVzZW50cyB0aGUgaW5kZXggb2YgdGhlIHNvdXJjZSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkVycm9yIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHdoZW4gYW4gZXJyb3Igb2NjdXJzIGluIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uQ29tcGxldGVkIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHdoZW4gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlIGlzIHJlYWNoZWQuXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gQW4gb3B0aW9uYWwgXCJ0aGlzXCIgdG8gdXNlIHRvIGludm9rZSBlYWNoIHRyYW5zZm9ybS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2UgZWxlbWVudHMgYXJlIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIG9uZS10by1tYW55IHRyYW5zZm9ybSBmdW5jdGlvbiBjb3JyZXNwb25kaW5nIHRvIGVhY2ggbm90aWZpY2F0aW9uIGluIHRoZSBpbnB1dCBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5jb25jYXRNYXBPYnNlcnZlciA9IG9ic2VydmFibGVQcm90by5zZWxlY3RDb25jYXRPYnNlcnZlciA9IGZ1bmN0aW9uKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQsIHRoaXNBcmcpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcyxcbiAgICAgICAgb25OZXh0RnVuYyA9IGJpbmRDYWxsYmFjayhvbk5leHQsIHRoaXNBcmcsIDIpLFxuICAgICAgICBvbkVycm9yRnVuYyA9IGJpbmRDYWxsYmFjayhvbkVycm9yLCB0aGlzQXJnLCAxKSxcbiAgICAgICAgb25Db21wbGV0ZWRGdW5jID0gYmluZENhbGxiYWNrKG9uQ29tcGxldGVkLCB0aGlzQXJnLCAwKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gb25OZXh0RnVuYyh4LCBpbmRleCsrKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gb25FcnJvckZ1bmMoZXJyKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBvbkNvbXBsZXRlZEZ1bmMoKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0pO1xuICAgIH0sIHRoaXMpLmNvbmNhdEFsbCgpO1xuICB9O1xuXG4gIHZhciBEZWZhdWx0SWZFbXB0eU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEZWZhdWx0SWZFbXB0eU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERlZmF1bHRJZkVtcHR5T2JzZXJ2ZXIobywgZCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9kID0gZDtcbiAgICAgIHRoaXMuX2YgPSBmYWxzZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERlZmF1bHRJZkVtcHR5T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fZiA9IHRydWU7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICB9O1xuXG4gICAgRGVmYXVsdElmRW1wdHlPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBEZWZhdWx0SWZFbXB0eU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAhdGhpcy5fZiAmJiB0aGlzLl9vLm9uTmV4dCh0aGlzLl9kKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIERlZmF1bHRJZkVtcHR5T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyB0aGUgZWxlbWVudHMgb2YgdGhlIHNwZWNpZmllZCBzZXF1ZW5jZSBvciB0aGUgc3BlY2lmaWVkIHZhbHVlIGluIGEgc2luZ2xldG9uIHNlcXVlbmNlIGlmIHRoZSBzZXF1ZW5jZSBpcyBlbXB0eS5cbiAgICpcbiAgICogIHZhciByZXMgPSBvYnMgPSB4cy5kZWZhdWx0SWZFbXB0eSgpO1xuICAgKiAgMiAtIG9icyA9IHhzLmRlZmF1bHRJZkVtcHR5KGZhbHNlKTtcbiAgICpcbiAgICogQG1lbWJlck9mIE9ic2VydmFibGUjXG4gICAqIEBwYXJhbSBkZWZhdWx0VmFsdWUgVGhlIHZhbHVlIHRvIHJldHVybiBpZiB0aGUgc2VxdWVuY2UgaXMgZW1wdHkuIElmIG5vdCBwcm92aWRlZCwgdGhpcyBkZWZhdWx0cyB0byBudWxsLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgZGVmYXVsdCB2YWx1ZSBpZiB0aGUgc291cmNlIGlzIGVtcHR5OyBvdGhlcndpc2UsIHRoZSBlbGVtZW50cyBvZiB0aGUgc291cmNlIGl0c2VsZi5cbiAgICovXG4gICAgb2JzZXJ2YWJsZVByb3RvLmRlZmF1bHRJZkVtcHR5ID0gZnVuY3Rpb24gKGRlZmF1bHRWYWx1ZSkge1xuICAgICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgICBkZWZhdWx0VmFsdWUgPT09IHVuZGVmaW5lZCAmJiAoZGVmYXVsdFZhbHVlID0gbnVsbCk7XG4gICAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IERlZmF1bHRJZkVtcHR5T2JzZXJ2ZXIobywgZGVmYXVsdFZhbHVlKSk7XG4gICAgICB9LCBzb3VyY2UpO1xuICAgIH07XG5cbiAgLy8gU3dhcCBvdXQgZm9yIEFycmF5LmZpbmRJbmRleFxuICBmdW5jdGlvbiBhcnJheUluZGV4T2ZDb21wYXJlcihhcnJheSwgaXRlbSwgY29tcGFyZXIpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmIChjb21wYXJlcihhcnJheVtpXSwgaXRlbSkpIHsgcmV0dXJuIGk7IH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgZnVuY3Rpb24gSGFzaFNldChjb21wYXJlcikge1xuICAgIHRoaXMuY29tcGFyZXIgPSBjb21wYXJlcjtcbiAgICB0aGlzLnNldCA9IFtdO1xuICB9XG4gIEhhc2hTZXQucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciByZXRWYWx1ZSA9IGFycmF5SW5kZXhPZkNvbXBhcmVyKHRoaXMuc2V0LCB2YWx1ZSwgdGhpcy5jb21wYXJlcikgPT09IC0xO1xuICAgIHJldFZhbHVlICYmIHRoaXMuc2V0LnB1c2godmFsdWUpO1xuICAgIHJldHVybiByZXRWYWx1ZTtcbiAgfTtcblxuICB2YXIgRGlzdGluY3RPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEaXN0aW5jdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGlzdGluY3RPYnNlcnZhYmxlKHNvdXJjZSwga2V5Rm4sIGNtcEZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2tleUZuID0ga2V5Rm47XG4gICAgICB0aGlzLl9jbXBGbiA9IGNtcEZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRGlzdGluY3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IERpc3RpbmN0T2JzZXJ2ZXIobywgdGhpcy5fa2V5Rm4sIHRoaXMuX2NtcEZuKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBEaXN0aW5jdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRGlzdGluY3RPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGlzdGluY3RPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEaXN0aW5jdE9ic2VydmVyKG8sIGtleUZuLCBjbXBGbikge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9rZXlGbiA9IGtleUZuO1xuICAgICAgdGhpcy5faCA9IG5ldyBIYXNoU2V0KGNtcEZuKTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERpc3RpbmN0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIGtleSA9IHg7XG4gICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLl9rZXlGbikpIHtcbiAgICAgICAga2V5ID0gdHJ5Q2F0Y2godGhpcy5fa2V5Rm4pKHgpO1xuICAgICAgICBpZiAoa2V5ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKGtleS5lKTsgfVxuICAgICAgfVxuICAgICAgdGhpcy5faC5wdXNoKGtleSkgJiYgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgfTtcblxuICAgIERpc3RpbmN0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIERpc3RpbmN0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIERpc3RpbmN0T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgb25seSBkaXN0aW5jdCBlbGVtZW50cyBhY2NvcmRpbmcgdG8gdGhlIGtleVNlbGVjdG9yIGFuZCB0aGUgY29tcGFyZXIuXG4gICAqICBVc2FnZSBvZiB0aGlzIG9wZXJhdG9yIHNob3VsZCBiZSBjb25zaWRlcmVkIGNhcmVmdWxseSBkdWUgdG8gdGhlIG1haW50ZW5hbmNlIG9mIGFuIGludGVybmFsIGxvb2t1cCBzdHJ1Y3R1cmUgd2hpY2ggY2FuIGdyb3cgbGFyZ2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gb2JzID0geHMuZGlzdGluY3QoKTtcbiAgICogIDIgLSBvYnMgPSB4cy5kaXN0aW5jdChmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZDsgfSk7XG4gICAqICAyIC0gb2JzID0geHMuZGlzdGluY3QoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQ7IH0sIGZ1bmN0aW9uIChhLGIpIHsgcmV0dXJuIGEgPT09IGI7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBba2V5U2VsZWN0b3JdICBBIGZ1bmN0aW9uIHRvIGNvbXB1dGUgdGhlIGNvbXBhcmlzb24ga2V5IGZvciBlYWNoIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJlcl0gIFVzZWQgdG8gY29tcGFyZSBpdGVtcyBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb25seSBjb250YWluaW5nIHRoZSBkaXN0aW5jdCBlbGVtZW50cywgYmFzZWQgb24gYSBjb21wdXRlZCBrZXkgdmFsdWUsIGZyb20gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5kaXN0aW5jdCA9IGZ1bmN0aW9uIChrZXlTZWxlY3RvciwgY29tcGFyZXIpIHtcbiAgICBjb21wYXJlciB8fCAoY29tcGFyZXIgPSBkZWZhdWx0Q29tcGFyZXIpO1xuICAgIHJldHVybiBuZXcgRGlzdGluY3RPYnNlcnZhYmxlKHRoaXMsIGtleVNlbGVjdG9yLCBjb21wYXJlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqICBHcm91cHMgdGhlIGVsZW1lbnRzIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYWNjb3JkaW5nIHRvIGEgc3BlY2lmaWVkIGtleSBzZWxlY3RvciBmdW5jdGlvbiBhbmQgY29tcGFyZXIgYW5kIHNlbGVjdHMgdGhlIHJlc3VsdGluZyBlbGVtZW50cyBieSB1c2luZyBhIHNwZWNpZmllZCBmdW5jdGlvbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSBvYnNlcnZhYmxlLmdyb3VwQnkoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQ7IH0pO1xuICAgKiAgMiAtIG9ic2VydmFibGUuZ3JvdXBCeShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZDsgfSksIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Lm5hbWU7IH0pO1xuICAgKiAgMyAtIG9ic2VydmFibGUuZ3JvdXBCeShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZDsgfSksIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Lm5hbWU7IH0sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnRvU3RyaW5nKCk7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlTZWxlY3RvciBBIGZ1bmN0aW9uIHRvIGV4dHJhY3QgdGhlIGtleSBmb3IgZWFjaCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZWxlbWVudFNlbGVjdG9yXSAgQSBmdW5jdGlvbiB0byBtYXAgZWFjaCBzb3VyY2UgZWxlbWVudCB0byBhbiBlbGVtZW50IGluIGFuIG9ic2VydmFibGUgZ3JvdXAuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBIHNlcXVlbmNlIG9mIG9ic2VydmFibGUgZ3JvdXBzLCBlYWNoIG9mIHdoaWNoIGNvcnJlc3BvbmRzIHRvIGEgdW5pcXVlIGtleSB2YWx1ZSwgY29udGFpbmluZyBhbGwgZWxlbWVudHMgdGhhdCBzaGFyZSB0aGF0IHNhbWUga2V5IHZhbHVlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmdyb3VwQnkgPSBmdW5jdGlvbiAoa2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmdyb3VwQnlVbnRpbChrZXlTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yLCBvYnNlcnZhYmxlTmV2ZXIpO1xuICB9O1xuXG4gICAgLyoqXG4gICAgICogIEdyb3VwcyB0aGUgZWxlbWVudHMgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhY2NvcmRpbmcgdG8gYSBzcGVjaWZpZWQga2V5IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgICAqICBBIGR1cmF0aW9uIHNlbGVjdG9yIGZ1bmN0aW9uIGlzIHVzZWQgdG8gY29udHJvbCB0aGUgbGlmZXRpbWUgb2YgZ3JvdXBzLiBXaGVuIGEgZ3JvdXAgZXhwaXJlcywgaXQgcmVjZWl2ZXMgYW4gT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uLiBXaGVuIGEgbmV3IGVsZW1lbnQgd2l0aCB0aGUgc2FtZVxuICAgICAqICBrZXkgdmFsdWUgYXMgYSByZWNsYWltZWQgZ3JvdXAgb2NjdXJzLCB0aGUgZ3JvdXAgd2lsbCBiZSByZWJvcm4gd2l0aCBhIG5ldyBsaWZldGltZSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgdmFyIHJlcyA9IG9ic2VydmFibGUuZ3JvdXBCeVVudGlsKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkOyB9LCBudWxsLCAgZnVuY3Rpb24gKCkgeyByZXR1cm4gUnguT2JzZXJ2YWJsZS5uZXZlcigpOyB9KTtcbiAgICAgKiAgMiAtIG9ic2VydmFibGUuZ3JvdXBCeShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZDsgfSksIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Lm5hbWU7IH0sICBmdW5jdGlvbiAoKSB7IHJldHVybiBSeC5PYnNlcnZhYmxlLm5ldmVyKCk7IH0pO1xuICAgICAqICAzIC0gb2JzZXJ2YWJsZS5ncm91cEJ5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkOyB9KSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgubmFtZTsgfSwgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFJ4Lk9ic2VydmFibGUubmV2ZXIoKTsgfSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudG9TdHJpbmcoKTsgfSk7XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5U2VsZWN0b3IgQSBmdW5jdGlvbiB0byBleHRyYWN0IHRoZSBrZXkgZm9yIGVhY2ggZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb24gdG8gc2lnbmFsIHRoZSBleHBpcmF0aW9uIG9mIGEgZ3JvdXAuXG4gICAgICogQHJldHVybnMge09ic2VydmFibGV9XG4gICAgICogIEEgc2VxdWVuY2Ugb2Ygb2JzZXJ2YWJsZSBncm91cHMsIGVhY2ggb2Ygd2hpY2ggY29ycmVzcG9uZHMgdG8gYSB1bmlxdWUga2V5IHZhbHVlLCBjb250YWluaW5nIGFsbCBlbGVtZW50cyB0aGF0IHNoYXJlIHRoYXQgc2FtZSBrZXkgdmFsdWUuXG4gICAgICogIElmIGEgZ3JvdXAncyBsaWZldGltZSBleHBpcmVzLCBhIG5ldyBncm91cCB3aXRoIHRoZSBzYW1lIGtleSB2YWx1ZSBjYW4gYmUgY3JlYXRlZCBvbmNlIGFuIGVsZW1lbnQgd2l0aCBzdWNoIGEga2V5IHZhbHVlIGlzIGVuY291dGVyZWQuXG4gICAgICpcbiAgICAgKi9cbiAgICBvYnNlcnZhYmxlUHJvdG8uZ3JvdXBCeVVudGlsID0gZnVuY3Rpb24gKGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHZhciBtYXAgPSBuZXcgTWFwKCksXG4gICAgICAgICAgZ3JvdXBEaXNwb3NhYmxlID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKSxcbiAgICAgICAgICByZWZDb3VudERpc3Bvc2FibGUgPSBuZXcgUmVmQ291bnREaXNwb3NhYmxlKGdyb3VwRGlzcG9zYWJsZSksXG4gICAgICAgICAgaGFuZGxlRXJyb3IgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZnVuY3Rpb24gKGl0ZW0pIHsgaXRlbS5vbkVycm9yKGUpOyB9OyB9O1xuXG4gICAgICAgIGdyb3VwRGlzcG9zYWJsZS5hZGQoXG4gICAgICAgICAgc291cmNlLnN1YnNjcmliZShmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IHRyeUNhdGNoKGtleVNlbGVjdG9yKSh4KTtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgIG1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGtleS5lKSk7XG4gICAgICAgICAgICAgIHJldHVybiBvLm9uRXJyb3Ioa2V5LmUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZmlyZU5ld01hcEVudHJ5ID0gZmFsc2UsIHdyaXRlciA9IG1hcC5nZXQoa2V5KTtcbiAgICAgICAgICAgIGlmICh3cml0ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICB3cml0ZXIgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAgICAgICBtYXAuc2V0KGtleSwgd3JpdGVyKTtcbiAgICAgICAgICAgICAgZmlyZU5ld01hcEVudHJ5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZpcmVOZXdNYXBFbnRyeSkge1xuICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBuZXcgR3JvdXBlZE9ic2VydmFibGUoa2V5LCB3cml0ZXIsIHJlZkNvdW50RGlzcG9zYWJsZSksXG4gICAgICAgICAgICAgICAgZHVyYXRpb25Hcm91cCA9IG5ldyBHcm91cGVkT2JzZXJ2YWJsZShrZXksIHdyaXRlcik7XG4gICAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRyeUNhdGNoKGR1cmF0aW9uU2VsZWN0b3IpKGR1cmF0aW9uR3JvdXApO1xuICAgICAgICAgICAgICBpZiAoZHVyYXRpb24gPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgbWFwLmZvckVhY2goaGFuZGxlRXJyb3IoZHVyYXRpb24uZSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvLm9uRXJyb3IoZHVyYXRpb24uZSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBvLm9uTmV4dChncm91cCk7XG5cbiAgICAgICAgICAgICAgdmFyIG1kID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgICAgICAgIGdyb3VwRGlzcG9zYWJsZS5hZGQobWQpO1xuXG4gICAgICAgICAgICAgIG1kLnNldERpc3Bvc2FibGUoZHVyYXRpb24udGFrZSgxKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgbm9vcCxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgbWFwLmZvckVhY2goaGFuZGxlRXJyb3IoZSkpO1xuICAgICAgICAgICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgaWYgKG1hcFsnZGVsZXRlJ10oa2V5KSkgeyB3cml0ZXIub25Db21wbGV0ZWQoKTsgfVxuICAgICAgICAgICAgICAgICAgZ3JvdXBEaXNwb3NhYmxlLnJlbW92ZShtZCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHg7XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihlbGVtZW50U2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgIGVsZW1lbnQgPSB0cnlDYXRjaChlbGVtZW50U2VsZWN0b3IpKHgpO1xuICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgICAgICBtYXAuZm9yRWFjaChoYW5kbGVFcnJvcihlbGVtZW50LmUpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gby5vbkVycm9yKGVsZW1lbnQuZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd3JpdGVyLm9uTmV4dChlbGVtZW50KTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBtYXAuZm9yRWFjaChoYW5kbGVFcnJvcihlKSk7XG4gICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgbWFwLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsgaXRlbS5vbkNvbXBsZXRlZCgpOyB9KTtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIHJlZkNvdW50RGlzcG9zYWJsZTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG4gIHZhciBNYXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNYXBPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gTWFwT2JzZXJ2YWJsZShzb3VyY2UsIHNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuc2VsZWN0b3IgPSBiaW5kQ2FsbGJhY2soc2VsZWN0b3IsIHRoaXNBcmcsIDMpO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5uZXJNYXAoc2VsZWN0b3IsIHNlbGYpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoeCwgaSwgbykgeyByZXR1cm4gc2VsZWN0b3IuY2FsbCh0aGlzLCBzZWxmLnNlbGVjdG9yKHgsIGksIG8pLCBpLCBvKTsgfTtcbiAgICB9XG5cbiAgICBNYXBPYnNlcnZhYmxlLnByb3RvdHlwZS5pbnRlcm5hbE1hcCA9IGZ1bmN0aW9uIChzZWxlY3RvciwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIG5ldyBNYXBPYnNlcnZhYmxlKHRoaXMuc291cmNlLCBpbm5lck1hcChzZWxlY3RvciwgdGhpcyksIHRoaXNBcmcpO1xuICAgIH07XG5cbiAgICBNYXBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobywgdGhpcy5zZWxlY3RvciwgdGhpcykpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKG8sIHNlbGVjdG9yLCBzb3VyY2UpIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuaSA9IDA7XG4gICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLnNlbGVjdG9yKSh4LCB0aGlzLmkrKywgdGhpcy5zb3VyY2UpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgdGhpcy5vLm9uTmV4dChyZXN1bHQpO1xuICAgIH07XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLm8ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBNYXBPYnNlcnZhYmxlO1xuXG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgKiBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIGEgbmV3IGZvcm0gYnkgaW5jb3Jwb3JhdGluZyB0aGUgZWxlbWVudCdzIGluZGV4LlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggc291cmNlIGVsZW1lbnQ7IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG4gICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2UgZWxlbWVudHMgYXJlIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIHRyYW5zZm9ybSBmdW5jdGlvbiBvbiBlYWNoIGVsZW1lbnQgb2Ygc291cmNlLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubWFwID0gb2JzZXJ2YWJsZVByb3RvLnNlbGVjdCA9IGZ1bmN0aW9uIChzZWxlY3RvciwgdGhpc0FyZykge1xuICAgIHZhciBzZWxlY3RvckZuID0gdHlwZW9mIHNlbGVjdG9yID09PSAnZnVuY3Rpb24nID8gc2VsZWN0b3IgOiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxlY3RvcjsgfTtcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIE1hcE9ic2VydmFibGUgP1xuICAgICAgdGhpcy5pbnRlcm5hbE1hcChzZWxlY3RvckZuLCB0aGlzQXJnKSA6XG4gICAgICBuZXcgTWFwT2JzZXJ2YWJsZSh0aGlzLCBzZWxlY3RvckZuLCB0aGlzQXJnKTtcbiAgfTtcblxuICBmdW5jdGlvbiBwbHVja2VyKGFyZ3MsIGxlbikge1xuICAgIHJldHVybiBmdW5jdGlvbiBtYXBwZXIoeCkge1xuICAgICAgdmFyIGN1cnJlbnRQcm9wID0geDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIHAgPSBjdXJyZW50UHJvcFthcmdzW2ldXTtcbiAgICAgICAgaWYgKHR5cGVvZiBwICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGN1cnJlbnRQcm9wID0gcDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VycmVudFByb3A7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIHZhbHVlIG9mIGEgc3BlY2lmaWVkIG5lc3RlZCBwcm9wZXJ0eSBmcm9tIGFsbCBlbGVtZW50cyBpblxuICAgKiB0aGUgT2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtBcmd1bWVudHN9IGFyZ3VtZW50cyBUaGUgbmVzdGVkIHByb3BlcnRpZXMgdG8gcGx1Y2suXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBSZXR1cm5zIGEgbmV3IE9ic2VydmFibGUgc2VxdWVuY2Ugb2YgcHJvcGVydHkgdmFsdWVzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnBsdWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgaWYgKGxlbiA9PT0gMCkgeyB0aHJvdyBuZXcgRXJyb3IoJ0xpc3Qgb2YgcHJvcGVydGllcyBjYW5ub3QgYmUgZW1wdHkuJyk7IH1cbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIHJldHVybiB0aGlzLm1hcChwbHVja2VyKGFyZ3MsIGxlbikpO1xuICB9O1xuXG5vYnNlcnZhYmxlUHJvdG8uZmxhdE1hcCA9IG9ic2VydmFibGVQcm90by5zZWxlY3RNYW55ID0gZnVuY3Rpb24oc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG5ldyBGbGF0TWFwT2JzZXJ2YWJsZSh0aGlzLCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpLm1lcmdlQWxsKCk7XG59O1xuXG4gIC8qKlxuICAgKiBQcm9qZWN0cyBlYWNoIG5vdGlmaWNhdGlvbiBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYW5kIG1lcmdlcyB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uTmV4dCBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGVsZW1lbnQ7IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uRXJyb3IgQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgd2hlbiBhbiBlcnJvciBvY2N1cnMgaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25Db21wbGV0ZWQgQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgd2hlbiB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UgaXMgcmVhY2hlZC5cbiAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBBbiBvcHRpb25hbCBcInRoaXNcIiB0byB1c2UgdG8gaW52b2tlIGVhY2ggdHJhbnNmb3JtLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBlbGVtZW50cyBhcmUgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgb25lLXRvLW1hbnkgdHJhbnNmb3JtIGZ1bmN0aW9uIGNvcnJlc3BvbmRpbmcgdG8gZWFjaCBub3RpZmljYXRpb24gaW4gdGhlIGlucHV0IHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmZsYXRNYXBPYnNlcnZlciA9IG9ic2VydmFibGVQcm90by5zZWxlY3RNYW55T2JzZXJ2ZXIgPSBmdW5jdGlvbiAob25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCwgdGhpc0FyZykge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBpbmRleCA9IDA7XG5cbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IG9uTmV4dC5jYWxsKHRoaXNBcmcsIHgsIGluZGV4KyspO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KHJlc3VsdCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBvbkVycm9yLmNhbGwodGhpc0FyZywgZXJyKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBvbkNvbXBsZXRlZC5jYWxsKHRoaXNBcmcpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KHJlc3VsdCk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSk7XG4gICAgfSwgc291cmNlKS5tZXJnZUFsbCgpO1xuICB9O1xuXG5SeC5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwTGF0ZXN0ID0gZnVuY3Rpb24oc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG5ldyBGbGF0TWFwT2JzZXJ2YWJsZSh0aGlzLCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpLnN3aXRjaExhdGVzdCgpO1xufTtcbiAgdmFyIFNraXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNraXBPYnNlcnZhYmxlKHNvdXJjZSwgY291bnQpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fY291bnQgPSBjb3VudDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNraXBPYnNlcnZlcihvLCB0aGlzLl9jb3VudCkpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBTa2lwT2JzZXJ2ZXIobywgYykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9yID0gYztcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhTa2lwT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuXG4gICAgU2tpcE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9yIDw9IDApIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9yLS07XG4gICAgICB9XG4gICAgfTtcbiAgICBTa2lwT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24oZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgU2tpcE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbigpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFNraXBPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqIEJ5cGFzc2VzIGEgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cyBpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFuZCB0aGVuIHJldHVybnMgdGhlIHJlbWFpbmluZyBlbGVtZW50cy5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBiZWZvcmUgcmV0dXJuaW5nIHRoZSByZW1haW5pbmcgZWxlbWVudHMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIHRoYXQgb2NjdXIgYWZ0ZXIgdGhlIHNwZWNpZmllZCBpbmRleCBpbiB0aGUgaW5wdXQgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2tpcCA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAgIGlmIChjb3VudCA8IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICByZXR1cm4gbmV3IFNraXBPYnNlcnZhYmxlKHRoaXMsIGNvdW50KTtcbiAgfTtcblxuICB2YXIgU2tpcFdoaWxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcFdoaWxlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTa2lwV2hpbGVPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBXaGlsZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2tpcFdoaWxlT2JzZXJ2ZXIobywgdGhpcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcFdoaWxlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTa2lwV2hpbGVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcFdoaWxlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBTa2lwV2hpbGVPYnNlcnZlcihvLCBwKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICB0aGlzLl9yID0gZmFsc2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwV2hpbGVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAoIXRoaXMuX3IpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX3AuX2ZuKSh4LCB0aGlzLl9pKyssIHRoaXMuX3ApO1xuICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuICAgICAgICB0aGlzLl9yID0gIXJlcztcbiAgICAgIH1cbiAgICAgIHRoaXMuX3IgJiYgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgfTtcbiAgICBTa2lwV2hpbGVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgU2tpcFdoaWxlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFNraXBXaGlsZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIEJ5cGFzc2VzIGVsZW1lbnRzIGluIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYXMgbG9uZyBhcyBhIHNwZWNpZmllZCBjb25kaXRpb24gaXMgdHJ1ZSBhbmQgdGhlbiByZXR1cm5zIHRoZSByZW1haW5pbmcgZWxlbWVudHMuXG4gICAqICBUaGUgZWxlbWVudCdzIGluZGV4IGlzIHVzZWQgaW4gdGhlIGxvZ2ljIG9mIHRoZSBwcmVkaWNhdGUgZnVuY3Rpb24uXG4gICAqXG4gICAqICB2YXIgcmVzID0gc291cmNlLnNraXBXaGlsZShmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlIDwgMTA7IH0pO1xuICAgKiAgdmFyIHJlcyA9IHNvdXJjZS5za2lwV2hpbGUoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgeyByZXR1cm4gdmFsdWUgPCAxMCB8fCBpbmRleCA8IDEwOyB9KTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIEEgZnVuY3Rpb24gdG8gdGVzdCBlYWNoIGVsZW1lbnQgZm9yIGEgY29uZGl0aW9uOyB0aGUgc2Vjb25kIHBhcmFtZXRlciBvZiB0aGUgZnVuY3Rpb24gcmVwcmVzZW50cyB0aGUgaW5kZXggb2YgdGhlIHNvdXJjZSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgZnJvbSB0aGUgaW5wdXQgc2VxdWVuY2Ugc3RhcnRpbmcgYXQgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIGxpbmVhciBzZXJpZXMgdGhhdCBkb2VzIG5vdCBwYXNzIHRoZSB0ZXN0IHNwZWNpZmllZCBieSBwcmVkaWNhdGUuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2tpcFdoaWxlID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHZhciBmbiA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBuZXcgU2tpcFdoaWxlT2JzZXJ2YWJsZSh0aGlzLCBmbik7XG4gIH07XG5cbiAgdmFyIFRha2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRha2VPYnNlcnZhYmxlKHNvdXJjZSwgY291bnQpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fY291bnQgPSBjb3VudDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRha2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFRha2VPYnNlcnZlcihvLCB0aGlzLl9jb3VudCkpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBUYWtlT2JzZXJ2ZXIobywgYykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9jID0gYztcbiAgICAgIHRoaXMuX3IgPSBjO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKFRha2VPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG5cbiAgICBUYWtlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX3ItLSA+IDApIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgICAgIHRoaXMuX3IgPD0gMCAmJiB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFRha2VPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgVGFrZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBUYWtlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhIHNwZWNpZmllZCBudW1iZXIgb2YgY29udGlndW91cyBlbGVtZW50cyBmcm9tIHRoZSBzdGFydCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciBmb3IgdGhlIGVkZ2UgY2FzZSBvZiB0YWtlKDApLlxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byByZXR1cm4uXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdXNlZCB0byBwcm9kdWNlIGFuIE9uQ29tcGxldGVkIG1lc3NhZ2UgaW4gY2FzZSA8cGFyYW1yZWYgbmFtZT1cImNvdW50IGNvdW50PC9wYXJhbXJlZj4gaXMgc2V0IHRvIDAuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgZWxlbWVudHMgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIGlucHV0IHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRha2UgPSBmdW5jdGlvbiAoY291bnQsIHNjaGVkdWxlcikge1xuICAgIGlmIChjb3VudCA8IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICBpZiAoY291bnQgPT09IDApIHsgcmV0dXJuIG9ic2VydmFibGVFbXB0eShzY2hlZHVsZXIpOyB9XG4gICAgcmV0dXJuIG5ldyBUYWtlT2JzZXJ2YWJsZSh0aGlzLCBjb3VudCk7XG4gIH07XG5cbiAgdmFyIFRha2VXaGlsZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VXaGlsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGFrZVdoaWxlT2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUYWtlV2hpbGVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFRha2VXaGlsZU9ic2VydmVyKG8sIHRoaXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRha2VXaGlsZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgVGFrZVdoaWxlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VXaGlsZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gVGFrZVdoaWxlT2JzZXJ2ZXIobywgcCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgdGhpcy5fciA9IHRydWU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUYWtlV2hpbGVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5fcikge1xuICAgICAgICB0aGlzLl9yID0gdHJ5Q2F0Y2godGhpcy5fcC5fZm4pKHgsIHRoaXMuX2krKywgdGhpcy5fcCk7XG4gICAgICAgIGlmICh0aGlzLl9yID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHRoaXMuX3IuZSk7IH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9yKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgVGFrZVdoaWxlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFRha2VXaGlsZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBUYWtlV2hpbGVPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGVsZW1lbnRzIGZyb20gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhcyBsb25nIGFzIGEgc3BlY2lmaWVkIGNvbmRpdGlvbiBpcyB0cnVlLlxuICAgKiAgVGhlIGVsZW1lbnQncyBpbmRleCBpcyB1c2VkIGluIHRoZSBsb2dpYyBvZiB0aGUgcHJlZGljYXRlIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgQSBmdW5jdGlvbiB0byB0ZXN0IGVhY2ggZWxlbWVudCBmb3IgYSBjb25kaXRpb247IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBmcm9tIHRoZSBpbnB1dCBzZXF1ZW5jZSB0aGF0IG9jY3VyIGJlZm9yZSB0aGUgZWxlbWVudCBhdCB3aGljaCB0aGUgdGVzdCBubyBsb25nZXIgcGFzc2VzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRha2VXaGlsZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICB2YXIgZm4gPSBiaW5kQ2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICByZXR1cm4gbmV3IFRha2VXaGlsZU9ic2VydmFibGUodGhpcywgZm4pO1xuICB9O1xuXG4gIHZhciBGaWx0ZXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGaWx0ZXJPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gRmlsdGVyT2JzZXJ2YWJsZShzb3VyY2UsIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLnByZWRpY2F0ZSA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRmlsdGVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKG8sIHRoaXMucHJlZGljYXRlLCB0aGlzKSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGlubmVyUHJlZGljYXRlKHByZWRpY2F0ZSwgc2VsZikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHgsIGksIG8pIHsgcmV0dXJuIHNlbGYucHJlZGljYXRlKHgsIGksIG8pICYmIHByZWRpY2F0ZS5jYWxsKHRoaXMsIHgsIGksIG8pOyB9XG4gICAgfVxuXG4gICAgRmlsdGVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuaW50ZXJuYWxGaWx0ZXIgPSBmdW5jdGlvbihwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiBuZXcgRmlsdGVyT2JzZXJ2YWJsZSh0aGlzLnNvdXJjZSwgaW5uZXJQcmVkaWNhdGUocHJlZGljYXRlLCB0aGlzKSwgdGhpc0FyZyk7XG4gICAgfTtcblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIobywgcHJlZGljYXRlLCBzb3VyY2UpIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5pID0gMDtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oeCkge1xuICAgICAgdmFyIHNob3VsZFlpZWxkID0gdHJ5Q2F0Y2godGhpcy5wcmVkaWNhdGUpKHgsIHRoaXMuaSsrLCB0aGlzLnNvdXJjZSk7XG4gICAgICBpZiAoc2hvdWxkWWllbGQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm8ub25FcnJvcihzaG91bGRZaWVsZC5lKTtcbiAgICAgIH1cbiAgICAgIHNob3VsZFlpZWxkICYmIHRoaXMuby5vbk5leHQoeCk7XG4gICAgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEZpbHRlck9ic2VydmFibGU7XG5cbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAqICBGaWx0ZXJzIHRoZSBlbGVtZW50cyBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGJhc2VkIG9uIGEgcHJlZGljYXRlIGJ5IGluY29ycG9yYXRpbmcgdGhlIGVsZW1lbnQncyBpbmRleC5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgQSBmdW5jdGlvbiB0byB0ZXN0IGVhY2ggc291cmNlIGVsZW1lbnQgZm9yIGEgY29uZGl0aW9uOyB0aGUgc2Vjb25kIHBhcmFtZXRlciBvZiB0aGUgZnVuY3Rpb24gcmVwcmVzZW50cyB0aGUgaW5kZXggb2YgdGhlIHNvdXJjZSBlbGVtZW50LlxuICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgZWxlbWVudHMgZnJvbSB0aGUgaW5wdXQgc2VxdWVuY2UgdGhhdCBzYXRpc2Z5IHRoZSBjb25kaXRpb24uXG4gICovXG4gIG9ic2VydmFibGVQcm90by5maWx0ZXIgPSBvYnNlcnZhYmxlUHJvdG8ud2hlcmUgPSBmdW5jdGlvbiAocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBGaWx0ZXJPYnNlcnZhYmxlID8gdGhpcy5pbnRlcm5hbEZpbHRlcihwcmVkaWNhdGUsIHRoaXNBcmcpIDpcbiAgICAgIG5ldyBGaWx0ZXJPYnNlcnZhYmxlKHRoaXMsIHByZWRpY2F0ZSwgdGhpc0FyZyk7XG4gIH07XG5cbiAgdmFyIEV4dHJlbWFCeU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEV4dHJlbWFCeU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRXh0cmVtYUJ5T2JzZXJ2YWJsZShzb3VyY2UsIGssIGMpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fayA9IGs7XG4gICAgICB0aGlzLl9jID0gYztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEV4dHJlbWFCeU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgRXh0cmVtYUJ5T2JzZXJ2ZXIobywgdGhpcy5faywgdGhpcy5fYykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRXh0cmVtYUJ5T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBFeHRyZW1hQnlPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRXh0cmVtYUJ5T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRXh0cmVtYUJ5T2JzZXJ2ZXIobywgaywgYykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9rID0gaztcbiAgICAgIHRoaXMuX2MgPSBjO1xuICAgICAgdGhpcy5fdiA9IG51bGw7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5fbCA9IFtdO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRXh0cmVtYUJ5T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIGtleSA9IHRyeUNhdGNoKHRoaXMuX2spKHgpO1xuICAgICAgaWYgKGtleSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihrZXkuZSk7IH1cbiAgICAgIHZhciBjb21wYXJpc29uID0gMDtcbiAgICAgIGlmICghdGhpcy5faHYpIHtcbiAgICAgICAgdGhpcy5faHYgPSB0cnVlO1xuICAgICAgICB0aGlzLl92ID0ga2V5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29tcGFyaXNvbiA9IHRyeUNhdGNoKHRoaXMuX2MpKGtleSwgdGhpcy5fdik7XG4gICAgICAgIGlmIChjb21wYXJpc29uID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKGNvbXBhcmlzb24uZSk7IH1cbiAgICAgIH1cbiAgICAgIGlmIChjb21wYXJpc29uID4gMCkge1xuICAgICAgICB0aGlzLl92ID0ga2V5O1xuICAgICAgICB0aGlzLl9sID0gW107XG4gICAgICB9XG4gICAgICBpZiAoY29tcGFyaXNvbiA+PSAwKSB7IHRoaXMuX2wucHVzaCh4KTsgfVxuICAgIH07XG5cbiAgICBFeHRyZW1hQnlPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBFeHRyZW1hQnlPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fbCk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBFeHRyZW1hQnlPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgZnVuY3Rpb24gZmlyc3RPbmx5KHgpIHtcbiAgICBpZiAoeC5sZW5ndGggPT09IDApIHsgdGhyb3cgbmV3IEVtcHR5RXJyb3IoKTsgfVxuICAgIHJldHVybiB4WzBdO1xuICB9XG5cbiAgdmFyIFJlZHVjZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUmVkdWNlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBSZWR1Y2VPYnNlcnZhYmxlKHNvdXJjZSwgYWNjdW11bGF0b3IsIGhhc1NlZWQsIHNlZWQpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IGFjY3VtdWxhdG9yO1xuICAgICAgdGhpcy5oYXNTZWVkID0gaGFzU2VlZDtcbiAgICAgIHRoaXMuc2VlZCA9IHNlZWQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBSZWR1Y2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24ob2JzZXJ2ZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFJlZHVjZU9ic2VydmVyKG9ic2VydmVyLHRoaXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlZHVjZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgUmVkdWNlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFJlZHVjZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFJlZHVjZU9ic2VydmVyKG8sIHBhcmVudCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gcGFyZW50O1xuICAgICAgdGhpcy5fZm4gPSBwYXJlbnQuYWNjdW11bGF0b3I7XG4gICAgICB0aGlzLl9ocyA9IHBhcmVudC5oYXNTZWVkO1xuICAgICAgdGhpcy5fcyA9IHBhcmVudC5zZWVkO1xuICAgICAgdGhpcy5faGEgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2EgPSBudWxsO1xuICAgICAgdGhpcy5faHYgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgUmVkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgIXRoaXMuX2h2ICYmICh0aGlzLl9odiA9IHRydWUpO1xuICAgICAgaWYgKHRoaXMuX2hhKSB7XG4gICAgICAgIHRoaXMuX2EgPSB0cnlDYXRjaCh0aGlzLl9mbikodGhpcy5fYSwgeCwgdGhpcy5faSwgdGhpcy5fcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9hID0gdGhpcy5faHMgPyB0cnlDYXRjaCh0aGlzLl9mbikodGhpcy5fcywgeCwgdGhpcy5faSwgdGhpcy5fcCkgOiB4O1xuICAgICAgICB0aGlzLl9oYSA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fYSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcih0aGlzLl9hLmUpOyB9XG4gICAgICB0aGlzLl9pKys7XG4gICAgfTtcblxuICAgIFJlZHVjZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFJlZHVjZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9odiAmJiB0aGlzLl9vLm9uTmV4dCh0aGlzLl9hKTtcbiAgICAgICF0aGlzLl9odiAmJiB0aGlzLl9ocyAmJiB0aGlzLl9vLm9uTmV4dCh0aGlzLl9zKTtcbiAgICAgICF0aGlzLl9odiAmJiAhdGhpcy5faHMgJiYgdGhpcy5fby5vbkVycm9yKG5ldyBFbXB0eUVycm9yKCkpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gUmVkdWNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAqIEFwcGxpZXMgYW4gYWNjdW11bGF0b3IgZnVuY3Rpb24gb3ZlciBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLCByZXR1cm5pbmcgdGhlIHJlc3VsdCBvZiB0aGUgYWdncmVnYXRpb24gYXMgYSBzaW5nbGUgZWxlbWVudCBpbiB0aGUgcmVzdWx0IHNlcXVlbmNlLiBUaGUgc3BlY2lmaWVkIHNlZWQgdmFsdWUgaXMgdXNlZCBhcyB0aGUgaW5pdGlhbCBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgKiBGb3IgYWdncmVnYXRpb24gYmVoYXZpb3Igd2l0aCBpbmNyZW1lbnRhbCBpbnRlcm1lZGlhdGUgcmVzdWx0cywgc2VlIE9ic2VydmFibGUuc2Nhbi5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY2N1bXVsYXRvciBBbiBhY2N1bXVsYXRvciBmdW5jdGlvbiB0byBiZSBpbnZva2VkIG9uIGVhY2ggZWxlbWVudC5cbiAgKiBAcGFyYW0ge0FueX0gW3NlZWRdIFRoZSBpbml0aWFsIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgZWxlbWVudCB3aXRoIHRoZSBmaW5hbCBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnJlZHVjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaGFzU2VlZCA9IGZhbHNlLCBzZWVkLCBhY2N1bXVsYXRvciA9IGFyZ3VtZW50c1swXTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgaGFzU2VlZCA9IHRydWU7XG4gICAgICBzZWVkID0gYXJndW1lbnRzWzFdO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlZHVjZU9ic2VydmFibGUodGhpcywgYWNjdW11bGF0b3IsIGhhc1NlZWQsIHNlZWQpO1xuICB9O1xuXG4gIHZhciBTb21lT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU29tZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU29tZU9ic2VydmFibGUoc291cmNlLCBmbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU29tZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU29tZU9ic2VydmVyKG8sIHRoaXMuX2ZuLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU29tZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU29tZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTb21lT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBTb21lT2JzZXJ2ZXIobywgZm4sIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTb21lT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX2ZuKSh4LCB0aGlzLl9pKyssIHRoaXMuX3MpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyZXN1bHQuZSk7IH1cbiAgICAgIGlmIChCb29sZWFuKHJlc3VsdCkpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodHJ1ZSk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFNvbWVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgU29tZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dChmYWxzZSk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBTb21lT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW55IGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBzYXRpc2ZpZXMgYSBjb25kaXRpb24gaWYgcHJlc2VudCwgZWxzZSBpZiBhbnkgaXRlbXMgYXJlIGluIHRoZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRpY2F0ZV0gQSBmdW5jdGlvbiB0byB0ZXN0IGVhY2ggZWxlbWVudCBmb3IgYSBjb25kaXRpb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgZWxlbWVudCBkZXRlcm1pbmluZyB3aGV0aGVyIGFueSBlbGVtZW50cyBpbiB0aGUgc291cmNlIHNlcXVlbmNlIHBhc3MgdGhlIHRlc3QgaW4gdGhlIHNwZWNpZmllZCBwcmVkaWNhdGUgaWYgZ2l2ZW4sIGVsc2UgaWYgYW55IGl0ZW1zIGFyZSBpbiB0aGUgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc29tZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICB2YXIgZm4gPSBiaW5kQ2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICByZXR1cm4gbmV3IFNvbWVPYnNlcnZhYmxlKHRoaXMsIGZuKTtcbiAgfTtcblxuICB2YXIgSXNFbXB0eU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKElzRW1wdHlPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIElzRW1wdHlPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJc0VtcHR5T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJc0VtcHR5T2JzZXJ2ZXIobykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSXNFbXB0eU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgSXNFbXB0eU9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKElzRW1wdHlPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBJc0VtcHR5T2JzZXJ2ZXIobykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJc0VtcHR5T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dChmYWxzZSk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcbiAgICBJc0VtcHR5T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIElzRW1wdHlPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbk5leHQodHJ1ZSk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBJc0VtcHR5T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpcyBlbXB0eS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IGRldGVybWluaW5nIHdoZXRoZXIgdGhlIHNvdXJjZSBzZXF1ZW5jZSBpcyBlbXB0eS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgSXNFbXB0eU9ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbiAgdmFyIEV2ZXJ5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRXZlcnlPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEV2ZXJ5T2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBFdmVyeU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgRXZlcnlPYnNlcnZlcihvLCB0aGlzLl9mbiwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEV2ZXJ5T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBFdmVyeU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFdmVyeU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gRXZlcnlPYnNlcnZlcihvLCBmbiwgcykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEV2ZXJ5T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX2ZuKSh4LCB0aGlzLl9pKyssIHRoaXMuX3MpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyZXN1bHQuZSk7IH1cbiAgICAgIGlmICghQm9vbGVhbihyZXN1bHQpKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KGZhbHNlKTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgRXZlcnlPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgRXZlcnlPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbk5leHQodHJ1ZSk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBFdmVyeU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFsbCBlbGVtZW50cyBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHNhdGlzZnkgYSBjb25kaXRpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkaWNhdGVdIEEgZnVuY3Rpb24gdG8gdGVzdCBlYWNoIGVsZW1lbnQgZm9yIGEgY29uZGl0aW9uLlxuICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IGRldGVybWluaW5nIHdoZXRoZXIgYWxsIGVsZW1lbnRzIGluIHRoZSBzb3VyY2Ugc2VxdWVuY2UgcGFzcyB0aGUgdGVzdCBpbiB0aGUgc3BlY2lmaWVkIHByZWRpY2F0ZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5ldmVyeSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICB2YXIgZm4gPSBiaW5kQ2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICByZXR1cm4gbmV3IEV2ZXJ5T2JzZXJ2YWJsZSh0aGlzLCBmbik7XG4gIH07XG5cbiAgdmFyIEluY2x1ZGVzT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSW5jbHVkZXNPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEluY2x1ZGVzT2JzZXJ2YWJsZShzb3VyY2UsIGVsZW0sIGlkeCkge1xuICAgICAgdmFyIG4gPSAraWR4IHx8IDA7XG4gICAgICBNYXRoLmFicyhuKSA9PT0gSW5maW5pdHkgJiYgKG4gPSAwKTtcblxuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9lbGVtID0gZWxlbTtcbiAgICAgIHRoaXMuX24gPSBuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW5jbHVkZXNPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIGlmICh0aGlzLl9uIDwgMCkge1xuICAgICAgICBvLm9uTmV4dChmYWxzZSk7XG4gICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgSW5jbHVkZXNPYnNlcnZlcihvLCB0aGlzLl9lbGVtLCB0aGlzLl9uKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBJbmNsdWRlc09ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgSW5jbHVkZXNPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSW5jbHVkZXNPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBJbmNsdWRlc09ic2VydmVyKG8sIGVsZW0sIG4pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fZWxlbSA9IGVsZW07XG4gICAgICB0aGlzLl9uID0gbjtcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29tcGFyZXIoYSwgYikge1xuICAgICAgcmV0dXJuIChhID09PSAwICYmIGIgPT09IDApIHx8IChhID09PSBiIHx8IChpc05hTihhKSAmJiBpc05hTihiKSkpO1xuICAgIH1cblxuICAgIEluY2x1ZGVzT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX2krKyA+PSB0aGlzLl9uICYmIGNvbXBhcmVyKHgsIHRoaXMuX2VsZW0pKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRydWUpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBJbmNsdWRlc09ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBJbmNsdWRlc09ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25OZXh0KGZhbHNlKTsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIEluY2x1ZGVzT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbmNsdWRlcyBhIHNwZWNpZmllZCBlbGVtZW50IHdpdGggYW4gb3B0aW9uYWwgZXF1YWxpdHkgY29tcGFyZXIuXG4gICAqIEBwYXJhbSBzZWFyY2hFbGVtZW50IFRoZSB2YWx1ZSB0byBsb2NhdGUgaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtmcm9tSW5kZXhdIEFuIGVxdWFsaXR5IGNvbXBhcmVyIHRvIGNvbXBhcmUgZWxlbWVudHMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgZWxlbWVudCBkZXRlcm1pbmluZyB3aGV0aGVyIHRoZSBzb3VyY2Ugc2VxdWVuY2UgaW5jbHVkZXMgYW4gZWxlbWVudCB0aGF0IGhhcyB0aGUgc3BlY2lmaWVkIHZhbHVlIGZyb20gdGhlIGdpdmVuIGluZGV4LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmluY2x1ZGVzID0gZnVuY3Rpb24gKHNlYXJjaEVsZW1lbnQsIGZyb21JbmRleCkge1xuICAgIHJldHVybiBuZXcgSW5jbHVkZXNPYnNlcnZhYmxlKHRoaXMsIHNlYXJjaEVsZW1lbnQsIGZyb21JbmRleCk7XG4gIH07XG5cbiAgdmFyIENvdW50T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ291bnRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENvdW50T2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDb3VudE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgQ291bnRPYnNlcnZlcihvLCB0aGlzLl9mbiwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvdW50T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBDb3VudE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb3VudE9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gQ291bnRPYnNlcnZlcihvLCBmbiwgcykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIHRoaXMuX2MgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQ291bnRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5fZm4pIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX2ZuKSh4LCB0aGlzLl9pKyssIHRoaXMuX3MpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgICBCb29sZWFuKHJlc3VsdCkgJiYgKHRoaXMuX2MrKyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jKys7XG4gICAgICB9XG4gICAgfTtcbiAgICBDb3VudE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBDb3VudE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9jKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvdW50T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHZhbHVlIHRoYXQgcmVwcmVzZW50cyBob3cgbWFueSBlbGVtZW50cyBpbiB0aGUgc3BlY2lmaWVkIG9ic2VydmFibGUgc2VxdWVuY2Ugc2F0aXNmeSBhIGNvbmRpdGlvbiBpZiBwcm92aWRlZCwgZWxzZSB0aGUgY291bnQgb2YgaXRlbXMuXG4gICAqIEBleGFtcGxlXG4gICAqIHJlcyA9IHNvdXJjZS5jb3VudCgpO1xuICAgKiByZXMgPSBzb3VyY2UuY291bnQoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggPiAzOyB9KTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRpY2F0ZV1BIGZ1bmN0aW9uIHRvIHRlc3QgZWFjaCBlbGVtZW50IGZvciBhIGNvbmRpdGlvbi5cbiAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgZWxlbWVudCB3aXRoIGEgbnVtYmVyIHRoYXQgcmVwcmVzZW50cyBob3cgbWFueSBlbGVtZW50cyBpbiB0aGUgaW5wdXQgc2VxdWVuY2Ugc2F0aXNmeSB0aGUgY29uZGl0aW9uIGluIHRoZSBwcmVkaWNhdGUgZnVuY3Rpb24gaWYgcHJvdmlkZWQsIGVsc2UgdGhlIGNvdW50IG9mIGl0ZW1zIGluIHRoZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5jb3VudCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICB2YXIgZm4gPSBiaW5kQ2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICByZXR1cm4gbmV3IENvdW50T2JzZXJ2YWJsZSh0aGlzLCBmbik7XG4gIH07XG5cbiAgdmFyIEluZGV4T2ZPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhJbmRleE9mT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBJbmRleE9mT2JzZXJ2YWJsZShzb3VyY2UsIGUsIG4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZSA9IGU7XG4gICAgICB0aGlzLl9uID0gbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEluZGV4T2ZPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIGlmICh0aGlzLl9uIDwgMCkge1xuICAgICAgICBvLm9uTmV4dCgtMSk7XG4gICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgSW5kZXhPZk9ic2VydmVyKG8sIHRoaXMuX2UsIHRoaXMuX24pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEluZGV4T2ZPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEluZGV4T2ZPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSW5kZXhPZk9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEluZGV4T2ZPYnNlcnZlcihvLCBlLCBuKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2UgPSBlO1xuICAgICAgdGhpcy5fbiA9IG47XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEluZGV4T2ZPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5faSA+PSB0aGlzLl9uICYmIHggPT09IHRoaXMuX2UpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5faSk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2krKztcbiAgICB9O1xuICAgIEluZGV4T2ZPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgSW5kZXhPZk9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25OZXh0KC0xKTsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIEluZGV4T2ZPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGZpcnN0IGluZGV4IGF0IHdoaWNoIGEgZ2l2ZW4gZWxlbWVudCBjYW4gYmUgZm91bmQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UsIG9yIC0xIGlmIGl0IGlzIG5vdCBwcmVzZW50LlxuICAgKiBAcGFyYW0ge0FueX0gc2VhcmNoRWxlbWVudCBFbGVtZW50IHRvIGxvY2F0ZSBpbiB0aGUgYXJyYXkuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbZnJvbUluZGV4XSBUaGUgaW5kZXggdG8gc3RhcnQgdGhlIHNlYXJjaC4gIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIDAuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbmQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBmaXJzdCBpbmRleCBhdCB3aGljaCBhIGdpdmVuIGVsZW1lbnQgY2FuIGJlIGZvdW5kIGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLCBvciAtMSBpZiBpdCBpcyBub3QgcHJlc2VudC5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5pbmRleE9mID0gZnVuY3Rpb24oc2VhcmNoRWxlbWVudCwgZnJvbUluZGV4KSB7XG4gICAgdmFyIG4gPSArZnJvbUluZGV4IHx8IDA7XG4gICAgTWF0aC5hYnMobikgPT09IEluZmluaXR5ICYmIChuID0gMCk7XG4gICAgcmV0dXJuIG5ldyBJbmRleE9mT2JzZXJ2YWJsZSh0aGlzLCBzZWFyY2hFbGVtZW50LCBuKTtcbiAgfTtcblxuICB2YXIgU3VtT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU3VtT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTdW1PYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFN1bU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU3VtT2JzZXJ2ZXIobywgdGhpcy5fZm4sIHRoaXMuc291cmNlKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBTdW1PYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFN1bU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTdW1PYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFN1bU9ic2VydmVyKG8sIGZuLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgdGhpcy5fYyA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTdW1PYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5fZm4pIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX2ZuKSh4LCB0aGlzLl9pKyssIHRoaXMuX3MpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgICB0aGlzLl9jICs9IHJlc3VsdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2MgKz0geDtcbiAgICAgIH1cbiAgICB9O1xuICAgIFN1bU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTdW1PYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fYyk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBTdW1PYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSBzdW0gb2YgYSBzZXF1ZW5jZSBvZiB2YWx1ZXMgdGhhdCBhcmUgb2J0YWluZWQgYnkgaW52b2tpbmcgYW4gb3B0aW9uYWwgdHJhbnNmb3JtIGZ1bmN0aW9uIG9uIGVhY2ggZWxlbWVudCBvZiB0aGUgaW5wdXQgc2VxdWVuY2UsIGVsc2UgaWYgbm90IHNwZWNpZmllZCBjb21wdXRlcyB0aGUgc3VtIG9uIGVhY2ggaXRlbSBpbiB0aGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IHdpdGggdGhlIHN1bSBvZiB0aGUgdmFsdWVzIGluIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc3VtID0gZnVuY3Rpb24gKGtleVNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgdmFyIGZuID0gYmluZENhbGxiYWNrKGtleVNlbGVjdG9yLCB0aGlzQXJnLCAzKTtcbiAgICByZXR1cm4gbmV3IFN1bU9ic2VydmFibGUodGhpcywgZm4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlbGVtZW50cyBpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIG1pbmltdW0ga2V5IHZhbHVlIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGNvbXBhcmVyLlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzID0gc291cmNlLm1pbkJ5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnZhbHVlOyB9KTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5taW5CeShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC52YWx1ZTsgfSwgZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggLSB5OyB9KTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5U2VsZWN0b3IgS2V5IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY29tcGFyZXJdIENvbXBhcmVyIHVzZWQgdG8gY29tcGFyZSBrZXkgdmFsdWVzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgbGlzdCBvZiB6ZXJvIG9yIG1vcmUgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWluaW11bSBrZXkgdmFsdWUuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubWluQnkgPSBmdW5jdGlvbiAoa2V5U2VsZWN0b3IsIGNvbXBhcmVyKSB7XG4gICAgY29tcGFyZXIgfHwgKGNvbXBhcmVyID0gZGVmYXVsdFN1YkNvbXBhcmVyKTtcbiAgICByZXR1cm4gbmV3IEV4dHJlbWFCeU9ic2VydmFibGUodGhpcywga2V5U2VsZWN0b3IsIGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBjb21wYXJlcih4LCB5KSAqIC0xOyB9KTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbWluaW11bSBlbGVtZW50IGluIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYWNjb3JkaW5nIHRvIHRoZSBvcHRpb25hbCBjb21wYXJlciBlbHNlIGEgZGVmYXVsdCBncmVhdGVyIHRoYW4gbGVzcyB0aGFuIGNoZWNrLlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzID0gc291cmNlLm1pbigpO1xuICAgKiB2YXIgcmVzID0gc291cmNlLm1pbihmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geC52YWx1ZSAtIHkudmFsdWU7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY29tcGFyZXJdIENvbXBhcmVyIHVzZWQgdG8gY29tcGFyZSBlbGVtZW50cy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IHdpdGggdGhlIG1pbmltdW0gZWxlbWVudCBpbiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1pbiA9IGZ1bmN0aW9uIChjb21wYXJlcikge1xuICAgIHJldHVybiB0aGlzLm1pbkJ5KGlkZW50aXR5LCBjb21wYXJlcikubWFwKGZpcnN0T25seSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGVsZW1lbnRzIGluIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgbWF4aW11bSAga2V5IHZhbHVlIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGNvbXBhcmVyLlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzID0gc291cmNlLm1heEJ5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnZhbHVlOyB9KTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5tYXhCeShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC52YWx1ZTsgfSwgZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggLSB5OzsgfSk7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGtleVNlbGVjdG9yIEtleSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NvbXBhcmVyXSAgQ29tcGFyZXIgdXNlZCB0byBjb21wYXJlIGtleSB2YWx1ZXMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBsaXN0IG9mIHplcm8gb3IgbW9yZSBlbGVtZW50cyB0aGF0IGhhdmUgYSBtYXhpbXVtIGtleSB2YWx1ZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5tYXhCeSA9IGZ1bmN0aW9uIChrZXlTZWxlY3RvciwgY29tcGFyZXIpIHtcbiAgICBjb21wYXJlciB8fCAoY29tcGFyZXIgPSBkZWZhdWx0U3ViQ29tcGFyZXIpO1xuICAgIHJldHVybiBuZXcgRXh0cmVtYUJ5T2JzZXJ2YWJsZSh0aGlzLCBrZXlTZWxlY3RvciwgY29tcGFyZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtYXhpbXVtIHZhbHVlIGluIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgY29tcGFyZXIuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBzb3VyY2UubWF4KCk7XG4gICAqIHZhciByZXMgPSBzb3VyY2UubWF4KGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4LnZhbHVlIC0geS52YWx1ZTsgfSk7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJlcl0gQ29tcGFyZXIgdXNlZCB0byBjb21wYXJlIGVsZW1lbnRzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGVsZW1lbnQgd2l0aCB0aGUgbWF4aW11bSBlbGVtZW50IGluIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubWF4ID0gZnVuY3Rpb24gKGNvbXBhcmVyKSB7XG4gICAgcmV0dXJuIHRoaXMubWF4QnkoaWRlbnRpdHksIGNvbXBhcmVyKS5tYXAoZmlyc3RPbmx5KTtcbiAgfTtcblxuICB2YXIgQXZlcmFnZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEF2ZXJhZ2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEF2ZXJhZ2VPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEF2ZXJhZ2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IEF2ZXJhZ2VPYnNlcnZlcihvLCB0aGlzLl9mbiwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEF2ZXJhZ2VPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEF2ZXJhZ2VPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhBdmVyYWdlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQXZlcmFnZU9ic2VydmVyKG8sIGZuLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2MgPSAwO1xuICAgICAgdGhpcy5fdCA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBBdmVyYWdlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYodGhpcy5fZm4pIHtcbiAgICAgICAgdmFyIHIgPSB0cnlDYXRjaCh0aGlzLl9mbikoeCwgdGhpcy5fYysrLCB0aGlzLl9zKTtcbiAgICAgICAgaWYgKHIgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3Ioci5lKTsgfVxuICAgICAgICB0aGlzLl90ICs9IHI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jKys7XG4gICAgICAgIHRoaXMuX3QgKz0geDtcbiAgICAgIH1cbiAgICB9O1xuICAgIEF2ZXJhZ2VPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgQXZlcmFnZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5fYyA9PT0gMCkgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKG5ldyBFbXB0eUVycm9yKCkpOyB9XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl90IC8gdGhpcy5fYyk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBBdmVyYWdlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBDb21wdXRlcyB0aGUgYXZlcmFnZSBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIHZhbHVlcyB0aGF0IGFyZSBpbiB0aGUgc2VxdWVuY2Ugb3Igb2J0YWluZWQgYnkgaW52b2tpbmcgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50IG9mIHRoZSBpbnB1dCBzZXF1ZW5jZSBpZiBwcmVzZW50LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbc2VsZWN0b3JdIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggZWxlbWVudC5cbiAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgZWxlbWVudCB3aXRoIHRoZSBhdmVyYWdlIG9mIHRoZSBzZXF1ZW5jZSBvZiB2YWx1ZXMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uYXZlcmFnZSA9IGZ1bmN0aW9uIChrZXlTZWxlY3RvciwgdGhpc0FyZykge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzLCBmbjtcbiAgICBpZiAoaXNGdW5jdGlvbihrZXlTZWxlY3RvcikpIHtcbiAgICAgIGZuID0gYmluZENhbGxiYWNrKGtleVNlbGVjdG9yLCB0aGlzQXJnLCAzKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBdmVyYWdlT2JzZXJ2YWJsZShzb3VyY2UsIGZuKTtcbiAgfTtcblxuICAvKipcbiAgICogIERldGVybWluZXMgd2hldGhlciB0d28gc2VxdWVuY2VzIGFyZSBlcXVhbCBieSBjb21wYXJpbmcgdGhlIGVsZW1lbnRzIHBhaXJ3aXNlIHVzaW5nIGEgc3BlY2lmaWVkIGVxdWFsaXR5IGNvbXBhcmVyLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzID0gcmVzID0gc291cmNlLnNlcXVlbmNlRXF1YWwoWzEsMiwzXSk7XG4gICAqIHZhciByZXMgPSByZXMgPSBzb3VyY2Uuc2VxdWVuY2VFcXVhbChbeyB2YWx1ZTogNDIgfV0sIGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4LnZhbHVlID09PSB5LnZhbHVlOyB9KTtcbiAgICogMyAtIHJlcyA9IHNvdXJjZS5zZXF1ZW5jZUVxdWFsKFJ4Lk9ic2VydmFibGUucmV0dXJuVmFsdWUoNDIpKTtcbiAgICogNCAtIHJlcyA9IHNvdXJjZS5zZXF1ZW5jZUVxdWFsKFJ4Lk9ic2VydmFibGUucmV0dXJuVmFsdWUoeyB2YWx1ZTogNDIgfSksIGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4LnZhbHVlID09PSB5LnZhbHVlOyB9KTtcbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBzZWNvbmQgU2Vjb25kIG9ic2VydmFibGUgc2VxdWVuY2Ugb3IgYXJyYXkgdG8gY29tcGFyZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NvbXBhcmVyXSBDb21wYXJlciB1c2VkIHRvIGNvbXBhcmUgZWxlbWVudHMgb2YgYm90aCBzZXF1ZW5jZXMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgYSBzaW5nbGUgZWxlbWVudCB3aGljaCBpbmRpY2F0ZXMgd2hldGhlciBib3RoIHNlcXVlbmNlcyBhcmUgb2YgZXF1YWwgbGVuZ3RoIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIGVsZW1lbnRzIGFyZSBlcXVhbCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBlcXVhbGl0eSBjb21wYXJlci5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zZXF1ZW5jZUVxdWFsID0gZnVuY3Rpb24gKHNlY29uZCwgY29tcGFyZXIpIHtcbiAgICB2YXIgZmlyc3QgPSB0aGlzO1xuICAgIGNvbXBhcmVyIHx8IChjb21wYXJlciA9IGRlZmF1bHRDb21wYXJlcik7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZG9uZWwgPSBmYWxzZSwgZG9uZXIgPSBmYWxzZSwgcWwgPSBbXSwgcXIgPSBbXTtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24xID0gZmlyc3Quc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIGlmIChxci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdmFyIHYgPSBxci5zaGlmdCgpO1xuICAgICAgICAgIHZhciBlcXVhbCA9IHRyeUNhdGNoKGNvbXBhcmVyKSh2LCB4KTtcbiAgICAgICAgICBpZiAoZXF1YWwgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IoZXF1YWwuZSk7IH1cbiAgICAgICAgICBpZiAoIWVxdWFsKSB7XG4gICAgICAgICAgICBvLm9uTmV4dChmYWxzZSk7XG4gICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRvbmVyKSB7XG4gICAgICAgICAgby5vbk5leHQoZmFsc2UpO1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBxbC5wdXNoKHgpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbihlKSB7IG8ub25FcnJvcihlKTsgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBkb25lbCA9IHRydWU7XG4gICAgICAgIGlmIChxbC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBpZiAocXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgby5vbk5leHQoZmFsc2UpO1xuICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZG9uZXIpIHtcbiAgICAgICAgICAgIG8ub25OZXh0KHRydWUpO1xuICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIChpc0FycmF5TGlrZShzZWNvbmQpIHx8IGlzSXRlcmFibGUoc2Vjb25kKSkgJiYgKHNlY29uZCA9IG9ic2VydmFibGVGcm9tKHNlY29uZCkpO1xuICAgICAgaXNQcm9taXNlKHNlY29uZCkgJiYgKHNlY29uZCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShzZWNvbmQpKTtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24yID0gc2Vjb25kLnN1YnNjcmliZShmdW5jdGlvbiAoeCkge1xuICAgICAgICBpZiAocWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZhciB2ID0gcWwuc2hpZnQoKTtcbiAgICAgICAgICB2YXIgZXF1YWwgPSB0cnlDYXRjaChjb21wYXJlcikodiwgeCk7XG4gICAgICAgICAgaWYgKGVxdWFsID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKGVxdWFsLmUpOyB9XG4gICAgICAgICAgaWYgKCFlcXVhbCkge1xuICAgICAgICAgICAgby5vbk5leHQoZmFsc2UpO1xuICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkb25lbCkge1xuICAgICAgICAgIG8ub25OZXh0KGZhbHNlKTtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcXIucHVzaCh4KTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24oZSkgeyBvLm9uRXJyb3IoZSk7IH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZG9uZXIgPSB0cnVlO1xuICAgICAgICBpZiAocXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgaWYgKHFsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG8ub25OZXh0KGZhbHNlKTtcbiAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRvbmVsKSB7XG4gICAgICAgICAgICBvLm9uTmV4dCh0cnVlKTtcbiAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbjEsIHN1YnNjcmlwdGlvbjIpO1xuICAgIH0sIGZpcnN0KTtcbiAgfTtcblxuICB2YXIgRWxlbWVudEF0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRWxlbWVudEF0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBFbGVtZW50QXRPYnNlcnZhYmxlKHNvdXJjZSwgaSwgZCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9pID0gaTtcbiAgICAgIHRoaXMuX2QgPSBkO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRWxlbWVudEF0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBFbGVtZW50QXRPYnNlcnZlcihvLCB0aGlzLl9pLCB0aGlzLl9kKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBFbGVtZW50QXRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEVsZW1lbnRBdE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFbGVtZW50QXRPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIEVsZW1lbnRBdE9ic2VydmVyKG8sIGksIGQpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5faSA9IGk7XG4gICAgICB0aGlzLl9kID0gZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEVsZW1lbnRBdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9pLS0gPT09IDApIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIEVsZW1lbnRBdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBFbGVtZW50QXRPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9vLm9uRXJyb3IobmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fZCk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEVsZW1lbnRBdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZWxlbWVudCBhdCBhIHNwZWNpZmllZCBpbmRleCBpbiBhIHNlcXVlbmNlIG9yIGRlZmF1bHQgdmFsdWUgaWYgbm90IGZvdW5kLlxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggVGhlIHplcm8tYmFzZWQgaW5kZXggb2YgdGhlIGVsZW1lbnQgdG8gcmV0cmlldmUuXG4gICAqIEBwYXJhbSB7QW55fSBbZGVmYXVsdFZhbHVlXSBUaGUgZGVmYXVsdCB2YWx1ZSB0byB1c2UgaWYgZWxlbWVudEF0IGRvZXMgbm90IGZpbmQgYSB2YWx1ZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBwcm9kdWNlcyB0aGUgZWxlbWVudCBhdCB0aGUgc3BlY2lmaWVkIHBvc2l0aW9uIGluIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZWxlbWVudEF0ID0gIGZ1bmN0aW9uIChpbmRleCwgZGVmYXVsdFZhbHVlKSB7XG4gICAgaWYgKGluZGV4IDwgMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgIHJldHVybiBuZXcgRWxlbWVudEF0T2JzZXJ2YWJsZSh0aGlzLCBpbmRleCwgZGVmYXVsdFZhbHVlKTtcbiAgfTtcblxuICB2YXIgU2luZ2xlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2luZ2xlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2luZ2xlT2JzZXJ2ZXIobywgb2JqLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX29iaiA9IG9iajtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5fdiA9IG51bGw7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTaW5nbGVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgc2hvdWxkWWllbGQgPSBmYWxzZTtcbiAgICAgIGlmICh0aGlzLl9vYmoucHJlZGljYXRlKSB7XG4gICAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9vYmoucHJlZGljYXRlKSh4LCB0aGlzLl9pKyssIHRoaXMuX3MpO1xuICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuICAgICAgICBCb29sZWFuKHJlcykgJiYgKHNob3VsZFlpZWxkID0gdHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLl9vYmoucHJlZGljYXRlKSB7XG4gICAgICAgIHNob3VsZFlpZWxkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzaG91bGRZaWVsZCkge1xuICAgICAgICBpZiAodGhpcy5faHYpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fby5vbkVycm9yKG5ldyBFcnJvcignU2VxdWVuY2UgY29udGFpbnMgbW9yZSB0aGFuIG9uZSBtYXRjaGluZyBlbGVtZW50JykpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2h2ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fdiA9IHg7XG4gICAgICB9XG4gICAgfTtcbiAgICBTaW5nbGVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgU2luZ2xlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLl9odikge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl92KTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAodGhpcy5fb2JqLmRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX28ub25FcnJvcihuZXcgRW1wdHlFcnJvcigpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX29iai5kZWZhdWx0VmFsdWUpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBTaW5nbGVPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG9ubHkgZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2F0aXNmaWVzIHRoZSBjb25kaXRpb24gaW4gdGhlIG9wdGlvbmFsIHByZWRpY2F0ZSwgYW5kIHJlcG9ydHMgYW4gZXhjZXB0aW9uIGlmIHRoZXJlIGlzIG5vdCBleGFjdGx5IG9uZSBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBTZXF1ZW5jZSBjb250YWluaW5nIHRoZSBzaW5nbGUgZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNhdGlzZmllcyB0aGUgY29uZGl0aW9uIGluIHRoZSBwcmVkaWNhdGUuXG4gICAgICovXG4gICAgb2JzZXJ2YWJsZVByb3RvLnNpbmdsZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHZhciBvYmogPSB7fSwgc291cmNlID0gdGhpcztcbiAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnb2JqZWN0Jykge1xuICAgICAgICBvYmogPSBhcmd1bWVudHNbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmogPSB7XG4gICAgICAgICAgcHJlZGljYXRlOiBhcmd1bWVudHNbMF0sXG4gICAgICAgICAgdGhpc0FyZzogYXJndW1lbnRzWzFdLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogYXJndW1lbnRzWzJdXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAoaXNGdW5jdGlvbiAob2JqLnByZWRpY2F0ZSkpIHtcbiAgICAgICAgdmFyIGZuID0gb2JqLnByZWRpY2F0ZTtcbiAgICAgICAgb2JqLnByZWRpY2F0ZSA9IGJpbmRDYWxsYmFjayhmbiwgb2JqLnRoaXNBcmcsIDMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBTaW5nbGVPYnNlcnZlcihvLCBvYmosIHNvdXJjZSkpO1xuICAgICAgfSwgc291cmNlKTtcbiAgICB9O1xuXG4gIHZhciBGaXJzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZpcnN0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBGaXJzdE9ic2VydmFibGUoc291cmNlLCBvYmopIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fb2JqID0gb2JqO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRmlyc3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IEZpcnN0T2JzZXJ2ZXIobywgdGhpcy5fb2JqLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRmlyc3RPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEZpcnN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRmlyc3RPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBGaXJzdE9ic2VydmVyKG8sIG9iaiwgcykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9vYmogPSBvYmo7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRmlyc3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5fb2JqLnByZWRpY2F0ZSkge1xuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fb2JqLnByZWRpY2F0ZSkoeCwgdGhpcy5faSsrLCB0aGlzLl9zKTtcbiAgICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgICAgaWYgKEJvb2xlYW4ocmVzKSkge1xuICAgICAgICAgIHRoaXMuX28ub25OZXh0KHgpO1xuICAgICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghdGhpcy5fb2JqLnByZWRpY2F0ZSkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgRmlyc3RPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgRmlyc3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX29iai5kZWZhdWx0VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9vLm9uRXJyb3IobmV3IEVtcHR5RXJyb3IoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9vYmouZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gRmlyc3RPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNhdGlzZmllcyB0aGUgY29uZGl0aW9uIGluIHRoZSBwcmVkaWNhdGUgaWYgcHJlc2VudCBlbHNlIHRoZSBmaXJzdCBpdGVtIGluIHRoZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzYXRpc2ZpZXMgdGhlIGNvbmRpdGlvbiBpbiB0aGUgcHJlZGljYXRlIGlmIHByb3ZpZGVkLCBlbHNlIHRoZSBmaXJzdCBpdGVtIGluIHRoZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5maXJzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb2JqID0ge30sIHNvdXJjZSA9IHRoaXM7XG4gICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdvYmplY3QnKSB7XG4gICAgICBvYmogPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iaiA9IHtcbiAgICAgICAgcHJlZGljYXRlOiBhcmd1bWVudHNbMF0sXG4gICAgICAgIHRoaXNBcmc6IGFyZ3VtZW50c1sxXSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBhcmd1bWVudHNbMl1cbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChpc0Z1bmN0aW9uIChvYmoucHJlZGljYXRlKSkge1xuICAgICAgdmFyIGZuID0gb2JqLnByZWRpY2F0ZTtcbiAgICAgIG9iai5wcmVkaWNhdGUgPSBiaW5kQ2FsbGJhY2soZm4sIG9iai50aGlzQXJnLCAzKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBGaXJzdE9ic2VydmFibGUodGhpcywgb2JqKTtcbiAgfTtcblxuICB2YXIgTGFzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKExhc3RPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIExhc3RPYnNlcnZhYmxlKHNvdXJjZSwgb2JqKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX29iaiA9IG9iajtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIExhc3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IExhc3RPYnNlcnZlcihvLCB0aGlzLl9vYmosIHRoaXMuc291cmNlKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBMYXN0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBMYXN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTGFzdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIExhc3RPYnNlcnZlcihvLCBvYmosIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fb2JqID0gb2JqO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIHRoaXMuX2h2ID0gZmFsc2U7XG4gICAgICB0aGlzLl92ID0gbnVsbDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIExhc3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgc2hvdWxkWWllbGQgPSBmYWxzZTtcbiAgICAgIGlmICh0aGlzLl9vYmoucHJlZGljYXRlKSB7XG4gICAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9vYmoucHJlZGljYXRlKSh4LCB0aGlzLl9pKyssIHRoaXMuX3MpO1xuICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuICAgICAgICBCb29sZWFuKHJlcykgJiYgKHNob3VsZFlpZWxkID0gdHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLl9vYmoucHJlZGljYXRlKSB7XG4gICAgICAgIHNob3VsZFlpZWxkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzaG91bGRZaWVsZCkge1xuICAgICAgICB0aGlzLl9odiA9IHRydWU7XG4gICAgICAgIHRoaXMuX3YgPSB4O1xuICAgICAgfVxuICAgIH07XG4gICAgTGFzdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLl9odikge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl92KTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAodGhpcy5fb2JqLmRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX28ub25FcnJvcihuZXcgRW1wdHlFcnJvcigpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX29iai5kZWZhdWx0VmFsdWUpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBMYXN0T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNhdGlzZmllcyB0aGUgY29uZGl0aW9uIGluIHRoZSBwcmVkaWNhdGUgaWYgc3BlY2lmaWVkLCBlbHNlIHRoZSBsYXN0IGVsZW1lbnQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBTZXF1ZW5jZSBjb250YWluaW5nIHRoZSBsYXN0IGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzYXRpc2ZpZXMgdGhlIGNvbmRpdGlvbiBpbiB0aGUgcHJlZGljYXRlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmxhc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9iaiA9IHt9LCBzb3VyY2UgPSB0aGlzO1xuICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnb2JqZWN0Jykge1xuICAgICAgb2JqID0gYXJndW1lbnRzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmogPSB7XG4gICAgICAgIHByZWRpY2F0ZTogYXJndW1lbnRzWzBdLFxuICAgICAgICB0aGlzQXJnOiBhcmd1bWVudHNbMV0sXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogYXJndW1lbnRzWzJdXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNGdW5jdGlvbiAob2JqLnByZWRpY2F0ZSkpIHtcbiAgICAgIHZhciBmbiA9IG9iai5wcmVkaWNhdGU7XG4gICAgICBvYmoucHJlZGljYXRlID0gYmluZENhbGxiYWNrKGZuLCBvYmoudGhpc0FyZywgMyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgTGFzdE9ic2VydmFibGUodGhpcywgb2JqKTtcbiAgfTtcblxuICB2YXIgRmluZFZhbHVlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRmluZFZhbHVlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRmluZFZhbHVlT2JzZXJ2ZXIob2JzZXJ2ZXIsIHNvdXJjZSwgY2FsbGJhY2ssIHlpZWxkSW5kZXgpIHtcbiAgICAgIHRoaXMuX28gPSBvYnNlcnZlcjtcbiAgICAgIHRoaXMuX3MgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9jYiA9IGNhbGxiYWNrO1xuICAgICAgdGhpcy5feSA9IHlpZWxkSW5kZXg7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEZpbmRWYWx1ZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBzaG91bGRSdW4gPSB0cnlDYXRjaCh0aGlzLl9jYikoeCwgdGhpcy5faSwgdGhpcy5fcyk7XG4gICAgICBpZiAoc2hvdWxkUnVuID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHNob3VsZFJ1bi5lKTsgfVxuICAgICAgaWYgKHNob3VsZFJ1bikge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl95ID8gdGhpcy5faSA6IHgpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9pKys7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEZpbmRWYWx1ZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIEZpbmRWYWx1ZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl95ICYmIHRoaXMuX28ub25OZXh0KC0xKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEZpbmRWYWx1ZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICBmdW5jdGlvbiBmaW5kVmFsdWUgKHNvdXJjZSwgcHJlZGljYXRlLCB0aGlzQXJnLCB5aWVsZEluZGV4KSB7XG4gICAgdmFyIGNhbGxiYWNrID0gYmluZENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgRmluZFZhbHVlT2JzZXJ2ZXIobywgc291cmNlLCBjYWxsYmFjaywgeWllbGRJbmRleCkpO1xuICAgIH0sIHNvdXJjZSk7XG4gIH1cblxuICAvKipcbiAgICogU2VhcmNoZXMgZm9yIGFuIGVsZW1lbnQgdGhhdCBtYXRjaGVzIHRoZSBjb25kaXRpb25zIGRlZmluZWQgYnkgdGhlIHNwZWNpZmllZCBwcmVkaWNhdGUsIGFuZCByZXR1cm5zIHRoZSBmaXJzdCBvY2N1cnJlbmNlIHdpdGhpbiB0aGUgZW50aXJlIE9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgcHJlZGljYXRlIHRoYXQgZGVmaW5lcyB0aGUgY29uZGl0aW9ucyBvZiB0aGUgZWxlbWVudCB0byBzZWFyY2ggZm9yLlxuICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgYHRoaXNgIHdoZW4gZXhlY3V0aW5nIHRoZSBwcmVkaWNhdGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIGZpcnN0IGVsZW1lbnQgdGhhdCBtYXRjaGVzIHRoZSBjb25kaXRpb25zIGRlZmluZWQgYnkgdGhlIHNwZWNpZmllZCBwcmVkaWNhdGUsIGlmIGZvdW5kOyBvdGhlcndpc2UsIHVuZGVmaW5lZC5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5maW5kID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHJldHVybiBmaW5kVmFsdWUodGhpcywgcHJlZGljYXRlLCB0aGlzQXJnLCBmYWxzZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNlYXJjaGVzIGZvciBhbiBlbGVtZW50IHRoYXQgbWF0Y2hlcyB0aGUgY29uZGl0aW9ucyBkZWZpbmVkIGJ5IHRoZSBzcGVjaWZpZWQgcHJlZGljYXRlLCBhbmQgcmV0dXJuc1xuICAgKiBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIHplcm8tYmFzZWQgaW5kZXggb2YgdGhlIGZpcnN0IG9jY3VycmVuY2Ugd2l0aGluIHRoZSBlbnRpcmUgT2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBwcmVkaWNhdGUgdGhhdCBkZWZpbmVzIHRoZSBjb25kaXRpb25zIG9mIHRoZSBlbGVtZW50IHRvIHNlYXJjaCBmb3IuXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgdGhlIHByZWRpY2F0ZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgemVyby1iYXNlZCBpbmRleCBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBlbGVtZW50IHRoYXQgbWF0Y2hlcyB0aGUgY29uZGl0aW9ucyBkZWZpbmVkIGJ5IG1hdGNoLCBpZiBmb3VuZDsgb3RoZXJ3aXNlLCDigJMxLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZmluZEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHJldHVybiBmaW5kVmFsdWUodGhpcywgcHJlZGljYXRlLCB0aGlzQXJnLCB0cnVlKTtcbiAgfTtcblxuICB2YXIgVG9TZXRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUb1NldE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVG9TZXRPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUb1NldE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgVG9TZXRPYnNlcnZlcihvKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBUb1NldE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgVG9TZXRPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVG9TZXRPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUb1NldE9ic2VydmVyKG8pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcyA9IG5ldyByb290LlNldCgpO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVG9TZXRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9zLmFkZCh4KTtcbiAgICB9O1xuXG4gICAgVG9TZXRPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBUb1NldE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9zKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRvU2V0T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byBhIFNldCBpZiBpdCBleGlzdHMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggYSBzaW5nbGUgdmFsdWUgb2YgYSBTZXQgY29udGFpbmluZyB0aGUgdmFsdWVzIGZyb20gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udG9TZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHR5cGVvZiByb290LlNldCA9PT0gJ3VuZGVmaW5lZCcpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigpOyB9XG4gICAgcmV0dXJuIG5ldyBUb1NldE9ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbiAgdmFyIFRvTWFwT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVG9NYXBPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRvTWFwT2JzZXJ2YWJsZShzb3VyY2UsIGssIGUpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fayA9IGs7XG4gICAgICB0aGlzLl9lID0gZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRvTWFwT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBUb01hcE9ic2VydmVyKG8sIHRoaXMuX2ssIHRoaXMuX2UpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRvTWFwT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBUb01hcE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUb01hcE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRvTWFwT2JzZXJ2ZXIobywgaywgZSkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9rID0gaztcbiAgICAgIHRoaXMuX2UgPSBlO1xuICAgICAgdGhpcy5fbSA9IG5ldyByb290Lk1hcCgpO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVG9NYXBPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIga2V5ID0gdHJ5Q2F0Y2godGhpcy5faykoeCk7XG4gICAgICBpZiAoa2V5ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKGtleS5lKTsgfVxuICAgICAgdmFyIGVsZW0gPSB4O1xuICAgICAgaWYgKHRoaXMuX2UpIHtcbiAgICAgICAgZWxlbSA9IHRyeUNhdGNoKHRoaXMuX2UpKHgpO1xuICAgICAgICBpZiAoZWxlbSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihlbGVtLmUpOyB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX20uc2V0KGtleSwgZWxlbSk7XG4gICAgfTtcblxuICAgIFRvTWFwT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgVG9NYXBPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fbSk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBUb01hcE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgKiBDb252ZXJ0cyB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byBhIE1hcCBpZiBpdCBleGlzdHMuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5U2VsZWN0b3IgQSBmdW5jdGlvbiB3aGljaCBwcm9kdWNlcyB0aGUga2V5IGZvciB0aGUgTWFwLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IFtlbGVtZW50U2VsZWN0b3JdIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIHdoaWNoIHByb2R1Y2VzIHRoZSBlbGVtZW50IGZvciB0aGUgTWFwLiBJZiBub3QgcHJlc2VudCwgZGVmYXVsdHMgdG8gdGhlIHZhbHVlIGZyb20gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCBhIHNpbmdsZSB2YWx1ZSBvZiBhIE1hcCBjb250YWluaW5nIHRoZSB2YWx1ZXMgZnJvbSB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRvTWFwID0gZnVuY3Rpb24gKGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IpIHtcbiAgICBpZiAodHlwZW9mIHJvb3QuTWFwID09PSAndW5kZWZpbmVkJykgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCk7IH1cbiAgICByZXR1cm4gbmV3IFRvTWFwT2JzZXJ2YWJsZSh0aGlzLCBrZXlTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yKTtcbiAgfTtcblxuICB2YXIgU2xpY2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTbGljZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2xpY2VPYnNlcnZhYmxlKHNvdXJjZSwgYiwgZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9iID0gYjtcbiAgICAgIHRoaXMuX2UgPSBlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2xpY2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNsaWNlT2JzZXJ2ZXIobywgdGhpcy5fYiwgdGhpcy5fZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2xpY2VPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFNsaWNlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNsaWNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBTbGljZU9ic2VydmVyKG8sIGIsIGUpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fYiA9IGI7XG4gICAgICB0aGlzLl9lID0gZTtcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2xpY2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5faSA+PSB0aGlzLl9iKSB7XG4gICAgICAgIGlmICh0aGlzLl9lID09PSB0aGlzLl9pKSB7XG4gICAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX28ub25OZXh0KHgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9pKys7XG4gICAgfTtcbiAgICBTbGljZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTbGljZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBTbGljZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKlxuICAqIFRoZSBzbGljZSgpIG1ldGhvZCByZXR1cm5zIGEgc2hhbGxvdyBjb3B5IG9mIGEgcG9ydGlvbiBvZiBhbiBPYnNlcnZhYmxlIGludG8gYSBuZXcgT2JzZXJ2YWJsZSBvYmplY3QuXG4gICogVW5saWtlIHRoZSBhcnJheSB2ZXJzaW9uLCB0aGlzIGRvZXMgbm90IHN1cHBvcnQgbmVnYXRpdmUgbnVtYmVycyBmb3IgYmVpbmcgb3IgZW5kLlxuICAqIEBwYXJhbSB7TnVtYmVyfSBbYmVnaW5dIFplcm8tYmFzZWQgaW5kZXggYXQgd2hpY2ggdG8gYmVnaW4gZXh0cmFjdGlvbi4gSWYgb21pdHRlZCwgdGhpcyB3aWxsIGRlZmF1bHQgdG8gemVyby5cbiAgKiBAcGFyYW0ge051bWJlcn0gW2VuZF0gWmVyby1iYXNlZCBpbmRleCBhdCB3aGljaCB0byBlbmQgZXh0cmFjdGlvbi4gc2xpY2UgZXh0cmFjdHMgdXAgdG8gYnV0IG5vdCBpbmNsdWRpbmcgZW5kLlxuICAqIElmIG9taXR0ZWQsIHRoaXMgd2lsbCBlbWl0IHRoZSByZXN0IG9mIHRoZSBPYnNlcnZhYmxlIG9iamVjdC5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQSBzaGFsbG93IGNvcHkgb2YgYSBwb3J0aW9uIG9mIGFuIE9ic2VydmFibGUgaW50byBhIG5ldyBPYnNlcnZhYmxlIG9iamVjdC5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNsaWNlID0gZnVuY3Rpb24gKGJlZ2luLCBlbmQpIHtcbiAgICB2YXIgc3RhcnQgPSBiZWdpbiB8fCAwO1xuICAgIGlmIChzdGFydCA8IDApIHsgdGhyb3cgbmV3IFJ4LkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICBpZiAodHlwZW9mIGVuZCA9PT0gJ251bWJlcicgJiYgZW5kIDwgc3RhcnQpIHtcbiAgICAgIHRocm93IG5ldyBSeC5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFNsaWNlT2JzZXJ2YWJsZSh0aGlzLCBzdGFydCwgZW5kKTtcbiAgfTtcblxuICB2YXIgTGFzdEluZGV4T2ZPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhMYXN0SW5kZXhPZk9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTGFzdEluZGV4T2ZPYnNlcnZhYmxlKHNvdXJjZSwgZSwgbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9lID0gZTtcbiAgICAgIHRoaXMuX24gPSBuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTGFzdEluZGV4T2ZPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIGlmICh0aGlzLl9uIDwgMCkge1xuICAgICAgICBvLm9uTmV4dCgtMSk7XG4gICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgTGFzdEluZGV4T2ZPYnNlcnZlcihvLCB0aGlzLl9lLCB0aGlzLl9uKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBMYXN0SW5kZXhPZk9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgTGFzdEluZGV4T2ZPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTGFzdEluZGV4T2ZPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBMYXN0SW5kZXhPZk9ic2VydmVyKG8sIGUsIG4pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fZSA9IGU7XG4gICAgICB0aGlzLl9uID0gbjtcbiAgICAgIHRoaXMuX3YgPSAwO1xuICAgICAgdGhpcy5faHYgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTGFzdEluZGV4T2ZPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5faSA+PSB0aGlzLl9uICYmIHggPT09IHRoaXMuX2UpIHtcbiAgICAgICAgdGhpcy5faHYgPSB0cnVlO1xuICAgICAgICB0aGlzLl92ID0gdGhpcy5faTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2krKztcbiAgICB9O1xuICAgIExhc3RJbmRleE9mT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIExhc3RJbmRleE9mT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLl9odikge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl92KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KC0xKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIExhc3RJbmRleE9mT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsYXN0IGluZGV4IGF0IHdoaWNoIGEgZ2l2ZW4gZWxlbWVudCBjYW4gYmUgZm91bmQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UsIG9yIC0xIGlmIGl0IGlzIG5vdCBwcmVzZW50LlxuICAgKiBAcGFyYW0ge0FueX0gc2VhcmNoRWxlbWVudCBFbGVtZW50IHRvIGxvY2F0ZSBpbiB0aGUgYXJyYXkuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbZnJvbUluZGV4XSBUaGUgaW5kZXggdG8gc3RhcnQgdGhlIHNlYXJjaC4gIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIDAuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbmQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBsYXN0IGluZGV4IGF0IHdoaWNoIGEgZ2l2ZW4gZWxlbWVudCBjYW4gYmUgZm91bmQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UsIG9yIC0xIGlmIGl0IGlzIG5vdCBwcmVzZW50LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmxhc3RJbmRleE9mID0gZnVuY3Rpb24oc2VhcmNoRWxlbWVudCwgZnJvbUluZGV4KSB7XG4gICAgdmFyIG4gPSArZnJvbUluZGV4IHx8IDA7XG4gICAgTWF0aC5hYnMobikgPT09IEluZmluaXR5ICYmIChuID0gMCk7XG4gICAgcmV0dXJuIG5ldyBMYXN0SW5kZXhPZk9ic2VydmFibGUodGhpcywgc2VhcmNoRWxlbWVudCwgbik7XG4gIH07XG5cbiAgT2JzZXJ2YWJsZS53cmFwID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgZnVuY3Rpb24gY3JlYXRlT2JzZXJ2YWJsZSgpIHtcbiAgICAgIHJldHVybiBPYnNlcnZhYmxlLnNwYXduLmNhbGwodGhpcywgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfVxuXG4gICAgY3JlYXRlT2JzZXJ2YWJsZS5fX2dlbmVyYXRvckZ1bmN0aW9uX18gPSBmbjtcbiAgICByZXR1cm4gY3JlYXRlT2JzZXJ2YWJsZTtcbiAgfTtcblxuICB2YXIgc3Bhd24gPSBPYnNlcnZhYmxlLnNwYXduID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBnZW4gPSBhcmd1bWVudHNbMF0sIHNlbGYgPSB0aGlzLCBhcmdzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDEsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykgeyBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTsgfVxuXG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG5cbiAgICAgIGlmIChpc0Z1bmN0aW9uKGdlbikpIHsgZ2VuID0gZ2VuLmFwcGx5KHNlbGYsIGFyZ3MpOyB9XG4gICAgICBpZiAoIWdlbiB8fCAhaXNGdW5jdGlvbihnZW4ubmV4dCkpIHtcbiAgICAgICAgby5vbk5leHQoZ2VuKTtcbiAgICAgICAgcmV0dXJuIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcHJvY2Vzc0dlbmVyYXRvcihyZXMpIHtcbiAgICAgICAgdmFyIHJldCA9IHRyeUNhdGNoKGdlbi5uZXh0KS5jYWxsKGdlbiwgcmVzKTtcbiAgICAgICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXQuZSk7IH1cbiAgICAgICAgbmV4dChyZXQpO1xuICAgICAgfVxuXG4gICAgICBwcm9jZXNzR2VuZXJhdG9yKCk7XG5cbiAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7XG4gICAgICAgIHZhciByZXQgPSB0cnlDYXRjaChnZW4ubmV4dCkuY2FsbChnZW4sIGVycik7XG4gICAgICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmV0LmUpOyB9XG4gICAgICAgIG5leHQocmV0KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbmV4dChyZXQpIHtcbiAgICAgICAgaWYgKHJldC5kb25lKSB7XG4gICAgICAgICAgby5vbk5leHQocmV0LnZhbHVlKTtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvYnMgPSB0b09ic2VydmFibGUuY2FsbChzZWxmLCByZXQudmFsdWUpO1xuICAgICAgICB2YXIgdmFsdWUgPSBudWxsO1xuICAgICAgICB2YXIgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgaWYgKE9ic2VydmFibGUuaXNPYnNlcnZhYmxlKG9icykpIHtcbiAgICAgICAgICBnLmFkZChvYnMuc3Vic2NyaWJlKGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgdmFsdWUgPSB2YWw7XG4gICAgICAgICAgfSwgb25FcnJvciwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBoYXNWYWx1ZSAmJiBwcm9jZXNzR2VuZXJhdG9yKHZhbHVlKTtcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb25FcnJvcihuZXcgVHlwZUVycm9yKCd0eXBlIG5vdCBzdXBwb3J0ZWQnKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGc7XG4gICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gdG9PYnNlcnZhYmxlKG9iaikge1xuICAgIGlmICghb2JqKSB7IHJldHVybiBvYmo7IH1cbiAgICBpZiAoT2JzZXJ2YWJsZS5pc09ic2VydmFibGUob2JqKSkgeyByZXR1cm4gb2JqOyB9XG4gICAgaWYgKGlzUHJvbWlzZShvYmopKSB7IHJldHVybiBPYnNlcnZhYmxlLmZyb21Qcm9taXNlKG9iaik7IH1cbiAgICBpZiAoaXNHZW5lcmF0b3JGdW5jdGlvbihvYmopIHx8IGlzR2VuZXJhdG9yKG9iaikpIHsgcmV0dXJuIHNwYXduLmNhbGwodGhpcywgb2JqKTsgfVxuICAgIGlmIChpc0Z1bmN0aW9uKG9iaikpIHsgcmV0dXJuIHRodW5rVG9PYnNlcnZhYmxlLmNhbGwodGhpcywgb2JqKTsgfVxuICAgIGlmIChpc0FycmF5TGlrZShvYmopIHx8IGlzSXRlcmFibGUob2JqKSkgeyByZXR1cm4gYXJyYXlUb09ic2VydmFibGUuY2FsbCh0aGlzLCBvYmopOyB9XG4gICAgaWYgKGlzT2JqZWN0KG9iaikpIHtyZXR1cm4gb2JqZWN0VG9PYnNlcnZhYmxlLmNhbGwodGhpcywgb2JqKTt9XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFycmF5VG9PYnNlcnZhYmxlIChvYmopIHtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZS5mcm9tKG9iaikuY29uY2F0TWFwKGZ1bmN0aW9uKG8pIHtcbiAgICAgIGlmKE9ic2VydmFibGUuaXNPYnNlcnZhYmxlKG8pIHx8IGlzT2JqZWN0KG8pKSB7XG4gICAgICAgIHJldHVybiB0b09ic2VydmFibGUuY2FsbChudWxsLCBvKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSeC5PYnNlcnZhYmxlLmp1c3Qobyk7XG4gICAgICB9XG4gICAgfSkudG9BcnJheSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gb2JqZWN0VG9PYnNlcnZhYmxlIChvYmopIHtcbiAgICB2YXIgcmVzdWx0cyA9IG5ldyBvYmouY29uc3RydWN0b3IoKSwga2V5cyA9IE9iamVjdC5rZXlzKG9iaiksIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGtleXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgdmFyIG9ic2VydmFibGUgPSB0b09ic2VydmFibGUuY2FsbCh0aGlzLCBvYmpba2V5XSk7XG5cbiAgICAgIGlmKG9ic2VydmFibGUgJiYgT2JzZXJ2YWJsZS5pc09ic2VydmFibGUob2JzZXJ2YWJsZSkpIHtcbiAgICAgICAgZGVmZXIob2JzZXJ2YWJsZSwga2V5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdHNba2V5XSA9IG9ialtrZXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBPYnNlcnZhYmxlLmZvcmtKb2luLmFwcGx5KE9ic2VydmFibGUsIG9ic2VydmFibGVzKS5tYXAoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9KTtcblxuXG4gICAgZnVuY3Rpb24gZGVmZXIgKG9ic2VydmFibGUsIGtleSkge1xuICAgICAgcmVzdWx0c1trZXldID0gdW5kZWZpbmVkO1xuICAgICAgb2JzZXJ2YWJsZXMucHVzaChvYnNlcnZhYmxlLm1hcChmdW5jdGlvbiAobmV4dCkge1xuICAgICAgICByZXN1bHRzW2tleV0gPSBuZXh0O1xuICAgICAgfSkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRodW5rVG9PYnNlcnZhYmxlKGZuKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgZm4uY2FsbChzZWxmLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlcnIgPSBhcmd1bWVudHNbMF0sIHJlcyA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgaWYgKGVycikgeyByZXR1cm4gby5vbkVycm9yKGVycik7IH1cbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pOyB9XG4gICAgICAgICAgcmVzID0gYXJncztcbiAgICAgICAgfVxuICAgICAgICBvLm9uTmV4dChyZXMpO1xuICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzR2VuZXJhdG9yKG9iaikge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uIChvYmoubmV4dCkgJiYgaXNGdW5jdGlvbiAob2JqWyd0aHJvdyddKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzR2VuZXJhdG9yRnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGN0b3IgPSBvYmouY29uc3RydWN0b3I7XG4gICAgaWYgKCFjdG9yKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGlmIChjdG9yLm5hbWUgPT09ICdHZW5lcmF0b3JGdW5jdGlvbicgfHwgY3Rvci5kaXNwbGF5TmFtZSA9PT0gJ0dlbmVyYXRvckZ1bmN0aW9uJykgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIHJldHVybiBpc0dlbmVyYXRvcihjdG9yLnByb3RvdHlwZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc09iamVjdCh2YWwpIHtcbiAgICByZXR1cm4gT2JqZWN0ID09IHZhbC5jb25zdHJ1Y3RvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnZva2VzIHRoZSBzcGVjaWZpZWQgZnVuY3Rpb24gYXN5bmNocm9ub3VzbHkgb24gdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIsIHN1cmZhY2luZyB0aGUgcmVzdWx0IHRocm91Z2ggYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuc3RhcnQoZnVuY3Rpb24gKCkgeyBjb25zb2xlLmxvZygnaGVsbG8nKTsgfSk7XG4gICAqIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLnN0YXJ0KGZ1bmN0aW9uICgpIHsgY29uc29sZS5sb2coJ2hlbGxvJyk7IH0sIFJ4LlNjaGVkdWxlci50aW1lb3V0KTtcbiAgICogdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuc3RhcnQoZnVuY3Rpb24gKCkgeyB0aGlzLmxvZygnaGVsbG8nKTsgfSwgUnguU2NoZWR1bGVyLnRpbWVvdXQsIGNvbnNvbGUpO1xuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIEZ1bmN0aW9uIHRvIHJ1biBhc3luY2hyb25vdXNseS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIHRoZSBmdW5jdGlvbiBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLnRpbWVvdXQuXG4gICAqIEBwYXJhbSBbY29udGV4dF0gIFRoZSBjb250ZXh0IGZvciB0aGUgZnVuYyBwYXJhbWV0ZXIgdG8gYmUgZXhlY3V0ZWQuICBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byB1bmRlZmluZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGV4cG9zaW5nIHRoZSBmdW5jdGlvbidzIHJlc3VsdCB2YWx1ZSwgb3IgYW4gZXhjZXB0aW9uLlxuICAgKlxuICAgKiBSZW1hcmtzXG4gICAqICogVGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCBpbW1lZGlhdGVseSwgbm90IGR1cmluZyB0aGUgc3Vic2NyaXB0aW9uIG9mIHRoZSByZXN1bHRpbmcgc2VxdWVuY2UuXG4gICAqICogTXVsdGlwbGUgc3Vic2NyaXB0aW9ucyB0byB0aGUgcmVzdWx0aW5nIHNlcXVlbmNlIGNhbiBvYnNlcnZlIHRoZSBmdW5jdGlvbidzIHJlc3VsdC5cbiAgICovXG4gIE9ic2VydmFibGUuc3RhcnQgPSBmdW5jdGlvbiAoZnVuYywgY29udGV4dCwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG9ic2VydmFibGVUb0FzeW5jKGZ1bmMsIGNvbnRleHQsIHNjaGVkdWxlcikoKTtcbiAgfTtcblxuICAvKipcbiAgICogQ29udmVydHMgdGhlIGZ1bmN0aW9uIGludG8gYW4gYXN5bmNocm9ub3VzIGZ1bmN0aW9uLiBFYWNoIGludm9jYXRpb24gb2YgdGhlIHJlc3VsdGluZyBhc3luY2hyb25vdXMgZnVuY3Rpb24gY2F1c2VzIGFuIGludm9jYXRpb24gb2YgdGhlIG9yaWdpbmFsIHN5bmNocm9ub3VzIGZ1bmN0aW9uIG9uIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlvbiBGdW5jdGlvbiB0byBjb252ZXJ0IHRvIGFuIGFzeW5jaHJvbm91cyBmdW5jdGlvbi5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBydW4gdGhlIGZ1bmN0aW9uIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIudGltZW91dC5cbiAgICogQHBhcmFtIHtNaXhlZH0gW2NvbnRleHRdIFRoZSBjb250ZXh0IGZvciB0aGUgZnVuYyBwYXJhbWV0ZXIgdG8gYmUgZXhlY3V0ZWQuICBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byB1bmRlZmluZWQuXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQXN5bmNocm9ub3VzIGZ1bmN0aW9uLlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVUb0FzeW5jID0gT2JzZXJ2YWJsZS50b0FzeW5jID0gZnVuY3Rpb24gKGZ1bmMsIGNvbnRleHQsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgc3ViamVjdCA9IG5ldyBBc3luY1N1YmplY3QoKTtcblxuICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlKG51bGwsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgc3ViamVjdC5vbkVycm9yKGUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdWJqZWN0Lm9uTmV4dChyZXN1bHQpO1xuICAgICAgICBzdWJqZWN0Lm9uQ29tcGxldGVkKCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICAgIH07XG4gIH07XG5cbmZ1bmN0aW9uIGNyZWF0ZUNiT2JzZXJ2YWJsZShmbiwgY3R4LCBzZWxlY3RvciwgYXJncykge1xuICB2YXIgbyA9IG5ldyBBc3luY1N1YmplY3QoKTtcblxuICBhcmdzLnB1c2goY3JlYXRlQ2JIYW5kbGVyKG8sIGN0eCwgc2VsZWN0b3IpKTtcbiAgZm4uYXBwbHkoY3R4LCBhcmdzKTtcblxuICByZXR1cm4gby5hc09ic2VydmFibGUoKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2JIYW5kbGVyKG8sIGN0eCwgc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZXIgKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCByZXN1bHRzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IHJlc3VsdHNbaV0gPSBhcmd1bWVudHNbaV07IH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKHNlbGVjdG9yKSkge1xuICAgICAgcmVzdWx0cyA9IHRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseShjdHgsIHJlc3VsdHMpO1xuICAgICAgaWYgKHJlc3VsdHMgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzdWx0cy5lKTsgfVxuICAgICAgby5vbk5leHQocmVzdWx0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgIG8ub25OZXh0KHJlc3VsdHNbMF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgby5vbk5leHQocmVzdWx0cyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgby5vbkNvbXBsZXRlZCgpO1xuICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBGdW5jdGlvbiB3aXRoIGEgY2FsbGJhY2sgYXMgdGhlIGxhc3QgcGFyYW1ldGVyIHRvIGNvbnZlcnQgdG8gYW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAqIEBwYXJhbSB7TWl4ZWR9IFtjdHhdIFRoZSBjb250ZXh0IGZvciB0aGUgZnVuYyBwYXJhbWV0ZXIgdG8gYmUgZXhlY3V0ZWQuICBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byB1bmRlZmluZWQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbc2VsZWN0b3JdIEEgc2VsZWN0b3Igd2hpY2ggdGFrZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBjYWxsYmFjayB0byBwcm9kdWNlIGEgc2luZ2xlIGl0ZW0gdG8geWllbGQgb24gbmV4dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiwgd2hlbiBleGVjdXRlZCB3aXRoIHRoZSByZXF1aXJlZCBwYXJhbWV0ZXJzIG1pbnVzIHRoZSBjYWxsYmFjaywgcHJvZHVjZXMgYW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIGEgc2luZ2xlIHZhbHVlIG9mIHRoZSBhcmd1bWVudHMgdG8gdGhlIGNhbGxiYWNrIGFzIGFuIGFycmF5LlxuICovXG5PYnNlcnZhYmxlLmZyb21DYWxsYmFjayA9IGZ1bmN0aW9uIChmbiwgY3R4LCBzZWxlY3Rvcikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHR5cGVvZiBjdHggPT09ICd1bmRlZmluZWQnICYmIChjdHggPSB0aGlzKTsgXG5cbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gY3JlYXRlQ2JPYnNlcnZhYmxlKGZuLCBjdHgsIHNlbGVjdG9yLCBhcmdzKTtcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZU5vZGVPYnNlcnZhYmxlKGZuLCBjdHgsIHNlbGVjdG9yLCBhcmdzKSB7XG4gIHZhciBvID0gbmV3IEFzeW5jU3ViamVjdCgpO1xuXG4gIGFyZ3MucHVzaChjcmVhdGVOb2RlSGFuZGxlcihvLCBjdHgsIHNlbGVjdG9yKSk7XG4gIGZuLmFwcGx5KGN0eCwgYXJncyk7XG5cbiAgcmV0dXJuIG8uYXNPYnNlcnZhYmxlKCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU5vZGVIYW5kbGVyKG8sIGN0eCwgc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZXIgKCkge1xuICAgIHZhciBlcnIgPSBhcmd1bWVudHNbMF07XG4gICAgaWYgKGVycikgeyByZXR1cm4gby5vbkVycm9yKGVycik7IH1cblxuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCByZXN1bHRzID0gW107XG4gICAgZm9yKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7IHJlc3VsdHNbaSAtIDFdID0gYXJndW1lbnRzW2ldOyB9XG5cbiAgICBpZiAoaXNGdW5jdGlvbihzZWxlY3RvcikpIHtcbiAgICAgIHZhciByZXN1bHRzID0gdHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KGN0eCwgcmVzdWx0cyk7XG4gICAgICBpZiAocmVzdWx0cyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHRzLmUpOyB9XG4gICAgICBvLm9uTmV4dChyZXN1bHRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgby5vbk5leHQocmVzdWx0c1swXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvLm9uTmV4dChyZXN1bHRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBvLm9uQ29tcGxldGVkKCk7XG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBOb2RlLmpzIGNhbGxiYWNrIHN0eWxlIGZ1bmN0aW9uIHRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuICBUaGlzIG11c3QgYmUgaW4gZnVuY3Rpb24gKGVyciwgLi4uKSBmb3JtYXQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY2FsbFxuICogQHBhcmFtIHtNaXhlZH0gW2N0eF0gVGhlIGNvbnRleHQgZm9yIHRoZSBmdW5jIHBhcmFtZXRlciB0byBiZSBleGVjdXRlZC4gIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIHVuZGVmaW5lZC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gQSBzZWxlY3RvciB3aGljaCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIGNhbGxiYWNrIG1pbnVzIHRoZSBlcnJvciB0byBwcm9kdWNlIGEgc2luZ2xlIGl0ZW0gdG8geWllbGQgb24gbmV4dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQW4gYXN5bmMgZnVuY3Rpb24gd2hpY2ggd2hlbiBhcHBsaWVkLCByZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgY2FsbGJhY2sgYXJndW1lbnRzIGFzIGFuIGFycmF5LlxuICovXG5PYnNlcnZhYmxlLmZyb21Ob2RlQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZm4sIGN0eCwgc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB0eXBlb2YgY3R4ID09PSAndW5kZWZpbmVkJyAmJiAoY3R4ID0gdGhpcyk7IFxuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gY3JlYXRlTm9kZU9ic2VydmFibGUoZm4sIGN0eCwgc2VsZWN0b3IsIGFyZ3MpO1xuICB9O1xufTtcblxuICBmdW5jdGlvbiBpc05vZGVMaXN0KGVsKSB7XG4gICAgaWYgKHJvb3QuU3RhdGljTm9kZUxpc3QpIHtcbiAgICAgIC8vIElFOCBTcGVjaWZpY1xuICAgICAgLy8gaW5zdGFuY2VvZiBpcyBzbG93ZXIgdGhhbiBPYmplY3QjdG9TdHJpbmcsIGJ1dCBPYmplY3QjdG9TdHJpbmcgd2lsbCBub3Qgd29yayBhcyBpbnRlbmRlZCBpbiBJRThcbiAgICAgIHJldHVybiBlbCBpbnN0YW5jZW9mIHJvb3QuU3RhdGljTm9kZUxpc3QgfHwgZWwgaW5zdGFuY2VvZiByb290Lk5vZGVMaXN0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGVsKSA9PT0gJ1tvYmplY3QgTm9kZUxpc3RdJztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBMaXN0ZW5EaXNwb3NhYmxlKGUsIG4sIGZuKSB7XG4gICAgdGhpcy5fZSA9IGU7XG4gICAgdGhpcy5fbiA9IG47XG4gICAgdGhpcy5fZm4gPSBmbjtcbiAgICB0aGlzLl9lLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5fbiwgdGhpcy5fZm4sIGZhbHNlKTtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgfVxuICBMaXN0ZW5EaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLl9lLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5fbiwgdGhpcy5fZm4sIGZhbHNlKTtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUV2ZW50TGlzdGVuZXIgKGVsLCBldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICB2YXIgZGlzcG9zYWJsZXMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuXG4gICAgLy8gQXN1bWUgTm9kZUxpc3Qgb3IgSFRNTENvbGxlY3Rpb25cbiAgICB2YXIgZWxlbVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGVsKTtcbiAgICBpZiAoaXNOb2RlTGlzdChlbCkgfHwgZWxlbVRvU3RyaW5nID09PSAnW29iamVjdCBIVE1MQ29sbGVjdGlvbl0nKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZWwubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZGlzcG9zYWJsZXMuYWRkKGNyZWF0ZUV2ZW50TGlzdGVuZXIoZWwuaXRlbShpKSwgZXZlbnROYW1lLCBoYW5kbGVyKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChlbCkge1xuICAgICAgZGlzcG9zYWJsZXMuYWRkKG5ldyBMaXN0ZW5EaXNwb3NhYmxlKGVsLCBldmVudE5hbWUsIGhhbmRsZXIpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGlzcG9zYWJsZXM7XG4gIH1cblxuICAvKipcbiAgICogQ29uZmlndXJhdGlvbiBvcHRpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gdXNlIG5hdGl2ZSBldmVudHMgb25seVxuICAgKi9cbiAgUnguY29uZmlnLnVzZU5hdGl2ZUV2ZW50cyA9IGZhbHNlO1xuXG4gIHZhciBFdmVudE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRXZlbnRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEV2ZW50T2JzZXJ2YWJsZShlbCwgbmFtZSwgZm4pIHtcbiAgICAgIHRoaXMuX2VsID0gZWw7XG4gICAgICB0aGlzLl9uID0gbmFtZTtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVIYW5kbGVyKG8sIGZuKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlciAoKSB7XG4gICAgICAgIHZhciByZXN1bHRzID0gYXJndW1lbnRzWzBdO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihmbikpIHtcbiAgICAgICAgICByZXN1bHRzID0gdHJ5Q2F0Y2goZm4pLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgaWYgKHJlc3VsdHMgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzdWx0cy5lKTsgfVxuICAgICAgICB9XG4gICAgICAgIG8ub25OZXh0KHJlc3VsdHMpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBFdmVudE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIGNyZWF0ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgIHRoaXMuX2VsLFxuICAgICAgICB0aGlzLl9uLFxuICAgICAgICBjcmVhdGVIYW5kbGVyKG8sIHRoaXMuX2ZuKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBFdmVudE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IGFkZGluZyBhbiBldmVudCBsaXN0ZW5lciB0byB0aGUgbWF0Y2hpbmcgRE9NRWxlbWVudCBvciBlYWNoIGl0ZW0gaW4gdGhlIE5vZGVMaXN0LlxuICAgKiBAcGFyYW0ge09iamVjdH0gZWxlbWVudCBUaGUgRE9NRWxlbWVudCBvciBOb2RlTGlzdCB0byBhdHRhY2ggYSBsaXN0ZW5lci5cbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSBUaGUgZXZlbnQgbmFtZSB0byBhdHRhY2ggdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gQSBzZWxlY3RvciB3aGljaCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIGV2ZW50IGhhbmRsZXIgdG8gcHJvZHVjZSBhIHNpbmdsZSBpdGVtIHRvIHlpZWxkIG9uIG5leHQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIGV2ZW50cyBmcm9tIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBhbmQgdGhlIHNwZWNpZmllZCBldmVudC5cbiAgICovXG4gIE9ic2VydmFibGUuZnJvbUV2ZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50TmFtZSwgc2VsZWN0b3IpIHtcbiAgICAvLyBOb2RlLmpzIHNwZWNpZmljXG4gICAgaWYgKGVsZW1lbnQuYWRkTGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBmcm9tRXZlbnRQYXR0ZXJuKFxuICAgICAgICBmdW5jdGlvbiAoaCkgeyBlbGVtZW50LmFkZExpc3RlbmVyKGV2ZW50TmFtZSwgaCk7IH0sXG4gICAgICAgIGZ1bmN0aW9uIChoKSB7IGVsZW1lbnQucmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lLCBoKTsgfSxcbiAgICAgICAgc2VsZWN0b3IpO1xuICAgIH1cblxuICAgIC8vIFVzZSBvbmx5IGlmIG5vbi1uYXRpdmUgZXZlbnRzIGFyZSBhbGxvd2VkXG4gICAgaWYgKCFSeC5jb25maWcudXNlTmF0aXZlRXZlbnRzKSB7XG4gICAgICAvLyBIYW5kbGVzIGpxLCBBbmd1bGFyLmpzLCBaZXB0bywgTWFyaW9uZXR0ZSwgRW1iZXIuanNcbiAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5vbiA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZWxlbWVudC5vZmYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGZyb21FdmVudFBhdHRlcm4oXG4gICAgICAgICAgZnVuY3Rpb24gKGgpIHsgZWxlbWVudC5vbihldmVudE5hbWUsIGgpOyB9LFxuICAgICAgICAgIGZ1bmN0aW9uIChoKSB7IGVsZW1lbnQub2ZmKGV2ZW50TmFtZSwgaCk7IH0sXG4gICAgICAgICAgc2VsZWN0b3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgRXZlbnRPYnNlcnZhYmxlKGVsZW1lbnQsIGV2ZW50TmFtZSwgc2VsZWN0b3IpLnB1Ymxpc2goKS5yZWZDb3VudCgpO1xuICB9O1xuXG4gIHZhciBFdmVudFBhdHRlcm5PYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEV2ZW50UGF0dGVybk9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZShhZGQsIGRlbCwgZm4pIHtcbiAgICAgIHRoaXMuX2FkZCA9IGFkZDtcbiAgICAgIHRoaXMuX2RlbCA9IGRlbDtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVIYW5kbGVyKG8sIGZuKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlciAoKSB7XG4gICAgICAgIHZhciByZXN1bHRzID0gYXJndW1lbnRzWzBdO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihmbikpIHtcbiAgICAgICAgICByZXN1bHRzID0gdHJ5Q2F0Y2goZm4pLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgaWYgKHJlc3VsdHMgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzdWx0cy5lKTsgfVxuICAgICAgICB9XG4gICAgICAgIG8ub25OZXh0KHJlc3VsdHMpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBFdmVudFBhdHRlcm5PYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBmbiA9IGNyZWF0ZUhhbmRsZXIobywgdGhpcy5fZm4pO1xuICAgICAgdmFyIHJldHVyblZhbHVlID0gdGhpcy5fYWRkKGZuKTtcbiAgICAgIHJldHVybiBuZXcgRXZlbnRQYXR0ZXJuRGlzcG9zYWJsZSh0aGlzLl9kZWwsIGZuLCByZXR1cm5WYWx1ZSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEV2ZW50UGF0dGVybkRpc3Bvc2FibGUoZGVsLCBmbiwgcmV0KSB7XG4gICAgICB0aGlzLl9kZWwgPSBkZWw7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgdGhpcy5fcmV0ID0gcmV0O1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgRXZlbnRQYXR0ZXJuRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgaXNGdW5jdGlvbih0aGlzLl9kZWwpICYmIHRoaXMuX2RlbCh0aGlzLl9mbiwgdGhpcy5fcmV0KTtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEV2ZW50UGF0dGVybk9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGZyb20gYW4gZXZlbnQgZW1pdHRlciB2aWEgYW4gYWRkSGFuZGxlci9yZW1vdmVIYW5kbGVyIHBhaXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGFkZEhhbmRsZXIgVGhlIGZ1bmN0aW9uIHRvIGFkZCBhIGhhbmRsZXIgdG8gdGhlIGVtaXR0ZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtyZW1vdmVIYW5kbGVyXSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gdG8gcmVtb3ZlIGEgaGFuZGxlciBmcm9tIGFuIGVtaXR0ZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gQSBzZWxlY3RvciB3aGljaCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIGV2ZW50IGhhbmRsZXIgdG8gcHJvZHVjZSBhIHNpbmdsZSBpdGVtIHRvIHlpZWxkIG9uIG5leHQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIHdyYXBzIGFuIGV2ZW50IGZyb20gYW4gZXZlbnQgZW1pdHRlclxuICAgKi9cbiAgdmFyIGZyb21FdmVudFBhdHRlcm4gPSBPYnNlcnZhYmxlLmZyb21FdmVudFBhdHRlcm4gPSBmdW5jdGlvbiAoYWRkSGFuZGxlciwgcmVtb3ZlSGFuZGxlciwgc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IEV2ZW50UGF0dGVybk9ic2VydmFibGUoYWRkSGFuZGxlciwgcmVtb3ZlSGFuZGxlciwgc2VsZWN0b3IpLnB1Ymxpc2goKS5yZWZDb3VudCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnZva2VzIHRoZSBhc3luY2hyb25vdXMgZnVuY3Rpb24sIHN1cmZhY2luZyB0aGUgcmVzdWx0IHRocm91Z2ggYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY3Rpb25Bc3luYyBBc3luY2hyb25vdXMgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhIFByb21pc2UgdG8gcnVuLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBleHBvc2luZyB0aGUgZnVuY3Rpb24ncyByZXN1bHQgdmFsdWUsIG9yIGFuIGV4Y2VwdGlvbi5cbiAgICovXG4gIE9ic2VydmFibGUuc3RhcnRBc3luYyA9IGZ1bmN0aW9uIChmdW5jdGlvbkFzeW5jKSB7XG4gICAgdmFyIHByb21pc2UgPSB0cnlDYXRjaChmdW5jdGlvbkFzeW5jKSgpO1xuICAgIGlmIChwcm9taXNlID09PSBlcnJvck9iaikgeyByZXR1cm4gb2JzZXJ2YWJsZVRocm93KHByb21pc2UuZSk7IH1cbiAgICByZXR1cm4gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHByb21pc2UpO1xuICB9O1xuXG4gIHZhciBQYXVzYWJsZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFBhdXNhYmxlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBQYXVzYWJsZU9ic2VydmFibGUoc291cmNlLCBwYXVzZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IFN1YmplY3QoKTtcblxuICAgICAgaWYgKHBhdXNlciAmJiBwYXVzZXIuc3Vic2NyaWJlKSB7XG4gICAgICAgIHRoaXMucGF1c2VyID0gdGhpcy5jb250cm9sbGVyLm1lcmdlKHBhdXNlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBhdXNlciA9IHRoaXMuY29udHJvbGxlcjtcbiAgICAgIH1cblxuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgUGF1c2FibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBjb25uID0gdGhpcy5zb3VyY2UucHVibGlzaCgpLFxuICAgICAgICBzdWJzY3JpcHRpb24gPSBjb25uLnN1YnNjcmliZShvKSxcbiAgICAgICAgY29ubmVjdGlvbiA9IGRpc3Bvc2FibGVFbXB0eTtcblxuICAgICAgdmFyIHBhdXNhYmxlID0gdGhpcy5wYXVzZXIuZGlzdGluY3RVbnRpbENoYW5nZWQoKS5zdWJzY3JpYmUoZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgaWYgKGIpIHtcbiAgICAgICAgICBjb25uZWN0aW9uID0gY29ubi5jb25uZWN0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29ubmVjdGlvbi5kaXNwb3NlKCk7XG4gICAgICAgICAgY29ubmVjdGlvbiA9IGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoW3N1YnNjcmlwdGlvbiwgY29ubmVjdGlvbiwgcGF1c2FibGVdKTtcbiAgICB9O1xuXG4gICAgUGF1c2FibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY29udHJvbGxlci5vbk5leHQoZmFsc2UpO1xuICAgIH07XG5cbiAgICBQYXVzYWJsZU9ic2VydmFibGUucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY29udHJvbGxlci5vbk5leHQodHJ1ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBQYXVzYWJsZU9ic2VydmFibGU7XG5cbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqIFBhdXNlcyB0aGUgdW5kZXJseWluZyBvYnNlcnZhYmxlIHNlcXVlbmNlIGJhc2VkIHVwb24gdGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggeWllbGRzIHRydWUvZmFsc2UuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBwYXVzZXIgPSBuZXcgUnguU3ViamVjdCgpO1xuICAgKiB2YXIgc291cmNlID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDApLnBhdXNhYmxlKHBhdXNlcik7XG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gcGF1c2VyIFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHVzZWQgdG8gcGF1c2UgdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBpcyBwYXVzZWQgYmFzZWQgdXBvbiB0aGUgcGF1c2VyLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnBhdXNhYmxlID0gZnVuY3Rpb24gKHBhdXNlcikge1xuICAgIHJldHVybiBuZXcgUGF1c2FibGVPYnNlcnZhYmxlKHRoaXMsIHBhdXNlcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gY29tYmluZUxhdGVzdFNvdXJjZShzb3VyY2UsIHN1YmplY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgaGFzVmFsdWUgPSBbZmFsc2UsIGZhbHNlXSxcbiAgICAgICAgaGFzVmFsdWVBbGwgPSBmYWxzZSxcbiAgICAgICAgaXNEb25lID0gZmFsc2UsXG4gICAgICAgIHZhbHVlcyA9IG5ldyBBcnJheSgyKSxcbiAgICAgICAgZXJyO1xuXG4gICAgICBmdW5jdGlvbiBuZXh0KHgsIGkpIHtcbiAgICAgICAgdmFsdWVzW2ldID0geDtcbiAgICAgICAgaGFzVmFsdWVbaV0gPSB0cnVlO1xuICAgICAgICBpZiAoaGFzVmFsdWVBbGwgfHwgKGhhc1ZhbHVlQWxsID0gaGFzVmFsdWUuZXZlcnkoaWRlbnRpdHkpKSkge1xuICAgICAgICAgIGlmIChlcnIpIHsgcmV0dXJuIG8ub25FcnJvcihlcnIpOyB9XG4gICAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHJlc3VsdFNlbGVjdG9yKS5hcHBseShudWxsLCB2YWx1ZXMpO1xuICAgICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgICAgby5vbk5leHQocmVzKTtcbiAgICAgICAgfVxuICAgICAgICBpc0RvbmUgJiYgdmFsdWVzWzFdICYmIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICBuZXh0KHgsIDApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZXNbMV0pIHtcbiAgICAgICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZXJyID0gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlzRG9uZSA9IHRydWU7XG4gICAgICAgICAgICB2YWx1ZXNbMV0gJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIH0pLFxuICAgICAgICBzdWJqZWN0LnN1YnNjcmliZShcbiAgICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgbmV4dCh4LCAxKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfSxcbiAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpc0RvbmUgPSB0cnVlO1xuICAgICAgICAgICAgbmV4dCh0cnVlLCAxKTtcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH0sIHNvdXJjZSk7XG4gIH1cblxuICB2YXIgUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlKHNvdXJjZSwgcGF1c2VyKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBTdWJqZWN0KCk7XG5cbiAgICAgIGlmIChwYXVzZXIgJiYgcGF1c2VyLnN1YnNjcmliZSkge1xuICAgICAgICB0aGlzLnBhdXNlciA9IHRoaXMuY29udHJvbGxlci5tZXJnZShwYXVzZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wYXVzZXIgPSB0aGlzLmNvbnRyb2xsZXI7XG4gICAgICB9XG5cbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBxID0gW10sIHByZXZpb3VzU2hvdWxkRmlyZTtcblxuICAgICAgZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHsgd2hpbGUgKHEubGVuZ3RoID4gMCkgeyBvLm9uTmV4dChxLnNoaWZ0KCkpOyB9IH1cblxuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9XG4gICAgICAgIGNvbWJpbmVMYXRlc3RTb3VyY2UoXG4gICAgICAgICAgdGhpcy5zb3VyY2UsXG4gICAgICAgICAgdGhpcy5wYXVzZXIuc3RhcnRXaXRoKGZhbHNlKS5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpLFxuICAgICAgICAgIGZ1bmN0aW9uIChkYXRhLCBzaG91bGRGaXJlKSB7XG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiBkYXRhLCBzaG91bGRGaXJlOiBzaG91bGRGaXJlIH07XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgaWYgKHByZXZpb3VzU2hvdWxkRmlyZSAhPT0gdW5kZWZpbmVkICYmIHJlc3VsdHMuc2hvdWxkRmlyZSAhPT0gcHJldmlvdXNTaG91bGRGaXJlKSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNTaG91bGRGaXJlID0gcmVzdWx0cy5zaG91bGRGaXJlO1xuICAgICAgICAgICAgICAgIC8vIGNoYW5nZSBpbiBzaG91bGRGaXJlXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMuc2hvdWxkRmlyZSkgeyBkcmFpblF1ZXVlKCk7IH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Nob3VsZEZpcmUgPSByZXN1bHRzLnNob3VsZEZpcmU7XG4gICAgICAgICAgICAgICAgLy8gbmV3IGRhdGFcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0cy5zaG91bGRGaXJlKSB7XG4gICAgICAgICAgICAgICAgICBvLm9uTmV4dChyZXN1bHRzLmRhdGEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBxLnB1c2gocmVzdWx0cy5kYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIGRyYWluUXVldWUoKTtcbiAgICAgICAgICAgICAgby5vbkVycm9yKGVycik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjsgICAgICBcbiAgICB9O1xuXG4gICAgUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jb250cm9sbGVyLm9uTmV4dChmYWxzZSk7XG4gICAgfTtcblxuICAgIFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNvbnRyb2xsZXIub25OZXh0KHRydWUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGU7XG5cbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqIFBhdXNlcyB0aGUgdW5kZXJseWluZyBvYnNlcnZhYmxlIHNlcXVlbmNlIGJhc2VkIHVwb24gdGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggeWllbGRzIHRydWUvZmFsc2UsXG4gICAqIGFuZCB5aWVsZHMgdGhlIHZhbHVlcyB0aGF0IHdlcmUgYnVmZmVyZWQgd2hpbGUgcGF1c2VkLlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcGF1c2VyID0gbmV3IFJ4LlN1YmplY3QoKTtcbiAgICogdmFyIHNvdXJjZSA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwKS5wYXVzYWJsZUJ1ZmZlcmVkKHBhdXNlcik7XG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gcGF1c2VyIFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHVzZWQgdG8gcGF1c2UgdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBpcyBwYXVzZWQgYmFzZWQgdXBvbiB0aGUgcGF1c2VyLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnBhdXNhYmxlQnVmZmVyZWQgPSBmdW5jdGlvbiAocGF1c2VyKSB7XG4gICAgcmV0dXJuIG5ldyBQYXVzYWJsZUJ1ZmZlcmVkT2JzZXJ2YWJsZSh0aGlzLCBwYXVzZXIpO1xuICB9O1xuXG4gIHZhciBDb250cm9sbGVkT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ29udHJvbGxlZE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ29udHJvbGxlZE9ic2VydmFibGUgKHNvdXJjZSwgZW5hYmxlUXVldWUsIHNjaGVkdWxlcikge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnN1YmplY3QgPSBuZXcgQ29udHJvbGxlZFN1YmplY3QoZW5hYmxlUXVldWUsIHNjaGVkdWxlcik7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZS5tdWx0aWNhc3QodGhpcy5zdWJqZWN0KS5yZWZDb3VudCgpO1xuICAgIH1cblxuICAgIENvbnRyb2xsZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobyk7XG4gICAgfTtcblxuICAgIENvbnRyb2xsZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24gKG51bWJlck9mSXRlbXMpIHtcbiAgICAgIHJldHVybiB0aGlzLnN1YmplY3QucmVxdWVzdChudW1iZXJPZkl0ZW1zID09IG51bGwgPyAtMSA6IG51bWJlck9mSXRlbXMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29udHJvbGxlZE9ic2VydmFibGU7XG5cbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgdmFyIENvbnRyb2xsZWRTdWJqZWN0ID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb250cm9sbGVkU3ViamVjdCwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb250cm9sbGVkU3ViamVjdChlbmFibGVRdWV1ZSwgc2NoZWR1bGVyKSB7XG4gICAgICBlbmFibGVRdWV1ZSA9PSBudWxsICYmIChlbmFibGVRdWV1ZSA9IHRydWUpO1xuXG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuc3ViamVjdCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICB0aGlzLmVuYWJsZVF1ZXVlID0gZW5hYmxlUXVldWU7XG4gICAgICB0aGlzLnF1ZXVlID0gZW5hYmxlUXVldWUgPyBbXSA6IG51bGw7XG4gICAgICB0aGlzLnJlcXVlc3RlZENvdW50ID0gMDtcbiAgICAgIHRoaXMucmVxdWVzdGVkRGlzcG9zYWJsZSA9IG51bGw7XG4gICAgICB0aGlzLmVycm9yID0gbnVsbDtcbiAgICAgIHRoaXMuaGFzRmFpbGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXIgfHwgY3VycmVudFRocmVhZFNjaGVkdWxlcjtcbiAgICB9XG5cbiAgICBhZGRQcm9wZXJ0aWVzKENvbnRyb2xsZWRTdWJqZWN0LnByb3RvdHlwZSwgT2JzZXJ2ZXIsIHtcbiAgICAgIF9zdWJzY3JpYmU6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1YmplY3Quc3Vic2NyaWJlKG8pO1xuICAgICAgfSxcbiAgICAgIG9uQ29tcGxldGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZVF1ZXVlIHx8IHRoaXMucXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5zdWJqZWN0Lm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgdGhpcy5kaXNwb3NlQ3VycmVudFJlcXVlc3QoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goTm90aWZpY2F0aW9uLmNyZWF0ZU9uQ29tcGxldGVkKCkpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRoaXMuaGFzRmFpbGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlUXVldWUgfHwgdGhpcy5xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLnN1YmplY3Qub25FcnJvcihlcnJvcik7XG4gICAgICAgICAgdGhpcy5kaXNwb3NlQ3VycmVudFJlcXVlc3QoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goTm90aWZpY2F0aW9uLmNyZWF0ZU9uRXJyb3IoZXJyb3IpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uTmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLnJlcXVlc3RlZENvdW50IDw9IDApIHtcbiAgICAgICAgICB0aGlzLmVuYWJsZVF1ZXVlICYmIHRoaXMucXVldWUucHVzaChOb3RpZmljYXRpb24uY3JlYXRlT25OZXh0KHZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgKHRoaXMucmVxdWVzdGVkQ291bnQtLSA9PT0gMCkgJiYgdGhpcy5kaXNwb3NlQ3VycmVudFJlcXVlc3QoKTtcbiAgICAgICAgICB0aGlzLnN1YmplY3Qub25OZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9wcm9jZXNzUmVxdWVzdDogZnVuY3Rpb24gKG51bWJlck9mSXRlbXMpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlUXVldWUpIHtcbiAgICAgICAgICB3aGlsZSAodGhpcy5xdWV1ZS5sZW5ndGggPiAwICYmIChudW1iZXJPZkl0ZW1zID4gMCB8fCB0aGlzLnF1ZXVlWzBdLmtpbmQgIT09ICdOJykpIHtcbiAgICAgICAgICAgIHZhciBmaXJzdCA9IHRoaXMucXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgIGZpcnN0LmFjY2VwdCh0aGlzLnN1YmplY3QpO1xuICAgICAgICAgICAgaWYgKGZpcnN0LmtpbmQgPT09ICdOJykge1xuICAgICAgICAgICAgICBudW1iZXJPZkl0ZW1zLS07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2VDdXJyZW50UmVxdWVzdCgpO1xuICAgICAgICAgICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bWJlck9mSXRlbXM7XG4gICAgICB9LFxuICAgICAgcmVxdWVzdDogZnVuY3Rpb24gKG51bWJlcikge1xuICAgICAgICB0aGlzLmRpc3Bvc2VDdXJyZW50UmVxdWVzdCgpO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5yZXF1ZXN0ZWREaXNwb3NhYmxlID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUobnVtYmVyLFxuICAgICAgICBmdW5jdGlvbihzLCBpKSB7XG4gICAgICAgICAgdmFyIHJlbWFpbmluZyA9IHNlbGYuX3Byb2Nlc3NSZXF1ZXN0KGkpO1xuICAgICAgICAgIHZhciBzdG9wcGVkID0gc2VsZi5oYXNDb21wbGV0ZWQgfHwgc2VsZi5oYXNGYWlsZWQ7XG4gICAgICAgICAgaWYgKCFzdG9wcGVkICYmIHJlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICAgIHNlbGYucmVxdWVzdGVkQ291bnQgPSByZW1haW5pbmc7XG5cbiAgICAgICAgICAgIHJldHVybiBkaXNwb3NhYmxlQ3JlYXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgc2VsZi5yZXF1ZXN0ZWRDb3VudCA9IDA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgLy8gU2NoZWR1bGVkIGl0ZW0gaXMgc3RpbGwgaW4gcHJvZ3Jlc3MuIFJldHVybiBhIG5ld1xuICAgICAgICAgICAgICAvLyBkaXNwb3NhYmxlIHRvIGFsbG93IHRoZSByZXF1ZXN0IHRvIGJlIGludGVycnVwdGVkXG4gICAgICAgICAgICAgIC8vIHZpYSBkaXNwb3NlLlxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdGVkRGlzcG9zYWJsZTtcbiAgICAgIH0sXG4gICAgICBkaXNwb3NlQ3VycmVudFJlcXVlc3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVxdWVzdGVkRGlzcG9zYWJsZSkge1xuICAgICAgICAgIHRoaXMucmVxdWVzdGVkRGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgICAgICAgdGhpcy5yZXF1ZXN0ZWREaXNwb3NhYmxlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIENvbnRyb2xsZWRTdWJqZWN0O1xuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogQXR0YWNoZXMgYSBjb250cm9sbGVyIHRvIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIGFiaWxpdHkgdG8gcXVldWUuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBzb3VyY2UgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMCkuY29udHJvbGxlZCgpO1xuICAgKiBzb3VyY2UucmVxdWVzdCgzKTsgLy8gUmVhZHMgMyB2YWx1ZXNcbiAgICogQHBhcmFtIHtib29sfSBlbmFibGVRdWV1ZSB0cnV0aHkgdmFsdWUgdG8gZGV0ZXJtaW5lIGlmIHZhbHVlcyBzaG91bGQgYmUgcXVldWVkIHBlbmRpbmcgdGhlIG5leHQgcmVxdWVzdFxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIGRldGVybWluZXMgaG93IHRoZSByZXF1ZXN0cyB3aWxsIGJlIHNjaGVkdWxlZFxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggb25seSBwcm9wYWdhdGVzIHZhbHVlcyBvbiByZXF1ZXN0LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmNvbnRyb2xsZWQgPSBmdW5jdGlvbiAoZW5hYmxlUXVldWUsIHNjaGVkdWxlcikge1xuXG4gICAgaWYgKGVuYWJsZVF1ZXVlICYmIGlzU2NoZWR1bGVyKGVuYWJsZVF1ZXVlKSkge1xuICAgICAgc2NoZWR1bGVyID0gZW5hYmxlUXVldWU7XG4gICAgICBlbmFibGVRdWV1ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGVuYWJsZVF1ZXVlID09IG51bGwpIHsgIGVuYWJsZVF1ZXVlID0gdHJ1ZTsgfVxuICAgIHJldHVybiBuZXcgQ29udHJvbGxlZE9ic2VydmFibGUodGhpcywgZW5hYmxlUXVldWUsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFN0b3BBbmRXYWl0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU3RvcEFuZFdhaXRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFN0b3BBbmRXYWl0T2JzZXJ2YWJsZSAoc291cmNlKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHMsIHNlbGYpIHtcbiAgICAgIHNlbGYuc291cmNlLnJlcXVlc3QoMSk7XG4gICAgfVxuXG4gICAgU3RvcEFuZFdhaXRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTdG9wQW5kV2FpdE9ic2VydmVyKG8sIHRoaXMsIHRoaXMuc3Vic2NyaXB0aW9uKSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLFxuICAgICAgICBkZWZhdWx0U2NoZWR1bGVyLnNjaGVkdWxlKHRoaXMsIHNjaGVkdWxlTWV0aG9kKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgdmFyIFN0b3BBbmRXYWl0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3ViX18pIHtcbiAgICAgIGluaGVyaXRzKFN0b3BBbmRXYWl0T2JzZXJ2ZXIsIF9fc3ViX18pO1xuICAgICAgZnVuY3Rpb24gU3RvcEFuZFdhaXRPYnNlcnZlciAob2JzZXJ2ZXIsIG9ic2VydmFibGUsIGNhbmNlbCkge1xuICAgICAgICBfX3N1Yl9fLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlID0gb2JzZXJ2YWJsZTtcbiAgICAgICAgdGhpcy5jYW5jZWwgPSBjYW5jZWw7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgU3RvcEFuZFdhaXRPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgfTtcblxuICAgICAgU3RvcEFuZFdhaXRPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiBpbm5lclNjaGVkdWxlTWV0aG9kKHMsIHNlbGYpIHtcbiAgICAgICAgc2VsZi5vYnNlcnZhYmxlLnNvdXJjZS5yZXF1ZXN0KDEpO1xuICAgICAgfVxuXG4gICAgICBTdG9wQW5kV2FpdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZURpc3Bvc2FibGUgPSBkZWZhdWx0U2NoZWR1bGVyLnNjaGVkdWxlKHRoaXMsIGlubmVyU2NoZWR1bGVNZXRob2QpO1xuICAgICAgfTtcblxuICAgICAgU3RvcEFuZFdhaXRPYnNlcnZhYmxlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5jYW5jZWwpIHtcbiAgICAgICAgICB0aGlzLmNhbmNlbC5kaXNwb3NlKCk7XG4gICAgICAgICAgdGhpcy5jYW5jZWwgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNjaGVkdWxlRGlzcG9zYWJsZSkge1xuICAgICAgICAgIHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlLmRpc3Bvc2UoKTtcbiAgICAgICAgICB0aGlzLnNjaGVkdWxlRGlzcG9zYWJsZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgX19zdWJfXy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIFN0b3BBbmRXYWl0T2JzZXJ2ZXI7XG4gICAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgICByZXR1cm4gU3RvcEFuZFdhaXRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGUpKTtcblxuXG4gIC8qKlxuICAgKiBBdHRhY2hlcyBhIHN0b3AgYW5kIHdhaXQgb2JzZXJ2YWJsZSB0byB0aGUgY3VycmVudCBvYnNlcnZhYmxlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQSBzdG9wIGFuZCB3YWl0IG9ic2VydmFibGUuXG4gICAqL1xuICBDb250cm9sbGVkT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3RvcEFuZFdhaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBTdG9wQW5kV2FpdE9ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbiAgdmFyIFdpbmRvd2VkT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoV2luZG93ZWRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFdpbmRvd2VkT2JzZXJ2YWJsZShzb3VyY2UsIHdpbmRvd1NpemUpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLndpbmRvd1NpemUgPSB3aW5kb3dTaXplO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHMsIHNlbGYpIHtcbiAgICAgIHNlbGYuc291cmNlLnJlcXVlc3Qoc2VsZi53aW5kb3dTaXplKTtcbiAgICB9XG5cbiAgICBXaW5kb3dlZE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFdpbmRvd2VkT2JzZXJ2ZXIobywgdGhpcywgdGhpcy5zdWJzY3JpcHRpb24pKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24sXG4gICAgICAgIGRlZmF1bHRTY2hlZHVsZXIuc2NoZWR1bGUodGhpcywgc2NoZWR1bGVNZXRob2QpXG4gICAgICApO1xuICAgIH07XG5cbiAgICB2YXIgV2luZG93ZWRPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdWJfXykge1xuICAgICAgaW5oZXJpdHMoV2luZG93ZWRPYnNlcnZlciwgX19zdWJfXyk7XG4gICAgICBmdW5jdGlvbiBXaW5kb3dlZE9ic2VydmVyKG9ic2VydmVyLCBvYnNlcnZhYmxlLCBjYW5jZWwpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgICAgICB0aGlzLm9ic2VydmFibGUgPSBvYnNlcnZhYmxlO1xuICAgICAgICB0aGlzLmNhbmNlbCA9IGNhbmNlbDtcbiAgICAgICAgdGhpcy5yZWNlaXZlZCA9IDA7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlID0gbnVsbDtcbiAgICAgICAgX19zdWJfXy5jYWxsKHRoaXMpO1xuICAgICAgfVxuXG4gICAgICBXaW5kb3dlZE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICB9O1xuXG4gICAgICBXaW5kb3dlZE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIGlubmVyU2NoZWR1bGVNZXRob2Qocywgc2VsZikge1xuICAgICAgICBzZWxmLm9ic2VydmFibGUuc291cmNlLnJlcXVlc3Qoc2VsZi5vYnNlcnZhYmxlLndpbmRvd1NpemUpO1xuICAgICAgfVxuXG4gICAgICBXaW5kb3dlZE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlZCA9ICsrdGhpcy5yZWNlaXZlZCAlIHRoaXMub2JzZXJ2YWJsZS53aW5kb3dTaXplO1xuICAgICAgICB0aGlzLnJlY2VpdmVkID09PSAwICYmICh0aGlzLnNjaGVkdWxlRGlzcG9zYWJsZSA9IGRlZmF1bHRTY2hlZHVsZXIuc2NoZWR1bGUodGhpcywgaW5uZXJTY2hlZHVsZU1ldGhvZCkpO1xuICAgICAgfTtcblxuICAgICAgV2luZG93ZWRPYnNlcnZlci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLmNhbmNlbCkge1xuICAgICAgICAgIHRoaXMuY2FuY2VsLmRpc3Bvc2UoKTtcbiAgICAgICAgICB0aGlzLmNhbmNlbCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlKSB7XG4gICAgICAgICAgdGhpcy5zY2hlZHVsZURpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgICAgICAgIHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBfX3N1Yl9fLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gV2luZG93ZWRPYnNlcnZlcjtcbiAgICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAgIHJldHVybiBXaW5kb3dlZE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgc2xpZGluZyB3aW5kb3dlZCBvYnNlcnZhYmxlIGJhc2VkIHVwb24gdGhlIHdpbmRvdyBzaXplLlxuICAgKiBAcGFyYW0ge051bWJlcn0gd2luZG93U2l6ZSBUaGUgbnVtYmVyIG9mIGl0ZW1zIGluIHRoZSB3aW5kb3dcbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEEgd2luZG93ZWQgb2JzZXJ2YWJsZSBiYXNlZCB1cG9uIHRoZSB3aW5kb3cgc2l6ZS5cbiAgICovXG4gIENvbnRyb2xsZWRPYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3dlZCA9IGZ1bmN0aW9uICh3aW5kb3dTaXplKSB7XG4gICAgcmV0dXJuIG5ldyBXaW5kb3dlZE9ic2VydmFibGUodGhpcywgd2luZG93U2l6ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBpcGVzIHRoZSBleGlzdGluZyBPYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gYSBOb2RlLmpzIFN0cmVhbS5cbiAgICogQHBhcmFtIHtTdHJlYW19IGRlc3QgVGhlIGRlc3RpbmF0aW9uIE5vZGUuanMgc3RyZWFtLlxuICAgKiBAcmV0dXJucyB7U3RyZWFtfSBUaGUgZGVzdGluYXRpb24gc3RyZWFtLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnBpcGUgPSBmdW5jdGlvbiAoZGVzdCkge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzLnBhdXNhYmxlQnVmZmVyZWQoKTtcblxuICAgIGZ1bmN0aW9uIG9uRHJhaW4oKSB7XG4gICAgICBzb3VyY2UucmVzdW1lKCk7XG4gICAgfVxuXG4gICAgZGVzdC5hZGRMaXN0ZW5lcignZHJhaW4nLCBvbkRyYWluKTtcblxuICAgIHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAhZGVzdC53cml0ZShTdHJpbmcoeCkpICYmIHNvdXJjZS5wYXVzZSgpO1xuICAgICAgfSxcbiAgICAgIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgZGVzdC5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBIYWNrIGNoZWNrIGJlY2F1c2UgU1RESU8gaXMgbm90IGNsb3NhYmxlXG4gICAgICAgICFkZXN0Ll9pc1N0ZGlvICYmIGRlc3QuZW5kKCk7XG4gICAgICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25EcmFpbik7XG4gICAgICB9KTtcblxuICAgIHNvdXJjZS5yZXN1bWUoKTtcblxuICAgIHJldHVybiBkZXN0O1xuICB9O1xuXG4gIHZhciBNdWx0aWNhc3RPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNdWx0aWNhc3RPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE11bHRpY2FzdE9ic2VydmFibGUoc291cmNlLCBmbjEsIGZuMikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbjEgPSBmbjE7XG4gICAgICB0aGlzLl9mbjIgPSBmbjI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBNdWx0aWNhc3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBjb25uZWN0YWJsZSA9IHRoaXMuc291cmNlLm11bHRpY2FzdCh0aGlzLl9mbjEoKSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUodGhpcy5fZm4yKGNvbm5lY3RhYmxlKS5zdWJzY3JpYmUobyksIGNvbm5lY3RhYmxlLmNvbm5lY3QoKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBNdWx0aWNhc3RPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqIE11bHRpY2FzdHMgdGhlIHNvdXJjZSBzZXF1ZW5jZSBub3RpZmljYXRpb25zIHRocm91Z2ggYW4gaW5zdGFudGlhdGVkIHN1YmplY3QgaW50byBhbGwgdXNlcyBvZiB0aGUgc2VxdWVuY2Ugd2l0aGluIGEgc2VsZWN0b3IgZnVuY3Rpb24uIEVhY2hcbiAgICogc3Vic2NyaXB0aW9uIHRvIHRoZSByZXN1bHRpbmcgc2VxdWVuY2UgY2F1c2VzIGEgc2VwYXJhdGUgbXVsdGljYXN0IGludm9jYXRpb24sIGV4cG9zaW5nIHRoZSBzZXF1ZW5jZSByZXN1bHRpbmcgZnJvbSB0aGUgc2VsZWN0b3IgZnVuY3Rpb24nc1xuICAgKiBpbnZvY2F0aW9uLiBGb3Igc3BlY2lhbGl6YXRpb25zIHdpdGggZml4ZWQgc3ViamVjdCB0eXBlcywgc2VlIFB1Ymxpc2gsIFB1Ymxpc2hMYXN0LCBhbmQgUmVwbGF5LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAxIC0gcmVzID0gc291cmNlLm11bHRpY2FzdChvYnNlcnZhYmxlKTtcbiAgICogMiAtIHJlcyA9IHNvdXJjZS5tdWx0aWNhc3QoZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IFN1YmplY3QoKTsgfSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pO1xuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufFN1YmplY3R9IHN1YmplY3RPclN1YmplY3RTZWxlY3RvclxuICAgKiBGYWN0b3J5IGZ1bmN0aW9uIHRvIGNyZWF0ZSBhbiBpbnRlcm1lZGlhdGUgc3ViamVjdCB0aHJvdWdoIHdoaWNoIHRoZSBzb3VyY2Ugc2VxdWVuY2UncyBlbGVtZW50cyB3aWxsIGJlIG11bHRpY2FzdCB0byB0aGUgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqIE9yOlxuICAgKiBTdWJqZWN0IHRvIHB1c2ggc291cmNlIGVsZW1lbnRzIGludG8uXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gT3B0aW9uYWwgc2VsZWN0b3IgZnVuY3Rpb24gd2hpY2ggY2FuIHVzZSB0aGUgbXVsdGljYXN0ZWQgc291cmNlIHNlcXVlbmNlIHN1YmplY3QgdG8gdGhlIHBvbGljaWVzIGVuZm9yY2VkIGJ5IHRoZSBjcmVhdGVkIHN1YmplY3QuIFNwZWNpZmllZCBvbmx5IGlmIDxwYXJhbXJlZiBuYW1lPVwic3ViamVjdE9yU3ViamVjdFNlbGVjdG9yXCIgaXMgYSBmYWN0b3J5IGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlIHdpdGhpbiBhIHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm11bHRpY2FzdCA9IGZ1bmN0aW9uIChzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3IsIHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24oc3ViamVjdE9yU3ViamVjdFNlbGVjdG9yKSA/XG4gICAgICBuZXcgTXVsdGljYXN0T2JzZXJ2YWJsZSh0aGlzLCBzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3IsIHNlbGVjdG9yKSA6XG4gICAgICBuZXcgQ29ubmVjdGFibGVPYnNlcnZhYmxlKHRoaXMsIHN1YmplY3RPclN1YmplY3RTZWxlY3Rvcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIHNlbGVjdG9yIG9uIGEgY29ubmVjdGFibGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UuXG4gICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiBNdWx0aWNhc3QgdXNpbmcgYSByZWd1bGFyIFN1YmplY3QuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXNyZXMgPSBzb3VyY2UucHVibGlzaCgpO1xuICAgKiB2YXIgcmVzID0gc291cmNlLnB1Ymxpc2goZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pO1xuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbc2VsZWN0b3JdIFNlbGVjdG9yIGZ1bmN0aW9uIHdoaWNoIGNhbiB1c2UgdGhlIG11bHRpY2FzdGVkIHNvdXJjZSBzZXF1ZW5jZSBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZCwgd2l0aG91dCBjYXVzaW5nIG11bHRpcGxlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZS4gU3Vic2NyaWJlcnMgdG8gdGhlIGdpdmVuIHNvdXJjZSB3aWxsIHJlY2VpdmUgYWxsIG5vdGlmaWNhdGlvbnMgb2YgdGhlIHNvdXJjZSBmcm9tIHRoZSB0aW1lIG9mIHRoZSBzdWJzY3JpcHRpb24gb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aGluIGEgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucHVibGlzaCA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgIHJldHVybiBzZWxlY3RvciAmJiBpc0Z1bmN0aW9uKHNlbGVjdG9yKSA/XG4gICAgICB0aGlzLm11bHRpY2FzdChmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgU3ViamVjdCgpOyB9LCBzZWxlY3RvcikgOlxuICAgICAgdGhpcy5tdWx0aWNhc3QobmV3IFN1YmplY3QoKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UuXG4gICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiBwdWJsaXNoIHdoaWNoIGNyZWF0ZXMgYSBzdWJzY3JpcHRpb24gd2hlbiB0aGUgbnVtYmVyIG9mIG9ic2VydmVycyBnb2VzIGZyb20gemVybyB0byBvbmUsIHRoZW4gc2hhcmVzIHRoYXQgc3Vic2NyaXB0aW9uIHdpdGggYWxsIHN1YnNlcXVlbnQgb2JzZXJ2ZXJzIHVudGlsIHRoZSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIHJldHVybnMgdG8gemVybywgYXQgd2hpY2ggcG9pbnQgdGhlIHN1YnNjcmlwdGlvbiBpcyBkaXNwb3NlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zaGFyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5wdWJsaXNoKCkucmVmQ291bnQoKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgc2VsZWN0b3Igb24gYSBjb25uZWN0YWJsZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZSBjb250YWluaW5nIG9ubHkgdGhlIGxhc3Qgbm90aWZpY2F0aW9uLlxuICAgKiBUaGlzIG9wZXJhdG9yIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgTXVsdGljYXN0IHVzaW5nIGEgQXN5bmNTdWJqZWN0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzID0gc291cmNlLnB1Ymxpc2hMYXN0KCk7XG4gICAqIHZhciByZXMgPSBzb3VyY2UucHVibGlzaExhc3QoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pO1xuICAgKlxuICAgKiBAcGFyYW0gc2VsZWN0b3IgW09wdGlvbmFsXSBTZWxlY3RvciBmdW5jdGlvbiB3aGljaCBjYW4gdXNlIHRoZSBtdWx0aWNhc3RlZCBzb3VyY2Ugc2VxdWVuY2UgYXMgbWFueSB0aW1lcyBhcyBuZWVkZWQsIHdpdGhvdXQgY2F1c2luZyBtdWx0aXBsZSBzdWJzY3JpcHRpb25zIHRvIHRoZSBzb3VyY2Ugc2VxdWVuY2UuIFN1YnNjcmliZXJzIHRvIHRoZSBnaXZlbiBzb3VyY2Ugd2lsbCBvbmx5IHJlY2VpdmUgdGhlIGxhc3Qgbm90aWZpY2F0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aGluIGEgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucHVibGlzaExhc3QgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gc2VsZWN0b3IgJiYgaXNGdW5jdGlvbihzZWxlY3RvcikgP1xuICAgICAgdGhpcy5tdWx0aWNhc3QoZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IEFzeW5jU3ViamVjdCgpOyB9LCBzZWxlY3RvcikgOlxuICAgICAgdGhpcy5tdWx0aWNhc3QobmV3IEFzeW5jU3ViamVjdCgpKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgc2VsZWN0b3Igb24gYSBjb25uZWN0YWJsZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZSBhbmQgc3RhcnRzIHdpdGggaW5pdGlhbFZhbHVlLlxuICAgKiBUaGlzIG9wZXJhdG9yIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgTXVsdGljYXN0IHVzaW5nIGEgQmVoYXZpb3JTdWJqZWN0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzID0gc291cmNlLnB1Ymxpc2hWYWx1ZSg0Mik7XG4gICAqIHZhciByZXMgPSBzb3VyY2UucHVibGlzaFZhbHVlKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnNlbGVjdChmdW5jdGlvbiAoeSkgeyByZXR1cm4geSAqIHk7IH0pIH0sIDQyKTtcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBPcHRpb25hbCBzZWxlY3RvciBmdW5jdGlvbiB3aGljaCBjYW4gdXNlIHRoZSBtdWx0aWNhc3RlZCBzb3VyY2Ugc2VxdWVuY2UgYXMgbWFueSB0aW1lcyBhcyBuZWVkZWQsIHdpdGhvdXQgY2F1c2luZyBtdWx0aXBsZSBzdWJzY3JpcHRpb25zIHRvIHRoZSBzb3VyY2Ugc2VxdWVuY2UuIFN1YnNjcmliZXJzIHRvIHRoZSBnaXZlbiBzb3VyY2Ugd2lsbCByZWNlaXZlIGltbWVkaWF0ZWx5IHJlY2VpdmUgdGhlIGluaXRpYWwgdmFsdWUsIGZvbGxvd2VkIGJ5IGFsbCBub3RpZmljYXRpb25zIG9mIHRoZSBzb3VyY2UgZnJvbSB0aGUgdGltZSBvZiB0aGUgc3Vic2NyaXB0aW9uIG9uLlxuICAgKiBAcGFyYW0ge01peGVkfSBpbml0aWFsVmFsdWUgSW5pdGlhbCB2YWx1ZSByZWNlaXZlZCBieSBvYnNlcnZlcnMgdXBvbiBzdWJzY3JpcHRpb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aGluIGEgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucHVibGlzaFZhbHVlID0gZnVuY3Rpb24gKGluaXRpYWxWYWx1ZU9yU2VsZWN0b3IsIGluaXRpYWxWYWx1ZSkge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAyID9cbiAgICAgIHRoaXMubXVsdGljYXN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCZWhhdmlvclN1YmplY3QoaW5pdGlhbFZhbHVlKTtcbiAgICAgIH0sIGluaXRpYWxWYWx1ZU9yU2VsZWN0b3IpIDpcbiAgICAgIHRoaXMubXVsdGljYXN0KG5ldyBCZWhhdmlvclN1YmplY3QoaW5pdGlhbFZhbHVlT3JTZWxlY3RvcikpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzaGFyZXMgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlIGFuZCBzdGFydHMgd2l0aCBhbiBpbml0aWFsVmFsdWUuXG4gICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiBwdWJsaXNoVmFsdWUgd2hpY2ggY3JlYXRlcyBhIHN1YnNjcmlwdGlvbiB3aGVuIHRoZSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIGdvZXMgZnJvbSB6ZXJvIHRvIG9uZSwgdGhlbiBzaGFyZXMgdGhhdCBzdWJzY3JpcHRpb24gd2l0aCBhbGwgc3Vic2VxdWVudCBvYnNlcnZlcnMgdW50aWwgdGhlIG51bWJlciBvZiBvYnNlcnZlcnMgcmV0dXJucyB0byB6ZXJvLCBhdCB3aGljaCBwb2ludCB0aGUgc3Vic2NyaXB0aW9uIGlzIGRpc3Bvc2VkLlxuICAgKiBAcGFyYW0ge01peGVkfSBpbml0aWFsVmFsdWUgSW5pdGlhbCB2YWx1ZSByZWNlaXZlZCBieSBvYnNlcnZlcnMgdXBvbiBzdWJzY3JpcHRpb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2hhcmVWYWx1ZSA9IGZ1bmN0aW9uIChpbml0aWFsVmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5wdWJsaXNoVmFsdWUoaW5pdGlhbFZhbHVlKS5yZWZDb3VudCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSBzZWxlY3RvciBvbiBhIGNvbm5lY3RhYmxlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzaGFyZXMgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlIHJlcGxheWluZyBub3RpZmljYXRpb25zIHN1YmplY3QgdG8gYSBtYXhpbXVtIHRpbWUgbGVuZ3RoIGZvciB0aGUgcmVwbGF5IGJ1ZmZlci5cbiAgICogVGhpcyBvcGVyYXRvciBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIE11bHRpY2FzdCB1c2luZyBhIFJlcGxheVN1YmplY3QuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBzb3VyY2UucmVwbGF5KG51bGwsIDMpO1xuICAgKiB2YXIgcmVzID0gc291cmNlLnJlcGxheShudWxsLCAzLCA1MDApO1xuICAgKiB2YXIgcmVzID0gc291cmNlLnJlcGxheShudWxsLCAzLCA1MDAsIHNjaGVkdWxlcik7XG4gICAqIHZhciByZXMgPSBzb3VyY2UucmVwbGF5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnRha2UoNikucmVwZWF0KCk7IH0sIDMsIDUwMCwgc2NoZWR1bGVyKTtcbiAgICpcbiAgICogQHBhcmFtIHNlbGVjdG9yIFtPcHRpb25hbF0gU2VsZWN0b3IgZnVuY3Rpb24gd2hpY2ggY2FuIHVzZSB0aGUgbXVsdGljYXN0ZWQgc291cmNlIHNlcXVlbmNlIGFzIG1hbnkgdGltZXMgYXMgbmVlZGVkLCB3aXRob3V0IGNhdXNpbmcgbXVsdGlwbGUgc3Vic2NyaXB0aW9ucyB0byB0aGUgc291cmNlIHNlcXVlbmNlLiBTdWJzY3JpYmVycyB0byB0aGUgZ2l2ZW4gc291cmNlIHdpbGwgcmVjZWl2ZSBhbGwgdGhlIG5vdGlmaWNhdGlvbnMgb2YgdGhlIHNvdXJjZSBzdWJqZWN0IHRvIHRoZSBzcGVjaWZpZWQgcmVwbGF5IGJ1ZmZlciB0cmltbWluZyBwb2xpY3kuXG4gICAqIEBwYXJhbSBidWZmZXJTaXplIFtPcHRpb25hbF0gTWF4aW11bSBlbGVtZW50IGNvdW50IG9mIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgKiBAcGFyYW0gd2luZG93U2l6ZSBbT3B0aW9uYWxdIE1heGltdW0gdGltZSBsZW5ndGggb2YgdGhlIHJlcGxheSBidWZmZXIuXG4gICAqIEBwYXJhbSBzY2hlZHVsZXIgW09wdGlvbmFsXSBTY2hlZHVsZXIgd2hlcmUgY29ubmVjdGVkIG9ic2VydmVycyB3aXRoaW4gdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCBvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoaW4gYSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5yZXBsYXkgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIGJ1ZmZlclNpemUsIHdpbmRvd1NpemUsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBzZWxlY3RvciAmJiBpc0Z1bmN0aW9uKHNlbGVjdG9yKSA/XG4gICAgICB0aGlzLm11bHRpY2FzdChmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgUmVwbGF5U3ViamVjdChidWZmZXJTaXplLCB3aW5kb3dTaXplLCBzY2hlZHVsZXIpOyB9LCBzZWxlY3RvcikgOlxuICAgICAgdGhpcy5tdWx0aWNhc3QobmV3IFJlcGxheVN1YmplY3QoYnVmZmVyU2l6ZSwgd2luZG93U2l6ZSwgc2NoZWR1bGVyKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UgcmVwbGF5aW5nIG5vdGlmaWNhdGlvbnMgc3ViamVjdCB0byBhIG1heGltdW0gdGltZSBsZW5ndGggZm9yIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgKiBUaGlzIG9wZXJhdG9yIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgcmVwbGF5IHdoaWNoIGNyZWF0ZXMgYSBzdWJzY3JpcHRpb24gd2hlbiB0aGUgbnVtYmVyIG9mIG9ic2VydmVycyBnb2VzIGZyb20gemVybyB0byBvbmUsIHRoZW4gc2hhcmVzIHRoYXQgc3Vic2NyaXB0aW9uIHdpdGggYWxsIHN1YnNlcXVlbnQgb2JzZXJ2ZXJzIHVudGlsIHRoZSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIHJldHVybnMgdG8gemVybywgYXQgd2hpY2ggcG9pbnQgdGhlIHN1YnNjcmlwdGlvbiBpcyBkaXNwb3NlZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5zaGFyZVJlcGxheSgzKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5zaGFyZVJlcGxheSgzLCA1MDApO1xuICAgKiB2YXIgcmVzID0gc291cmNlLnNoYXJlUmVwbGF5KDMsIDUwMCwgc2NoZWR1bGVyKTtcbiAgICpcblxuICAgKiBAcGFyYW0gYnVmZmVyU2l6ZSBbT3B0aW9uYWxdIE1heGltdW0gZWxlbWVudCBjb3VudCBvZiB0aGUgcmVwbGF5IGJ1ZmZlci5cbiAgICogQHBhcmFtIHdpbmRvdyBbT3B0aW9uYWxdIE1heGltdW0gdGltZSBsZW5ndGggb2YgdGhlIHJlcGxheSBidWZmZXIuXG4gICAqIEBwYXJhbSBzY2hlZHVsZXIgW09wdGlvbmFsXSBTY2hlZHVsZXIgd2hlcmUgY29ubmVjdGVkIG9ic2VydmVycyB3aXRoaW4gdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCBvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zaGFyZVJlcGxheSA9IGZ1bmN0aW9uIChidWZmZXJTaXplLCB3aW5kb3dTaXplLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5yZXBsYXkobnVsbCwgYnVmZmVyU2l6ZSwgd2luZG93U2l6ZSwgc2NoZWR1bGVyKS5yZWZDb3VudCgpO1xuICB9O1xuXG4gIHZhciBJbm5lclN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIChzLCBvKSB7XG4gICAgdGhpcy5fcyA9IHM7XG4gICAgdGhpcy5fbyA9IG87XG4gIH07XG5cbiAgSW5uZXJTdWJzY3JpcHRpb24ucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLl9zLmlzRGlzcG9zZWQgJiYgdGhpcy5fbyAhPT0gbnVsbCkge1xuICAgICAgdmFyIGlkeCA9IHRoaXMuX3Mub2JzZXJ2ZXJzLmluZGV4T2YodGhpcy5fbyk7XG4gICAgICB0aGlzLl9zLm9ic2VydmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgIHRoaXMuX28gPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICB2YXIgUmVmQ291bnRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhSZWZDb3VudE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUmVmQ291bnRPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9jb3VudCA9IDA7XG4gICAgICB0aGlzLl9jb25uZWN0YWJsZVN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBSZWZDb3VudE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMuc291cmNlLnN1YnNjcmliZShvKTtcbiAgICAgICsrdGhpcy5fY291bnQgPT09IDEgJiYgKHRoaXMuX2Nvbm5lY3RhYmxlU3Vic2NyaXB0aW9uID0gdGhpcy5zb3VyY2UuY29ubmVjdCgpKTtcbiAgICAgIHJldHVybiBuZXcgUmVmQ291bnREaXNwb3NhYmxlKHRoaXMsIHN1YnNjcmlwdGlvbik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFJlZkNvdW50RGlzcG9zYWJsZShwLCBzKSB7XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgUmVmQ291bnREaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcy5kaXNwb3NlKCk7XG4gICAgICAgIC0tdGhpcy5fcC5fY291bnQgPT09IDAgJiYgdGhpcy5fcC5fY29ubmVjdGFibGVTdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gUmVmQ291bnRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIENvbm5lY3RhYmxlT2JzZXJ2YWJsZSA9IFJ4LkNvbm5lY3RhYmxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ29ubmVjdGFibGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENvbm5lY3RhYmxlT2JzZXJ2YWJsZShzb3VyY2UsIHN1YmplY3QpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fY29ubmVjdGlvbiA9IG51bGw7XG4gICAgICB0aGlzLl9zb3VyY2UgPSBzb3VyY2UuYXNPYnNlcnZhYmxlKCk7XG4gICAgICB0aGlzLl9zdWJqZWN0ID0gc3ViamVjdDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIENvbm5lY3REaXNwb3NhYmxlKHBhcmVudCwgc3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLl9wID0gcGFyZW50O1xuICAgICAgdGhpcy5fcyA9IHN1YnNjcmlwdGlvbjtcbiAgICB9XG5cbiAgICBDb25uZWN0RGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLl9zKSB7XG4gICAgICAgIHRoaXMuX3MuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLl9zID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcC5fY29ubmVjdGlvbiA9IG51bGw7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5fY29ubmVjdGlvbikge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5fc291cmNlLnN1YnNjcmliZSh0aGlzLl9zdWJqZWN0KTtcbiAgICAgICAgdGhpcy5fY29ubmVjdGlvbiA9IG5ldyBDb25uZWN0RGlzcG9zYWJsZSh0aGlzLCBzdWJzY3JpcHRpb24pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb247XG4gICAgfTtcblxuICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3ViamVjdC5zdWJzY3JpYmUobyk7XG4gICAgfTtcblxuICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVmQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IFJlZkNvdW50T2JzZXJ2YWJsZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbm5lY3RhYmxlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UuIFRoaXMgb2JzZXJ2YWJsZSBzZXF1ZW5jZVxuICAgKiBjYW4gYmUgcmVzdWJzY3JpYmVkIHRvLCBldmVuIGlmIGFsbCBwcmlvciBzdWJzY3JpcHRpb25zIGhhdmUgZW5kZWQuICh1bmxpa2UgYC5wdWJsaXNoKCkucmVmQ291bnQoKWApXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2luZ2xlSW5zdGFuY2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcywgaGFzT2JzZXJ2YWJsZSA9IGZhbHNlLCBvYnNlcnZhYmxlO1xuXG4gICAgZnVuY3Rpb24gZ2V0T2JzZXJ2YWJsZSgpIHtcbiAgICAgIGlmICghaGFzT2JzZXJ2YWJsZSkge1xuICAgICAgICBoYXNPYnNlcnZhYmxlID0gdHJ1ZTtcbiAgICAgICAgb2JzZXJ2YWJsZSA9IHNvdXJjZVsnZmluYWxseSddKGZ1bmN0aW9uKCkgeyBoYXNPYnNlcnZhYmxlID0gZmFsc2U7IH0pLnB1Ymxpc2goKS5yZWZDb3VudCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiBnZXRPYnNlcnZhYmxlKCkuc3Vic2NyaWJlKG8pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgQ29ycmVsYXRlcyB0aGUgZWxlbWVudHMgb2YgdHdvIHNlcXVlbmNlcyBiYXNlZCBvbiBvdmVybGFwcGluZyBkdXJhdGlvbnMuXG4gICAqXG4gICAqICBAcGFyYW0ge09ic2VydmFibGV9IHJpZ2h0IFRoZSByaWdodCBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGpvaW4gZWxlbWVudHMgZm9yLlxuICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gbGVmdER1cmF0aW9uU2VsZWN0b3IgQSBmdW5jdGlvbiB0byBzZWxlY3QgdGhlIGR1cmF0aW9uIChleHByZXNzZWQgYXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSkgb2YgZWFjaCBlbGVtZW50IG9mIHRoZSBsZWZ0IG9ic2VydmFibGUgc2VxdWVuY2UsIHVzZWQgdG8gZGV0ZXJtaW5lIG92ZXJsYXAuXG4gICAqICBAcGFyYW0ge0Z1bmN0aW9ufSByaWdodER1cmF0aW9uU2VsZWN0b3IgQSBmdW5jdGlvbiB0byBzZWxlY3QgdGhlIGR1cmF0aW9uIChleHByZXNzZWQgYXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSkgb2YgZWFjaCBlbGVtZW50IG9mIHRoZSByaWdodCBvYnNlcnZhYmxlIHNlcXVlbmNlLCB1c2VkIHRvIGRldGVybWluZSBvdmVybGFwLlxuICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgQSBmdW5jdGlvbiBpbnZva2VkIHRvIGNvbXB1dGUgYSByZXN1bHQgZWxlbWVudCBmb3IgYW55IHR3byBvdmVybGFwcGluZyBlbGVtZW50cyBvZiB0aGUgbGVmdCBhbmQgcmlnaHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMuIFRoZSBwYXJhbWV0ZXJzIHBhc3NlZCB0byB0aGUgZnVuY3Rpb24gY29ycmVzcG9uZCB3aXRoIHRoZSBlbGVtZW50cyBmcm9tIHRoZSBsZWZ0IGFuZCByaWdodCBzb3VyY2Ugc2VxdWVuY2VzIGZvciB3aGljaCBvdmVybGFwIG9jY3Vycy5cbiAgICogIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgcmVzdWx0IGVsZW1lbnRzIGNvbXB1dGVkIGZyb20gc291cmNlIGVsZW1lbnRzIHRoYXQgaGF2ZSBhbiBvdmVybGFwcGluZyBkdXJhdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5qb2luID0gZnVuY3Rpb24gKHJpZ2h0LCBsZWZ0RHVyYXRpb25TZWxlY3RvciwgcmlnaHREdXJhdGlvblNlbGVjdG9yLCByZXN1bHRTZWxlY3Rvcikge1xuICAgIHZhciBsZWZ0ID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBncm91cCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgICB2YXIgbGVmdERvbmUgPSBmYWxzZSwgcmlnaHREb25lID0gZmFsc2U7XG4gICAgICB2YXIgbGVmdElkID0gMCwgcmlnaHRJZCA9IDA7XG4gICAgICB2YXIgbGVmdE1hcCA9IG5ldyBNYXAoKSwgcmlnaHRNYXAgPSBuZXcgTWFwKCk7XG4gICAgICB2YXIgaGFuZGxlRXJyb3IgPSBmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH07XG5cbiAgICAgIGdyb3VwLmFkZChsZWZ0LnN1YnNjcmliZShcbiAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFyIGlkID0gbGVmdElkKyssIG1kID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cbiAgICAgICAgICBsZWZ0TWFwLnNldChpZCwgdmFsdWUpO1xuICAgICAgICAgIGdyb3VwLmFkZChtZCk7XG5cbiAgICAgICAgICB2YXIgZHVyYXRpb24gPSB0cnlDYXRjaChsZWZ0RHVyYXRpb25TZWxlY3RvcikodmFsdWUpO1xuICAgICAgICAgIGlmIChkdXJhdGlvbiA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihkdXJhdGlvbi5lKTsgfVxuXG4gICAgICAgICAgbWQuc2V0RGlzcG9zYWJsZShkdXJhdGlvbi50YWtlKDEpLnN1YnNjcmliZShcbiAgICAgICAgICAgIG5vb3AsXG4gICAgICAgICAgICBoYW5kbGVFcnJvcixcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgbGVmdE1hcFsnZGVsZXRlJ10oaWQpICYmIGxlZnRNYXAuc2l6ZSA9PT0gMCAmJiBsZWZ0RG9uZSAmJiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgICAgIGdyb3VwLnJlbW92ZShtZCk7XG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICByaWdodE1hcC5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2gocmVzdWx0U2VsZWN0b3IpKHZhbHVlLCB2KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICAgICAgICBvLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVFcnJvcixcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGxlZnREb25lID0gdHJ1ZTtcbiAgICAgICAgICAocmlnaHREb25lIHx8IGxlZnRNYXAuc2l6ZSA9PT0gMCkgJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgZ3JvdXAuYWRkKHJpZ2h0LnN1YnNjcmliZShcbiAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFyIGlkID0gcmlnaHRJZCsrLCBtZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXG4gICAgICAgICAgcmlnaHRNYXAuc2V0KGlkLCB2YWx1ZSk7XG4gICAgICAgICAgZ3JvdXAuYWRkKG1kKTtcblxuICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRyeUNhdGNoKHJpZ2h0RHVyYXRpb25TZWxlY3RvcikodmFsdWUpO1xuICAgICAgICAgIGlmIChkdXJhdGlvbiA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihkdXJhdGlvbi5lKTsgfVxuXG4gICAgICAgICAgbWQuc2V0RGlzcG9zYWJsZShkdXJhdGlvbi50YWtlKDEpLnN1YnNjcmliZShcbiAgICAgICAgICAgIG5vb3AsXG4gICAgICAgICAgICBoYW5kbGVFcnJvcixcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmlnaHRNYXBbJ2RlbGV0ZSddKGlkKSAmJiByaWdodE1hcC5zaXplID09PSAwICYmIHJpZ2h0RG9uZSAmJiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgICAgIGdyb3VwLnJlbW92ZShtZCk7XG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICBsZWZ0TWFwLmZvckVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaChyZXN1bHRTZWxlY3RvcikodiwgdmFsdWUpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHQuZSk7IH1cbiAgICAgICAgICAgIG8ub25OZXh0KHJlc3VsdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZUVycm9yLFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmlnaHREb25lID0gdHJ1ZTtcbiAgICAgICAgICAobGVmdERvbmUgfHwgcmlnaHRNYXAuc2l6ZSA9PT0gMCkgJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIHJldHVybiBncm91cDtcbiAgICB9LCBsZWZ0KTtcbiAgfTtcblxuICAvKipcbiAgICogIENvcnJlbGF0ZXMgdGhlIGVsZW1lbnRzIG9mIHR3byBzZXF1ZW5jZXMgYmFzZWQgb24gb3ZlcmxhcHBpbmcgZHVyYXRpb25zLCBhbmQgZ3JvdXBzIHRoZSByZXN1bHRzLlxuICAgKlxuICAgKiAgQHBhcmFtIHtPYnNlcnZhYmxlfSByaWdodCBUaGUgcmlnaHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byBqb2luIGVsZW1lbnRzIGZvci5cbiAgICogIEBwYXJhbSB7RnVuY3Rpb259IGxlZnREdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb24gdG8gc2VsZWN0IHRoZSBkdXJhdGlvbiAoZXhwcmVzc2VkIGFzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UpIG9mIGVhY2ggZWxlbWVudCBvZiB0aGUgbGVmdCBvYnNlcnZhYmxlIHNlcXVlbmNlLCB1c2VkIHRvIGRldGVybWluZSBvdmVybGFwLlxuICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gcmlnaHREdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb24gdG8gc2VsZWN0IHRoZSBkdXJhdGlvbiAoZXhwcmVzc2VkIGFzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UpIG9mIGVhY2ggZWxlbWVudCBvZiB0aGUgcmlnaHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgdXNlZCB0byBkZXRlcm1pbmUgb3ZlcmxhcC5cbiAgICogIEBwYXJhbSB7RnVuY3Rpb259IHJlc3VsdFNlbGVjdG9yIEEgZnVuY3Rpb24gaW52b2tlZCB0byBjb21wdXRlIGEgcmVzdWx0IGVsZW1lbnQgZm9yIGFueSBlbGVtZW50IG9mIHRoZSBsZWZ0IHNlcXVlbmNlIHdpdGggb3ZlcmxhcHBpbmcgZWxlbWVudHMgZnJvbSB0aGUgcmlnaHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS4gVGhlIGZpcnN0IHBhcmFtZXRlciBwYXNzZWQgdG8gdGhlIGZ1bmN0aW9uIGlzIGFuIGVsZW1lbnQgb2YgdGhlIGxlZnQgc2VxdWVuY2UuIFRoZSBzZWNvbmQgcGFyYW1ldGVyIHBhc3NlZCB0byB0aGUgZnVuY3Rpb24gaXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIGVsZW1lbnRzIGZyb20gdGhlIHJpZ2h0IHNlcXVlbmNlIHRoYXQgb3ZlcmxhcCB3aXRoIHRoZSBsZWZ0IHNlcXVlbmNlJ3MgZWxlbWVudC5cbiAgICogIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgcmVzdWx0IGVsZW1lbnRzIGNvbXB1dGVkIGZyb20gc291cmNlIGVsZW1lbnRzIHRoYXQgaGF2ZSBhbiBvdmVybGFwcGluZyBkdXJhdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5ncm91cEpvaW4gPSBmdW5jdGlvbiAocmlnaHQsIGxlZnREdXJhdGlvblNlbGVjdG9yLCByaWdodER1cmF0aW9uU2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGdyb3VwID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcbiAgICAgIHZhciByID0gbmV3IFJlZkNvdW50RGlzcG9zYWJsZShncm91cCk7XG4gICAgICB2YXIgbGVmdE1hcCA9IG5ldyBNYXAoKSwgcmlnaHRNYXAgPSBuZXcgTWFwKCk7XG4gICAgICB2YXIgbGVmdElkID0gMCwgcmlnaHRJZCA9IDA7XG4gICAgICB2YXIgaGFuZGxlRXJyb3IgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgdi5vbkVycm9yKGUpOyB9OyB9O1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVFcnJvcihlKSB7IH07XG5cbiAgICAgIGdyb3VwLmFkZChsZWZ0LnN1YnNjcmliZShcbiAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFyIHMgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAgIHZhciBpZCA9IGxlZnRJZCsrO1xuICAgICAgICAgIGxlZnRNYXAuc2V0KGlkLCBzKTtcblxuICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaChyZXN1bHRTZWxlY3RvcikodmFsdWUsIGFkZFJlZihzLCByKSk7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgIGxlZnRNYXAuZm9yRWFjaChoYW5kbGVFcnJvcihyZXN1bHQuZSkpO1xuICAgICAgICAgICAgcmV0dXJuIG8ub25FcnJvcihyZXN1bHQuZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG8ub25OZXh0KHJlc3VsdCk7XG5cbiAgICAgICAgICByaWdodE1hcC5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7IHMub25OZXh0KHYpOyB9KTtcblxuICAgICAgICAgIHZhciBtZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICAgIGdyb3VwLmFkZChtZCk7XG5cbiAgICAgICAgICB2YXIgZHVyYXRpb24gPSB0cnlDYXRjaChsZWZ0RHVyYXRpb25TZWxlY3RvcikodmFsdWUpO1xuICAgICAgICAgIGlmIChkdXJhdGlvbiA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgIGxlZnRNYXAuZm9yRWFjaChoYW5kbGVFcnJvcihkdXJhdGlvbi5lKSk7XG4gICAgICAgICAgICByZXR1cm4gby5vbkVycm9yKGR1cmF0aW9uLmUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1kLnNldERpc3Bvc2FibGUoZHVyYXRpb24udGFrZSgxKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICBub29wLFxuICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgbGVmdE1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGUpKTtcbiAgICAgICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgbGVmdE1hcFsnZGVsZXRlJ10oaWQpICYmIHMub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgICAgZ3JvdXAucmVtb3ZlKG1kKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBsZWZ0TWFwLmZvckVhY2goaGFuZGxlRXJyb3IoZSkpO1xuICAgICAgICAgIG8ub25FcnJvcihlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkgeyBvLm9uQ29tcGxldGVkKCk7IH0pXG4gICAgICApO1xuXG4gICAgICBncm91cC5hZGQocmlnaHQuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YXIgaWQgPSByaWdodElkKys7XG4gICAgICAgICAgcmlnaHRNYXAuc2V0KGlkLCB2YWx1ZSk7XG5cbiAgICAgICAgICB2YXIgbWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgICBncm91cC5hZGQobWQpO1xuXG4gICAgICAgICAgdmFyIGR1cmF0aW9uID0gdHJ5Q2F0Y2gocmlnaHREdXJhdGlvblNlbGVjdG9yKSh2YWx1ZSk7XG4gICAgICAgICAgaWYgKGR1cmF0aW9uID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgbGVmdE1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGR1cmF0aW9uLmUpKTtcbiAgICAgICAgICAgIHJldHVybiBvLm9uRXJyb3IoZHVyYXRpb24uZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbWQuc2V0RGlzcG9zYWJsZShkdXJhdGlvbi50YWtlKDEpLnN1YnNjcmliZShcbiAgICAgICAgICAgIG5vb3AsXG4gICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICBsZWZ0TWFwLmZvckVhY2goaGFuZGxlRXJyb3IoZSkpO1xuICAgICAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByaWdodE1hcFsnZGVsZXRlJ10oaWQpO1xuICAgICAgICAgICAgICBncm91cC5yZW1vdmUobWQpO1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgbGVmdE1hcC5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7IHYub25OZXh0KHZhbHVlKTsgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgbGVmdE1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGUpKTtcbiAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gcjtcbiAgICB9LCBsZWZ0KTtcbiAgfTtcblxuICBmdW5jdGlvbiB0b0FycmF5KHgpIHsgcmV0dXJuIHgudG9BcnJheSgpOyB9XG5cbiAgLyoqXG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIHplcm8gb3IgbW9yZSBidWZmZXJzLlxuICAgKiAgQHBhcmFtIHtNaXhlZH0gYnVmZmVyT3BlbmluZ3NPckNsb3NpbmdTZWxlY3RvciBPYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGRlbm90ZSB0aGUgY3JlYXRpb24gb2YgbmV3IHdpbmRvd3MsIG9yLCBhIGZ1bmN0aW9uIGludm9rZWQgdG8gZGVmaW5lIHRoZSBib3VuZGFyaWVzIG9mIHRoZSBwcm9kdWNlZCB3aW5kb3dzIChhIG5ldyB3aW5kb3cgaXMgc3RhcnRlZCB3aGVuIHRoZSBwcmV2aW91cyBvbmUgaXMgY2xvc2VkLCByZXN1bHRpbmcgaW4gbm9uLW92ZXJsYXBwaW5nIHdpbmRvd3MpLlxuICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gW2J1ZmZlckNsb3NpbmdTZWxlY3Rvcl0gQSBmdW5jdGlvbiBpbnZva2VkIHRvIGRlZmluZSB0aGUgY2xvc2luZyBvZiBlYWNoIHByb2R1Y2VkIHdpbmRvdy4gSWYgYSBjbG9zaW5nIHNlbGVjdG9yIGZ1bmN0aW9uIGlzIHNwZWNpZmllZCBmb3IgdGhlIGZpcnN0IHBhcmFtZXRlciwgdGhpcyBwYXJhbWV0ZXIgaXMgaWdub3JlZC5cbiAgICogIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIHdpbmRvd3MuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uYnVmZmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLndpbmRvdy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgICAuZmxhdE1hcCh0b0FycmF5KTtcbiAgfTtcblxuICAvKipcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gemVybyBvciBtb3JlIHdpbmRvd3MuXG4gICAqXG4gICAqICBAcGFyYW0ge01peGVkfSB3aW5kb3dPcGVuaW5nc09yQ2xvc2luZ1NlbGVjdG9yIE9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2UgZWxlbWVudHMgZGVub3RlIHRoZSBjcmVhdGlvbiBvZiBuZXcgd2luZG93cywgb3IsIGEgZnVuY3Rpb24gaW52b2tlZCB0byBkZWZpbmUgdGhlIGJvdW5kYXJpZXMgb2YgdGhlIHByb2R1Y2VkIHdpbmRvd3MgKGEgbmV3IHdpbmRvdyBpcyBzdGFydGVkIHdoZW4gdGhlIHByZXZpb3VzIG9uZSBpcyBjbG9zZWQsIHJlc3VsdGluZyBpbiBub24tb3ZlcmxhcHBpbmcgd2luZG93cykuXG4gICAqICBAcGFyYW0ge0Z1bmN0aW9ufSBbd2luZG93Q2xvc2luZ1NlbGVjdG9yXSBBIGZ1bmN0aW9uIGludm9rZWQgdG8gZGVmaW5lIHRoZSBjbG9zaW5nIG9mIGVhY2ggcHJvZHVjZWQgd2luZG93LiBJZiBhIGNsb3Npbmcgc2VsZWN0b3IgZnVuY3Rpb24gaXMgc3BlY2lmaWVkIGZvciB0aGUgZmlyc3QgcGFyYW1ldGVyLCB0aGlzIHBhcmFtZXRlciBpcyBpZ25vcmVkLlxuICAgKiAgQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2Ygd2luZG93cy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by53aW5kb3cgPSBmdW5jdGlvbiAod2luZG93T3BlbmluZ3NPckNsb3NpbmdTZWxlY3Rvciwgd2luZG93Q2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgdHlwZW9mIGFyZ3VtZW50c1swXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIG9ic2VydmFibGVXaW5kb3dXaXRoQm91bmRhcmllcy5jYWxsKHRoaXMsIHdpbmRvd09wZW5pbmdzT3JDbG9zaW5nU2VsZWN0b3IpO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvd09wZW5pbmdzT3JDbG9zaW5nU2VsZWN0b3IgPT09ICdmdW5jdGlvbicgP1xuICAgICAgb2JzZXJ2YWJsZVdpbmRvd1dpdGhDbG9zaW5nU2VsZWN0b3IuY2FsbCh0aGlzLCB3aW5kb3dPcGVuaW5nc09yQ2xvc2luZ1NlbGVjdG9yKSA6XG4gICAgICBvYnNlcnZhYmxlV2luZG93V2l0aE9wZW5pbmdzLmNhbGwodGhpcywgd2luZG93T3BlbmluZ3NPckNsb3NpbmdTZWxlY3Rvciwgd2luZG93Q2xvc2luZ1NlbGVjdG9yKTtcbiAgfTtcblxuICBmdW5jdGlvbiBvYnNlcnZhYmxlV2luZG93V2l0aE9wZW5pbmdzKHdpbmRvd09wZW5pbmdzLCB3aW5kb3dDbG9zaW5nU2VsZWN0b3IpIHtcbiAgICByZXR1cm4gd2luZG93T3BlbmluZ3MuZ3JvdXBKb2luKHRoaXMsIHdpbmRvd0Nsb3NpbmdTZWxlY3Rvciwgb2JzZXJ2YWJsZUVtcHR5LCBmdW5jdGlvbiAoXywgd2luKSB7XG4gICAgICByZXR1cm4gd2luO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZVdpbmRvd1dpdGhCb3VuZGFyaWVzKHdpbmRvd0JvdW5kYXJpZXMpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgd2luID0gbmV3IFN1YmplY3QoKSxcbiAgICAgICAgZCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCksXG4gICAgICAgIHIgPSBuZXcgUmVmQ291bnREaXNwb3NhYmxlKGQpO1xuXG4gICAgICBvYnNlcnZlci5vbk5leHQoYWRkUmVmKHdpbiwgcikpO1xuXG4gICAgICBkLmFkZChzb3VyY2Uuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHdpbi5vbk5leHQoeCk7XG4gICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHdpbi5vbkVycm9yKGVycik7XG4gICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZXJyKTtcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICB9KSk7XG5cbiAgICAgIGlzUHJvbWlzZSh3aW5kb3dCb3VuZGFyaWVzKSAmJiAod2luZG93Qm91bmRhcmllcyA9IG9ic2VydmFibGVGcm9tUHJvbWlzZSh3aW5kb3dCb3VuZGFyaWVzKSk7XG5cbiAgICAgIGQuYWRkKHdpbmRvd0JvdW5kYXJpZXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh3KSB7XG4gICAgICAgIHdpbi5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB3aW4gPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICBvYnNlcnZlci5vbk5leHQoYWRkUmVmKHdpbiwgcikpO1xuICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICB3aW4ub25FcnJvcihlcnIpO1xuICAgICAgICBvYnNlcnZlci5vbkVycm9yKGVycik7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbi5vbkNvbXBsZXRlZCgpO1xuICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcjtcbiAgICB9LCBzb3VyY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZVdpbmRvd1dpdGhDbG9zaW5nU2VsZWN0b3Iod2luZG93Q2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIG0gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICBkID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUobSksXG4gICAgICAgIHIgPSBuZXcgUmVmQ291bnREaXNwb3NhYmxlKGQpLFxuICAgICAgICB3aW4gPSBuZXcgU3ViamVjdCgpO1xuICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZih3aW4sIHIpKTtcbiAgICAgIGQuYWRkKHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICB3aW4ub25OZXh0KHgpO1xuICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHdpbi5vbkVycm9yKGVycik7XG4gICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlcnIpO1xuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdpbi5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICB9KSk7XG5cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdpbmRvd0Nsb3NlICgpIHtcbiAgICAgICAgdmFyIHdpbmRvd0Nsb3NlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHdpbmRvd0Nsb3NlID0gd2luZG93Q2xvc2luZ1NlbGVjdG9yKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlzUHJvbWlzZSh3aW5kb3dDbG9zZSkgJiYgKHdpbmRvd0Nsb3NlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHdpbmRvd0Nsb3NlKSk7XG5cbiAgICAgICAgdmFyIG0xID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIG0uc2V0RGlzcG9zYWJsZShtMSk7XG4gICAgICAgIG0xLnNldERpc3Bvc2FibGUod2luZG93Q2xvc2UudGFrZSgxKS5zdWJzY3JpYmUobm9vcCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHdpbi5vbkVycm9yKGVycik7XG4gICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlcnIpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2luLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgd2luID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQoYWRkUmVmKHdpbiwgcikpO1xuICAgICAgICAgIGNyZWF0ZVdpbmRvd0Nsb3NlKCk7XG4gICAgICAgIH0pKTtcbiAgICAgIH1cblxuICAgICAgY3JlYXRlV2luZG93Q2xvc2UoKTtcbiAgICAgIHJldHVybiByO1xuICAgIH0sIHNvdXJjZSk7XG4gIH1cblxuICB2YXIgUGFpcndpc2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhQYWlyd2lzZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUGFpcndpc2VPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBQYWlyd2lzZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgUGFpcndpc2VPYnNlcnZlcihvKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBQYWlyd2lzZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgUGFpcndpc2VPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhQYWlyd2lzZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFBhaXJ3aXNlT2JzZXJ2ZXIobykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gbnVsbDtcbiAgICAgIHRoaXMuX2hwID0gZmFsc2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBQYWlyd2lzZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9ocCkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dChbdGhpcy5fcCwgeF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faHAgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5fcCA9IHg7XG4gICAgfTtcbiAgICBQYWlyd2lzZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHsgdGhpcy5fby5vbkVycm9yKGVycik7IH07XG4gICAgUGFpcndpc2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gUGFpcndpc2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgb2JzZXJ2YWJsZSB0aGF0IHRyaWdnZXJzIG9uIHRoZSBzZWNvbmQgYW5kIHN1YnNlcXVlbnQgdHJpZ2dlcmluZ3Mgb2YgdGhlIGlucHV0IG9ic2VydmFibGUuXG4gICAqIFRoZSBOdGggdHJpZ2dlcmluZyBvZiB0aGUgaW5wdXQgb2JzZXJ2YWJsZSBwYXNzZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBOLTF0aCBhbmQgTnRoIHRyaWdnZXJpbmcgYXMgYSBwYWlyLlxuICAgKiBUaGUgYXJndW1lbnQgcGFzc2VkIHRvIHRoZSBOLTF0aCB0cmlnZ2VyaW5nIGlzIGhlbGQgaW4gaGlkZGVuIGludGVybmFsIHN0YXRlIHVudGlsIHRoZSBOdGggdHJpZ2dlcmluZyBvY2N1cnMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHRoYXQgdHJpZ2dlcnMgb24gc3VjY2Vzc2l2ZSBwYWlycyBvZiBvYnNlcnZhdGlvbnMgZnJvbSB0aGUgaW5wdXQgb2JzZXJ2YWJsZSBhcyBhbiBhcnJheS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5wYWlyd2lzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IFBhaXJ3aXNlT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0d28gb2JzZXJ2YWJsZXMgd2hpY2ggcGFydGl0aW9uIHRoZSBvYnNlcnZhdGlvbnMgb2YgdGhlIHNvdXJjZSBieSB0aGUgZ2l2ZW4gZnVuY3Rpb24uXG4gICAqIFRoZSBmaXJzdCB3aWxsIHRyaWdnZXIgb2JzZXJ2YXRpb25zIGZvciB0aG9zZSB2YWx1ZXMgZm9yIHdoaWNoIHRoZSBwcmVkaWNhdGUgcmV0dXJucyB0cnVlLlxuICAgKiBUaGUgc2Vjb25kIHdpbGwgdHJpZ2dlciBvYnNlcnZhdGlvbnMgZm9yIHRob3NlIHZhbHVlcyB3aGVyZSB0aGUgcHJlZGljYXRlIHJldHVybnMgZmFsc2UuXG4gICAqIFRoZSBwcmVkaWNhdGUgaXMgZXhlY3V0ZWQgb25jZSBmb3IgZWFjaCBzdWJzY3JpYmVkIG9ic2VydmVyLlxuICAgKiBCb3RoIGFsc28gcHJvcGFnYXRlIGFsbCBlcnJvciBvYnNlcnZhdGlvbnMgYXJpc2luZyBmcm9tIHRoZSBzb3VyY2UgYW5kIGVhY2ggY29tcGxldGVzXG4gICAqIHdoZW4gdGhlIHNvdXJjZSBjb21wbGV0ZXMuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZVxuICAgKiAgICBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoaWNoIG91dHB1dCBPYnNlcnZhYmxlIHdpbGwgdHJpZ2dlciBhIHBhcnRpY3VsYXIgb2JzZXJ2YXRpb24uXG4gICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICogICAgQW4gYXJyYXkgb2Ygb2JzZXJ2YWJsZXMuIFRoZSBmaXJzdCB0cmlnZ2VycyB3aGVuIHRoZSBwcmVkaWNhdGUgcmV0dXJucyB0cnVlLFxuICAgKiAgICBhbmQgdGhlIHNlY29uZCB0cmlnZ2VycyB3aGVuIHRoZSBwcmVkaWNhdGUgcmV0dXJucyBmYWxzZS5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnBhcnRpdGlvbiA9IGZ1bmN0aW9uKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHZhciBmbiA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBbXG4gICAgICB0aGlzLmZpbHRlcihwcmVkaWNhdGUsIHRoaXNBcmcpLFxuICAgICAgdGhpcy5maWx0ZXIoZnVuY3Rpb24gKHgsIGksIG8pIHsgcmV0dXJuICFmbih4LCBpLCBvKTsgfSlcbiAgICBdO1xuICB9O1xuXG4gIHZhciBXaGlsZUVudW1lcmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoV2hpbGVFbnVtZXJhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFdoaWxlRW51bWVyYWJsZShjLCBzKSB7XG4gICAgICB0aGlzLmMgPSBjO1xuICAgICAgdGhpcy5zID0gcztcbiAgICB9XG4gICAgV2hpbGVFbnVtZXJhYmxlLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5jKCkgP1xuICAgICAgICAgICB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogc2VsZi5zIH0gOlxuICAgICAgICAgICB7IGRvbmU6IHRydWUsIHZhbHVlOiB2b2lkIDAgfTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiBXaGlsZUVudW1lcmFibGU7XG4gIH0oRW51bWVyYWJsZSkpO1xuICBcbiAgZnVuY3Rpb24gZW51bWVyYWJsZVdoaWxlKGNvbmRpdGlvbiwgc291cmNlKSB7XG4gICAgcmV0dXJuIG5ldyBXaGlsZUVudW1lcmFibGUoY29uZGl0aW9uLCBzb3VyY2UpO1xuICB9ICBcblxuICAgLyoqXG4gICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSBzZWxlY3RvciBvbiB0aGUgc291cmNlIHNlcXVlbmNlLCB3aXRob3V0IHNoYXJpbmcgc3Vic2NyaXB0aW9ucy5cbiAgICogIFRoaXMgb3BlcmF0b3IgYWxsb3dzIGZvciBhIGZsdWVudCBzdHlsZSBvZiB3cml0aW5nIHF1ZXJpZXMgdGhhdCB1c2UgdGhlIHNhbWUgc2VxdWVuY2UgbXVsdGlwbGUgdGltZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIFNlbGVjdG9yIGZ1bmN0aW9uIHdoaWNoIGNhbiB1c2UgdGhlIHNvdXJjZSBzZXF1ZW5jZSBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZCwgd2l0aG91dCBzaGFyaW5nIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoaW4gYSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5sZXRCaW5kID0gb2JzZXJ2YWJsZVByb3RvWydsZXQnXSA9IGZ1bmN0aW9uIChmdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmModGhpcyk7XG4gIH07XG5cbiAgIC8qKlxuICAgKiAgRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIG9ic2VydmFibGUgY29sbGVjdGlvbiBjb250YWlucyB2YWx1ZXMuIFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgMSAtIHJlcyA9IFJ4Lk9ic2VydmFibGUuaWYoY29uZGl0aW9uLCBvYnMxKTtcbiAgICogIDIgLSByZXMgPSBSeC5PYnNlcnZhYmxlLmlmKGNvbmRpdGlvbiwgb2JzMSwgb2JzMik7XG4gICAqICAzIC0gcmVzID0gUnguT2JzZXJ2YWJsZS5pZihjb25kaXRpb24sIG9iczEsIHNjaGVkdWxlcik7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmRpdGlvbiBUaGUgY29uZGl0aW9uIHdoaWNoIGRldGVybWluZXMgaWYgdGhlIHRoZW5Tb3VyY2Ugb3IgZWxzZVNvdXJjZSB3aWxsIGJlIHJ1bi5cbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSB0aGVuU291cmNlIFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIG9yIFByb21pc2UgdGhhdCB3aWxsIGJlIHJ1biBpZiB0aGUgY29uZGl0aW9uIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZS5cbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBbZWxzZVNvdXJjZV0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugb3IgUHJvbWlzZSB0aGF0IHdpbGwgYmUgcnVuIGlmIHRoZSBjb25kaXRpb24gZnVuY3Rpb24gcmV0dXJucyBmYWxzZS4gSWYgdGhpcyBpcyBub3QgcHJvdmlkZWQsIGl0IGRlZmF1bHRzIHRvIFJ4Lk9ic2VydmFiZS5FbXB0eSB3aXRoIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBpcyBlaXRoZXIgdGhlIHRoZW5Tb3VyY2Ugb3IgZWxzZVNvdXJjZS5cbiAgICovXG4gIE9ic2VydmFibGVbJ2lmJ10gPSBmdW5jdGlvbiAoY29uZGl0aW9uLCB0aGVuU291cmNlLCBlbHNlU291cmNlT3JTY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gb2JzZXJ2YWJsZURlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIGVsc2VTb3VyY2VPclNjaGVkdWxlciB8fCAoZWxzZVNvdXJjZU9yU2NoZWR1bGVyID0gb2JzZXJ2YWJsZUVtcHR5KCkpO1xuXG4gICAgICBpc1Byb21pc2UodGhlblNvdXJjZSkgJiYgKHRoZW5Tb3VyY2UgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UodGhlblNvdXJjZSkpO1xuICAgICAgaXNQcm9taXNlKGVsc2VTb3VyY2VPclNjaGVkdWxlcikgJiYgKGVsc2VTb3VyY2VPclNjaGVkdWxlciA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShlbHNlU291cmNlT3JTY2hlZHVsZXIpKTtcblxuICAgICAgLy8gQXNzdW1lIGEgc2NoZWR1bGVyIGZvciBlbXB0eSBvbmx5XG4gICAgICB0eXBlb2YgZWxzZVNvdXJjZU9yU2NoZWR1bGVyLm5vdyA9PT0gJ2Z1bmN0aW9uJyAmJiAoZWxzZVNvdXJjZU9yU2NoZWR1bGVyID0gb2JzZXJ2YWJsZUVtcHR5KGVsc2VTb3VyY2VPclNjaGVkdWxlcikpO1xuICAgICAgcmV0dXJuIGNvbmRpdGlvbigpID8gdGhlblNvdXJjZSA6IGVsc2VTb3VyY2VPclNjaGVkdWxlcjtcbiAgICB9KTtcbiAgfTtcblxuICAgLyoqXG4gICAqICBDb25jYXRlbmF0ZXMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzIG9idGFpbmVkIGJ5IHJ1bm5pbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZm9yIGVhY2ggZWxlbWVudCBpbiBzb3VyY2UuXG4gICAqIFRoZXJlIGlzIGFuIGFsaWFzIGZvciB0aGlzIG1ldGhvZCBjYWxsZWQgJ2ZvckluJyBmb3IgYnJvd3NlcnMgPElFOVxuICAgKiBAcGFyYW0ge0FycmF5fSBzb3VyY2VzIEFuIGFycmF5IG9mIHZhbHVlcyB0byB0dXJuIGludG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgQSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGl0ZW0gaW4gdGhlIHNvdXJjZXMgYXJyYXkgdG8gdHVybiBpdCBpbnRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGZyb20gdGhlIGNvbmNhdGVuYXRlZCBvYnNlcnZhYmxlIHNlcXVlbmNlcy5cbiAgICovXG4gIE9ic2VydmFibGVbJ2ZvciddID0gT2JzZXJ2YWJsZS5mb3JJbiA9IGZ1bmN0aW9uIChzb3VyY2VzLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykge1xuICAgIHJldHVybiBlbnVtZXJhYmxlT2Yoc291cmNlcywgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpLmNvbmNhdCgpO1xuICB9O1xuXG4gICAvKipcbiAgICogIFJlcGVhdHMgc291cmNlIGFzIGxvbmcgYXMgY29uZGl0aW9uIGhvbGRzIGVtdWxhdGluZyBhIHdoaWxlIGxvb3AuXG4gICAqIFRoZXJlIGlzIGFuIGFsaWFzIGZvciB0aGlzIG1ldGhvZCBjYWxsZWQgJ3doaWxlRG8nIGZvciBicm93c2VycyA8SUU5XG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmRpdGlvbiBUaGUgY29uZGl0aW9uIHdoaWNoIGRldGVybWluZXMgaWYgdGhlIHNvdXJjZSB3aWxsIGJlIHJlcGVhdGVkLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHNvdXJjZSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHdpbGwgYmUgcnVuIGlmIHRoZSBjb25kaXRpb24gZnVuY3Rpb24gcmV0dXJucyB0cnVlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBpcyByZXBlYXRlZCBhcyBsb25nIGFzIHRoZSBjb25kaXRpb24gaG9sZHMuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZVdoaWxlRG8gPSBPYnNlcnZhYmxlWyd3aGlsZSddID0gT2JzZXJ2YWJsZS53aGlsZURvID0gZnVuY3Rpb24gKGNvbmRpdGlvbiwgc291cmNlKSB7XG4gICAgaXNQcm9taXNlKHNvdXJjZSkgJiYgKHNvdXJjZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShzb3VyY2UpKTtcbiAgICByZXR1cm4gZW51bWVyYWJsZVdoaWxlKGNvbmRpdGlvbiwgc291cmNlKS5jb25jYXQoKTtcbiAgfTtcblxuICAgLyoqXG4gICAqICBSZXBlYXRzIHNvdXJjZSBhcyBsb25nIGFzIGNvbmRpdGlvbiBob2xkcyBlbXVsYXRpbmcgYSBkbyB3aGlsZSBsb29wLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25kaXRpb24gVGhlIGNvbmRpdGlvbiB3aGljaCBkZXRlcm1pbmVzIGlmIHRoZSBzb3VyY2Ugd2lsbCBiZSByZXBlYXRlZC5cbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBzb3VyY2UgVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCB3aWxsIGJlIHJ1biBpZiB0aGUgY29uZGl0aW9uIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggaXMgcmVwZWF0ZWQgYXMgbG9uZyBhcyB0aGUgY29uZGl0aW9uIGhvbGRzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmRvV2hpbGUgPSBmdW5jdGlvbiAoY29uZGl0aW9uKSB7XG4gICAgcmV0dXJuIG9ic2VydmFibGVDb25jYXQoW3RoaXMsIG9ic2VydmFibGVXaGlsZURvKGNvbmRpdGlvbiwgdGhpcyldKTtcbiAgfTtcblxuICAgLyoqXG4gICAqICBVc2VzIHNlbGVjdG9yIHRvIGRldGVybWluZSB3aGljaCBzb3VyY2UgaW4gc291cmNlcyB0byB1c2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIFRoZSBmdW5jdGlvbiB3aGljaCBleHRyYWN0cyB0aGUgdmFsdWUgZm9yIHRvIHRlc3QgaW4gYSBjYXNlIHN0YXRlbWVudC5cbiAgICogQHBhcmFtIHtBcnJheX0gc291cmNlcyBBIG9iamVjdCB3aGljaCBoYXMga2V5cyB3aGljaCBjb3JyZXNwb25kIHRvIHRoZSBjYXNlIHN0YXRlbWVudCBsYWJlbHMuXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gW2Vsc2VTb3VyY2VdIFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIG9yIFByb21pc2UgdGhhdCB3aWxsIGJlIHJ1biBpZiB0aGUgc291cmNlcyBhcmUgbm90IG1hdGNoZWQuIElmIHRoaXMgaXMgbm90IHByb3ZpZGVkLCBpdCBkZWZhdWx0cyB0byBSeC5PYnNlcnZhYmUuZW1wdHkgd2l0aCB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlci5cbiAgICpcbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggaXMgZGV0ZXJtaW5lZCBieSBhIGNhc2Ugc3RhdGVtZW50LlxuICAgKi9cbiAgT2JzZXJ2YWJsZVsnY2FzZSddID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBzb3VyY2VzLCBkZWZhdWx0U291cmNlT3JTY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gb2JzZXJ2YWJsZURlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlzUHJvbWlzZShkZWZhdWx0U291cmNlT3JTY2hlZHVsZXIpICYmIChkZWZhdWx0U291cmNlT3JTY2hlZHVsZXIgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoZGVmYXVsdFNvdXJjZU9yU2NoZWR1bGVyKSk7XG4gICAgICBkZWZhdWx0U291cmNlT3JTY2hlZHVsZXIgfHwgKGRlZmF1bHRTb3VyY2VPclNjaGVkdWxlciA9IG9ic2VydmFibGVFbXB0eSgpKTtcblxuICAgICAgaXNTY2hlZHVsZXIoZGVmYXVsdFNvdXJjZU9yU2NoZWR1bGVyKSAmJiAoZGVmYXVsdFNvdXJjZU9yU2NoZWR1bGVyID0gb2JzZXJ2YWJsZUVtcHR5KGRlZmF1bHRTb3VyY2VPclNjaGVkdWxlcikpO1xuXG4gICAgICB2YXIgcmVzdWx0ID0gc291cmNlc1tzZWxlY3RvcigpXTtcbiAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG5cbiAgICAgIHJldHVybiByZXN1bHQgfHwgZGVmYXVsdFNvdXJjZU9yU2NoZWR1bGVyO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBFeHBhbmRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEV4cGFuZE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRXhwYW5kT2JzZXJ2YWJsZShzb3VyY2UsIGZuLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlUmVjdXJzaXZlKGFyZ3MsIHJlY3Vyc2UpIHtcbiAgICAgIHZhciBzdGF0ZSA9IGFyZ3NbMF0sIHNlbGYgPSBhcmdzWzFdO1xuICAgICAgdmFyIHdvcms7XG4gICAgICBpZiAoc3RhdGUucS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHdvcmsgPSBzdGF0ZS5xLnNoaWZ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5pc0FjcXVpcmVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBtMSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgc3RhdGUuZC5hZGQobTEpO1xuICAgICAgbTEuc2V0RGlzcG9zYWJsZSh3b3JrLnN1YnNjcmliZShuZXcgRXhwYW5kT2JzZXJ2ZXIoc3RhdGUsIHNlbGYsIG0xKSkpO1xuICAgICAgcmVjdXJzZShbc3RhdGUsIHNlbGZdKTtcbiAgICB9XG5cbiAgICBFeHBhbmRPYnNlcnZhYmxlLnByb3RvdHlwZS5fZW5zdXJlQWN0aXZlID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICB2YXIgaXNPd25lciA9IGZhbHNlO1xuICAgICAgaWYgKHN0YXRlLnEubGVuZ3RoID4gMCkge1xuICAgICAgICBpc093bmVyID0gIXN0YXRlLmlzQWNxdWlyZWQ7XG4gICAgICAgIHN0YXRlLmlzQWNxdWlyZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaXNPd25lciAmJiBzdGF0ZS5tLnNldERpc3Bvc2FibGUodGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKFtzdGF0ZSwgdGhpc10sIHNjaGVkdWxlUmVjdXJzaXZlKSk7XG4gICAgfTtcblxuICAgIEV4cGFuZE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIG0gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICBkID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUobSksXG4gICAgICAgIHN0YXRlID0ge1xuICAgICAgICAgIHE6IFtdLFxuICAgICAgICAgIG06IG0sXG4gICAgICAgICAgZDogZCxcbiAgICAgICAgICBhY3RpdmVDb3VudDogMCxcbiAgICAgICAgICBpc0FjcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICBvOiBvXG4gICAgICAgIH07XG5cbiAgICAgIHN0YXRlLnEucHVzaCh0aGlzLnNvdXJjZSk7XG4gICAgICBzdGF0ZS5hY3RpdmVDb3VudCsrO1xuICAgICAgdGhpcy5fZW5zdXJlQWN0aXZlKHN0YXRlKTtcbiAgICAgIHJldHVybiBkO1xuICAgIH07XG5cbiAgICByZXR1cm4gRXhwYW5kT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBFeHBhbmRPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFeHBhbmRPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBFeHBhbmRPYnNlcnZlcihzdGF0ZSwgcGFyZW50LCBtMSkge1xuICAgICAgdGhpcy5fcyA9IHN0YXRlO1xuICAgICAgdGhpcy5fcCA9IHBhcmVudDtcbiAgICAgIHRoaXMuX20xID0gbTE7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBFeHBhbmRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9zLm8ub25OZXh0KHgpO1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX3AuX2ZuKSh4KTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9zLm8ub25FcnJvcihyZXN1bHQuZSk7IH1cbiAgICAgIHRoaXMuX3MucS5wdXNoKHJlc3VsdCk7XG4gICAgICB0aGlzLl9zLmFjdGl2ZUNvdW50Kys7XG4gICAgICB0aGlzLl9wLl9lbnN1cmVBY3RpdmUodGhpcy5fcyk7XG4gICAgfTtcblxuICAgIEV4cGFuZE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9zLm8ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgRXhwYW5kT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3MuZC5yZW1vdmUodGhpcy5fbTEpO1xuICAgICAgdGhpcy5fcy5hY3RpdmVDb3VudC0tO1xuICAgICAgdGhpcy5fcy5hY3RpdmVDb3VudCA9PT0gMCAmJiB0aGlzLl9zLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEV4cGFuZE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAgLyoqXG4gICAqICBFeHBhbmRzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgcmVjdXJzaXZlbHkgaW52b2tpbmcgc2VsZWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIFNlbGVjdG9yIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBwcm9kdWNlZCBlbGVtZW50LCByZXN1bHRpbmcgaW4gYW5vdGhlciBzZXF1ZW5jZSB0byB3aGljaCB0aGUgc2VsZWN0b3Igd2lsbCBiZSBpbnZva2VkIHJlY3Vyc2l2ZWx5IGFnYWluLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIG9uIHdoaWNoIHRvIHBlcmZvcm0gdGhlIGV4cGFuc2lvbi4gSWYgbm90IHByb3ZpZGVkLCB0aGlzIGRlZmF1bHRzIHRvIHRoZSBjdXJyZW50IHRocmVhZCBzY2hlZHVsZXIuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYWxsIHRoZSBlbGVtZW50cyBwcm9kdWNlZCBieSB0aGUgcmVjdXJzaXZlIGV4cGFuc2lvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5leHBhbmQgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgRXhwYW5kT2JzZXJ2YWJsZSh0aGlzLCBzZWxlY3Rvciwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBhcmd1bWVudHNUb0FycmF5KCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gYXJncztcbiAgfVxuXG4gIHZhciBGb3JrSm9pbk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZvcmtKb2luT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBGb3JrSm9pbk9ic2VydmFibGUoc291cmNlcywgY2IpIHtcbiAgICAgIHRoaXMuX3NvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgdGhpcy5fY2IgPSBjYjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEZvcmtKb2luT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICBpZiAodGhpcy5fc291cmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfVxuXG4gICAgICB2YXIgY291bnQgPSB0aGlzLl9zb3VyY2VzLmxlbmd0aDtcbiAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgZmluaXNoZWQ6IGZhbHNlLFxuICAgICAgICBoYXNSZXN1bHRzOiBuZXcgQXJyYXkoY291bnQpLFxuICAgICAgICBoYXNDb21wbGV0ZWQ6IG5ldyBBcnJheShjb3VudCksXG4gICAgICAgIHJlc3VsdHM6IG5ldyBBcnJheShjb3VudClcbiAgICAgIH07XG5cbiAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLl9zb3VyY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLl9zb3VyY2VzW2ldO1xuICAgICAgICBpc1Byb21pc2Uoc291cmNlKSAmJiAoc291cmNlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHNvdXJjZSkpO1xuICAgICAgICBzdWJzY3JpcHRpb25zLmFkZChzb3VyY2Uuc3Vic2NyaWJlKG5ldyBGb3JrSm9pbk9ic2VydmVyKG8sIHN0YXRlLCBpLCB0aGlzLl9jYiwgc3Vic2NyaXB0aW9ucykpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbnM7XG4gICAgfTtcblxuICAgIHJldHVybiBGb3JrSm9pbk9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRm9ya0pvaW5PYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGb3JrSm9pbk9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZvcmtKb2luT2JzZXJ2ZXIobywgcywgaSwgY2IsIHN1YnMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9pID0gaTtcbiAgICAgIHRoaXMuX2NiID0gY2I7XG4gICAgICB0aGlzLl9zdWJzID0gc3VicztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEZvcmtKb2luT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKCF0aGlzLl9zLmZpbmlzaGVkKSB7XG4gICAgICAgIHRoaXMuX3MuaGFzUmVzdWx0c1t0aGlzLl9pXSA9IHRydWU7XG4gICAgICAgIHRoaXMuX3MucmVzdWx0c1t0aGlzLl9pXSA9IHg7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEZvcmtKb2luT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX3MuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgICAgdGhpcy5fc3Vicy5kaXNwb3NlKCk7XG4gICAgfTtcblxuICAgIEZvcmtKb2luT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5fcy5maW5pc2hlZCkge1xuICAgICAgICBpZiAoIXRoaXMuX3MuaGFzUmVzdWx0c1t0aGlzLl9pXSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcy5oYXNDb21wbGV0ZWRbdGhpcy5faV0gPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3MucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICghdGhpcy5fcy5oYXNDb21wbGV0ZWRbaV0pIHsgcmV0dXJuOyB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcy5maW5pc2hlZCA9IHRydWU7XG5cbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX2NiKS5hcHBseShudWxsLCB0aGlzLl9zLnJlc3VsdHMpO1xuICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuXG4gICAgICAgIHRoaXMuX28ub25OZXh0KHJlcyk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEZvcmtKb2luT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gICAvKipcbiAgICogIFJ1bnMgYWxsIG9ic2VydmFibGUgc2VxdWVuY2VzIGluIHBhcmFsbGVsIGFuZCBjb2xsZWN0IHRoZWlyIGxhc3QgZWxlbWVudHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAxIC0gcmVzID0gUnguT2JzZXJ2YWJsZS5mb3JrSm9pbihbb2JzMSwgb2JzMl0pO1xuICAgKiAgMSAtIHJlcyA9IFJ4Lk9ic2VydmFibGUuZm9ya0pvaW4ob2JzMSwgb2JzMiwgLi4uKTtcbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCBhbiBhcnJheSBjb2xsZWN0aW5nIHRoZSBsYXN0IGVsZW1lbnRzIG9mIGFsbCB0aGUgaW5wdXQgc2VxdWVuY2VzLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5mb3JrSm9pbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgdmFyIHJlc3VsdFNlbGVjdG9yID0gaXNGdW5jdGlvbihhcmdzW2xlbiAtIDFdKSA/IGFyZ3MucG9wKCkgOiBhcmd1bWVudHNUb0FycmF5O1xuICAgIEFycmF5LmlzQXJyYXkoYXJnc1swXSkgJiYgKGFyZ3MgPSBhcmdzWzBdKTtcbiAgICByZXR1cm4gbmV3IEZvcmtKb2luT2JzZXJ2YWJsZShhcmdzLCByZXN1bHRTZWxlY3Rvcik7XG4gIH07XG5cbiAgIC8qKlxuICAgKiAgUnVucyB0d28gb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW4gcGFyYWxsZWwgYW5kIGNvbWJpbmVzIHRoZWlyIGxhc3QgZWxlbWVuZXRzLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHNlY29uZCBTZWNvbmQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgUmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uIHRvIGludm9rZSB3aXRoIHRoZSBsYXN0IGVsZW1lbnRzIG9mIGJvdGggc2VxdWVuY2VzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2l0aCB0aGUgbGFzdCBlbGVtZW50cyBvZiBib3RoIGlucHV0IHNlcXVlbmNlcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5mb3JrSm9pbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcbiAgICAgIGFyZ3NbMF0udW5zaGlmdCh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gT2JzZXJ2YWJsZS5mb3JrSm9pbi5hcHBseShudWxsLCBhcmdzKTtcbiAgfTtcblxuICAvKipcbiAgICogQ29tb25hZGljIGJpbmQgb3BlcmF0b3IuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggZWxlbWVudC5cbiAgICogQHBhcmFtIHtPYmplY3R9IHNjaGVkdWxlciBTY2hlZHVsZXIgdXNlZCB0byBleGVjdXRlIHRoZSBvcGVyYXRpb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIHRoZSBJbW1lZGlhdGVTY2hlZHVsZXIuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIHJlc3VsdHMgZnJvbSB0aGUgY29tb25hZGljIGJpbmQgb3BlcmF0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1hbnlTZWxlY3QgPSBvYnNlcnZhYmxlUHJvdG8uZXh0ZW5kID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBSeC5TY2hlZHVsZXIuaW1tZWRpYXRlKTtcbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gb2JzZXJ2YWJsZURlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjaGFpbjtcblxuICAgICAgcmV0dXJuIHNvdXJjZVxuICAgICAgICAubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgdmFyIGN1cnIgPSBuZXcgQ2hhaW5PYnNlcnZhYmxlKHgpO1xuXG4gICAgICAgICAgY2hhaW4gJiYgY2hhaW4ub25OZXh0KHgpO1xuICAgICAgICAgIGNoYWluID0gY3VycjtcblxuICAgICAgICAgIHJldHVybiBjdXJyO1xuICAgICAgICB9KVxuICAgICAgICAudGFwKFxuICAgICAgICAgIG5vb3AsXG4gICAgICAgICAgZnVuY3Rpb24gKGUpIHsgY2hhaW4gJiYgY2hhaW4ub25FcnJvcihlKTsgfSxcbiAgICAgICAgICBmdW5jdGlvbiAoKSB7IGNoYWluICYmIGNoYWluLm9uQ29tcGxldGVkKCk7IH1cbiAgICAgICAgKVxuICAgICAgICAub2JzZXJ2ZU9uKHNjaGVkdWxlcilcbiAgICAgICAgLm1hcChzZWxlY3Rvcik7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICB2YXIgQ2hhaW5PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDaGFpbk9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ2hhaW5PYnNlcnZhYmxlKGhlYWQpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5oZWFkID0gaGVhZDtcbiAgICAgIHRoaXMudGFpbCA9IG5ldyBBc3luY1N1YmplY3QoKTtcbiAgICB9XG5cbiAgICBhZGRQcm9wZXJ0aWVzKENoYWluT2JzZXJ2YWJsZS5wcm90b3R5cGUsIE9ic2VydmVyLCB7XG4gICAgICBfc3Vic2NyaWJlOiBmdW5jdGlvbiAobykge1xuICAgICAgICB2YXIgZyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgICAgIGcuYWRkKGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGUodGhpcywgZnVuY3Rpb24gKF8sIHNlbGYpIHtcbiAgICAgICAgICBvLm9uTmV4dChzZWxmLmhlYWQpO1xuICAgICAgICAgIGcuYWRkKHNlbGYudGFpbC5tZXJnZUFsbCgpLnN1YnNjcmliZShvKSk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICByZXR1cm4gZztcbiAgICAgIH0sXG4gICAgICBvbkNvbXBsZXRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm9uTmV4dChPYnNlcnZhYmxlLmVtcHR5KCkpO1xuICAgICAgfSxcbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHRoaXMub25OZXh0KE9ic2VydmFibGVbJ3Rocm93J10oZSkpO1xuICAgICAgfSxcbiAgICAgIG9uTmV4dDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgdGhpcy50YWlsLm9uTmV4dCh2KTtcbiAgICAgICAgdGhpcy50YWlsLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQ2hhaW5PYnNlcnZhYmxlO1xuXG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIHZhciBNYXAgPSByb290Lk1hcCB8fCAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hcCgpIHtcbiAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgICB0aGlzLl92YWx1ZXMgPSBbXTtcbiAgICAgIHRoaXMuX2tleXMgPSBbXTtcbiAgICB9XG5cbiAgICBNYXAucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHZhciBpID0gdGhpcy5fa2V5cy5pbmRleE9mKGtleSk7XG4gICAgICBpZiAoaSA9PT0gLTEpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgICB0aGlzLl92YWx1ZXMuc3BsaWNlKGksIDEpO1xuICAgICAgdGhpcy5fa2V5cy5zcGxpY2UoaSwgMSk7XG4gICAgICB0aGlzLnNpemUtLTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHZhciBpID0gdGhpcy5fa2V5cy5pbmRleE9mKGtleSk7XG4gICAgICByZXR1cm4gaSA9PT0gLTEgPyB1bmRlZmluZWQgOiB0aGlzLl92YWx1ZXNbaV07XG4gICAgfTtcblxuICAgIE1hcC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgIHZhciBpID0gdGhpcy5fa2V5cy5pbmRleE9mKGtleSk7XG4gICAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgICAgdGhpcy5fa2V5cy5wdXNoKGtleSk7XG4gICAgICAgIHRoaXMuX3ZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgdGhpcy5zaXplKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl92YWx1ZXNbaV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBNYXAucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2IsIHRoaXNBcmcpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zaXplOyBpKyspIHtcbiAgICAgICAgY2IuY2FsbCh0aGlzQXJnLCB0aGlzLl92YWx1ZXNbaV0sIHRoaXMuX2tleXNbaV0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gTWFwO1xuICB9KCkpO1xuXG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogUmVwcmVzZW50cyBhIGpvaW4gcGF0dGVybiBvdmVyIG9ic2VydmFibGUgc2VxdWVuY2VzLlxuICAgKi9cbiAgZnVuY3Rpb24gUGF0dGVybihwYXR0ZXJucykge1xuICAgIHRoaXMucGF0dGVybnMgPSBwYXR0ZXJucztcbiAgfVxuXG4gIC8qKlxuICAgKiAgQ3JlYXRlcyBhIHBhdHRlcm4gdGhhdCBtYXRjaGVzIHRoZSBjdXJyZW50IHBsYW4gbWF0Y2hlcyBhbmQgd2hlbiB0aGUgc3BlY2lmaWVkIG9ic2VydmFibGUgc2VxdWVuY2VzIGhhcyBhbiBhdmFpbGFibGUgdmFsdWUuXG4gICAqICBAcGFyYW0gb3RoZXIgT2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byBtYXRjaCBpbiBhZGRpdGlvbiB0byB0aGUgY3VycmVudCBwYXR0ZXJuLlxuICAgKiAgQHJldHVybiB7UGF0dGVybn0gUGF0dGVybiBvYmplY3QgdGhhdCBtYXRjaGVzIHdoZW4gYWxsIG9ic2VydmFibGUgc2VxdWVuY2VzIGluIHRoZSBwYXR0ZXJuIGhhdmUgYW4gYXZhaWxhYmxlIHZhbHVlLlxuICAgKi9cbiAgUGF0dGVybi5wcm90b3R5cGUuYW5kID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIG5ldyBQYXR0ZXJuKHRoaXMucGF0dGVybnMuY29uY2F0KG90aGVyKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBNYXRjaGVzIHdoZW4gYWxsIG9ic2VydmFibGUgc2VxdWVuY2VzIGluIHRoZSBwYXR0ZXJuIChzcGVjaWZpZWQgdXNpbmcgYSBjaGFpbiBvZiBhbmQgb3BlcmF0b3JzKSBoYXZlIGFuIGF2YWlsYWJsZSB2YWx1ZSBhbmQgcHJvamVjdHMgdGhlIHZhbHVlcy5cbiAgICogIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIFNlbGVjdG9yIHRoYXQgd2lsbCBiZSBpbnZva2VkIHdpdGggYXZhaWxhYmxlIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2Ugc2VxdWVuY2VzLCBpbiB0aGUgc2FtZSBvcmRlciBvZiB0aGUgc2VxdWVuY2VzIGluIHRoZSBwYXR0ZXJuLlxuICAgKiAgQHJldHVybiB7UGxhbn0gUGxhbiB0aGF0IHByb2R1Y2VzIHRoZSBwcm9qZWN0ZWQgdmFsdWVzLCB0byBiZSBmZWQgKHdpdGggb3RoZXIgcGxhbnMpIHRvIHRoZSB3aGVuIG9wZXJhdG9yLlxuICAgKi9cbiAgUGF0dGVybi5wcm90b3R5cGUudGhlbkRvID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBQbGFuKHRoaXMsIHNlbGVjdG9yKTtcbiAgfTtcblxuICBmdW5jdGlvbiBQbGFuKGV4cHJlc3Npb24sIHNlbGVjdG9yKSB7XG4gICAgdGhpcy5leHByZXNzaW9uID0gZXhwcmVzc2lvbjtcbiAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVPbkVycm9yKG8pIHsgcmV0dXJuIGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfTsgfVxuICBmdW5jdGlvbiBoYW5kbGVPbk5leHQoc2VsZiwgb2JzZXJ2ZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gb25OZXh0ICgpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaChzZWxmLnNlbGVjdG9yKS5hcHBseShzZWxmLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG9ic2VydmVyLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICBvYnNlcnZlci5vbk5leHQocmVzdWx0KTtcbiAgICB9O1xuICB9XG5cbiAgUGxhbi5wcm90b3R5cGUuYWN0aXZhdGUgPSBmdW5jdGlvbiAoZXh0ZXJuYWxTdWJzY3JpcHRpb25zLCBvYnNlcnZlciwgZGVhY3RpdmF0ZSkge1xuICAgIHZhciBqb2luT2JzZXJ2ZXJzID0gW10sIGVyckhhbmRsZXIgPSBoYW5kbGVPbkVycm9yKG9ic2VydmVyKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5leHByZXNzaW9uLnBhdHRlcm5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBqb2luT2JzZXJ2ZXJzLnB1c2gocGxhbkNyZWF0ZU9ic2VydmVyKGV4dGVybmFsU3Vic2NyaXB0aW9ucywgdGhpcy5leHByZXNzaW9uLnBhdHRlcm5zW2ldLCBlcnJIYW5kbGVyKSk7XG4gICAgfVxuICAgIHZhciBhY3RpdmVQbGFuID0gbmV3IEFjdGl2ZVBsYW4oam9pbk9ic2VydmVycywgaGFuZGxlT25OZXh0KHRoaXMsIG9ic2VydmVyKSwgZnVuY3Rpb24gKCkge1xuICAgICAgZm9yICh2YXIgaiA9IDAsIGpsZW4gPSBqb2luT2JzZXJ2ZXJzLmxlbmd0aDsgaiA8IGpsZW47IGorKykge1xuICAgICAgICBqb2luT2JzZXJ2ZXJzW2pdLnJlbW92ZUFjdGl2ZVBsYW4oYWN0aXZlUGxhbik7XG4gICAgICB9XG4gICAgICBkZWFjdGl2YXRlKGFjdGl2ZVBsYW4pO1xuICAgIH0pO1xuICAgIGZvciAoaSA9IDAsIGxlbiA9IGpvaW5PYnNlcnZlcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGpvaW5PYnNlcnZlcnNbaV0uYWRkQWN0aXZlUGxhbihhY3RpdmVQbGFuKTtcbiAgICB9XG4gICAgcmV0dXJuIGFjdGl2ZVBsYW47XG4gIH07XG5cbiAgZnVuY3Rpb24gcGxhbkNyZWF0ZU9ic2VydmVyKGV4dGVybmFsU3Vic2NyaXB0aW9ucywgb2JzZXJ2YWJsZSwgb25FcnJvcikge1xuICAgIHZhciBlbnRyeSA9IGV4dGVybmFsU3Vic2NyaXB0aW9ucy5nZXQob2JzZXJ2YWJsZSk7XG4gICAgaWYgKCFlbnRyeSkge1xuICAgICAgdmFyIG9ic2VydmVyID0gbmV3IEpvaW5PYnNlcnZlcihvYnNlcnZhYmxlLCBvbkVycm9yKTtcbiAgICAgIGV4dGVybmFsU3Vic2NyaXB0aW9ucy5zZXQob2JzZXJ2YWJsZSwgb2JzZXJ2ZXIpO1xuICAgICAgcmV0dXJuIG9ic2VydmVyO1xuICAgIH1cbiAgICByZXR1cm4gZW50cnk7XG4gIH1cblxuICBmdW5jdGlvbiBBY3RpdmVQbGFuKGpvaW5PYnNlcnZlckFycmF5LCBvbk5leHQsIG9uQ29tcGxldGVkKSB7XG4gICAgdGhpcy5qb2luT2JzZXJ2ZXJBcnJheSA9IGpvaW5PYnNlcnZlckFycmF5O1xuICAgIHRoaXMub25OZXh0ID0gb25OZXh0O1xuICAgIHRoaXMub25Db21wbGV0ZWQgPSBvbkNvbXBsZXRlZDtcbiAgICB0aGlzLmpvaW5PYnNlcnZlcnMgPSBuZXcgTWFwKCk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuam9pbk9ic2VydmVyQXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBqb2luT2JzZXJ2ZXIgPSB0aGlzLmpvaW5PYnNlcnZlckFycmF5W2ldO1xuICAgICAgdGhpcy5qb2luT2JzZXJ2ZXJzLnNldChqb2luT2JzZXJ2ZXIsIGpvaW5PYnNlcnZlcik7XG4gICAgfVxuICB9XG5cbiAgQWN0aXZlUGxhbi5wcm90b3R5cGUuZGVxdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmpvaW5PYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbiAodikgeyB2LnF1ZXVlLnNoaWZ0KCk7IH0pO1xuICB9O1xuXG4gIEFjdGl2ZVBsYW4ucHJvdG90eXBlLm1hdGNoID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpLCBsZW4sIGhhc1ZhbHVlcyA9IHRydWU7XG4gICAgZm9yIChpID0gMCwgbGVuID0gdGhpcy5qb2luT2JzZXJ2ZXJBcnJheS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKHRoaXMuam9pbk9ic2VydmVyQXJyYXlbaV0ucXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGhhc1ZhbHVlcyA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGhhc1ZhbHVlcykge1xuICAgICAgdmFyIGZpcnN0VmFsdWVzID0gW10sXG4gICAgICAgICAgaXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHRoaXMuam9pbk9ic2VydmVyQXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZmlyc3RWYWx1ZXMucHVzaCh0aGlzLmpvaW5PYnNlcnZlckFycmF5W2ldLnF1ZXVlWzBdKTtcbiAgICAgICAgdGhpcy5qb2luT2JzZXJ2ZXJBcnJheVtpXS5xdWV1ZVswXS5raW5kID09PSAnQycgJiYgKGlzQ29tcGxldGVkID0gdHJ1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoaXNDb21wbGV0ZWQpIHtcbiAgICAgICAgdGhpcy5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kZXF1ZXVlKCk7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gZmlyc3RWYWx1ZXMubGVuZ3RoOyBpIDwgZmlyc3RWYWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YWx1ZXMucHVzaChmaXJzdFZhbHVlc1tpXS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbk5leHQuYXBwbHkodGhpcywgdmFsdWVzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIEpvaW5PYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSm9pbk9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gSm9pbk9ic2VydmVyKHNvdXJjZSwgb25FcnJvcikge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMub25FcnJvciA9IG9uRXJyb3I7XG4gICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICB0aGlzLmFjdGl2ZVBsYW5zID0gW107XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIEpvaW5PYnNlcnZlclByb3RvdHlwZSA9IEpvaW5PYnNlcnZlci5wcm90b3R5cGU7XG5cbiAgICBKb2luT2JzZXJ2ZXJQcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcbiAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgIGlmIChub3RpZmljYXRpb24ua2luZCA9PT0gJ0UnKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMub25FcnJvcihub3RpZmljYXRpb24uZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucXVldWUucHVzaChub3RpZmljYXRpb24pO1xuICAgICAgICB2YXIgYWN0aXZlUGxhbnMgPSB0aGlzLmFjdGl2ZVBsYW5zLnNsaWNlKDApO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYWN0aXZlUGxhbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBhY3RpdmVQbGFuc1tpXS5tYXRjaCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIEpvaW5PYnNlcnZlclByb3RvdHlwZS5lcnJvciA9IG5vb3A7XG4gICAgSm9pbk9ic2VydmVyUHJvdG90eXBlLmNvbXBsZXRlZCA9IG5vb3A7XG5cbiAgICBKb2luT2JzZXJ2ZXJQcm90b3R5cGUuYWRkQWN0aXZlUGxhbiA9IGZ1bmN0aW9uIChhY3RpdmVQbGFuKSB7XG4gICAgICB0aGlzLmFjdGl2ZVBsYW5zLnB1c2goYWN0aXZlUGxhbik7XG4gICAgfTtcblxuICAgIEpvaW5PYnNlcnZlclByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKHRoaXMuc291cmNlLm1hdGVyaWFsaXplKCkuc3Vic2NyaWJlKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgSm9pbk9ic2VydmVyUHJvdG90eXBlLnJlbW92ZUFjdGl2ZVBsYW4gPSBmdW5jdGlvbiAoYWN0aXZlUGxhbikge1xuICAgICAgdGhpcy5hY3RpdmVQbGFucy5zcGxpY2UodGhpcy5hY3RpdmVQbGFucy5pbmRleE9mKGFjdGl2ZVBsYW4pLCAxKTtcbiAgICAgIHRoaXMuYWN0aXZlUGxhbnMubGVuZ3RoID09PSAwICYmIHRoaXMuZGlzcG9zZSgpO1xuICAgIH07XG5cbiAgICBKb2luT2JzZXJ2ZXJQcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF9fc3VwZXJfXy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gSm9pbk9ic2VydmVyO1xuICB9IChBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBDcmVhdGVzIGEgcGF0dGVybiB0aGF0IG1hdGNoZXMgd2hlbiBib3RoIG9ic2VydmFibGUgc2VxdWVuY2VzIGhhdmUgYW4gYXZhaWxhYmxlIHZhbHVlLlxuICAgKlxuICAgKiAgQHBhcmFtIHJpZ2h0IE9ic2VydmFibGUgc2VxdWVuY2UgdG8gbWF0Y2ggd2l0aCB0aGUgY3VycmVudCBzZXF1ZW5jZS5cbiAgICogIEByZXR1cm4ge1BhdHRlcm59IFBhdHRlcm4gb2JqZWN0IHRoYXQgbWF0Y2hlcyB3aGVuIGJvdGggb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaGF2ZSBhbiBhdmFpbGFibGUgdmFsdWUuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uYW5kID0gZnVuY3Rpb24gKHJpZ2h0KSB7XG4gICAgcmV0dXJuIG5ldyBQYXR0ZXJuKFt0aGlzLCByaWdodF0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgTWF0Y2hlcyB3aGVuIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGhhcyBhbiBhdmFpbGFibGUgdmFsdWUgYW5kIHByb2plY3RzIHRoZSB2YWx1ZS5cbiAgICpcbiAgICogIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIFNlbGVjdG9yIHRoYXQgd2lsbCBiZSBpbnZva2VkIGZvciB2YWx1ZXMgaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogIEByZXR1cm5zIHtQbGFufSBQbGFuIHRoYXQgcHJvZHVjZXMgdGhlIHByb2plY3RlZCB2YWx1ZXMsIHRvIGJlIGZlZCAod2l0aCBvdGhlciBwbGFucykgdG8gdGhlIHdoZW4gb3BlcmF0b3IuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGhlbkRvID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBQYXR0ZXJuKFt0aGlzXSkudGhlbkRvKHNlbGVjdG9yKTtcbiAgfTtcblxuICAvKipcbiAgICogIEpvaW5zIHRvZ2V0aGVyIHRoZSByZXN1bHRzIGZyb20gc2V2ZXJhbCBwYXR0ZXJucy5cbiAgICpcbiAgICogIEBwYXJhbSBwbGFucyBBIHNlcmllcyBvZiBwbGFucyAoc3BlY2lmaWVkIGFzIGFuIEFycmF5IG9mIGFzIGEgc2VyaWVzIG9mIGFyZ3VtZW50cykgY3JlYXRlZCBieSB1c2Ugb2YgdGhlIFRoZW4gb3BlcmF0b3Igb24gcGF0dGVybnMuXG4gICAqICBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gT2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSByZXN1bHRzIGZvcm0gbWF0Y2hpbmcgc2V2ZXJhbCBwYXR0ZXJucy5cbiAgICovXG4gIE9ic2VydmFibGUud2hlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgcGxhbnM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgcGxhbnMgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHBsYW5zID0gbmV3IEFycmF5KGxlbik7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgcGxhbnNbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgYWN0aXZlUGxhbnMgPSBbXSxcbiAgICAgICAgICBleHRlcm5hbFN1YnNjcmlwdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgICB2YXIgb3V0T2JzZXJ2ZXIgPSBvYnNlcnZlckNyZWF0ZShcbiAgICAgICAgZnVuY3Rpb24gKHgpIHsgby5vbk5leHQoeCk7IH0sXG4gICAgICAgIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBleHRlcm5hbFN1YnNjcmlwdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAodikgeyB2Lm9uRXJyb3IoZXJyKTsgfSk7XG4gICAgICAgICAgby5vbkVycm9yKGVycik7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7IG8ub25Db21wbGV0ZWQoKTsgfVxuICAgICAgKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwbGFucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGFjdGl2ZVBsYW5zLnB1c2gocGxhbnNbaV0uYWN0aXZhdGUoZXh0ZXJuYWxTdWJzY3JpcHRpb25zLCBvdXRPYnNlcnZlciwgZnVuY3Rpb24gKGFjdGl2ZVBsYW4pIHtcbiAgICAgICAgICAgIHZhciBpZHggPSBhY3RpdmVQbGFucy5pbmRleE9mKGFjdGl2ZVBsYW4pO1xuICAgICAgICAgICAgYWN0aXZlUGxhbnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICBhY3RpdmVQbGFucy5sZW5ndGggPT09IDAgJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZVRocm93KGUpLnN1YnNjcmliZShvKTtcbiAgICAgIH1cbiAgICAgIHZhciBncm91cCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgICBleHRlcm5hbFN1YnNjcmlwdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoam9pbk9ic2VydmVyKSB7XG4gICAgICAgIGpvaW5PYnNlcnZlci5zdWJzY3JpYmUoKTtcbiAgICAgICAgZ3JvdXAuYWRkKGpvaW5PYnNlcnZlcik7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGdyb3VwO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBUaW1lck9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGltZXJPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRpbWVyT2JzZXJ2YWJsZShkdCwgcykge1xuICAgICAgdGhpcy5fZHQgPSBkdDtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGltZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLl9zLnNjaGVkdWxlRnV0dXJlKG8sIHRoaXMuX2R0LCBzY2hlZHVsZU1ldGhvZCk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHMsIG8pIHtcbiAgICAgIG8ub25OZXh0KDApO1xuICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgIH1cblxuICAgIHJldHVybiBUaW1lck9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICBmdW5jdGlvbiBfb2JzZXJ2YWJsZVRpbWVyKGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBuZXcgVGltZXJPYnNlcnZhYmxlKGR1ZVRpbWUsIHNjaGVkdWxlcik7XG4gIH1cblxuICBmdW5jdGlvbiBvYnNlcnZhYmxlVGltZXJEYXRlQW5kUGVyaW9kKGR1ZVRpbWUsIHBlcmlvZCwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIGQgPSBkdWVUaW1lLCBwID0gbm9ybWFsaXplVGltZShwZXJpb2QpO1xuICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZUZ1dHVyZSgwLCBkLCBmdW5jdGlvbiAoY291bnQsIHNlbGYpIHtcbiAgICAgICAgaWYgKHAgPiAwKSB7XG4gICAgICAgICAgdmFyIG5vdyA9IHNjaGVkdWxlci5ub3coKTtcbiAgICAgICAgICBkID0gbmV3IERhdGUoZC5nZXRUaW1lKCkgKyBwKTtcbiAgICAgICAgICBkLmdldFRpbWUoKSA8PSBub3cgJiYgKGQgPSBuZXcgRGF0ZShub3cgKyBwKSk7XG4gICAgICAgIH1cbiAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGNvdW50KTtcbiAgICAgICAgc2VsZihjb3VudCArIDEsIG5ldyBEYXRlKGQpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZVRpbWVyVGltZVNwYW5BbmRQZXJpb2QoZHVlVGltZSwgcGVyaW9kLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gZHVlVGltZSA9PT0gcGVyaW9kID9cbiAgICAgIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlUGVyaW9kaWMoMCwgcGVyaW9kLCBmdW5jdGlvbiAoY291bnQpIHtcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQoY291bnQpO1xuICAgICAgICAgIHJldHVybiBjb3VudCArIDE7XG4gICAgICAgIH0pO1xuICAgICAgfSkgOlxuICAgICAgb2JzZXJ2YWJsZURlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGVUaW1lckRhdGVBbmRQZXJpb2QobmV3IERhdGUoc2NoZWR1bGVyLm5vdygpICsgZHVlVGltZSksIHBlcmlvZCwgc2NoZWR1bGVyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBwcm9kdWNlcyBhIHZhbHVlIGFmdGVyIGVhY2ggcGVyaW9kLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgMSAtIHJlcyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gICAqICAyIC0gcmVzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwLCBSeC5TY2hlZHVsZXIudGltZW91dCk7XG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBwZXJpb2QgUGVyaW9kIGZvciBwcm9kdWNpbmcgdGhlIHZhbHVlcyBpbiB0aGUgcmVzdWx0aW5nIHNlcXVlbmNlIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHJ1biB0aGUgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIFJ4LlNjaGVkdWxlci50aW1lb3V0IGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcHJvZHVjZXMgYSB2YWx1ZSBhZnRlciBlYWNoIHBlcmlvZC5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlaW50ZXJ2YWwgPSBPYnNlcnZhYmxlLmludGVydmFsID0gZnVuY3Rpb24gKHBlcmlvZCwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG9ic2VydmFibGVUaW1lclRpbWVTcGFuQW5kUGVyaW9kKHBlcmlvZCwgcGVyaW9kLCBpc1NjaGVkdWxlcihzY2hlZHVsZXIpID8gc2NoZWR1bGVyIDogZGVmYXVsdFNjaGVkdWxlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBwcm9kdWNlcyBhIHZhbHVlIGFmdGVyIGR1ZVRpbWUgaGFzIGVsYXBzZWQgYW5kIHRoZW4gYWZ0ZXIgZWFjaCBwZXJpb2QuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkdWVUaW1lIEFic29sdXRlIChzcGVjaWZpZWQgYXMgYSBEYXRlIG9iamVjdCkgb3IgcmVsYXRpdmUgdGltZSAoc3BlY2lmaWVkIGFzIGFuIGludGVnZXIgZGVub3RpbmcgbWlsbGlzZWNvbmRzKSBhdCB3aGljaCB0byBwcm9kdWNlIHRoZSBmaXJzdCB2YWx1ZS5cbiAgICogQHBhcmFtIHtNaXhlZH0gW3BlcmlvZE9yU2NoZWR1bGVyXSAgUGVyaW9kIHRvIHByb2R1Y2Ugc3Vic2VxdWVudCB2YWx1ZXMgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcyksIG9yIHRoZSBzY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHJlc3VsdGluZyB0aW1lciBpcyBub3QgcmVjdXJyaW5nLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBwcm9kdWNlcyBhIHZhbHVlIGFmdGVyIGR1ZSB0aW1lIGhhcyBlbGFwc2VkIGFuZCB0aGVuIGVhY2ggcGVyaW9kLlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVUaW1lciA9IE9ic2VydmFibGUudGltZXIgPSBmdW5jdGlvbiAoZHVlVGltZSwgcGVyaW9kT3JTY2hlZHVsZXIsIHNjaGVkdWxlcikge1xuICAgIHZhciBwZXJpb2Q7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgaWYgKHBlcmlvZE9yU2NoZWR1bGVyICE9IG51bGwgJiYgdHlwZW9mIHBlcmlvZE9yU2NoZWR1bGVyID09PSAnbnVtYmVyJykge1xuICAgICAgcGVyaW9kID0gcGVyaW9kT3JTY2hlZHVsZXI7XG4gICAgfSBlbHNlIGlmIChpc1NjaGVkdWxlcihwZXJpb2RPclNjaGVkdWxlcikpIHtcbiAgICAgIHNjaGVkdWxlciA9IHBlcmlvZE9yU2NoZWR1bGVyO1xuICAgIH1cbiAgICBpZiAoKGR1ZVRpbWUgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBkdWVUaW1lID09PSAnbnVtYmVyJykgJiYgcGVyaW9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBfb2JzZXJ2YWJsZVRpbWVyKGR1ZVRpbWUsIHNjaGVkdWxlcik7XG4gICAgfVxuICAgIGlmIChkdWVUaW1lIGluc3RhbmNlb2YgRGF0ZSAmJiBwZXJpb2QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG9ic2VydmFibGVUaW1lckRhdGVBbmRQZXJpb2QoZHVlVGltZSwgcGVyaW9kT3JTY2hlZHVsZXIsIHNjaGVkdWxlcik7XG4gICAgfVxuICAgIHJldHVybiBvYnNlcnZhYmxlVGltZXJUaW1lU3BhbkFuZFBlcmlvZChkdWVUaW1lLCBwZXJpb2QsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZURlbGF5UmVsYXRpdmUoc291cmNlLCBkdWVUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBhY3RpdmUgPSBmYWxzZSxcbiAgICAgICAgY2FuY2VsYWJsZSA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksXG4gICAgICAgIGV4Y2VwdGlvbiA9IG51bGwsXG4gICAgICAgIHEgPSBbXSxcbiAgICAgICAgcnVubmluZyA9IGZhbHNlLFxuICAgICAgICBzdWJzY3JpcHRpb247XG4gICAgICBzdWJzY3JpcHRpb24gPSBzb3VyY2UubWF0ZXJpYWxpemUoKS50aW1lc3RhbXAoc2NoZWR1bGVyKS5zdWJzY3JpYmUoZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xuICAgICAgICB2YXIgZCwgc2hvdWxkUnVuO1xuICAgICAgICBpZiAobm90aWZpY2F0aW9uLnZhbHVlLmtpbmQgPT09ICdFJykge1xuICAgICAgICAgIHEgPSBbXTtcbiAgICAgICAgICBxLnB1c2gobm90aWZpY2F0aW9uKTtcbiAgICAgICAgICBleGNlcHRpb24gPSBub3RpZmljYXRpb24udmFsdWUuZXJyb3I7XG4gICAgICAgICAgc2hvdWxkUnVuID0gIXJ1bm5pbmc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcS5wdXNoKHsgdmFsdWU6IG5vdGlmaWNhdGlvbi52YWx1ZSwgdGltZXN0YW1wOiBub3RpZmljYXRpb24udGltZXN0YW1wICsgZHVlVGltZSB9KTtcbiAgICAgICAgICBzaG91bGRSdW4gPSAhYWN0aXZlO1xuICAgICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3VsZFJ1bikge1xuICAgICAgICAgIGlmIChleGNlcHRpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIG8ub25FcnJvcihleGNlcHRpb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgICAgICBjYW5jZWxhYmxlLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICAgICAgICBkLnNldERpc3Bvc2FibGUoc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlRnV0dXJlKG51bGwsIGR1ZVRpbWUsIGZ1bmN0aW9uIChfLCBzZWxmKSB7XG4gICAgICAgICAgICAgIHZhciBlLCByZWN1cnNlRHVlVGltZSwgcmVzdWx0LCBzaG91bGRSZWN1cnNlO1xuICAgICAgICAgICAgICBpZiAoZXhjZXB0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAocS5sZW5ndGggPiAwICYmIHFbMF0udGltZXN0YW1wIC0gc2NoZWR1bGVyLm5vdygpIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHEuc2hpZnQoKS52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgcmVzdWx0LmFjY2VwdChvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gd2hpbGUgKHJlc3VsdCAhPT0gbnVsbCk7XG4gICAgICAgICAgICAgIHNob3VsZFJlY3Vyc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmVjdXJzZUR1ZVRpbWUgPSAwO1xuICAgICAgICAgICAgICBpZiAocS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgc2hvdWxkUmVjdXJzZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVjdXJzZUR1ZVRpbWUgPSBNYXRoLm1heCgwLCBxWzBdLnRpbWVzdGFtcCAtIHNjaGVkdWxlci5ub3coKSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZSA9IGV4Y2VwdGlvbjtcbiAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICBpZiAoZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG8ub25FcnJvcihlKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaG91bGRSZWN1cnNlKSB7XG4gICAgICAgICAgICAgICAgc2VsZihudWxsLCByZWN1cnNlRHVlVGltZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbiwgY2FuY2VsYWJsZSk7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9ic2VydmFibGVEZWxheUFic29sdXRlKHNvdXJjZSwgZHVlVGltZSwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG9ic2VydmFibGVEZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gb2JzZXJ2YWJsZURlbGF5UmVsYXRpdmUoc291cmNlLCBkdWVUaW1lIC0gc2NoZWR1bGVyLm5vdygpLCBzY2hlZHVsZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVsYXlXaXRoU2VsZWN0b3Ioc291cmNlLCBzdWJzY3JpcHRpb25EZWxheSwgZGVsYXlEdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgdmFyIHN1YkRlbGF5LCBzZWxlY3RvcjtcbiAgICBpZiAoaXNGdW5jdGlvbihzdWJzY3JpcHRpb25EZWxheSkpIHtcbiAgICAgIHNlbGVjdG9yID0gc3Vic2NyaXB0aW9uRGVsYXk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1YkRlbGF5ID0gc3Vic2NyaXB0aW9uRGVsYXk7XG4gICAgICBzZWxlY3RvciA9IGRlbGF5RHVyYXRpb25TZWxlY3RvcjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZGVsYXlzID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKSwgYXRFbmQgPSBmYWxzZSwgc3Vic2NyaXB0aW9uID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcblxuICAgICAgZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHZhciBkZWxheSA9IHRyeUNhdGNoKHNlbGVjdG9yKSh4KTtcbiAgICAgICAgICAgIGlmIChkZWxheSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihkZWxheS5lKTsgfVxuICAgICAgICAgICAgdmFyIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgICAgIGRlbGF5cy5hZGQoZCk7XG4gICAgICAgICAgICBkLnNldERpc3Bvc2FibGUoZGVsYXkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgby5vbk5leHQoeCk7XG4gICAgICAgICAgICAgICAgZGVsYXlzLnJlbW92ZShkKTtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfSxcbiAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG8ub25OZXh0KHgpO1xuICAgICAgICAgICAgICAgIGRlbGF5cy5yZW1vdmUoZCk7XG4gICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfSxcbiAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhdEVuZCA9IHRydWU7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgKSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGRvbmUgKCkge1xuICAgICAgICBhdEVuZCAmJiBkZWxheXMubGVuZ3RoID09PSAwICYmIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFzdWJEZWxheSkge1xuICAgICAgICBzdGFydCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUoc3ViRGVsYXkuc3Vic2NyaWJlKHN0YXJ0LCBmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH0sIHN0YXJ0KSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb24sIGRlbGF5cyk7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgVGltZSBzaGlmdHMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgZHVlVGltZS5cbiAgICogIFRoZSByZWxhdGl2ZSB0aW1lIGludGVydmFscyBiZXR3ZWVuIHRoZSB2YWx1ZXMgYXJlIHByZXNlcnZlZC5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgQWJzb2x1dGUgKHNwZWNpZmllZCBhcyBhIERhdGUgb2JqZWN0KSBvciByZWxhdGl2ZSB0aW1lIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpIGJ5IHdoaWNoIHRvIHNoaWZ0IHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHJ1biB0aGUgZGVsYXkgdGltZXJzIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRpbWUtc2hpZnRlZCBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5kZWxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmlyc3RBcmcgPSBhcmd1bWVudHNbMF07XG4gICAgaWYgKHR5cGVvZiBmaXJzdEFyZyA9PT0gJ251bWJlcicgfHwgZmlyc3RBcmcgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICB2YXIgZHVlVGltZSA9IGZpcnN0QXJnLCBzY2hlZHVsZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICAgIHJldHVybiBkdWVUaW1lIGluc3RhbmNlb2YgRGF0ZSA/XG4gICAgICAgIG9ic2VydmFibGVEZWxheUFic29sdXRlKHRoaXMsIGR1ZVRpbWUsIHNjaGVkdWxlcikgOlxuICAgICAgICBvYnNlcnZhYmxlRGVsYXlSZWxhdGl2ZSh0aGlzLCBkdWVUaW1lLCBzY2hlZHVsZXIpO1xuICAgIH0gZWxzZSBpZiAoT2JzZXJ2YWJsZS5pc09ic2VydmFibGUoZmlyc3RBcmcpIHx8IGlzRnVuY3Rpb24oZmlyc3RBcmcpKSB7XG4gICAgICByZXR1cm4gZGVsYXlXaXRoU2VsZWN0b3IodGhpcywgZmlyc3RBcmcsIGFyZ3VtZW50c1sxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMnKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIERlYm91bmNlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGVib3VuY2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERlYm91bmNlT2JzZXJ2YWJsZShzb3VyY2UsIGR0LCBzKSB7XG4gICAgICBpc1NjaGVkdWxlcihzKSB8fCAocyA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9kdCA9IGR0O1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEZWJvdW5jZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGNhbmNlbGFibGUgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IERlYm91bmNlT2JzZXJ2ZXIobywgdGhpcy5fZHQsIHRoaXMuX3MsIGNhbmNlbGFibGUpKSxcbiAgICAgICAgY2FuY2VsYWJsZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBEZWJvdW5jZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRGVib3VuY2VPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGVib3VuY2VPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEZWJvdW5jZU9ic2VydmVyKG9ic2VydmVyLCBkdWVUaW1lLCBzY2hlZHVsZXIsIGNhbmNlbGFibGUpIHtcbiAgICAgIHRoaXMuX28gPSBvYnNlcnZlcjtcbiAgICAgIHRoaXMuX2QgPSBkdWVUaW1lO1xuICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgdGhpcy5fYyA9IGNhbmNlbGFibGU7XG4gICAgICB0aGlzLl92ID0gbnVsbDtcbiAgICAgIHRoaXMuX2h2ID0gZmFsc2U7XG4gICAgICB0aGlzLl9pZCA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZUZ1dHVyZShzLCBzdGF0ZSkge1xuICAgICAgc3RhdGUuc2VsZi5faHYgJiYgc3RhdGUuc2VsZi5faWQgPT09IHN0YXRlLmN1cnJlbnRJZCAmJiBzdGF0ZS5zZWxmLl9vLm9uTmV4dChzdGF0ZS54KTtcbiAgICAgIHN0YXRlLnNlbGYuX2h2ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgRGVib3VuY2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9odiA9IHRydWU7XG4gICAgICB0aGlzLl92ID0geDtcbiAgICAgIHZhciBjdXJyZW50SWQgPSArK3RoaXMuX2lkLCBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICB0aGlzLl9jLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICBkLnNldERpc3Bvc2FibGUodGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlRnV0dXJlKHRoaXMsIHRoaXMuX2QsIGZ1bmN0aW9uIChfLCBzZWxmKSB7XG4gICAgICAgIHNlbGYuX2h2ICYmIHNlbGYuX2lkID09PSBjdXJyZW50SWQgJiYgc2VsZi5fby5vbk5leHQoeCk7XG4gICAgICAgIHNlbGYuX2h2ID0gZmFsc2U7XG4gICAgICB9KSk7XG4gICAgfTtcblxuICAgIERlYm91bmNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX2MuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgICAgdGhpcy5faHYgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2lkKys7XG4gICAgfTtcblxuICAgIERlYm91bmNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX2MuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5faHYgJiYgdGhpcy5fby5vbk5leHQodGhpcy5fdik7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5faWQrKztcbiAgICB9O1xuXG4gICAgcmV0dXJuIERlYm91bmNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIGZ1bmN0aW9uIGRlYm91bmNlV2l0aFNlbGVjdG9yKHNvdXJjZSwgZHVyYXRpb25TZWxlY3Rvcikge1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHZhbHVlLCBoYXNWYWx1ZSA9IGZhbHNlLCBjYW5jZWxhYmxlID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSwgaWQgPSAwO1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgdmFyIHRocm90dGxlID0gdHJ5Q2F0Y2goZHVyYXRpb25TZWxlY3RvcikoeCk7XG4gICAgICAgICAgaWYgKHRocm90dGxlID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHRocm90dGxlLmUpOyB9XG5cbiAgICAgICAgICBpc1Byb21pc2UodGhyb3R0bGUpICYmICh0aHJvdHRsZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZSh0aHJvdHRsZSkpO1xuXG4gICAgICAgICAgaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICAgIHZhbHVlID0geDtcbiAgICAgICAgICBpZCsrO1xuICAgICAgICAgIHZhciBjdXJyZW50aWQgPSBpZCwgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICAgIGNhbmNlbGFibGUuc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgICAgICBkLnNldERpc3Bvc2FibGUodGhyb3R0bGUuc3Vic2NyaWJlKFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBoYXNWYWx1ZSAmJiBpZCA9PT0gY3VycmVudGlkICYmIG8ub25OZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBoYXNWYWx1ZSAmJiBpZCA9PT0gY3VycmVudGlkICYmIG8ub25OZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgY2FuY2VsYWJsZS5kaXNwb3NlKCk7XG4gICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICAgIGhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgaWQrKztcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNhbmNlbGFibGUuZGlzcG9zZSgpO1xuICAgICAgICAgIGhhc1ZhbHVlICYmIG8ub25OZXh0KHZhbHVlKTtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICBpZCsrO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbiwgY2FuY2VsYWJsZSk7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIG9ic2VydmFibGVQcm90by5kZWJvdW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaXNGdW5jdGlvbiAoYXJndW1lbnRzWzBdKSkge1xuICAgICAgcmV0dXJuIGRlYm91bmNlV2l0aFNlbGVjdG9yKHRoaXMsIGFyZ3VtZW50c1swXSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIG5ldyBEZWJvdW5jZU9ic2VydmFibGUodGhpcywgYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnRzJyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiAgUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgaW50byB6ZXJvIG9yIG1vcmUgd2luZG93cyB3aGljaCBhcmUgcHJvZHVjZWQgYmFzZWQgb24gdGltaW5nIGluZm9ybWF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gdGltZVNwYW4gTGVuZ3RoIG9mIGVhY2ggd2luZG93IChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpLlxuICAgKiBAcGFyYW0ge01peGVkfSBbdGltZVNoaWZ0T3JTY2hlZHVsZXJdICBJbnRlcnZhbCBiZXR3ZWVuIGNyZWF0aW9uIG9mIGNvbnNlY3V0aXZlIHdpbmRvd3MgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcyksIG9yIGFuIG9wdGlvbmFsIHNjaGVkdWxlciBwYXJhbWV0ZXIuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lIHNoaWZ0IGNvcnJlc3BvbmRzIHRvIHRoZSB0aW1lU3BhbiBwYXJhbWV0ZXIsIHJlc3VsdGluZyBpbiBub24tb3ZlcmxhcHBpbmcgYWRqYWNlbnQgd2luZG93cy5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIHdpbmRvd2luZyB0aW1lcnMgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiB3aW5kb3dzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLndpbmRvd1dpdGhUaW1lID0gZnVuY3Rpb24gKHRpbWVTcGFuLCB0aW1lU2hpZnRPclNjaGVkdWxlciwgc2NoZWR1bGVyKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMsIHRpbWVTaGlmdDtcbiAgICB0aW1lU2hpZnRPclNjaGVkdWxlciA9PSBudWxsICYmICh0aW1lU2hpZnQgPSB0aW1lU3Bhbik7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgaWYgKHR5cGVvZiB0aW1lU2hpZnRPclNjaGVkdWxlciA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRpbWVTaGlmdCA9IHRpbWVTaGlmdE9yU2NoZWR1bGVyO1xuICAgIH0gZWxzZSBpZiAoaXNTY2hlZHVsZXIodGltZVNoaWZ0T3JTY2hlZHVsZXIpKSB7XG4gICAgICB0aW1lU2hpZnQgPSB0aW1lU3BhbjtcbiAgICAgIHNjaGVkdWxlciA9IHRpbWVTaGlmdE9yU2NoZWR1bGVyO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgZ3JvdXBEaXNwb3NhYmxlLFxuICAgICAgICBuZXh0U2hpZnQgPSB0aW1lU2hpZnQsXG4gICAgICAgIG5leHRTcGFuID0gdGltZVNwYW4sXG4gICAgICAgIHEgPSBbXSxcbiAgICAgICAgcmVmQ291bnREaXNwb3NhYmxlLFxuICAgICAgICB0aW1lckQgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICB0b3RhbFRpbWUgPSAwO1xuICAgICAgICBncm91cERpc3Bvc2FibGUgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSh0aW1lckQpLFxuICAgICAgICByZWZDb3VudERpc3Bvc2FibGUgPSBuZXcgUmVmQ291bnREaXNwb3NhYmxlKGdyb3VwRGlzcG9zYWJsZSk7XG5cbiAgICAgICBmdW5jdGlvbiBjcmVhdGVUaW1lciAoKSB7XG4gICAgICAgIHZhciBtID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksXG4gICAgICAgICAgaXNTcGFuID0gZmFsc2UsXG4gICAgICAgICAgaXNTaGlmdCA9IGZhbHNlO1xuICAgICAgICB0aW1lckQuc2V0RGlzcG9zYWJsZShtKTtcbiAgICAgICAgaWYgKG5leHRTcGFuID09PSBuZXh0U2hpZnQpIHtcbiAgICAgICAgICBpc1NwYW4gPSB0cnVlO1xuICAgICAgICAgIGlzU2hpZnQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKG5leHRTcGFuIDwgbmV4dFNoaWZ0KSB7XG4gICAgICAgICAgICBpc1NwYW4gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlzU2hpZnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXdUb3RhbFRpbWUgPSBpc1NwYW4gPyBuZXh0U3BhbiA6IG5leHRTaGlmdCxcbiAgICAgICAgICB0cyA9IG5ld1RvdGFsVGltZSAtIHRvdGFsVGltZTtcbiAgICAgICAgdG90YWxUaW1lID0gbmV3VG90YWxUaW1lO1xuICAgICAgICBpZiAoaXNTcGFuKSB7XG4gICAgICAgICAgbmV4dFNwYW4gKz0gdGltZVNoaWZ0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1NoaWZ0KSB7XG4gICAgICAgICAgbmV4dFNoaWZ0ICs9IHRpbWVTaGlmdDtcbiAgICAgICAgfVxuICAgICAgICBtLnNldERpc3Bvc2FibGUoc2NoZWR1bGVyLnNjaGVkdWxlRnV0dXJlKG51bGwsIHRzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKGlzU2hpZnQpIHtcbiAgICAgICAgICAgIHZhciBzID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgICAgIHEucHVzaChzKTtcbiAgICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChhZGRSZWYocywgcmVmQ291bnREaXNwb3NhYmxlKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzU3BhbiAmJiBxLnNoaWZ0KCkub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICBjcmVhdGVUaW1lcigpO1xuICAgICAgICB9KSk7XG4gICAgICB9O1xuICAgICAgcS5wdXNoKG5ldyBTdWJqZWN0KCkpO1xuICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZihxWzBdLCByZWZDb3VudERpc3Bvc2FibGUpKTtcbiAgICAgIGNyZWF0ZVRpbWVyKCk7XG4gICAgICBncm91cERpc3Bvc2FibGUuYWRkKHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgcVtpXS5vbk5leHQoeCk7IH1cbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcS5sZW5ndGg7IGkgPCBsZW47IGkrKykgeyBxW2ldLm9uRXJyb3IoZSk7IH1cbiAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgcVtpXS5vbkNvbXBsZXRlZCgpOyB9XG4gICAgICAgICAgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgKSk7XG4gICAgICByZXR1cm4gcmVmQ291bnREaXNwb3NhYmxlO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIGEgd2luZG93IHRoYXQgaXMgY29tcGxldGVkIHdoZW4gZWl0aGVyIGl0J3MgZnVsbCBvciBhIGdpdmVuIGFtb3VudCBvZiB0aW1lIGhhcyBlbGFwc2VkLlxuICAgKiBAcGFyYW0ge051bWJlcn0gdGltZVNwYW4gTWF4aW11bSB0aW1lIGxlbmd0aCBvZiBhIHdpbmRvdy5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE1heGltdW0gZWxlbWVudCBjb3VudCBvZiBhIHdpbmRvdy5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIHdpbmRvd2luZyB0aW1lcnMgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiB3aW5kb3dzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLndpbmRvd1dpdGhUaW1lT3JDb3VudCA9IGZ1bmN0aW9uICh0aW1lU3BhbiwgY291bnQsIHNjaGVkdWxlcikge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciB0aW1lckQgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICAgIGdyb3VwRGlzcG9zYWJsZSA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKHRpbWVyRCksXG4gICAgICAgICAgcmVmQ291bnREaXNwb3NhYmxlID0gbmV3IFJlZkNvdW50RGlzcG9zYWJsZShncm91cERpc3Bvc2FibGUpLFxuICAgICAgICAgIG4gPSAwLFxuICAgICAgICAgIHdpbmRvd0lkID0gMCxcbiAgICAgICAgICBzID0gbmV3IFN1YmplY3QoKTtcblxuICAgICAgZnVuY3Rpb24gY3JlYXRlVGltZXIoaWQpIHtcbiAgICAgICAgdmFyIG0gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgdGltZXJELnNldERpc3Bvc2FibGUobSk7XG4gICAgICAgIG0uc2V0RGlzcG9zYWJsZShzY2hlZHVsZXIuc2NoZWR1bGVGdXR1cmUobnVsbCwgdGltZVNwYW4sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoaWQgIT09IHdpbmRvd0lkKSB7IHJldHVybjsgfVxuICAgICAgICAgIG4gPSAwO1xuICAgICAgICAgIHZhciBuZXdJZCA9ICsrd2luZG93SWQ7XG4gICAgICAgICAgcy5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIHMgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChhZGRSZWYocywgcmVmQ291bnREaXNwb3NhYmxlKSk7XG4gICAgICAgICAgY3JlYXRlVGltZXIobmV3SWQpO1xuICAgICAgICB9KSk7XG4gICAgICB9XG5cbiAgICAgIG9ic2VydmVyLm9uTmV4dChhZGRSZWYocywgcmVmQ291bnREaXNwb3NhYmxlKSk7XG4gICAgICBjcmVhdGVUaW1lcigwKTtcblxuICAgICAgZ3JvdXBEaXNwb3NhYmxlLmFkZChzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHZhciBuZXdJZCA9IDAsIG5ld1dpbmRvdyA9IGZhbHNlO1xuICAgICAgICAgIHMub25OZXh0KHgpO1xuICAgICAgICAgIGlmICgrK24gPT09IGNvdW50KSB7XG4gICAgICAgICAgICBuZXdXaW5kb3cgPSB0cnVlO1xuICAgICAgICAgICAgbiA9IDA7XG4gICAgICAgICAgICBuZXdJZCA9ICsrd2luZG93SWQ7XG4gICAgICAgICAgICBzLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgICBzID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChhZGRSZWYocywgcmVmQ291bnREaXNwb3NhYmxlKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5ld1dpbmRvdyAmJiBjcmVhdGVUaW1lcihuZXdJZCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcy5vbkVycm9yKGUpO1xuICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgKSk7XG4gICAgICByZXR1cm4gcmVmQ291bnREaXNwb3NhYmxlO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gdG9BcnJheSh4KSB7IHJldHVybiB4LnRvQXJyYXkoKTsgfVxuXG4gIC8qKlxuICAgKiAgUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgaW50byB6ZXJvIG9yIG1vcmUgYnVmZmVycyB3aGljaCBhcmUgcHJvZHVjZWQgYmFzZWQgb24gdGltaW5nIGluZm9ybWF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gdGltZVNwYW4gTGVuZ3RoIG9mIGVhY2ggYnVmZmVyIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpLlxuICAgKiBAcGFyYW0ge01peGVkfSBbdGltZVNoaWZ0T3JTY2hlZHVsZXJdICBJbnRlcnZhbCBiZXR3ZWVuIGNyZWF0aW9uIG9mIGNvbnNlY3V0aXZlIGJ1ZmZlcnMgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcyksIG9yIGFuIG9wdGlvbmFsIHNjaGVkdWxlciBwYXJhbWV0ZXIuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lIHNoaWZ0IGNvcnJlc3BvbmRzIHRvIHRoZSB0aW1lU3BhbiBwYXJhbWV0ZXIsIHJlc3VsdGluZyBpbiBub24tb3ZlcmxhcHBpbmcgYWRqYWNlbnQgYnVmZmVycy5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIGJ1ZmZlciB0aW1lcnMgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiBidWZmZXJzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmJ1ZmZlcldpdGhUaW1lID0gZnVuY3Rpb24gKHRpbWVTcGFuLCB0aW1lU2hpZnRPclNjaGVkdWxlciwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIHRoaXMud2luZG93V2l0aFRpbWUodGltZVNwYW4sIHRpbWVTaGlmdE9yU2NoZWR1bGVyLCBzY2hlZHVsZXIpLmZsYXRNYXAodG9BcnJheSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gdG9BcnJheSh4KSB7IHJldHVybiB4LnRvQXJyYXkoKTsgfVxuXG4gIC8qKlxuICAgKiAgUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgaW50byBhIGJ1ZmZlciB0aGF0IGlzIGNvbXBsZXRlZCB3aGVuIGVpdGhlciBpdCdzIGZ1bGwgb3IgYSBnaXZlbiBhbW91bnQgb2YgdGltZSBoYXMgZWxhcHNlZC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVTcGFuIE1heGltdW0gdGltZSBsZW5ndGggb2YgYSBidWZmZXIuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBNYXhpbXVtIGVsZW1lbnQgY291bnQgb2YgYSBidWZmZXIuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSAgU2NoZWR1bGVyIHRvIHJ1biBidWZmZXJpbiB0aW1lcnMgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiBidWZmZXJzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmJ1ZmZlcldpdGhUaW1lT3JDb3VudCA9IGZ1bmN0aW9uICh0aW1lU3BhbiwgY291bnQsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiB0aGlzLndpbmRvd1dpdGhUaW1lT3JDb3VudCh0aW1lU3BhbiwgY291bnQsIHNjaGVkdWxlcikuZmxhdE1hcCh0b0FycmF5KTtcbiAgfTtcblxuICB2YXIgVGltZUludGVydmFsT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGltZUludGVydmFsT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUaW1lSW50ZXJ2YWxPYnNlcnZhYmxlKHNvdXJjZSwgcykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRpbWVJbnRlcnZhbE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgVGltZUludGVydmFsT2JzZXJ2ZXIobywgdGhpcy5fcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGltZUludGVydmFsT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBUaW1lSW50ZXJ2YWxPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGltZUludGVydmFsT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBUaW1lSW50ZXJ2YWxPYnNlcnZlcihvLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5fbCA9IHMubm93KCk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUaW1lSW50ZXJ2YWxPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgbm93ID0gdGhpcy5fcy5ub3coKSwgc3BhbiA9IG5vdyAtIHRoaXMuX2w7XG4gICAgICB0aGlzLl9sID0gbm93O1xuICAgICAgdGhpcy5fby5vbk5leHQoeyB2YWx1ZTogeCwgaW50ZXJ2YWw6IHNwYW4gfSk7XG4gICAgfTtcbiAgICBUaW1lSW50ZXJ2YWxPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgVGltZUludGVydmFsT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFRpbWVJbnRlcnZhbE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIFJlY29yZHMgdGhlIHRpbWUgaW50ZXJ2YWwgYmV0d2VlbiBjb25zZWN1dGl2ZSB2YWx1ZXMgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIDEgLSByZXMgPSBzb3VyY2UudGltZUludGVydmFsKCk7XG4gICAqICAyIC0gcmVzID0gc291cmNlLnRpbWVJbnRlcnZhbChSeC5TY2hlZHVsZXIudGltZW91dCk7XG4gICAqXG4gICAqIEBwYXJhbSBbc2NoZWR1bGVyXSAgU2NoZWR1bGVyIHVzZWQgdG8gY29tcHV0ZSB0aW1lIGludGVydmFscy4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGltZSBpbnRlcnZhbCBpbmZvcm1hdGlvbiBvbiB2YWx1ZXMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGltZUludGVydmFsID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgVGltZUludGVydmFsT2JzZXJ2YWJsZSh0aGlzLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIHZhciBUaW1lc3RhbXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUaW1lc3RhbXBPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRpbWVzdGFtcE9ic2VydmFibGUoc291cmNlLCBzKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGltZXN0YW1wT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBUaW1lc3RhbXBPYnNlcnZlcihvLCB0aGlzLl9zKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBUaW1lc3RhbXBPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFRpbWVzdGFtcE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUaW1lc3RhbXBPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUaW1lc3RhbXBPYnNlcnZlcihvLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGltZXN0YW1wT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fby5vbk5leHQoeyB2YWx1ZTogeCwgdGltZXN0YW1wOiB0aGlzLl9zLm5vdygpIH0pO1xuICAgIH07XG5cbiAgICBUaW1lc3RhbXBPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBUaW1lc3RhbXBPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGltZXN0YW1wT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgUmVjb3JkcyB0aGUgdGltZXN0YW1wIGZvciBlYWNoIHZhbHVlIGluIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAxIC0gcmVzID0gc291cmNlLnRpbWVzdGFtcCgpOyAvLyBwcm9kdWNlcyB7IHZhbHVlOiB4LCB0aW1lc3RhbXA6IHRzIH1cbiAgICogIDIgLSByZXMgPSBzb3VyY2UudGltZXN0YW1wKFJ4LlNjaGVkdWxlci5kZWZhdWx0KTtcbiAgICpcbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdXNlZCB0byBjb21wdXRlIHRpbWVzdGFtcHMuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSBkZWZhdWx0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRpbWVzdGFtcCBpbmZvcm1hdGlvbiBvbiB2YWx1ZXMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGltZXN0YW1wID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgVGltZXN0YW1wT2JzZXJ2YWJsZSh0aGlzLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIHZhciBTYW1wbGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNhbXBsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2FtcGxlT2JzZXJ2YWJsZShzb3VyY2UsIHNhbXBsZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fc2FtcGxlciA9IHNhbXBsZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTYW1wbGVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgbzogbyxcbiAgICAgICAgYXRFbmQ6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgaGFzVmFsdWU6IGZhbHNlLFxuICAgICAgICBzb3VyY2VTdWJzY3JpcHRpb246IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpXG4gICAgICB9O1xuXG4gICAgICBzdGF0ZS5zb3VyY2VTdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZSh0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNhbXBsZVNvdXJjZU9ic2VydmVyKHN0YXRlKSkpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICBzdGF0ZS5zb3VyY2VTdWJzY3JpcHRpb24sXG4gICAgICAgIHRoaXMuX3NhbXBsZXIuc3Vic2NyaWJlKG5ldyBTYW1wbGVyT2JzZXJ2ZXIoc3RhdGUpKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNhbXBsZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU2FtcGxlck9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNhbXBsZXJPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTYW1wbGVyT2JzZXJ2ZXIocykge1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTYW1wbGVyT2JzZXJ2ZXIucHJvdG90eXBlLl9oYW5kbGVNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX3MuaGFzVmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9zLm8ub25OZXh0KHRoaXMuX3MudmFsdWUpO1xuICAgICAgfVxuICAgICAgdGhpcy5fcy5hdEVuZCAmJiB0aGlzLl9zLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgU2FtcGxlck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9oYW5kbGVNZXNzYWdlKCk7IH07XG4gICAgU2FtcGxlck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX3Mub25FcnJvcihlKTsgfTtcbiAgICBTYW1wbGVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5faGFuZGxlTWVzc2FnZSgpOyB9O1xuXG4gICAgcmV0dXJuIFNhbXBsZXJPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgdmFyIFNhbXBsZVNvdXJjZU9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNhbXBsZVNvdXJjZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNhbXBsZVNvdXJjZU9ic2VydmVyKHMpIHtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2FtcGxlU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgICB0aGlzLl9zLnZhbHVlID0geDtcbiAgICB9O1xuICAgIFNhbXBsZVNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX3Muby5vbkVycm9yKGUpOyB9O1xuICAgIFNhbXBsZVNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9zLmF0RW5kID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3Muc291cmNlU3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNhbXBsZVNvdXJjZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIFNhbXBsZXMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgYXQgZWFjaCBpbnRlcnZhbC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIDEgLSByZXMgPSBzb3VyY2Uuc2FtcGxlKHNhbXBsZU9ic2VydmFibGUpOyAvLyBTYW1wbGVyIHRpY2sgc2VxdWVuY2VcbiAgICogIDIgLSByZXMgPSBzb3VyY2Uuc2FtcGxlKDUwMDApOyAvLyA1IHNlY29uZHNcbiAgICogIDIgLSByZXMgPSBzb3VyY2Uuc2FtcGxlKDUwMDAsIFJ4LlNjaGVkdWxlci50aW1lb3V0KTsgLy8gNSBzZWNvbmRzXG4gICAqXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGludGVydmFsT3JTYW1wbGVyIEludGVydmFsIGF0IHdoaWNoIHRvIHNhbXBsZSAoc3BlY2lmaWVkIGFzIGFuIGludGVnZXIgZGVub3RpbmcgbWlsbGlzZWNvbmRzKSBvciBTYW1wbGVyIE9ic2VydmFibGUuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSAgU2NoZWR1bGVyIHRvIHJ1biB0aGUgc2FtcGxpbmcgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gU2FtcGxlZCBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNhbXBsZSA9IGZ1bmN0aW9uIChpbnRlcnZhbE9yU2FtcGxlciwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIHR5cGVvZiBpbnRlcnZhbE9yU2FtcGxlciA9PT0gJ251bWJlcicgP1xuICAgICAgbmV3IFNhbXBsZU9ic2VydmFibGUodGhpcywgb2JzZXJ2YWJsZWludGVydmFsKGludGVydmFsT3JTYW1wbGVyLCBzY2hlZHVsZXIpKSA6XG4gICAgICBuZXcgU2FtcGxlT2JzZXJ2YWJsZSh0aGlzLCBpbnRlcnZhbE9yU2FtcGxlcik7XG4gIH07XG5cbiAgdmFyIFRpbWVvdXRFcnJvciA9IFJ4LlRpbWVvdXRFcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdUaW1lb3V0IGhhcyBvY2N1cnJlZCc7XG4gICAgdGhpcy5uYW1lID0gJ1RpbWVvdXRFcnJvcic7XG4gICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgfTtcbiAgVGltZW91dEVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcblxuICBmdW5jdGlvbiB0aW1lb3V0V2l0aFNlbGVjdG9yKHNvdXJjZSwgZmlyc3RUaW1lb3V0LCB0aW1lb3V0RHVyYXRpb25TZWxlY3Rvciwgb3RoZXIpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihmaXJzdFRpbWVvdXQpKSB7XG4gICAgICBvdGhlciA9IHRpbWVvdXREdXJhdGlvblNlbGVjdG9yO1xuICAgICAgdGltZW91dER1cmF0aW9uU2VsZWN0b3IgPSBmaXJzdFRpbWVvdXQ7XG4gICAgICBmaXJzdFRpbWVvdXQgPSBvYnNlcnZhYmxlTmV2ZXIoKTtcbiAgICB9XG4gICAgT2JzZXJ2YWJsZS5pc09ic2VydmFibGUob3RoZXIpIHx8IChvdGhlciA9IG9ic2VydmFibGVUaHJvdyhuZXcgVGltZW91dEVycm9yKCkpKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICB0aW1lciA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksXG4gICAgICAgIG9yaWdpbmFsID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cbiAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKG9yaWdpbmFsKTtcblxuICAgICAgdmFyIGlkID0gMCwgc3dpdGNoZWQgPSBmYWxzZTtcblxuICAgICAgZnVuY3Rpb24gc2V0VGltZXIodGltZW91dCkge1xuICAgICAgICB2YXIgbXlJZCA9IGlkLCBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gdGltZXJXaW5zKCkge1xuICAgICAgICAgIHN3aXRjaGVkID0gKG15SWQgPT09IGlkKTtcbiAgICAgICAgICByZXR1cm4gc3dpdGNoZWQ7XG4gICAgICAgIH1cblxuICAgICAgICB0aW1lci5zZXREaXNwb3NhYmxlKGQpO1xuICAgICAgICBkLnNldERpc3Bvc2FibGUodGltZW91dC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRpbWVyV2lucygpICYmIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKG90aGVyLnN1YnNjcmliZShvKSk7XG4gICAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdGltZXJXaW5zKCkgJiYgby5vbkVycm9yKGUpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGltZXJXaW5zKCkgJiYgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUob3RoZXIuc3Vic2NyaWJlKG8pKTtcbiAgICAgICAgfSkpO1xuICAgICAgfTtcblxuICAgICAgc2V0VGltZXIoZmlyc3RUaW1lb3V0KTtcblxuICAgICAgZnVuY3Rpb24gb1dpbnMoKSB7XG4gICAgICAgIHZhciByZXMgPSAhc3dpdGNoZWQ7XG4gICAgICAgIGlmIChyZXMpIHsgaWQrKzsgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfVxuXG4gICAgICBvcmlnaW5hbC5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgaWYgKG9XaW5zKCkpIHtcbiAgICAgICAgICBvLm9uTmV4dCh4KTtcbiAgICAgICAgICB2YXIgdGltZW91dCA9IHRyeUNhdGNoKHRpbWVvdXREdXJhdGlvblNlbGVjdG9yKSh4KTtcbiAgICAgICAgICBpZiAodGltZW91dCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcih0aW1lb3V0LmUpOyB9XG4gICAgICAgICAgc2V0VGltZXIoaXNQcm9taXNlKHRpbWVvdXQpID8gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHRpbWVvdXQpIDogdGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIG9XaW5zKCkgJiYgby5vbkVycm9yKGUpO1xuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBvV2lucygpICYmIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb24sIHRpbWVyKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZW91dChzb3VyY2UsIGR1ZVRpbWUsIG90aGVyLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoaXNTY2hlZHVsZXIob3RoZXIpKSB7XG4gICAgICBzY2hlZHVsZXIgPSBvdGhlcjtcbiAgICAgIG90aGVyID0gb2JzZXJ2YWJsZVRocm93KG5ldyBUaW1lb3V0RXJyb3IoKSk7XG4gICAgfVxuICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEVycm9yKSB7IG90aGVyID0gb2JzZXJ2YWJsZVRocm93KG90aGVyKTsgfVxuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIE9ic2VydmFibGUuaXNPYnNlcnZhYmxlKG90aGVyKSB8fCAob3RoZXIgPSBvYnNlcnZhYmxlVGhyb3cobmV3IFRpbWVvdXRFcnJvcigpKSk7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgaWQgPSAwLFxuICAgICAgICBvcmlnaW5hbCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLFxuICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICBzd2l0Y2hlZCA9IGZhbHNlLFxuICAgICAgICB0aW1lciA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG5cbiAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKG9yaWdpbmFsKTtcblxuICAgICAgZnVuY3Rpb24gY3JlYXRlVGltZXIoKSB7XG4gICAgICAgIHZhciBteUlkID0gaWQ7XG4gICAgICAgIHRpbWVyLnNldERpc3Bvc2FibGUoc2NoZWR1bGVyLnNjaGVkdWxlRnV0dXJlKG51bGwsIGR1ZVRpbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzd2l0Y2hlZCA9IGlkID09PSBteUlkO1xuICAgICAgICAgIGlmIChzd2l0Y2hlZCkge1xuICAgICAgICAgICAgaXNQcm9taXNlKG90aGVyKSAmJiAob3RoZXIgPSBvYnNlcnZhYmxlRnJvbVByb21pc2Uob3RoZXIpKTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKG90aGVyLnN1YnNjcmliZShvKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICB9XG5cbiAgICAgIGNyZWF0ZVRpbWVyKCk7XG5cbiAgICAgIG9yaWdpbmFsLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShmdW5jdGlvbiAoeCkge1xuICAgICAgICBpZiAoIXN3aXRjaGVkKSB7XG4gICAgICAgICAgaWQrKztcbiAgICAgICAgICBvLm9uTmV4dCh4KTtcbiAgICAgICAgICBjcmVhdGVUaW1lcigpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoIXN3aXRjaGVkKSB7XG4gICAgICAgICAgaWQrKztcbiAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFzd2l0Y2hlZCkge1xuICAgICAgICAgIGlkKys7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9uLCB0aW1lcik7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIG9ic2VydmFibGVQcm90by50aW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBmaXJzdEFyZyA9IGFyZ3VtZW50c1swXTtcbiAgICBpZiAoZmlyc3RBcmcgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBmaXJzdEFyZyA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiB0aW1lb3V0KHRoaXMsIGZpcnN0QXJnLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgfSBlbHNlIGlmIChPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZShmaXJzdEFyZykgfHwgaXNGdW5jdGlvbihmaXJzdEFyZykpIHtcbiAgICAgIHJldHVybiB0aW1lb3V0V2l0aFNlbGVjdG9yKHRoaXMsIGZpcnN0QXJnLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMnKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIEdlbmVyYXRlQWJzb2x1dGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhHZW5lcmF0ZUFic29sdXRlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBHZW5lcmF0ZUFic29sdXRlT2JzZXJ2YWJsZShzdGF0ZSwgY25kRm4sIGl0ckZuLCByZXNGbiwgdGltZUZuLCBzKSB7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgdGhpcy5fY25kRm4gPSBjbmRGbjtcbiAgICAgIHRoaXMuX2l0ckZuID0gaXRyRm47XG4gICAgICB0aGlzLl9yZXNGbiA9IHJlc0ZuO1xuICAgICAgdGhpcy5fdGltZUZuID0gdGltZUZuO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZVJlY3Vyc2l2ZShzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgc3RhdGUuaGFzUmVzdWx0ICYmIHN0YXRlLm8ub25OZXh0KHN0YXRlLnJlc3VsdCk7XG5cbiAgICAgIGlmIChzdGF0ZS5maXJzdCkge1xuICAgICAgICBzdGF0ZS5maXJzdCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUubmV3U3RhdGUgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl9pdHJGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgICBpZiAoc3RhdGUubmV3U3RhdGUgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3Ioc3RhdGUubmV3U3RhdGUuZSk7IH1cbiAgICAgIH1cbiAgICAgIHN0YXRlLmhhc1Jlc3VsdCA9IHRyeUNhdGNoKHN0YXRlLnNlbGYuX2NuZEZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICBpZiAoc3RhdGUuaGFzUmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKHN0YXRlLmhhc1Jlc3VsdC5lKTsgfVxuICAgICAgaWYgKHN0YXRlLmhhc1Jlc3VsdCkge1xuICAgICAgICBzdGF0ZS5yZXN1bHQgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl9yZXNGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgICBpZiAoc3RhdGUucmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKHN0YXRlLnJlc3VsdC5lKTsgfVxuICAgICAgICB2YXIgdGltZSA9IHRyeUNhdGNoKHN0YXRlLnNlbGYuX3RpbWVGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgICBpZiAodGltZSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcih0aW1lLmUpOyB9XG4gICAgICAgIHJlY3Vyc2Uoc3RhdGUsIHRpbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUuby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIEdlbmVyYXRlQWJzb2x1dGVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgbzogbyxcbiAgICAgICAgc2VsZjogdGhpcyxcbiAgICAgICAgbmV3U3RhdGU6IHRoaXMuX3N0YXRlLFxuICAgICAgICBmaXJzdDogdHJ1ZSxcbiAgICAgICAgaGFzUmVzdWx0OiBmYWxzZVxuICAgICAgfTtcbiAgICAgIHJldHVybiB0aGlzLl9zLnNjaGVkdWxlUmVjdXJzaXZlRnV0dXJlKHN0YXRlLCBuZXcgRGF0ZSh0aGlzLl9zLm5vdygpKSwgc2NoZWR1bGVSZWN1cnNpdmUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gR2VuZXJhdGVBYnNvbHV0ZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIEdlbmVyYXRlQWJzb2x1dGVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgaXRlcmF0aW5nIGEgc3RhdGUgZnJvbSBhbiBpbml0aWFsIHN0YXRlIHVudGlsIHRoZSBjb25kaXRpb24gZmFpbHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICByZXMgPSBzb3VyY2UuZ2VuZXJhdGVXaXRoQWJzb2x1dGVUaW1lKDAsXG4gICAqICAgICAgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHJldHVybiB0cnVlOyB9LFxuICAgKiAgICAgIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICsgMTsgfSxcbiAgICogICAgICBmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSxcbiAgICogICAgICBmdW5jdGlvbiAoeCkgeyByZXR1cm4gbmV3IERhdGUoKTsgfVxuICAgKiAgfSk7XG4gICAqXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGluaXRpYWxTdGF0ZSBJbml0aWFsIHN0YXRlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25kaXRpb24gQ29uZGl0aW9uIHRvIHRlcm1pbmF0ZSBnZW5lcmF0aW9uICh1cG9uIHJldHVybmluZyBmYWxzZSkuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGUgSXRlcmF0aW9uIHN0ZXAgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc3VsdFNlbGVjdG9yIFNlbGVjdG9yIGZ1bmN0aW9uIGZvciByZXN1bHRzIHByb2R1Y2VkIGluIHRoZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gdGltZVNlbGVjdG9yIFRpbWUgc2VsZWN0b3IgZnVuY3Rpb24gdG8gY29udHJvbCB0aGUgc3BlZWQgb2YgdmFsdWVzIGJlaW5nIHByb2R1Y2VkIGVhY2ggaXRlcmF0aW9uLCByZXR1cm5pbmcgRGF0ZSB2YWx1ZXMuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSAgU2NoZWR1bGVyIG9uIHdoaWNoIHRvIHJ1biB0aGUgZ2VuZXJhdG9yIGxvb3AuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIGdlbmVyYXRlZCBzZXF1ZW5jZS5cbiAgICovXG4gIE9ic2VydmFibGUuZ2VuZXJhdGVXaXRoQWJzb2x1dGVUaW1lID0gZnVuY3Rpb24gKGluaXRpYWxTdGF0ZSwgY29uZGl0aW9uLCBpdGVyYXRlLCByZXN1bHRTZWxlY3RvciwgdGltZVNlbGVjdG9yLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEdlbmVyYXRlQWJzb2x1dGVPYnNlcnZhYmxlKGluaXRpYWxTdGF0ZSwgY29uZGl0aW9uLCBpdGVyYXRlLCByZXN1bHRTZWxlY3RvciwgdGltZVNlbGVjdG9yLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIHZhciBHZW5lcmF0ZVJlbGF0aXZlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoR2VuZXJhdGVSZWxhdGl2ZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gR2VuZXJhdGVSZWxhdGl2ZU9ic2VydmFibGUoc3RhdGUsIGNuZEZuLCBpdHJGbiwgcmVzRm4sIHRpbWVGbiwgcykge1xuICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX2NuZEZuID0gY25kRm47XG4gICAgICB0aGlzLl9pdHJGbiA9IGl0ckZuO1xuICAgICAgdGhpcy5fcmVzRm4gPSByZXNGbjtcbiAgICAgIHRoaXMuX3RpbWVGbiA9IHRpbWVGbjtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVSZWN1cnNpdmUoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIHN0YXRlLmhhc1Jlc3VsdCAmJiBzdGF0ZS5vLm9uTmV4dChzdGF0ZS5yZXN1bHQpO1xuXG4gICAgICBpZiAoc3RhdGUuZmlyc3QpIHtcbiAgICAgICAgc3RhdGUuZmlyc3QgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLm5ld1N0YXRlID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5faXRyRm4pKHN0YXRlLm5ld1N0YXRlKTtcbiAgICAgICAgaWYgKHN0YXRlLm5ld1N0YXRlID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKHN0YXRlLm5ld1N0YXRlLmUpOyB9XG4gICAgICB9XG5cbiAgICAgIHN0YXRlLmhhc1Jlc3VsdCA9IHRyeUNhdGNoKHN0YXRlLnNlbGYuX2NuZEZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICBpZiAoc3RhdGUuaGFzUmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKHN0YXRlLmhhc1Jlc3VsdC5lKTsgfVxuICAgICAgaWYgKHN0YXRlLmhhc1Jlc3VsdCkge1xuICAgICAgICBzdGF0ZS5yZXN1bHQgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl9yZXNGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgICBpZiAoc3RhdGUucmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKHN0YXRlLnJlc3VsdC5lKTsgfVxuICAgICAgICB2YXIgdGltZSA9IHRyeUNhdGNoKHN0YXRlLnNlbGYuX3RpbWVGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgICBpZiAodGltZSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcih0aW1lLmUpOyB9XG4gICAgICAgIHJlY3Vyc2Uoc3RhdGUsIHRpbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUuby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIEdlbmVyYXRlUmVsYXRpdmVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgbzogbyxcbiAgICAgICAgc2VsZjogdGhpcyxcbiAgICAgICAgbmV3U3RhdGU6IHRoaXMuX3N0YXRlLFxuICAgICAgICBmaXJzdDogdHJ1ZSxcbiAgICAgICAgaGFzUmVzdWx0OiBmYWxzZVxuICAgICAgfTtcbiAgICAgIHJldHVybiB0aGlzLl9zLnNjaGVkdWxlUmVjdXJzaXZlRnV0dXJlKHN0YXRlLCAwLCBzY2hlZHVsZVJlY3Vyc2l2ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBHZW5lcmF0ZVJlbGF0aXZlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgR2VuZXJhdGVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgaXRlcmF0aW5nIGEgc3RhdGUgZnJvbSBhbiBpbml0aWFsIHN0YXRlIHVudGlsIHRoZSBjb25kaXRpb24gZmFpbHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICByZXMgPSBzb3VyY2UuZ2VuZXJhdGVXaXRoUmVsYXRpdmVUaW1lKDAsXG4gICAqICAgICAgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHJldHVybiB0cnVlOyB9LFxuICAgKiAgICAgIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICsgMTsgfSxcbiAgICogICAgICBmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSxcbiAgICogICAgICBmdW5jdGlvbiAoeCkgeyByZXR1cm4gNTAwOyB9XG4gICAqICApO1xuICAgKlxuICAgKiBAcGFyYW0ge01peGVkfSBpbml0aWFsU3RhdGUgSW5pdGlhbCBzdGF0ZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29uZGl0aW9uIENvbmRpdGlvbiB0byB0ZXJtaW5hdGUgZ2VuZXJhdGlvbiAodXBvbiByZXR1cm5pbmcgZmFsc2UpLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlIEl0ZXJhdGlvbiBzdGVwIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXN1bHRTZWxlY3RvciBTZWxlY3RvciBmdW5jdGlvbiBmb3IgcmVzdWx0cyBwcm9kdWNlZCBpbiB0aGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHRpbWVTZWxlY3RvciBUaW1lIHNlbGVjdG9yIGZ1bmN0aW9uIHRvIGNvbnRyb2wgdGhlIHNwZWVkIG9mIHZhbHVlcyBiZWluZyBwcm9kdWNlZCBlYWNoIGl0ZXJhdGlvbiwgcmV0dXJuaW5nIGludGVnZXIgdmFsdWVzIGRlbm90aW5nIG1pbGxpc2Vjb25kcy5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgb24gd2hpY2ggdG8gcnVuIHRoZSBnZW5lcmF0b3IgbG9vcC4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgZ2VuZXJhdGVkIHNlcXVlbmNlLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5nZW5lcmF0ZVdpdGhSZWxhdGl2ZVRpbWUgPSBmdW5jdGlvbiAoaW5pdGlhbFN0YXRlLCBjb25kaXRpb24sIGl0ZXJhdGUsIHJlc3VsdFNlbGVjdG9yLCB0aW1lU2VsZWN0b3IsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgR2VuZXJhdGVSZWxhdGl2ZU9ic2VydmFibGUoaW5pdGlhbFN0YXRlLCBjb25kaXRpb24sIGl0ZXJhdGUsIHJlc3VsdFNlbGVjdG9yLCB0aW1lU2VsZWN0b3IsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIERlbGF5U3Vic2NyaXB0aW9uID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKERlbGF5U3Vic2NyaXB0aW9uLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERlbGF5U3Vic2NyaXB0aW9uKHNvdXJjZSwgZHQsIHMpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZHQgPSBkdDtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRGVsYXlTdWJzY3JpcHRpb24ucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGQgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuXG4gICAgICBkLnNldERpc3Bvc2FibGUodGhpcy5fcy5zY2hlZHVsZUZ1dHVyZShbdGhpcy5zb3VyY2UsIG8sIGRdLCB0aGlzLl9kdCwgc2NoZWR1bGVNZXRob2QpKTtcblxuICAgICAgcmV0dXJuIGQ7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHMsIHN0YXRlKSB7XG4gICAgICB2YXIgc291cmNlID0gc3RhdGVbMF0sIG8gPSBzdGF0ZVsxXSwgZCA9IHN0YXRlWzJdO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUobykpO1xuICAgIH1cblxuICAgIHJldHVybiBEZWxheVN1YnNjcmlwdGlvbjtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgVGltZSBzaGlmdHMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgZGVsYXlpbmcgdGhlIHN1YnNjcmlwdGlvbiB3aXRoIHRoZSBzcGVjaWZpZWQgcmVsYXRpdmUgdGltZSBkdXJhdGlvbiwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gcnVuIHRpbWVycy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIDEgLSByZXMgPSBzb3VyY2UuZGVsYXlTdWJzY3JpcHRpb24oNTAwMCk7IC8vIDVzXG4gICAqICAyIC0gcmVzID0gc291cmNlLmRlbGF5U3Vic2NyaXB0aW9uKDUwMDAsIFJ4LlNjaGVkdWxlci5kZWZhdWx0KTsgLy8gNSBzZWNvbmRzXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkdWVUaW1lIFJlbGF0aXZlIG9yIGFic29sdXRlIHRpbWUgc2hpZnQgb2YgdGhlIHN1YnNjcmlwdGlvbi5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIHRoZSBzdWJzY3JpcHRpb24gZGVsYXkgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGltZS1zaGlmdGVkIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmRlbGF5U3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgRGVsYXlTdWJzY3JpcHRpb24odGhpcywgZHVlVGltZSwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgU2tpcExhc3RXaXRoVGltZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBMYXN0V2l0aFRpbWVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNraXBMYXN0V2l0aFRpbWVPYnNlcnZhYmxlKHNvdXJjZSwgZCwgcykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9kID0gZDtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcExhc3RXaXRoVGltZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2tpcExhc3RXaXRoVGltZU9ic2VydmVyKG8sIHRoaXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBMYXN0V2l0aFRpbWVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFNraXBMYXN0V2l0aFRpbWVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcExhc3RXaXRoVGltZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gU2tpcExhc3RXaXRoVGltZU9ic2VydmVyKG8sIHApIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcyA9IHAuX3M7XG4gICAgICB0aGlzLl9kID0gcC5fZDtcbiAgICAgIHRoaXMuX3EgPSBbXTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBMYXN0V2l0aFRpbWVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgbm93ID0gdGhpcy5fcy5ub3coKTtcbiAgICAgIHRoaXMuX3EucHVzaCh7IGludGVydmFsOiBub3csIHZhbHVlOiB4IH0pO1xuICAgICAgd2hpbGUgKHRoaXMuX3EubGVuZ3RoID4gMCAmJiBub3cgLSB0aGlzLl9xWzBdLmludGVydmFsID49IHRoaXMuX2QpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fcS5zaGlmdCgpLnZhbHVlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFNraXBMYXN0V2l0aFRpbWVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgU2tpcExhc3RXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbm93ID0gdGhpcy5fcy5ub3coKTtcbiAgICAgIHdoaWxlICh0aGlzLl9xLmxlbmd0aCA+IDAgJiYgbm93IC0gdGhpcy5fcVswXS5pbnRlcnZhbCA+PSB0aGlzLl9kKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3Euc2hpZnQoKS52YWx1ZSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgU2tpcHMgZWxlbWVudHMgZm9yIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gZnJvbSB0aGUgZW5kIG9mIHRoZSBvYnNlcnZhYmxlIHNvdXJjZSBzZXF1ZW5jZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gcnVuIHRpbWVycy5cbiAgICogQGRlc2NyaXB0aW9uXG4gICAqICBUaGlzIG9wZXJhdG9yIGFjY3VtdWxhdGVzIGEgcXVldWUgd2l0aCBhIGxlbmd0aCBlbm91Z2ggdG8gc3RvcmUgZWxlbWVudHMgcmVjZWl2ZWQgZHVyaW5nIHRoZSBpbml0aWFsIGR1cmF0aW9uIHdpbmRvdy5cbiAgICogIEFzIG1vcmUgZWxlbWVudHMgYXJlIHJlY2VpdmVkLCBlbGVtZW50cyBvbGRlciB0aGFuIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gYXJlIHRha2VuIGZyb20gdGhlIHF1ZXVlIGFuZCBwcm9kdWNlZCBvbiB0aGVcbiAgICogIHJlc3VsdCBzZXF1ZW5jZS4gVGhpcyBjYXVzZXMgZWxlbWVudHMgdG8gYmUgZGVsYXllZCB3aXRoIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gZHVyYXRpb24gRHVyYXRpb24gZm9yIHNraXBwaW5nIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiB0aGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSAgU2NoZWR1bGVyIHRvIHJ1biB0aGUgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFJ4LlNjaGVkdWxlci50aW1lb3V0XG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIGVsZW1lbnRzIHNraXBwZWQgZHVyaW5nIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gZnJvbSB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2tpcExhc3RXaXRoVGltZSA9IGZ1bmN0aW9uIChkdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZSh0aGlzLCBkdXJhdGlvbiwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgVGFrZUxhc3RXaXRoVGltZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VMYXN0V2l0aFRpbWVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRha2VMYXN0V2l0aFRpbWVPYnNlcnZhYmxlKHNvdXJjZSwgZCwgcykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9kID0gZDtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZUxhc3RXaXRoVGltZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgVGFrZUxhc3RXaXRoVGltZU9ic2VydmVyKG8sIHRoaXMuX2QsIHRoaXMuX3MpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRha2VMYXN0V2l0aFRpbWVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFRha2VMYXN0V2l0aFRpbWVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGFrZUxhc3RXaXRoVGltZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gVGFrZUxhc3RXaXRoVGltZU9ic2VydmVyKG8sIGQsIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fZCA9IGQ7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX3EgPSBbXTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRha2VMYXN0V2l0aFRpbWVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgbm93ID0gdGhpcy5fcy5ub3coKTtcbiAgICAgIHRoaXMuX3EucHVzaCh7IGludGVydmFsOiBub3csIHZhbHVlOiB4IH0pO1xuICAgICAgd2hpbGUgKHRoaXMuX3EubGVuZ3RoID4gMCAmJiBub3cgLSB0aGlzLl9xWzBdLmludGVydmFsID49IHRoaXMuX2QpIHtcbiAgICAgICAgdGhpcy5fcS5zaGlmdCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgVGFrZUxhc3RXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBub3cgPSB0aGlzLl9zLm5vdygpO1xuICAgICAgd2hpbGUgKHRoaXMuX3EubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgbmV4dCA9IHRoaXMuX3Euc2hpZnQoKTtcbiAgICAgICAgaWYgKG5vdyAtIG5leHQuaW50ZXJ2YWwgPD0gdGhpcy5fZCkgeyB0aGlzLl9vLm9uTmV4dChuZXh0LnZhbHVlKTsgfVxuICAgICAgfVxuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGFrZUxhc3RXaXRoVGltZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIFJldHVybnMgZWxlbWVudHMgd2l0aGluIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gZnJvbSB0aGUgZW5kIG9mIHRoZSBvYnNlcnZhYmxlIHNvdXJjZSBzZXF1ZW5jZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXJzIHRvIHJ1biB0aW1lcnMgYW5kIHRvIGRyYWluIHRoZSBjb2xsZWN0ZWQgZWxlbWVudHMuXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiAgVGhpcyBvcGVyYXRvciBhY2N1bXVsYXRlcyBhIHF1ZXVlIHdpdGggYSBsZW5ndGggZW5vdWdoIHRvIHN0b3JlIGVsZW1lbnRzIHJlY2VpdmVkIGR1cmluZyB0aGUgaW5pdGlhbCBkdXJhdGlvbiB3aW5kb3cuXG4gICAqICBBcyBtb3JlIGVsZW1lbnRzIGFyZSByZWNlaXZlZCwgZWxlbWVudHMgb2xkZXIgdGhhbiB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGFyZSB0YWtlbiBmcm9tIHRoZSBxdWV1ZSBhbmQgcHJvZHVjZWQgb24gdGhlXG4gICAqICByZXN1bHQgc2VxdWVuY2UuIFRoaXMgY2F1c2VzIGVsZW1lbnRzIHRvIGJlIGRlbGF5ZWQgd2l0aCBkdXJhdGlvbi5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1cmF0aW9uIER1cmF0aW9uIGZvciB0YWtpbmcgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gUnguU2NoZWR1bGVyLnRpbWVvdXQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIGVsZW1lbnRzIHRha2VuIGR1cmluZyB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRha2VMYXN0V2l0aFRpbWUgPSBmdW5jdGlvbiAoZHVyYXRpb24sIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgVGFrZUxhc3RXaXRoVGltZU9ic2VydmFibGUodGhpcywgZHVyYXRpb24sIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGFuIGFycmF5IHdpdGggdGhlIGVsZW1lbnRzIHdpdGhpbiB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGZyb20gdGhlIGVuZCBvZiB0aGUgb2JzZXJ2YWJsZSBzb3VyY2Ugc2VxdWVuY2UsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHJ1biB0aW1lcnMuXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiAgVGhpcyBvcGVyYXRvciBhY2N1bXVsYXRlcyBhIHF1ZXVlIHdpdGggYSBsZW5ndGggZW5vdWdoIHRvIHN0b3JlIGVsZW1lbnRzIHJlY2VpdmVkIGR1cmluZyB0aGUgaW5pdGlhbCBkdXJhdGlvbiB3aW5kb3cuXG4gICAqICBBcyBtb3JlIGVsZW1lbnRzIGFyZSByZWNlaXZlZCwgZWxlbWVudHMgb2xkZXIgdGhhbiB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGFyZSB0YWtlbiBmcm9tIHRoZSBxdWV1ZSBhbmQgcHJvZHVjZWQgb24gdGhlXG4gICAqICByZXN1bHQgc2VxdWVuY2UuIFRoaXMgY2F1c2VzIGVsZW1lbnRzIHRvIGJlIGRlbGF5ZWQgd2l0aCBkdXJhdGlvbi5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1cmF0aW9uIER1cmF0aW9uIGZvciB0YWtpbmcgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gUnguU2NoZWR1bGVyLnRpbWVvdXQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgYXJyYXkgd2l0aCB0aGUgZWxlbWVudHMgdGFrZW4gZHVyaW5nIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gZnJvbSB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGFrZUxhc3RCdWZmZXJXaXRoVGltZSA9IGZ1bmN0aW9uIChkdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgcSA9IFtdO1xuICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgdmFyIG5vdyA9IHNjaGVkdWxlci5ub3coKTtcbiAgICAgICAgcS5wdXNoKHsgaW50ZXJ2YWw6IG5vdywgdmFsdWU6IHggfSk7XG4gICAgICAgIHdoaWxlIChxLmxlbmd0aCA+IDAgJiYgbm93IC0gcVswXS5pbnRlcnZhbCA+PSBkdXJhdGlvbikge1xuICAgICAgICAgIHEuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBub3cgPSBzY2hlZHVsZXIubm93KCksIHJlcyA9IFtdO1xuICAgICAgICB3aGlsZSAocS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdmFyIG5leHQgPSBxLnNoaWZ0KCk7XG4gICAgICAgICAgbm93IC0gbmV4dC5pbnRlcnZhbCA8PSBkdXJhdGlvbiAmJiByZXMucHVzaChuZXh0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBvLm9uTmV4dChyZXMpO1xuICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICB9KTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG4gIHZhciBUYWtlV2l0aFRpbWVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYWtlV2l0aFRpbWVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRha2VXaXRoVGltZU9ic2VydmFibGUoc291cmNlLCBkLCBzKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2QgPSBkO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzLCBvKSB7XG4gICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgfVxuXG4gICAgVGFrZVdpdGhUaW1lT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG4gICAgICAgIHRoaXMuX3Muc2NoZWR1bGVGdXR1cmUobywgdGhpcy5fZCwgc2NoZWR1bGVNZXRob2QpLFxuICAgICAgICB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobylcbiAgICAgICk7XG4gICAgfTtcblxuICAgIHJldHVybiBUYWtlV2l0aFRpbWVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBUYWtlcyBlbGVtZW50cyBmb3IgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBmcm9tIHRoZSBzdGFydCBvZiB0aGUgb2JzZXJ2YWJsZSBzb3VyY2Ugc2VxdWVuY2UsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHJ1biB0aW1lcnMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAxIC0gcmVzID0gc291cmNlLnRha2VXaXRoVGltZSg1MDAwLCAgW29wdGlvbmFsIHNjaGVkdWxlcl0pO1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICogIFRoaXMgb3BlcmF0b3IgYWNjdW11bGF0ZXMgYSBxdWV1ZSB3aXRoIGEgbGVuZ3RoIGVub3VnaCB0byBzdG9yZSBlbGVtZW50cyByZWNlaXZlZCBkdXJpbmcgdGhlIGluaXRpYWwgZHVyYXRpb24gd2luZG93LlxuICAgKiAgQXMgbW9yZSBlbGVtZW50cyBhcmUgcmVjZWl2ZWQsIGVsZW1lbnRzIG9sZGVyIHRoYW4gdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBhcmUgdGFrZW4gZnJvbSB0aGUgcXVldWUgYW5kIHByb2R1Y2VkIG9uIHRoZVxuICAgKiAgcmVzdWx0IHNlcXVlbmNlLiBUaGlzIGNhdXNlcyBlbGVtZW50cyB0byBiZSBkZWxheWVkIHdpdGggZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkdXJhdGlvbiBEdXJhdGlvbiBmb3IgdGFraW5nIGVsZW1lbnRzIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gUnguU2NoZWR1bGVyLnRpbWVvdXQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIGVsZW1lbnRzIHRha2VuIGR1cmluZyB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGFrZVdpdGhUaW1lID0gZnVuY3Rpb24gKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFRha2VXaXRoVGltZU9ic2VydmFibGUodGhpcywgZHVyYXRpb24sIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFNraXBXaXRoVGltZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBXaXRoVGltZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcFdpdGhUaW1lT2JzZXJ2YWJsZShzb3VyY2UsIGQsIHMpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZCA9IGQ7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX29wZW4gPSBmYWxzZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHMsIHNlbGYpIHtcbiAgICAgIHNlbGYuX29wZW4gPSB0cnVlO1xuICAgIH1cblxuICAgIFNraXBXaXRoVGltZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICB0aGlzLl9zLnNjaGVkdWxlRnV0dXJlKHRoaXMsIHRoaXMuX2QsIHNjaGVkdWxlTWV0aG9kKSxcbiAgICAgICAgdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTa2lwV2l0aFRpbWVPYnNlcnZlcihvLCB0aGlzKSlcbiAgICAgICk7XG4gICAgfTtcblxuICAgIHJldHVybiBTa2lwV2l0aFRpbWVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFNraXBXaXRoVGltZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwV2l0aFRpbWVPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFNraXBXaXRoVGltZU9ic2VydmVyKG8sIHApIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcCA9IHA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwV2l0aFRpbWVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3AuX29wZW4gJiYgdGhpcy5fby5vbk5leHQoeCk7IH07XG4gICAgU2tpcFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFNraXBXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBTa2lwV2l0aFRpbWVPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBTa2lwcyBlbGVtZW50cyBmb3IgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBmcm9tIHRoZSBzdGFydCBvZiB0aGUgb2JzZXJ2YWJsZSBzb3VyY2Ugc2VxdWVuY2UsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHJ1biB0aW1lcnMuXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiAgU3BlY2lmeWluZyBhIHplcm8gdmFsdWUgZm9yIGR1cmF0aW9uIGRvZXNuJ3QgZ3VhcmFudGVlIG5vIGVsZW1lbnRzIHdpbGwgYmUgZHJvcHBlZCBmcm9tIHRoZSBzdGFydCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKiAgVGhpcyBpcyBhIHNpZGUtZWZmZWN0IG9mIHRoZSBhc3luY2hyb255IGludHJvZHVjZWQgYnkgdGhlIHNjaGVkdWxlciwgd2hlcmUgdGhlIGFjdGlvbiB0aGF0IGNhdXNlcyBjYWxsYmFja3MgZnJvbSB0aGUgc291cmNlIHNlcXVlbmNlIHRvIGJlIGZvcndhcmRlZFxuICAgKiAgbWF5IG5vdCBleGVjdXRlIGltbWVkaWF0ZWx5LCBkZXNwaXRlIHRoZSB6ZXJvIGR1ZSB0aW1lLlxuICAgKlxuICAgKiAgRXJyb3JzIHByb2R1Y2VkIGJ5IHRoZSBzb3VyY2Ugc2VxdWVuY2UgYXJlIGFsd2F5cyBmb3J3YXJkZWQgdG8gdGhlIHJlc3VsdCBzZXF1ZW5jZSwgZXZlbiBpZiB0aGUgZXJyb3Igb2NjdXJzIGJlZm9yZSB0aGUgZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkdXJhdGlvbiBEdXJhdGlvbiBmb3Igc2tpcHBpbmcgZWxlbWVudHMgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBSeC5TY2hlZHVsZXIudGltZW91dC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgZWxlbWVudHMgc2tpcHBlZCBkdXJpbmcgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBmcm9tIHRoZSBzdGFydCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNraXBXaXRoVGltZSA9IGZ1bmN0aW9uIChkdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBTa2lwV2l0aFRpbWVPYnNlcnZhYmxlKHRoaXMsIGR1cmF0aW9uLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIHZhciBTa2lwVW50aWxXaXRoVGltZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTa2lwVW50aWxXaXRoVGltZU9ic2VydmFibGUoc291cmNlLCBzdGFydFRpbWUsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9zdCA9IHN0YXJ0VGltZTtcbiAgICAgIHRoaXMuX3MgPSBzY2hlZHVsZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzLCBzdGF0ZSkge1xuICAgICAgc3RhdGUuX29wZW4gPSB0cnVlO1xuICAgIH1cblxuICAgIFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB0aGlzLl9vcGVuID0gZmFsc2U7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG4gICAgICAgIHRoaXMuX3Muc2NoZWR1bGVGdXR1cmUodGhpcywgdGhpcy5fc3QsIHNjaGVkdWxlTWV0aG9kKSxcbiAgICAgICAgdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyKG8sIHRoaXMpKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZlcihvLCBwKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3AuX29wZW4gJiYgdGhpcy5fby5vbk5leHQoeCk7IH07XG4gICAgU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cblxuICAvKipcbiAgICogIFNraXBzIGVsZW1lbnRzIGZyb20gdGhlIG9ic2VydmFibGUgc291cmNlIHNlcXVlbmNlIHVudGlsIHRoZSBzcGVjaWZpZWQgc3RhcnQgdGltZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gcnVuIHRpbWVycy5cbiAgICogIEVycm9ycyBwcm9kdWNlZCBieSB0aGUgc291cmNlIHNlcXVlbmNlIGFyZSBhbHdheXMgZm9yd2FyZGVkIHRvIHRoZSByZXN1bHQgc2VxdWVuY2UsIGV2ZW4gaWYgdGhlIGVycm9yIG9jY3VycyBiZWZvcmUgdGhlIHN0YXJ0IHRpbWUuXG4gICAqXG4gICAqIEBleGFtcGxlc1xuICAgKiAgMSAtIHJlcyA9IHNvdXJjZS5za2lwVW50aWxXaXRoVGltZShuZXcgRGF0ZSgpLCBbc2NoZWR1bGVyXSk7XG4gICAqICAyIC0gcmVzID0gc291cmNlLnNraXBVbnRpbFdpdGhUaW1lKDUwMDAsIFtzY2hlZHVsZXJdKTtcbiAgICogQHBhcmFtIHtEYXRlfE51bWJlcn0gc3RhcnRUaW1lIFRpbWUgdG8gc3RhcnQgdGFraW5nIGVsZW1lbnRzIGZyb20gdGhlIHNvdXJjZSBzZXF1ZW5jZS4gSWYgdGhpcyB2YWx1ZSBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gRGF0ZSgpLCBubyBlbGVtZW50cyB3aWxsIGJlIHNraXBwZWQuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gUnguU2NoZWR1bGVyLnRpbWVvdXQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIGVsZW1lbnRzIHNraXBwZWQgdW50aWwgdGhlIHNwZWNpZmllZCBzdGFydCB0aW1lLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNraXBVbnRpbFdpdGhUaW1lID0gZnVuY3Rpb24gKHN0YXJ0VGltZSwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBTa2lwVW50aWxXaXRoVGltZU9ic2VydmFibGUodGhpcywgc3RhcnRUaW1lLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgVGFrZXMgZWxlbWVudHMgZm9yIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gdW50aWwgdGhlIHNwZWNpZmllZCBlbmQgdGltZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gcnVuIHRpbWVycy5cbiAgICogQHBhcmFtIHtOdW1iZXIgfCBEYXRlfSBlbmRUaW1lIFRpbWUgdG8gc3RvcCB0YWtpbmcgZWxlbWVudHMgZnJvbSB0aGUgc291cmNlIHNlcXVlbmNlLiBJZiB0aGlzIHZhbHVlIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byBuZXcgRGF0ZSgpLCB0aGUgcmVzdWx0IHN0cmVhbSB3aWxsIGNvbXBsZXRlIGltbWVkaWF0ZWx5LlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHJ1biB0aGUgdGltZXIgb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIGVsZW1lbnRzIHRha2VuIHVudGlsIHRoZSBzcGVjaWZpZWQgZW5kIHRpbWUuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGFrZVVudGlsV2l0aFRpbWUgPSBmdW5jdGlvbiAoZW5kVGltZSwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG4gICAgICAgIHNjaGVkdWxlci5zY2hlZHVsZUZ1dHVyZShvLCBlbmRUaW1lLCBmdW5jdGlvbiAoXywgbykgeyBvLm9uQ29tcGxldGVkKCk7IH0pLFxuICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKG8pKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBvbmx5IHRoZSBmaXJzdCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGR1cmluZyBzZXF1ZW50aWFsIHRpbWUgd2luZG93cyBvZiBhIHNwZWNpZmllZCBkdXJhdGlvbi5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHdpbmRvd0R1cmF0aW9uIHRpbWUgdG8gd2FpdCBiZWZvcmUgZW1pdHRpbmcgYW5vdGhlciBpdGVtIGFmdGVyIGVtaXR0aW5nIHRoZSBsYXN0IGl0ZW1cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIHRoZSBTY2hlZHVsZXIgdG8gdXNlIGludGVybmFsbHkgdG8gbWFuYWdlIHRoZSB0aW1lcnMgdGhhdCBoYW5kbGUgdGltZW91dCBmb3IgZWFjaCBpdGVtLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci50aW1lb3V0LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IHBlcmZvcm1zIHRoZSB0aHJvdHRsZSBvcGVyYXRpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGhyb3R0bGUgPSBmdW5jdGlvbiAod2luZG93RHVyYXRpb24sIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHZhciBkdXJhdGlvbiA9ICt3aW5kb3dEdXJhdGlvbiB8fCAwO1xuICAgIGlmIChkdXJhdGlvbiA8PSAwKSB7IHRocm93IG5ldyBSYW5nZUVycm9yKCd3aW5kb3dEdXJhdGlvbiBjYW5ub3QgYmUgbGVzcyBvciBlcXVhbCB6ZXJvLicpOyB9XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgbGFzdE9uTmV4dCA9IDA7XG4gICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShcbiAgICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICB2YXIgbm93ID0gc2NoZWR1bGVyLm5vdygpO1xuICAgICAgICAgIGlmIChsYXN0T25OZXh0ID09PSAwIHx8IG5vdyAtIGxhc3RPbk5leHQgPj0gZHVyYXRpb24pIHtcbiAgICAgICAgICAgIGxhc3RPbk5leHQgPSBub3c7XG4gICAgICAgICAgICBvLm9uTmV4dCh4KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LCBmdW5jdGlvbiAoKSB7IG8ub25Db21wbGV0ZWQoKTsgfVxuICAgICAgKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG4gIHZhciBUcmFuc2R1Y2VPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVHJhbnNkdWNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVHJhbnNkdWNlT2JzZXJ2ZXIobywgeGZvcm0pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5feGZvcm0gPSB4Zm9ybTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRyYW5zZHVjZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl94Zm9ybVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSkuY2FsbCh0aGlzLl94Zm9ybSwgdGhpcy5fbywgeCk7XG4gICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgfTtcblxuICAgIFRyYW5zZHVjZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcblxuICAgIFRyYW5zZHVjZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl94Zm9ybVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHRoaXMuX28pO1xuICAgIH07XG5cbiAgICByZXR1cm4gVHJhbnNkdWNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIGZ1bmN0aW9uIHRyYW5zZm9ybUZvck9ic2VydmVyKG8pIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ0BAdHJhbnNkdWNlci9pbml0JzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBvO1xuICAgICAgfSxcbiAgICAgICdAQHRyYW5zZHVjZXIvc3RlcCc6IGZ1bmN0aW9uKG9icywgaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIG9icy5vbk5leHQoaW5wdXQpO1xuICAgICAgfSxcbiAgICAgICdAQHRyYW5zZHVjZXIvcmVzdWx0JzogZnVuY3Rpb24ob2JzKSB7XG4gICAgICAgIHJldHVybiBvYnMub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGVzIGEgdHJhbnNkdWNlciB0byB0cmFuc2Zvcm0gdGhlIG9ic2VydmFibGUgc2VxdWVuY2VcbiAgICogQHBhcmFtIHtUcmFuc2R1Y2VyfSB0cmFuc2R1Y2VyIEEgdHJhbnNkdWNlciB0byBleGVjdXRlXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdHMgZnJvbSB0aGUgdHJhbnNkdWNlci5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50cmFuc2R1Y2UgPSBmdW5jdGlvbih0cmFuc2R1Y2VyKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciB4Zm9ybSA9IHRyYW5zZHVjZXIodHJhbnNmb3JtRm9yT2JzZXJ2ZXIobykpO1xuICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFRyYW5zZHVjZU9ic2VydmVyKG8sIHhmb3JtKSk7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICB2YXIgU3dpdGNoRmlyc3RPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTd2l0Y2hGaXJzdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU3dpdGNoRmlyc3RPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTd2l0Y2hGaXJzdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIG0gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSxcbiAgICAgICAgZyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCksXG4gICAgICAgIHN0YXRlID0ge1xuICAgICAgICAgIGhhc0N1cnJlbnQ6IGZhbHNlLFxuICAgICAgICAgIGlzU3RvcHBlZDogZmFsc2UsXG4gICAgICAgICAgbzogbyxcbiAgICAgICAgICBnOiBnXG4gICAgICAgIH07XG5cbiAgICAgIGcuYWRkKG0pO1xuICAgICAgbS5zZXREaXNwb3NhYmxlKHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU3dpdGNoRmlyc3RPYnNlcnZlcihzdGF0ZSkpKTtcbiAgICAgIHJldHVybiBnO1xuICAgIH07XG5cbiAgICByZXR1cm4gU3dpdGNoRmlyc3RPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFN3aXRjaEZpcnN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU3dpdGNoRmlyc3RPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTd2l0Y2hGaXJzdE9ic2VydmVyKHN0YXRlKSB7XG4gICAgICB0aGlzLl9zID0gc3RhdGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTd2l0Y2hGaXJzdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICghdGhpcy5fcy5oYXNDdXJyZW50KSB7XG4gICAgICAgIHRoaXMuX3MuaGFzQ3VycmVudCA9IHRydWU7XG4gICAgICAgIGlzUHJvbWlzZSh4KSAmJiAoeCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZSh4KSk7XG4gICAgICAgIHZhciBpbm5lciA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICB0aGlzLl9zLmcuYWRkKGlubmVyKTtcbiAgICAgICAgaW5uZXIuc2V0RGlzcG9zYWJsZSh4LnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcih0aGlzLl9zLCBpbm5lcikpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgU3dpdGNoRmlyc3RPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fcy5vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFN3aXRjaEZpcnN0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3MuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICF0aGlzLl9zLmhhc0N1cnJlbnQgJiYgdGhpcy5fcy5nLmxlbmd0aCA9PT0gMSAmJiB0aGlzLl9zLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKHN0YXRlLCBpbm5lcikge1xuICAgICAgdGhpcy5fcyA9IHN0YXRlO1xuICAgICAgdGhpcy5faSA9IGlubmVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3Muby5vbk5leHQoeCk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9zLm8ub25FcnJvcihlKTsgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9zLmcucmVtb3ZlKHRoaXMuX2kpO1xuICAgICAgdGhpcy5fcy5oYXNDdXJyZW50ID0gZmFsc2U7XG4gICAgICB0aGlzLl9zLmlzU3RvcHBlZCAmJiB0aGlzLl9zLmcubGVuZ3RoID09PSAxICYmIHRoaXMuX3Muby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU3dpdGNoRmlyc3RPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGEgZXhjbHVzaXZlIHdhaXRpbmcgZm9yIHRoZSBmaXJzdCB0byBmaW5pc2ggYmVmb3JlIHN1YnNjcmliaW5nIHRvIGFub3RoZXIgb2JzZXJ2YWJsZS5cbiAgICogT2JzZXJ2YWJsZXMgdGhhdCBjb21lIGluIGJldHdlZW4gc3Vic2NyaXB0aW9ucyB3aWxsIGJlIGRyb3BwZWQgb24gdGhlIGZsb29yLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQSBleGNsdXNpdmUgb2JzZXJ2YWJsZSB3aXRoIG9ubHkgdGhlIHJlc3VsdHMgdGhhdCBoYXBwZW4gd2hlbiBzdWJzY3JpYmVkLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnN3aXRjaEZpcnN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgU3dpdGNoRmlyc3RPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG5vYnNlcnZhYmxlUHJvdG8uZmxhdE1hcEZpcnN0ID0gb2JzZXJ2YWJsZVByb3RvLnNlbGVjdE1hbnlGaXJzdCA9IGZ1bmN0aW9uKHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykge1xuICAgIHJldHVybiBuZXcgRmxhdE1hcE9ic2VydmFibGUodGhpcywgc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKS5zd2l0Y2hGaXJzdCgpO1xufTtcblxuUnguT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmxhdE1hcFdpdGhNYXhDb25jdXJyZW50ID0gZnVuY3Rpb24obGltaXQsIHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykge1xuICAgIHJldHVybiBuZXcgRmxhdE1hcE9ic2VydmFibGUodGhpcywgc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKS5tZXJnZShsaW1pdCk7XG59O1xuICAvKiogUHJvdmlkZXMgYSBzZXQgb2YgZXh0ZW5zaW9uIG1ldGhvZHMgZm9yIHZpcnR1YWwgdGltZSBzY2hlZHVsaW5nLiAqL1xuICB2YXIgVmlydHVhbFRpbWVTY2hlZHVsZXIgPSBSeC5WaXJ0dWFsVGltZVNjaGVkdWxlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVmlydHVhbFRpbWVTY2hlZHVsZXIsIF9fc3VwZXJfXyk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHZpcnR1YWwgdGltZSBzY2hlZHVsZXIgd2l0aCB0aGUgc3BlY2lmaWVkIGluaXRpYWwgY2xvY2sgdmFsdWUgYW5kIGFic29sdXRlIHRpbWUgY29tcGFyZXIuXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5pdGlhbENsb2NrIEluaXRpYWwgdmFsdWUgZm9yIHRoZSBjbG9jay5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wYXJlciBDb21wYXJlciB0byBkZXRlcm1pbmUgY2F1c2FsaXR5IG9mIGV2ZW50cyBiYXNlZCBvbiBhYnNvbHV0ZSB0aW1lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFZpcnR1YWxUaW1lU2NoZWR1bGVyKGluaXRpYWxDbG9jaywgY29tcGFyZXIpIHtcbiAgICAgIHRoaXMuY2xvY2sgPSBpbml0aWFsQ2xvY2s7XG4gICAgICB0aGlzLmNvbXBhcmVyID0gY29tcGFyZXI7XG4gICAgICB0aGlzLmlzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5xdWV1ZSA9IG5ldyBQcmlvcml0eVF1ZXVlKDEwMjQpO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgdmFyIFZpcnR1YWxUaW1lU2NoZWR1bGVyUHJvdG90eXBlID0gVmlydHVhbFRpbWVTY2hlZHVsZXIucHJvdG90eXBlO1xuXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUubm93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMudG9BYnNvbHV0ZVRpbWUodGhpcy5jbG9jayk7XG4gICAgfTtcblxuICAgIFZpcnR1YWxUaW1lU2NoZWR1bGVyUHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlQWJzb2x1dGUoc3RhdGUsIHRoaXMuY2xvY2ssIGFjdGlvbik7XG4gICAgfTtcblxuICAgIFZpcnR1YWxUaW1lU2NoZWR1bGVyUHJvdG90eXBlLnNjaGVkdWxlRnV0dXJlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcbiAgICAgIHZhciBkdCA9IGR1ZVRpbWUgaW5zdGFuY2VvZiBEYXRlID9cbiAgICAgICAgdGhpcy50b1JlbGF0aXZlVGltZShkdWVUaW1lIC0gdGhpcy5ub3coKSkgOlxuICAgICAgICB0aGlzLnRvUmVsYXRpdmVUaW1lKGR1ZVRpbWUpO1xuXG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZVJlbGF0aXZlKHN0YXRlLCBkdCwgYWN0aW9uKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIHJlbGF0aXZlIHRpbWUgdmFsdWUgdG8gYW4gYWJzb2x1dGUgdGltZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYWJzb2x1dGUgQWJzb2x1dGUgdmlydHVhbCB0aW1lIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByZWxhdGl2ZSBSZWxhdGl2ZSB2aXJ0dWFsIHRpbWUgdmFsdWUgdG8gYWRkLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gUmVzdWx0aW5nIGFic29sdXRlIHZpcnR1YWwgdGltZSBzdW0gdmFsdWUuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuYWRkID0gbm90SW1wbGVtZW50ZWQ7XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhbiBhYnNvbHV0ZSB0aW1lIHRvIGEgbnVtYmVyXG4gICAgICogQHBhcmFtIHtBbnl9IFRoZSBhYnNvbHV0ZSB0aW1lLlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBhYnNvbHV0ZSB0aW1lIGluIG1zXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUudG9BYnNvbHV0ZVRpbWUgPSBub3RJbXBsZW1lbnRlZDtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBUaW1lU3BhbiB2YWx1ZSB0byBhIHJlbGF0aXZlIHZpcnR1YWwgdGltZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdGltZVNwYW4gVGltZVNwYW4gdmFsdWUgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IENvcnJlc3BvbmRpbmcgcmVsYXRpdmUgdmlydHVhbCB0aW1lIHZhbHVlLlxuICAgICAqL1xuICAgIFZpcnR1YWxUaW1lU2NoZWR1bGVyUHJvdG90eXBlLnRvUmVsYXRpdmVUaW1lID0gbm90SW1wbGVtZW50ZWQ7XG5cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYSBwZXJpb2RpYyBwaWVjZSBvZiB3b3JrIGJ5IGR5bmFtaWNhbGx5IGRpc2NvdmVyaW5nIHRoZSBzY2hlZHVsZXIncyBjYXBhYmlsaXRpZXMuIFRoZSBwZXJpb2RpYyB0YXNrIHdpbGwgYmUgZW11bGF0ZWQgdXNpbmcgcmVjdXJzaXZlIHNjaGVkdWxpbmcuXG4gICAgICogQHBhcmFtIHtNaXhlZH0gc3RhdGUgSW5pdGlhbCBzdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB1cG9uIHRoZSBmaXJzdCBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHBlcmlvZCBQZXJpb2QgZm9yIHJ1bm5pbmcgdGhlIHdvcmsgcGVyaW9kaWNhbGx5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gYmUgZXhlY3V0ZWQsIHBvdGVudGlhbGx5IHVwZGF0aW5nIHRoZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgcmVjdXJyaW5nIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxuICAgICAqL1xuICAgIFZpcnR1YWxUaW1lU2NoZWR1bGVyUHJvdG90eXBlLnNjaGVkdWxlUGVyaW9kaWMgPSBmdW5jdGlvbiAoc3RhdGUsIHBlcmlvZCwgYWN0aW9uKSB7XG4gICAgICB2YXIgcyA9IG5ldyBTY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlKHRoaXMsIHN0YXRlLCBwZXJpb2QsIGFjdGlvbik7XG4gICAgICByZXR1cm4gcy5zdGFydCgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYW4gYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGFmdGVyIGR1ZVRpbWUuXG4gICAgICogQHBhcmFtIHtNaXhlZH0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgUmVsYXRpdmUgdGltZSBhZnRlciB3aGljaCB0byBleGVjdXRlIHRoZSBhY3Rpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuc2NoZWR1bGVSZWxhdGl2ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICB2YXIgcnVuQXQgPSB0aGlzLmFkZCh0aGlzLmNsb2NrLCBkdWVUaW1lKTtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlQWJzb2x1dGUoc3RhdGUsIHJ1bkF0LCBhY3Rpb24pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIHZpcnR1YWwgdGltZSBzY2hlZHVsZXIuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuaXNFbmFibGVkKSB7XG4gICAgICAgIHRoaXMuaXNFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIHZhciBuZXh0ID0gdGhpcy5nZXROZXh0KCk7XG4gICAgICAgICAgaWYgKG5leHQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcGFyZXIobmV4dC5kdWVUaW1lLCB0aGlzLmNsb2NrKSA+IDAgJiYgKHRoaXMuY2xvY2sgPSBuZXh0LmR1ZVRpbWUpO1xuICAgICAgICAgICAgbmV4dC5pbnZva2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKHRoaXMuaXNFbmFibGVkKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3RvcHMgdGhlIHZpcnR1YWwgdGltZSBzY2hlZHVsZXIuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuaXNFbmFibGVkID0gZmFsc2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFkdmFuY2VzIHRoZSBzY2hlZHVsZXIncyBjbG9jayB0byB0aGUgc3BlY2lmaWVkIHRpbWUsIHJ1bm5pbmcgYWxsIHdvcmsgdGlsbCB0aGF0IHBvaW50LlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lIEFic29sdXRlIHRpbWUgdG8gYWR2YW5jZSB0aGUgc2NoZWR1bGVyJ3MgY2xvY2sgdG8uXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuYWR2YW5jZVRvID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgIHZhciBkdWVUb0Nsb2NrID0gdGhpcy5jb21wYXJlcih0aGlzLmNsb2NrLCB0aW1lKTtcbiAgICAgIGlmICh0aGlzLmNvbXBhcmVyKHRoaXMuY2xvY2ssIHRpbWUpID4gMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgICAgaWYgKGR1ZVRvQ2xvY2sgPT09IDApIHsgcmV0dXJuOyB9XG4gICAgICBpZiAoIXRoaXMuaXNFbmFibGVkKSB7XG4gICAgICAgIHRoaXMuaXNFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIHZhciBuZXh0ID0gdGhpcy5nZXROZXh0KCk7XG4gICAgICAgICAgaWYgKG5leHQgIT09IG51bGwgJiYgdGhpcy5jb21wYXJlcihuZXh0LmR1ZVRpbWUsIHRpbWUpIDw9IDApIHtcbiAgICAgICAgICAgIHRoaXMuY29tcGFyZXIobmV4dC5kdWVUaW1lLCB0aGlzLmNsb2NrKSA+IDAgJiYgKHRoaXMuY2xvY2sgPSBuZXh0LmR1ZVRpbWUpO1xuICAgICAgICAgICAgbmV4dC5pbnZva2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKHRoaXMuaXNFbmFibGVkKTtcbiAgICAgICAgdGhpcy5jbG9jayA9IHRpbWU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFkdmFuY2VzIHRoZSBzY2hlZHVsZXIncyBjbG9jayBieSB0aGUgc3BlY2lmaWVkIHJlbGF0aXZlIHRpbWUsIHJ1bm5pbmcgYWxsIHdvcmsgc2NoZWR1bGVkIGZvciB0aGF0IHRpbWVzcGFuLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lIFJlbGF0aXZlIHRpbWUgdG8gYWR2YW5jZSB0aGUgc2NoZWR1bGVyJ3MgY2xvY2sgYnkuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuYWR2YW5jZUJ5ID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgIHZhciBkdCA9IHRoaXMuYWRkKHRoaXMuY2xvY2ssIHRpbWUpLFxuICAgICAgICAgIGR1ZVRvQ2xvY2sgPSB0aGlzLmNvbXBhcmVyKHRoaXMuY2xvY2ssIGR0KTtcbiAgICAgIGlmIChkdWVUb0Nsb2NrID4gMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgICAgaWYgKGR1ZVRvQ2xvY2sgPT09IDApIHsgIHJldHVybjsgfVxuXG4gICAgICB0aGlzLmFkdmFuY2VUbyhkdCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFkdmFuY2VzIHRoZSBzY2hlZHVsZXIncyBjbG9jayBieSB0aGUgc3BlY2lmaWVkIHJlbGF0aXZlIHRpbWUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWUgUmVsYXRpdmUgdGltZSB0byBhZHZhbmNlIHRoZSBzY2hlZHVsZXIncyBjbG9jayBieS5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5zbGVlcCA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gICAgICB2YXIgZHQgPSB0aGlzLmFkZCh0aGlzLmNsb2NrLCB0aW1lKTtcbiAgICAgIGlmICh0aGlzLmNvbXBhcmVyKHRoaXMuY2xvY2ssIGR0KSA+PSAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG5cbiAgICAgIHRoaXMuY2xvY2sgPSBkdDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbmV4dCBzY2hlZHVsZWQgaXRlbSB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcmV0dXJucyB7U2NoZWR1bGVkSXRlbX0gVGhlIG5leHQgc2NoZWR1bGVkIGl0ZW0uXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuZ2V0TmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdoaWxlICh0aGlzLnF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIG5leHQgPSB0aGlzLnF1ZXVlLnBlZWsoKTtcbiAgICAgICAgaWYgKG5leHQuaXNDYW5jZWxsZWQoKSkge1xuICAgICAgICAgIHRoaXMucXVldWUuZGVxdWV1ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZCBhdCBkdWVUaW1lLlxuICAgICAqIEBwYXJhbSB7TWl4ZWR9IHN0YXRlIFN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkdWVUaW1lIEFic29sdXRlIHRpbWUgYXQgd2hpY2ggdG8gZXhlY3V0ZSB0aGUgYWN0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxuICAgICAqL1xuICAgIFZpcnR1YWxUaW1lU2NoZWR1bGVyUHJvdG90eXBlLnNjaGVkdWxlQWJzb2x1dGUgPSBmdW5jdGlvbiAoc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbikge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBmdW5jdGlvbiBydW4oc2NoZWR1bGVyLCBzdGF0ZTEpIHtcbiAgICAgICAgc2VsZi5xdWV1ZS5yZW1vdmUoc2kpO1xuICAgICAgICByZXR1cm4gYWN0aW9uKHNjaGVkdWxlciwgc3RhdGUxKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNpID0gbmV3IFNjaGVkdWxlZEl0ZW0odGhpcywgc3RhdGUsIHJ1biwgZHVlVGltZSwgdGhpcy5jb21wYXJlcik7XG4gICAgICB0aGlzLnF1ZXVlLmVucXVldWUoc2kpO1xuXG4gICAgICByZXR1cm4gc2kuZGlzcG9zYWJsZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFZpcnR1YWxUaW1lU2NoZWR1bGVyO1xuICB9KFNjaGVkdWxlcikpO1xuXG4gIC8qKiBQcm92aWRlcyBhIHZpcnR1YWwgdGltZSBzY2hlZHVsZXIgdGhhdCB1c2VzIERhdGUgZm9yIGFic29sdXRlIHRpbWUgYW5kIG51bWJlciBmb3IgcmVsYXRpdmUgdGltZS4gKi9cbiAgUnguSGlzdG9yaWNhbFNjaGVkdWxlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSGlzdG9yaWNhbFNjaGVkdWxlciwgX19zdXBlcl9fKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgaGlzdG9yaWNhbCBzY2hlZHVsZXIgd2l0aCB0aGUgc3BlY2lmaWVkIGluaXRpYWwgY2xvY2sgdmFsdWUuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluaXRpYWxDbG9jayBJbml0aWFsIHZhbHVlIGZvciB0aGUgY2xvY2suXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29tcGFyZXIgQ29tcGFyZXIgdG8gZGV0ZXJtaW5lIGNhdXNhbGl0eSBvZiBldmVudHMgYmFzZWQgb24gYWJzb2x1dGUgdGltZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBIaXN0b3JpY2FsU2NoZWR1bGVyKGluaXRpYWxDbG9jaywgY29tcGFyZXIpIHtcbiAgICAgIHZhciBjbG9jayA9IGluaXRpYWxDbG9jayA9PSBudWxsID8gMCA6IGluaXRpYWxDbG9jaztcbiAgICAgIHZhciBjbXAgPSBjb21wYXJlciB8fCBkZWZhdWx0U3ViQ29tcGFyZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzLCBjbG9jaywgY21wKTtcbiAgICB9XG5cbiAgICB2YXIgSGlzdG9yaWNhbFNjaGVkdWxlclByb3RvID0gSGlzdG9yaWNhbFNjaGVkdWxlci5wcm90b3R5cGU7XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcmVsYXRpdmUgdGltZSB2YWx1ZSB0byBhbiBhYnNvbHV0ZSB0aW1lIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhYnNvbHV0ZSBBYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJlbGF0aXZlIFJlbGF0aXZlIHZpcnR1YWwgdGltZSB2YWx1ZSB0byBhZGQuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBSZXN1bHRpbmcgYWJzb2x1dGUgdmlydHVhbCB0aW1lIHN1bSB2YWx1ZS5cbiAgICAgKi9cbiAgICBIaXN0b3JpY2FsU2NoZWR1bGVyUHJvdG8uYWRkID0gZnVuY3Rpb24gKGFic29sdXRlLCByZWxhdGl2ZSkge1xuICAgICAgcmV0dXJuIGFic29sdXRlICsgcmVsYXRpdmU7XG4gICAgfTtcblxuICAgIEhpc3RvcmljYWxTY2hlZHVsZXJQcm90by50b0Fic29sdXRlVGltZSA9IGZ1bmN0aW9uIChhYnNvbHV0ZSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKGFic29sdXRlKS5nZXRUaW1lKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBUaW1lU3BhbiB2YWx1ZSB0byBhIHJlbGF0aXZlIHZpcnR1YWwgdGltZSB2YWx1ZS5cbiAgICAgKiBAbWVtYmVyT2YgSGlzdG9yaWNhbFNjaGVkdWxlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lU3BhbiBUaW1lU3BhbiB2YWx1ZSB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gQ29ycmVzcG9uZGluZyByZWxhdGl2ZSB2aXJ0dWFsIHRpbWUgdmFsdWUuXG4gICAgICovXG4gICAgSGlzdG9yaWNhbFNjaGVkdWxlclByb3RvLnRvUmVsYXRpdmVUaW1lID0gZnVuY3Rpb24gKHRpbWVTcGFuKSB7XG4gICAgICByZXR1cm4gdGltZVNwYW47XG4gICAgfTtcblxuICAgIHJldHVybiBIaXN0b3JpY2FsU2NoZWR1bGVyO1xuICB9KFJ4LlZpcnR1YWxUaW1lU2NoZWR1bGVyKSk7XG5cbmZ1bmN0aW9uIE9uTmV4dFByZWRpY2F0ZShwcmVkaWNhdGUpIHtcbiAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbn1cblxuT25OZXh0UHJlZGljYXRlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgaWYgKG90aGVyID09PSB0aGlzKSB7IHJldHVybiB0cnVlOyB9XG4gIGlmIChvdGhlciA9PSBudWxsKSB7IHJldHVybiBmYWxzZTsgfVxuICBpZiAob3RoZXIua2luZCAhPT0gJ04nKSB7IHJldHVybiBmYWxzZTsgfVxuICByZXR1cm4gdGhpcy5wcmVkaWNhdGUob3RoZXIudmFsdWUpO1xufTtcblxuZnVuY3Rpb24gT25FcnJvclByZWRpY2F0ZShwcmVkaWNhdGUpIHtcbiAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG59XG5cbk9uRXJyb3JQcmVkaWNhdGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICBpZiAob3RoZXIgPT09IHRoaXMpIHsgcmV0dXJuIHRydWU7IH1cbiAgaWYgKG90aGVyID09IG51bGwpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGlmIChvdGhlci5raW5kICE9PSAnRScpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIHJldHVybiB0aGlzLnByZWRpY2F0ZShvdGhlci5lcnJvcik7XG59O1xuXG52YXIgUmVhY3RpdmVUZXN0ID0gUnguUmVhY3RpdmVUZXN0ID0ge1xuICAvKiogRGVmYXVsdCB2aXJ0dWFsIHRpbWUgdXNlZCBmb3IgY3JlYXRpb24gb2Ygb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW4gdW5pdCB0ZXN0cy4gKi9cbiAgY3JlYXRlZDogMTAwLFxuICAvKiogRGVmYXVsdCB2aXJ0dWFsIHRpbWUgdXNlZCB0byBzdWJzY3JpYmUgdG8gb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW4gdW5pdCB0ZXN0cy4gKi9cbiAgc3Vic2NyaWJlZDogMjAwLFxuICAvKiogRGVmYXVsdCB2aXJ0dWFsIHRpbWUgdXNlZCB0byBkaXNwb3NlIHN1YnNjcmlwdGlvbnMgaW4gdW5pdCB0ZXN0cy4gKi9cbiAgZGlzcG9zZWQ6IDEwMDAsXG5cbiAgLyoqXG4gICAqIEZhY3RvcnkgbWV0aG9kIGZvciBhbiBPbk5leHQgbm90aWZpY2F0aW9uIHJlY29yZCBhdCBhIGdpdmVuIHRpbWUgd2l0aCBhIGdpdmVuIHZhbHVlIG9yIGEgcHJlZGljYXRlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiAxIC0gUmVhY3RpdmVUZXN0Lm9uTmV4dCgyMDAsIDQyKTtcbiAgICogMiAtIFJlYWN0aXZlVGVzdC5vbk5leHQoMjAwLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5sZW5ndGggPT0gMjsgfSk7XG4gICAqXG4gICAqIEBwYXJhbSB0aWNrcyBSZWNvcmRlZCB2aXJ0dWFsIHRpbWUgdGhlIE9uTmV4dCBub3RpZmljYXRpb24gb2NjdXJzLlxuICAgKiBAcGFyYW0gdmFsdWUgUmVjb3JkZWQgdmFsdWUgc3RvcmVkIGluIHRoZSBPbk5leHQgbm90aWZpY2F0aW9uIG9yIGEgcHJlZGljYXRlLlxuICAgKiBAcmV0dXJuIFJlY29yZGVkIE9uTmV4dCBub3RpZmljYXRpb24uXG4gICAqL1xuICBvbk5leHQ6IGZ1bmN0aW9uICh0aWNrcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nID9cbiAgICAgIG5ldyBSZWNvcmRlZCh0aWNrcywgbmV3IE9uTmV4dFByZWRpY2F0ZSh2YWx1ZSkpIDpcbiAgICAgIG5ldyBSZWNvcmRlZCh0aWNrcywgTm90aWZpY2F0aW9uLmNyZWF0ZU9uTmV4dCh2YWx1ZSkpO1xuICB9LFxuICAvKipcbiAgICogRmFjdG9yeSBtZXRob2QgZm9yIGFuIE9uRXJyb3Igbm90aWZpY2F0aW9uIHJlY29yZCBhdCBhIGdpdmVuIHRpbWUgd2l0aCBhIGdpdmVuIGVycm9yLlxuICAgKlxuICAgKiAxIC0gUmVhY3RpdmVUZXN0Lm9uTmV4dCgyMDAsIG5ldyBFcnJvcignZXJyb3InKSk7XG4gICAqIDIgLSBSZWFjdGl2ZVRlc3Qub25OZXh0KDIwMCwgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUubWVzc2FnZSA9PT0gJ2Vycm9yJzsgfSk7XG4gICAqXG4gICAqIEBwYXJhbSB0aWNrcyBSZWNvcmRlZCB2aXJ0dWFsIHRpbWUgdGhlIE9uRXJyb3Igbm90aWZpY2F0aW9uIG9jY3Vycy5cbiAgICogQHBhcmFtIGV4Y2VwdGlvbiBSZWNvcmRlZCBleGNlcHRpb24gc3RvcmVkIGluIHRoZSBPbkVycm9yIG5vdGlmaWNhdGlvbi5cbiAgICogQHJldHVybiBSZWNvcmRlZCBPbkVycm9yIG5vdGlmaWNhdGlvbi5cbiAgICovXG4gIG9uRXJyb3I6IGZ1bmN0aW9uICh0aWNrcywgZXJyb3IpIHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnZnVuY3Rpb24nID9cbiAgICAgIG5ldyBSZWNvcmRlZCh0aWNrcywgbmV3IE9uRXJyb3JQcmVkaWNhdGUoZXJyb3IpKSA6XG4gICAgICBuZXcgUmVjb3JkZWQodGlja3MsIE5vdGlmaWNhdGlvbi5jcmVhdGVPbkVycm9yKGVycm9yKSk7XG4gIH0sXG4gIC8qKlxuICAgKiBGYWN0b3J5IG1ldGhvZCBmb3IgYW4gT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uIHJlY29yZCBhdCBhIGdpdmVuIHRpbWUuXG4gICAqXG4gICAqIEBwYXJhbSB0aWNrcyBSZWNvcmRlZCB2aXJ0dWFsIHRpbWUgdGhlIE9uQ29tcGxldGVkIG5vdGlmaWNhdGlvbiBvY2N1cnMuXG4gICAqIEByZXR1cm4gUmVjb3JkZWQgT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uLlxuICAgKi9cbiAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICh0aWNrcykge1xuICAgIHJldHVybiBuZXcgUmVjb3JkZWQodGlja3MsIE5vdGlmaWNhdGlvbi5jcmVhdGVPbkNvbXBsZXRlZCgpKTtcbiAgfSxcbiAgLyoqXG4gICAqIEZhY3RvcnkgbWV0aG9kIGZvciBhIHN1YnNjcmlwdGlvbiByZWNvcmQgYmFzZWQgb24gYSBnaXZlbiBzdWJzY3JpcHRpb24gYW5kIGRpc3Bvc2FsIHRpbWUuXG4gICAqXG4gICAqIEBwYXJhbSBzdGFydCBWaXJ0dWFsIHRpbWUgaW5kaWNhdGluZyB3aGVuIHRoZSBzdWJzY3JpcHRpb24gd2FzIGNyZWF0ZWQuXG4gICAqIEBwYXJhbSBlbmQgVmlydHVhbCB0aW1lIGluZGljYXRpbmcgd2hlbiB0aGUgc3Vic2NyaXB0aW9uIHdhcyBkaXNwb3NlZC5cbiAgICogQHJldHVybiBTdWJzY3JpcHRpb24gb2JqZWN0LlxuICAgKi9cbiAgc3Vic2NyaWJlOiBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBuZXcgU3Vic2NyaXB0aW9uKHN0YXJ0LCBlbmQpO1xuICB9XG59O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IG9iamVjdCByZWNvcmRpbmcgdGhlIHByb2R1Y3Rpb24gb2YgdGhlIHNwZWNpZmllZCB2YWx1ZSBhdCB0aGUgZ2l2ZW4gdmlydHVhbCB0aW1lLlxuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWUgVmlydHVhbCB0aW1lIHRoZSB2YWx1ZSB3YXMgcHJvZHVjZWQgb24uXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlIFZhbHVlIHRoYXQgd2FzIHByb2R1Y2VkLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wYXJlciBBbiBvcHRpb25hbCBjb21wYXJlci5cbiAgICovXG4gIHZhciBSZWNvcmRlZCA9IFJ4LlJlY29yZGVkID0gZnVuY3Rpb24gKHRpbWUsIHZhbHVlLCBjb21wYXJlcikge1xuICAgIHRoaXMudGltZSA9IHRpbWU7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMuY29tcGFyZXIgPSBjb21wYXJlciB8fCBkZWZhdWx0Q29tcGFyZXI7XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoZSBnaXZlbiByZWNvcmRlZCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIGN1cnJlbnQgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVjb3JkZWR9IG90aGVyIFJlY29yZGVkIG9iamVjdCB0byBjaGVjayBmb3IgZXF1YWxpdHkuXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGJvdGggb2JqZWN0cyBhcmUgZXF1YWw7IGZhbHNlIG90aGVyd2lzZS5cbiAgICovXG4gIFJlY29yZGVkLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICByZXR1cm4gdGhpcy50aW1lID09PSBvdGhlci50aW1lICYmIHRoaXMuY29tcGFyZXIodGhpcy52YWx1ZSwgb3RoZXIudmFsdWUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjdXJyZW50IFJlY29yZGVkIHZhbHVlLlxuICAgKlxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSBTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGN1cnJlbnQgUmVjb3JkZWQgdmFsdWUuXG4gICAqL1xuICBSZWNvcmRlZC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWUudG9TdHJpbmcoKSArICdAJyArIHRoaXMudGltZTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBzdWJzY3JpcHRpb24gb2JqZWN0IHdpdGggdGhlIGdpdmVuIHZpcnR1YWwgc3Vic2NyaXB0aW9uIGFuZCB1bnN1YnNjcmlwdGlvbiB0aW1lLlxuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHN1YnNjcmliZSBWaXJ0dWFsIHRpbWUgYXQgd2hpY2ggdGhlIHN1YnNjcmlwdGlvbiBvY2N1cnJlZC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHVuc3Vic2NyaWJlIFZpcnR1YWwgdGltZSBhdCB3aGljaCB0aGUgdW5zdWJzY3JpcHRpb24gb2NjdXJyZWQuXG4gICAqL1xuICB2YXIgU3Vic2NyaXB0aW9uID0gUnguU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHtcbiAgICB0aGlzLnN1YnNjcmliZSA9IHN0YXJ0O1xuICAgIHRoaXMudW5zdWJzY3JpYmUgPSBlbmQgfHwgTnVtYmVyLk1BWF9WQUxVRTtcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIHN1YnNjcmlwdGlvbiBpcyBlcXVhbCB0byB0aGUgY3VycmVudCBpbnN0YW5jZS5cbiAgICogQHBhcmFtIG90aGVyIFN1YnNjcmlwdGlvbiBvYmplY3QgdG8gY2hlY2sgZm9yIGVxdWFsaXR5LlxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiBib3RoIG9iamVjdHMgYXJlIGVxdWFsOyBmYWxzZSBvdGhlcndpc2UuXG4gICAqL1xuICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHJldHVybiB0aGlzLnN1YnNjcmliZSA9PT0gb3RoZXIuc3Vic2NyaWJlICYmIHRoaXMudW5zdWJzY3JpYmUgPT09IG90aGVyLnVuc3Vic2NyaWJlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjdXJyZW50IFN1YnNjcmlwdGlvbiB2YWx1ZS5cbiAgICogQHJldHVybnMge1N0cmluZ30gU3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjdXJyZW50IFN1YnNjcmlwdGlvbiB2YWx1ZS5cbiAgICovXG4gIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICcoJyArIHRoaXMuc3Vic2NyaWJlICsgJywgJyArICh0aGlzLnVuc3Vic2NyaWJlID09PSBOdW1iZXIuTUFYX1ZBTFVFID8gJ0luZmluaXRlJyA6IHRoaXMudW5zdWJzY3JpYmUpICsgJyknO1xuICB9O1xuXG4gIHZhciBNb2NrRGlzcG9zYWJsZSA9IFJ4Lk1vY2tEaXNwb3NhYmxlID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIHRoaXMuZGlzcG9zZXMgPSBbXTtcbiAgICB0aGlzLmRpc3Bvc2VzLnB1c2godGhpcy5zY2hlZHVsZXIuY2xvY2spO1xuICB9O1xuXG4gIE1vY2tEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZGlzcG9zZXMucHVzaCh0aGlzLnNjaGVkdWxlci5jbG9jayk7XG4gIH07XG5cbiAgdmFyIE1vY2tPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTW9ja09ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gTW9ja09ic2VydmVyKHNjaGVkdWxlcikge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIHRoaXMubWVzc2FnZXMgPSBbXTtcbiAgICB9XG5cbiAgICB2YXIgTW9ja09ic2VydmVyUHJvdG90eXBlID0gTW9ja09ic2VydmVyLnByb3RvdHlwZTtcblxuICAgIE1vY2tPYnNlcnZlclByb3RvdHlwZS5vbk5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHRoaXMubWVzc2FnZXMucHVzaChuZXcgUmVjb3JkZWQodGhpcy5zY2hlZHVsZXIuY2xvY2ssIE5vdGlmaWNhdGlvbi5jcmVhdGVPbk5leHQodmFsdWUpKSk7XG4gICAgfTtcblxuICAgIE1vY2tPYnNlcnZlclByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMubWVzc2FnZXMucHVzaChuZXcgUmVjb3JkZWQodGhpcy5zY2hlZHVsZXIuY2xvY2ssIE5vdGlmaWNhdGlvbi5jcmVhdGVPbkVycm9yKGUpKSk7XG4gICAgfTtcblxuICAgIE1vY2tPYnNlcnZlclByb3RvdHlwZS5vbkNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMubWVzc2FnZXMucHVzaChuZXcgUmVjb3JkZWQodGhpcy5zY2hlZHVsZXIuY2xvY2ssIE5vdGlmaWNhdGlvbi5jcmVhdGVPbkNvbXBsZXRlZCgpKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBNb2NrT2JzZXJ2ZXI7XG4gIH0pKE9ic2VydmVyKTtcblxuICBmdW5jdGlvbiBNb2NrUHJvbWlzZShzY2hlZHVsZXIsIG1lc3NhZ2VzKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIHRoaXMubWVzc2FnZXMgPSBtZXNzYWdlcztcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLm1lc3NhZ2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgbWVzc2FnZSA9IHRoaXMubWVzc2FnZXNbaV0sXG4gICAgICAgICAgbm90aWZpY2F0aW9uID0gbWVzc2FnZS52YWx1ZTtcbiAgICAgIChmdW5jdGlvbiAoaW5uZXJOb3RpZmljYXRpb24pIHtcbiAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlQWJzb2x1dGUobnVsbCwgbWVzc2FnZS50aW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG9icyA9IHNlbGYub2JzZXJ2ZXJzLnNsaWNlKDApO1xuXG4gICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpMZW4gPSBvYnMubGVuZ3RoOyBqIDwgakxlbjsgaisrKSB7XG4gICAgICAgICAgICBpbm5lck5vdGlmaWNhdGlvbi5hY2NlcHQob2JzW2pdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgfSk7XG4gICAgICB9KShub3RpZmljYXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIE1vY2tQcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKG9uUmVzb2x2ZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChuZXcgU3Vic2NyaXB0aW9uKHRoaXMuc2NoZWR1bGVyLmNsb2NrKSk7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCAtIDE7XG5cbiAgICB2YXIgbmV3UHJvbWlzZTtcblxuICAgIHZhciBvYnNlcnZlciA9IFJ4Lk9ic2VydmVyLmNyZWF0ZShcbiAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHZhciByZXRWYWx1ZSA9IG9uUmVzb2x2ZWQoeCk7XG4gICAgICAgIGlmIChyZXRWYWx1ZSAmJiB0eXBlb2YgcmV0VmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG5ld1Byb21pc2UgPSByZXRWYWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgdGlja3MgPSBzZWxmLnNjaGVkdWxlci5jbG9jaztcbiAgICAgICAgICBuZXdQcm9taXNlID0gbmV3IE1vY2tQcm9taXNlKHNlbGYuc2NoZWR1bGVyLCBbUnguUmVhY3RpdmVUZXN0Lm9uTmV4dCh0aWNrcywgdW5kZWZpbmVkKSwgUnguUmVhY3RpdmVUZXN0Lm9uQ29tcGxldGVkKHRpY2tzKV0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpZHggPSBzZWxmLm9ic2VydmVycy5pbmRleE9mKG9ic2VydmVyKTtcbiAgICAgICAgc2VsZi5vYnNlcnZlcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIHNlbGYuc3Vic2NyaXB0aW9uc1tpbmRleF0gPSBuZXcgU3Vic2NyaXB0aW9uKHNlbGYuc3Vic2NyaXB0aW9uc1tpbmRleF0uc3Vic2NyaWJlLCBzZWxmLnNjaGVkdWxlci5jbG9jayk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24gKGVycikge1xuICAgICAgICBvblJlamVjdGVkKGVycik7XG4gICAgICAgIHZhciBpZHggPSBzZWxmLm9ic2VydmVycy5pbmRleE9mKG9ic2VydmVyKTtcbiAgICAgICAgc2VsZi5vYnNlcnZlcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIHNlbGYuc3Vic2NyaXB0aW9uc1tpbmRleF0gPSBuZXcgU3Vic2NyaXB0aW9uKHNlbGYuc3Vic2NyaXB0aW9uc1tpbmRleF0uc3Vic2NyaWJlLCBzZWxmLnNjaGVkdWxlci5jbG9jayk7XG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcblxuICAgIHJldHVybiBuZXdQcm9taXNlIHx8IG5ldyBNb2NrUHJvbWlzZSh0aGlzLnNjaGVkdWxlciwgdGhpcy5tZXNzYWdlcyk7XG4gIH07XG5cbiAgdmFyIEhvdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEhvdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBIb3RPYnNlcnZhYmxlKHNjaGVkdWxlciwgbWVzc2FnZXMpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdmFyIG1lc3NhZ2UsIG5vdGlmaWNhdGlvbiwgb2JzZXJ2YWJsZSA9IHRoaXM7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIHRoaXMubWVzc2FnZXMgPSBtZXNzYWdlcztcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLm1lc3NhZ2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIG1lc3NhZ2UgPSB0aGlzLm1lc3NhZ2VzW2ldO1xuICAgICAgICBub3RpZmljYXRpb24gPSBtZXNzYWdlLnZhbHVlO1xuICAgICAgICAoZnVuY3Rpb24gKGlubmVyTm90aWZpY2F0aW9uKSB7XG4gICAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlQWJzb2x1dGUobnVsbCwgbWVzc2FnZS50aW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb2JzID0gb2JzZXJ2YWJsZS5vYnNlcnZlcnMuc2xpY2UoMCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqTGVuID0gb2JzLmxlbmd0aDsgaiA8IGpMZW47IGorKykge1xuICAgICAgICAgICAgICBpbm5lck5vdGlmaWNhdGlvbi5hY2NlcHQob2JzW2pdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pKG5vdGlmaWNhdGlvbik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgSG90T2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgb2JzZXJ2YWJsZSA9IHRoaXM7XG4gICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG8pO1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2gobmV3IFN1YnNjcmlwdGlvbih0aGlzLnNjaGVkdWxlci5jbG9jaykpO1xuICAgICAgdmFyIGluZGV4ID0gdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCAtIDE7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUNyZWF0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpZHggPSBvYnNlcnZhYmxlLm9ic2VydmVycy5pbmRleE9mKG8pO1xuICAgICAgICBvYnNlcnZhYmxlLm9ic2VydmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgb2JzZXJ2YWJsZS5zdWJzY3JpcHRpb25zW2luZGV4XSA9IG5ldyBTdWJzY3JpcHRpb24ob2JzZXJ2YWJsZS5zdWJzY3JpcHRpb25zW2luZGV4XS5zdWJzY3JpYmUsIG9ic2VydmFibGUuc2NoZWR1bGVyLmNsb2NrKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gSG90T2JzZXJ2YWJsZTtcbiAgfSkoT2JzZXJ2YWJsZSk7XG5cbiAgdmFyIENvbGRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb2xkT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIENvbGRPYnNlcnZhYmxlKHNjaGVkdWxlciwgbWVzc2FnZXMpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICB0aGlzLm1lc3NhZ2VzID0gbWVzc2FnZXM7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICB9XG5cbiAgICBDb2xkT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgbWVzc2FnZSwgbm90aWZpY2F0aW9uLCBvYnNlcnZhYmxlID0gdGhpcztcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKG5ldyBTdWJzY3JpcHRpb24odGhpcy5zY2hlZHVsZXIuY2xvY2spKTtcbiAgICAgIHZhciBpbmRleCA9IHRoaXMuc3Vic2NyaXB0aW9ucy5sZW5ndGggLSAxO1xuICAgICAgdmFyIGQgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMubWVzc2FnZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgbWVzc2FnZSA9IHRoaXMubWVzc2FnZXNbaV07XG4gICAgICAgIG5vdGlmaWNhdGlvbiA9IG1lc3NhZ2UudmFsdWU7XG4gICAgICAgIChmdW5jdGlvbiAoaW5uZXJOb3RpZmljYXRpb24pIHtcbiAgICAgICAgICBkLmFkZChvYnNlcnZhYmxlLnNjaGVkdWxlci5zY2hlZHVsZVJlbGF0aXZlKG51bGwsIG1lc3NhZ2UudGltZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaW5uZXJOb3RpZmljYXRpb24uYWNjZXB0KG8pO1xuICAgICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKG5vdGlmaWNhdGlvbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUNyZWF0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9ic2VydmFibGUuc3Vic2NyaXB0aW9uc1tpbmRleF0gPSBuZXcgU3Vic2NyaXB0aW9uKG9ic2VydmFibGUuc3Vic2NyaXB0aW9uc1tpbmRleF0uc3Vic2NyaWJlLCBvYnNlcnZhYmxlLnNjaGVkdWxlci5jbG9jayk7XG4gICAgICAgIGQuZGlzcG9zZSgpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb2xkT2JzZXJ2YWJsZTtcbiAgfSkoT2JzZXJ2YWJsZSk7XG5cbiAgLyoqIFZpcnR1YWwgdGltZSBzY2hlZHVsZXIgdXNlZCBmb3IgdGVzdGluZyBhcHBsaWNhdGlvbnMgYW5kIGxpYnJhcmllcyBidWlsdCB1c2luZyBSZWFjdGl2ZSBFeHRlbnNpb25zLiAqL1xuICBSeC5UZXN0U2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUZXN0U2NoZWR1bGVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gYmFzZUNvbXBhcmVyKHgsIHkpIHtcbiAgICAgIHJldHVybiB4ID4geSA/IDEgOiAoeCA8IHkgPyAtMSA6IDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFRlc3RTY2hlZHVsZXIoKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzLCAwLCBiYXNlQ29tcGFyZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYXQgdGhlIHNwZWNpZmllZCB2aXJ0dWFsIHRpbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICogQHBhcmFtIGR1ZVRpbWUgQWJzb2x1dGUgdmlydHVhbCB0aW1lIGF0IHdoaWNoIHRvIGV4ZWN1dGUgdGhlIGFjdGlvbi5cbiAgICAgKiBAcGFyYW0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcmV0dXJuIERpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAgICovXG4gICAgVGVzdFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVBYnNvbHV0ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICBkdWVUaW1lIDw9IHRoaXMuY2xvY2sgJiYgKGR1ZVRpbWUgPSB0aGlzLmNsb2NrICsgMSk7XG4gICAgICByZXR1cm4gX19zdXBlcl9fLnByb3RvdHlwZS5zY2hlZHVsZUFic29sdXRlLmNhbGwodGhpcywgc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcmVsYXRpdmUgdmlydHVhbCB0aW1lIHRvIGFuIGFic29sdXRlIHZpcnR1YWwgdGltZSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhYnNvbHV0ZSBBYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgdmFsdWUuXG4gICAgICogQHBhcmFtIHJlbGF0aXZlIFJlbGF0aXZlIHZpcnR1YWwgdGltZSB2YWx1ZSB0byBhZGQuXG4gICAgICogQHJldHVybiBSZXN1bHRpbmcgYWJzb2x1dGUgdmlydHVhbCB0aW1lIHN1bSB2YWx1ZS5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoYWJzb2x1dGUsIHJlbGF0aXZlKSB7XG4gICAgICByZXR1cm4gYWJzb2x1dGUgKyByZWxhdGl2ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBhYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgdmFsdWUgdG8gYSBEYXRlVGltZU9mZnNldCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhYnNvbHV0ZSBBYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgdmFsdWUgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJuIENvcnJlc3BvbmRpbmcgRGF0ZVRpbWVPZmZzZXQgdmFsdWUuXG4gICAgICovXG4gICAgVGVzdFNjaGVkdWxlci5wcm90b3R5cGUudG9BYnNvbHV0ZVRpbWUgPSBmdW5jdGlvbiAoYWJzb2x1dGUpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShhYnNvbHV0ZSkuZ2V0VGltZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIFRpbWVTcGFuIHZhbHVlIHRvIGEgcmVsYXRpdmUgdmlydHVhbCB0aW1lIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRpbWVTcGFuIFRpbWVTcGFuIHZhbHVlIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybiBDb3JyZXNwb25kaW5nIHJlbGF0aXZlIHZpcnR1YWwgdGltZSB2YWx1ZS5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS50b1JlbGF0aXZlVGltZSA9IGZ1bmN0aW9uICh0aW1lU3Bhbikge1xuICAgICAgcmV0dXJuIHRpbWVTcGFuO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSB0ZXN0IHNjaGVkdWxlciBhbmQgdXNlcyB0aGUgc3BlY2lmaWVkIHZpcnR1YWwgdGltZXMgdG8gaW52b2tlIHRoZSBmYWN0b3J5IGZ1bmN0aW9uLCBzdWJzY3JpYmUgdG8gdGhlIHJlc3VsdGluZyBzZXF1ZW5jZSwgYW5kIGRpc3Bvc2UgdGhlIHN1YnNjcmlwdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjcmVhdGUgRmFjdG9yeSBtZXRob2QgdG8gY3JlYXRlIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIGNyZWF0ZWQgVmlydHVhbCB0aW1lIGF0IHdoaWNoIHRvIGludm9rZSB0aGUgZmFjdG9yeSB0byBjcmVhdGUgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0gc3Vic2NyaWJlZCBWaXJ0dWFsIHRpbWUgYXQgd2hpY2ggdG8gc3Vic2NyaWJlIHRvIHRoZSBjcmVhdGVkIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIGRpc3Bvc2VkIFZpcnR1YWwgdGltZSBhdCB3aGljaCB0byBkaXNwb3NlIHRoZSBzdWJzY3JpcHRpb24uXG4gICAgICogQHJldHVybiBPYnNlcnZlciB3aXRoIHRpbWVzdGFtcGVkIHJlY29yZGluZ3Mgb2Ygbm90aWZpY2F0aW9uIG1lc3NhZ2VzIHRoYXQgd2VyZSByZWNlaXZlZCBkdXJpbmcgdGhlIHZpcnR1YWwgdGltZSB3aW5kb3cgd2hlbiB0aGUgc3Vic2NyaXB0aW9uIHRvIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2FzIGFjdGl2ZS5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS5zdGFydFNjaGVkdWxlciA9IGZ1bmN0aW9uIChjcmVhdGVGbiwgc2V0dGluZ3MpIHtcbiAgICAgIHNldHRpbmdzIHx8IChzZXR0aW5ncyA9IHt9KTtcbiAgICAgIHNldHRpbmdzLmNyZWF0ZWQgPT0gbnVsbCAmJiAoc2V0dGluZ3MuY3JlYXRlZCA9IFJlYWN0aXZlVGVzdC5jcmVhdGVkKTtcbiAgICAgIHNldHRpbmdzLnN1YnNjcmliZWQgPT0gbnVsbCAmJiAoc2V0dGluZ3Muc3Vic2NyaWJlZCA9IFJlYWN0aXZlVGVzdC5zdWJzY3JpYmVkKTtcbiAgICAgIHNldHRpbmdzLmRpc3Bvc2VkID09IG51bGwgJiYgKHNldHRpbmdzLmRpc3Bvc2VkID0gUmVhY3RpdmVUZXN0LmRpc3Bvc2VkKTtcblxuICAgICAgdmFyIG9ic2VydmVyID0gdGhpcy5jcmVhdGVPYnNlcnZlcigpLCBzb3VyY2UsIHN1YnNjcmlwdGlvbjtcblxuICAgICAgdGhpcy5zY2hlZHVsZUFic29sdXRlKG51bGwsIHNldHRpbmdzLmNyZWF0ZWQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc291cmNlID0gY3JlYXRlRm4oKTtcbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnNjaGVkdWxlQWJzb2x1dGUobnVsbCwgc2V0dGluZ3Muc3Vic2NyaWJlZCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzdWJzY3JpcHRpb24gPSBzb3VyY2Uuc3Vic2NyaWJlKG9ic2VydmVyKTtcbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnNjaGVkdWxlQWJzb2x1dGUobnVsbCwgc2V0dGluZ3MuZGlzcG9zZWQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnN0YXJ0KCk7XG5cbiAgICAgIHJldHVybiBvYnNlcnZlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGhvdCBvYnNlcnZhYmxlIHVzaW5nIHRoZSBzcGVjaWZpZWQgdGltZXN0YW1wZWQgbm90aWZpY2F0aW9uIG1lc3NhZ2VzIGVpdGhlciBhcyBhbiBhcnJheSBvciBhcmd1bWVudHMuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIE5vdGlmaWNhdGlvbnMgdG8gc3VyZmFjZSB0aHJvdWdoIHRoZSBjcmVhdGVkIHNlcXVlbmNlIGF0IHRoZWlyIHNwZWNpZmllZCBhYnNvbHV0ZSB2aXJ0dWFsIHRpbWVzLlxuICAgICAqIEByZXR1cm4gSG90IG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjYW4gYmUgdXNlZCB0byBhc3NlcnQgdGhlIHRpbWluZyBvZiBzdWJzY3JpcHRpb25zIGFuZCBub3RpZmljYXRpb25zLlxuICAgICAqL1xuICAgIFRlc3RTY2hlZHVsZXIucHJvdG90eXBlLmNyZWF0ZUhvdE9ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncztcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgICAgYXJncyA9IGFyZ3VtZW50c1swXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEhvdE9ic2VydmFibGUodGhpcywgYXJncyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjb2xkIG9ic2VydmFibGUgdXNpbmcgdGhlIHNwZWNpZmllZCB0aW1lc3RhbXBlZCBub3RpZmljYXRpb24gbWVzc2FnZXMgZWl0aGVyIGFzIGFuIGFycmF5IG9yIGFyZ3VtZW50cy5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgTm90aWZpY2F0aW9ucyB0byBzdXJmYWNlIHRocm91Z2ggdGhlIGNyZWF0ZWQgc2VxdWVuY2UgYXQgdGhlaXIgc3BlY2lmaWVkIHZpcnR1YWwgdGltZSBvZmZzZXRzIGZyb20gdGhlIHNlcXVlbmNlIHN1YnNjcmlwdGlvbiB0aW1lLlxuICAgICAqIEByZXR1cm4gQ29sZCBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY2FuIGJlIHVzZWQgdG8gYXNzZXJ0IHRoZSB0aW1pbmcgb2Ygc3Vic2NyaXB0aW9ucyBhbmQgbm90aWZpY2F0aW9ucy5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS5jcmVhdGVDb2xkT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgICBhcmdzID0gYXJndW1lbnRzWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgQ29sZE9ic2VydmFibGUodGhpcywgYXJncyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZXNvbHZlZCBwcm9taXNlIHdpdGggdGhlIGdpdmVuIHZhbHVlIGFuZCB0aWNrc1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aWNrcyBUaGUgYWJzb2x1dGUgdGltZSBvZiB0aGUgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge0FueX0gdmFsdWUgVGhlIHZhbHVlIHRvIHlpZWxkIGF0IHRoZSBnaXZlbiB0aWNrLlxuICAgICAqIEByZXR1cm5zIHtNb2NrUHJvbWlzZX0gQSBtb2NrIFByb21pc2Ugd2hpY2ggZnVsZmlsbHMgd2l0aCB0aGUgZ2l2ZW4gdmFsdWUuXG4gICAgICovXG4gICAgVGVzdFNjaGVkdWxlci5wcm90b3R5cGUuY3JlYXRlUmVzb2x2ZWRQcm9taXNlID0gZnVuY3Rpb24gKHRpY2tzLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIG5ldyBNb2NrUHJvbWlzZSh0aGlzLCBbUnguUmVhY3RpdmVUZXN0Lm9uTmV4dCh0aWNrcywgdmFsdWUpLCBSeC5SZWFjdGl2ZVRlc3Qub25Db21wbGV0ZWQodGlja3MpXSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZWplY3RlZCBwcm9taXNlIHdpdGggdGhlIGdpdmVuIHJlYXNvbiBhbmQgdGlja3NcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdGlja3MgVGhlIGFic29sdXRlIHRpbWUgb2YgdGhlIHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtBbnl9IHJlYXNvbiBUaGUgcmVhc29uIGZvciByZWplY3Rpb24gdG8geWllbGQgYXQgdGhlIGdpdmVuIHRpY2suXG4gICAgICogQHJldHVybnMge01vY2tQcm9taXNlfSBBIG1vY2sgUHJvbWlzZSB3aGljaCByZWplY3RzIHdpdGggdGhlIGdpdmVuIHJlYXNvbi5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS5jcmVhdGVSZWplY3RlZFByb21pc2UgPSBmdW5jdGlvbiAodGlja3MsIHJlYXNvbikge1xuICAgICAgcmV0dXJuIG5ldyBNb2NrUHJvbWlzZSh0aGlzLCBbUnguUmVhY3RpdmVUZXN0Lm9uRXJyb3IodGlja3MsIHJlYXNvbildKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYnNlcnZlciB0aGF0IHJlY29yZHMgcmVjZWl2ZWQgbm90aWZpY2F0aW9uIG1lc3NhZ2VzIGFuZCB0aW1lc3RhbXBzIHRob3NlLlxuICAgICAqIEByZXR1cm4gT2JzZXJ2ZXIgdGhhdCBjYW4gYmUgdXNlZCB0byBhc3NlcnQgdGhlIHRpbWluZyBvZiByZWNlaXZlZCBub3RpZmljYXRpb25zLlxuICAgICAqL1xuICAgIFRlc3RTY2hlZHVsZXIucHJvdG90eXBlLmNyZWF0ZU9ic2VydmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG5ldyBNb2NrT2JzZXJ2ZXIodGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBUZXN0U2NoZWR1bGVyO1xuICB9KShWaXJ0dWFsVGltZVNjaGVkdWxlcik7XG5cbiAgdmFyIEFub255bW91c09ic2VydmFibGUgPSBSeC5Bbm9ueW1vdXNPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhBbm9ueW1vdXNPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgLy8gRml4IHN1YnNjcmliZXIgdG8gY2hlY2sgZm9yIHVuZGVmaW5lZCBvciBmdW5jdGlvbiByZXR1cm5lZCB0byBkZWNvcmF0ZSBhcyBEaXNwb3NhYmxlXG4gICAgZnVuY3Rpb24gZml4U3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG4gICAgICByZXR1cm4gc3Vic2NyaWJlciAmJiBpc0Z1bmN0aW9uKHN1YnNjcmliZXIuZGlzcG9zZSkgPyBzdWJzY3JpYmVyIDpcbiAgICAgICAgaXNGdW5jdGlvbihzdWJzY3JpYmVyKSA/IGRpc3Bvc2FibGVDcmVhdGUoc3Vic2NyaWJlcikgOiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0RGlzcG9zYWJsZShzLCBzdGF0ZSkge1xuICAgICAgdmFyIGFkbyA9IHN0YXRlWzBdLCBzZWxmID0gc3RhdGVbMV07XG4gICAgICB2YXIgc3ViID0gdHJ5Q2F0Y2goc2VsZi5fX3N1YnNjcmliZSkuY2FsbChzZWxmLCBhZG8pO1xuICAgICAgaWYgKHN1YiA9PT0gZXJyb3JPYmogJiYgIWFkby5mYWlsKGVycm9yT2JqLmUpKSB7IHRocm93ZXIoZXJyb3JPYmouZSk7IH1cbiAgICAgIGFkby5zZXREaXNwb3NhYmxlKGZpeFN1YnNjcmliZXIoc3ViKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQW5vbnltb3VzT2JzZXJ2YWJsZShzdWJzY3JpYmUsIHBhcmVudCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBwYXJlbnQ7XG4gICAgICB0aGlzLl9fc3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQW5vbnltb3VzT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgYWRvID0gbmV3IEF1dG9EZXRhY2hPYnNlcnZlcihvKSwgc3RhdGUgPSBbYWRvLCB0aGlzXTtcblxuICAgICAgaWYgKGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGVSZXF1aXJlZCgpKSB7XG4gICAgICAgIGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGUoc3RhdGUsIHNldERpc3Bvc2FibGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0RGlzcG9zYWJsZShudWxsLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWRvO1xuICAgIH07XG5cbiAgICByZXR1cm4gQW5vbnltb3VzT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGUpKTtcblxuICB2YXIgQXV0b0RldGFjaE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhBdXRvRGV0YWNoT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBBdXRvRGV0YWNoT2JzZXJ2ZXIob2JzZXJ2ZXIpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgICAgdGhpcy5tID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgfVxuXG4gICAgdmFyIEF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZSA9IEF1dG9EZXRhY2hPYnNlcnZlci5wcm90b3R5cGU7XG5cbiAgICBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMub2JzZXJ2ZXIub25OZXh0KS5jYWxsKHRoaXMub2JzZXJ2ZXIsIHZhbHVlKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICB0aHJvd2VyKHJlc3VsdC5lKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQXV0b0RldGFjaE9ic2VydmVyUHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMub2JzZXJ2ZXIub25FcnJvcikuY2FsbCh0aGlzLm9ic2VydmVyLCBlcnIpO1xuICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICByZXN1bHQgPT09IGVycm9yT2JqICYmIHRocm93ZXIocmVzdWx0LmUpO1xuICAgIH07XG5cbiAgICBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMub2JzZXJ2ZXIub25Db21wbGV0ZWQpLmNhbGwodGhpcy5vYnNlcnZlcik7XG4gICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgIHJlc3VsdCA9PT0gZXJyb3JPYmogJiYgdGhyb3dlcihyZXN1bHQuZSk7XG4gICAgfTtcblxuICAgIEF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZS5zZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKHZhbHVlKSB7IHRoaXMubS5zZXREaXNwb3NhYmxlKHZhbHVlKTsgfTtcbiAgICBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUuZ2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMubS5nZXREaXNwb3NhYmxlKCk7IH07XG5cbiAgICBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF9fc3VwZXJfXy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5tLmRpc3Bvc2UoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEF1dG9EZXRhY2hPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgdmFyIFVuZGVybHlpbmdPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhVbmRlcmx5aW5nT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBVbmRlcmx5aW5nT2JzZXJ2YWJsZShtLCB1KSB7XG4gICAgICB0aGlzLl9tID0gbTtcbiAgICAgIHRoaXMuX3UgPSB1O1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVW5kZXJseWluZ09ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHRoaXMuX20uZ2V0RGlzcG9zYWJsZSgpLCB0aGlzLl91LnN1YnNjcmliZShvKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBVbmRlcmx5aW5nT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBHcm91cGVkT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoR3JvdXBlZE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gR3JvdXBlZE9ic2VydmFibGUoa2V5LCB1bmRlcmx5aW5nT2JzZXJ2YWJsZSwgbWVyZ2VkRGlzcG9zYWJsZSkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgIHRoaXMudW5kZXJseWluZ09ic2VydmFibGUgPSAhbWVyZ2VkRGlzcG9zYWJsZSA/XG4gICAgICAgIHVuZGVybHlpbmdPYnNlcnZhYmxlIDpcbiAgICAgICAgbmV3IFVuZGVybHlpbmdPYnNlcnZhYmxlKG1lcmdlZERpc3Bvc2FibGUsIHVuZGVybHlpbmdPYnNlcnZhYmxlKTtcbiAgICB9XG5cbiAgICBHcm91cGVkT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nT2JzZXJ2YWJsZS5zdWJzY3JpYmUobyk7XG4gICAgfTtcblxuICAgIHJldHVybiBHcm91cGVkT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqICBSZXByZXNlbnRzIGFuIG9iamVjdCB0aGF0IGlzIGJvdGggYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhcyB3ZWxsIGFzIGFuIG9ic2VydmVyLlxuICAgKiAgRWFjaCBub3RpZmljYXRpb24gaXMgYnJvYWRjYXN0ZWQgdG8gYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzLlxuICAgKi9cbiAgdmFyIFN1YmplY3QgPSBSeC5TdWJqZWN0ID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTdWJqZWN0LCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFN1YmplY3QoKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgfVxuXG4gICAgYWRkUHJvcGVydGllcyhTdWJqZWN0LnByb3RvdHlwZSwgT2JzZXJ2ZXIucHJvdG90eXBlLCB7XG4gICAgICBfc3Vic2NyaWJlOiBmdW5jdGlvbiAobykge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvKTtcbiAgICAgICAgICByZXR1cm4gbmV3IElubmVyU3Vic2NyaXB0aW9uKHRoaXMsIG8pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgby5vbkVycm9yKHRoaXMuZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuICAgICAgICogQHJldHVybnMge0Jvb2xlYW59IEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWJqZWN0IGhhcyBvYnNlcnZlcnMgc3Vic2NyaWJlZCB0byBpdC5cbiAgICAgICAqL1xuICAgICAgaGFzT2JzZXJ2ZXJzOiBmdW5jdGlvbiAoKSB7IGNoZWNrRGlzcG9zZWQodGhpcyk7IHJldHVybiB0aGlzLm9ic2VydmVycy5sZW5ndGggPiAwOyB9LFxuICAgICAgLyoqXG4gICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGVuZCBvZiB0aGUgc2VxdWVuY2UuXG4gICAgICAgKi9cbiAgICAgIG9uQ29tcGxldGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBvc1tpXS5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgZXhjZXB0aW9uLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gZXJyb3IgVGhlIGV4Y2VwdGlvbiB0byBzZW5kIHRvIGFsbCBvYnNlcnZlcnMuXG4gICAgICAgKi9cbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIG9zW2ldLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgYXJyaXZhbCBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25OZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgb3NbaV0ub25OZXh0KHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFVuc3Vic2NyaWJlIGFsbCBvYnNlcnZlcnMgYW5kIHJlbGVhc2UgcmVzb3VyY2VzLlxuICAgICAgICovXG4gICAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzdWJqZWN0IGZyb20gdGhlIHNwZWNpZmllZCBvYnNlcnZlciBhbmQgb2JzZXJ2YWJsZS5cbiAgICAgKiBAcGFyYW0ge09ic2VydmVyfSBvYnNlcnZlciBUaGUgb2JzZXJ2ZXIgdXNlZCB0byBzZW5kIG1lc3NhZ2VzIHRvIHRoZSBzdWJqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gb2JzZXJ2YWJsZSBUaGUgb2JzZXJ2YWJsZSB1c2VkIHRvIHN1YnNjcmliZSB0byBtZXNzYWdlcyBzZW50IGZyb20gdGhlIHN1YmplY3QuXG4gICAgICogQHJldHVybnMge1N1YmplY3R9IFN1YmplY3QgaW1wbGVtZW50ZWQgdXNpbmcgdGhlIGdpdmVuIG9ic2VydmVyIGFuZCBvYnNlcnZhYmxlLlxuICAgICAqL1xuICAgIFN1YmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKG9ic2VydmVyLCBvYnNlcnZhYmxlKSB7XG4gICAgICByZXR1cm4gbmV3IEFub255bW91c1N1YmplY3Qob2JzZXJ2ZXIsIG9ic2VydmFibGUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU3ViamVjdDtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqICBSZXByZXNlbnRzIHRoZSByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi5cbiAgICogIFRoZSBsYXN0IHZhbHVlIGJlZm9yZSB0aGUgT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uLCBvciB0aGUgZXJyb3IgcmVjZWl2ZWQgdGhyb3VnaCBPbkVycm9yLCBpcyBzZW50IHRvIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycy5cbiAgICovXG4gIHZhciBBc3luY1N1YmplY3QgPSBSeC5Bc3luY1N1YmplY3QgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEFzeW5jU3ViamVjdCwgX19zdXBlcl9fKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzdWJqZWN0IHRoYXQgY2FuIG9ubHkgcmVjZWl2ZSBvbmUgdmFsdWUgYW5kIHRoYXQgdmFsdWUgaXMgY2FjaGVkIGZvciBhbGwgZnV0dXJlIG9ic2VydmF0aW9ucy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBc3luY1N1YmplY3QoKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgfVxuXG4gICAgYWRkUHJvcGVydGllcyhBc3luY1N1YmplY3QucHJvdG90eXBlLCBPYnNlcnZlci5wcm90b3R5cGUsIHtcbiAgICAgIF9zdWJzY3JpYmU6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gobyk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBJbm5lclN1YnNjcmlwdGlvbih0aGlzLCBvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgby5vbkVycm9yKHRoaXMuZXJyb3IpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGFzVmFsdWUpIHtcbiAgICAgICAgICBvLm9uTmV4dCh0aGlzLnZhbHVlKTtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWJqZWN0IGhhcyBvYnNlcnZlcnMgc3Vic2NyaWJlZCB0byBpdC5cbiAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG4gICAgICAgKi9cbiAgICAgIGhhc09ic2VydmVyczogZnVuY3Rpb24gKCkgeyBjaGVja0Rpc3Bvc2VkKHRoaXMpOyByZXR1cm4gdGhpcy5vYnNlcnZlcnMubGVuZ3RoID4gMDsgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLCBhbHNvIGNhdXNpbmcgdGhlIGxhc3QgcmVjZWl2ZWQgdmFsdWUgdG8gYmUgc2VudCBvdXQgKGlmIGFueSkuXG4gICAgICAgKi9cbiAgICAgIG9uQ29tcGxldGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpLCBsZW47XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgdmFyIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDtcblxuICAgICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgdmFyIG8gPSBvc1tpXTtcbiAgICAgICAgICAgICAgby5vbk5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgIG9zW2ldLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBlcnJvci5cbiAgICAgICAqIEBwYXJhbSB7TWl4ZWR9IGVycm9yIFRoZSBFcnJvciB0byBzZW5kIHRvIGFsbCBvYnNlcnZlcnMuXG4gICAgICAgKi9cbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcblxuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgb3NbaV0ub25FcnJvcihlcnJvcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogU2VuZHMgYSB2YWx1ZSB0byB0aGUgc3ViamVjdC4gVGhlIGxhc3QgdmFsdWUgcmVjZWl2ZWQgYmVmb3JlIHN1Y2Nlc3NmdWwgdGVybWluYXRpb24gd2lsbCBiZSBzZW50IHRvIGFsbCBzdWJzY3JpYmVkIGFuZCBmdXR1cmUgb2JzZXJ2ZXJzLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgVGhlIHZhbHVlIHRvIHN0b3JlIGluIHRoZSBzdWJqZWN0LlxuICAgICAgICovXG4gICAgICBvbk5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBVbnN1YnNjcmliZSBhbGwgb2JzZXJ2ZXJzIGFuZCByZWxlYXNlIHJlc291cmNlcy5cbiAgICAgICAqL1xuICAgICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IG51bGw7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBBc3luY1N1YmplY3Q7XG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIC8qKlxuICAgKiAgUmVwcmVzZW50cyBhIHZhbHVlIHRoYXQgY2hhbmdlcyBvdmVyIHRpbWUuXG4gICAqICBPYnNlcnZlcnMgY2FuIHN1YnNjcmliZSB0byB0aGUgc3ViamVjdCB0byByZWNlaXZlIHRoZSBsYXN0IChvciBpbml0aWFsKSB2YWx1ZSBhbmQgYWxsIHN1YnNlcXVlbnQgbm90aWZpY2F0aW9ucy5cbiAgICovXG4gIHZhciBCZWhhdmlvclN1YmplY3QgPSBSeC5CZWhhdmlvclN1YmplY3QgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEJlaGF2aW9yU3ViamVjdCwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBCZWhhdmlvclN1YmplY3QodmFsdWUpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhZGRQcm9wZXJ0aWVzKEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUsIE9ic2VydmVyLnByb3RvdHlwZSwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gobyk7XG4gICAgICAgICAgby5vbk5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBJbm5lclN1YnNjcmlwdGlvbih0aGlzLCBvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuICAgICAgICAgIG8ub25FcnJvcih0aGlzLmVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEdldHMgdGhlIGN1cnJlbnQgdmFsdWUgb3IgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgICAgICAqIFZhbHVlIGlzIGZyb3plbiBhZnRlciBvbkNvbXBsZXRlZCBpcyBjYWxsZWQuXG4gICAgICAgKiBBZnRlciBvbkVycm9yIGlzIGNhbGxlZCBhbHdheXMgdGhyb3dzIHRoZSBzcGVjaWZpZWQgZXhjZXB0aW9uLlxuICAgICAgICogQW4gZXhjZXB0aW9uIGlzIGFsd2F5cyB0aHJvd24gYWZ0ZXIgZGlzcG9zZSBpcyBjYWxsZWQuXG4gICAgICAgKiBAcmV0dXJucyB7TWl4ZWR9IFRoZSBpbml0aWFsIHZhbHVlIHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3IgdW50aWwgb25OZXh0IGlzIGNhbGxlZDsgYWZ0ZXIgd2hpY2gsIHRoZSBsYXN0IHZhbHVlIHBhc3NlZCB0byBvbk5leHQuXG4gICAgICAgKi9cbiAgICAgIGdldFZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7IHRocm93ZXIodGhpcy5lcnJvcik7IH1cbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG4gICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuICAgICAgICovXG4gICAgICBoYXNPYnNlcnZlcnM6IGZ1bmN0aW9uICgpIHsgY2hlY2tEaXNwb3NlZCh0aGlzKTsgcmV0dXJuIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA+IDA7IH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cbiAgICAgICAqL1xuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIG9zW2ldLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBleGNlcHRpb24uXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSBlcnJvciBUaGUgZXhjZXB0aW9uIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkgeyByZXR1cm47IH1cbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIG9zW2ldLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgYXJyaXZhbCBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25OZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIG9zW2ldLm9uTmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFVuc3Vic2NyaWJlIGFsbCBvYnNlcnZlcnMgYW5kIHJlbGVhc2UgcmVzb3VyY2VzLlxuICAgICAgICovXG4gICAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIEJlaGF2aW9yU3ViamVjdDtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgYW4gb2JqZWN0IHRoYXQgaXMgYm90aCBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIHdlbGwgYXMgYW4gb2JzZXJ2ZXIuXG4gICAqIEVhY2ggbm90aWZpY2F0aW9uIGlzIGJyb2FkY2FzdGVkIHRvIGFsbCBzdWJzY3JpYmVkIGFuZCBmdXR1cmUgb2JzZXJ2ZXJzLCBzdWJqZWN0IHRvIGJ1ZmZlciB0cmltbWluZyBwb2xpY2llcy5cbiAgICovXG4gIHZhciBSZXBsYXlTdWJqZWN0ID0gUnguUmVwbGF5U3ViamVjdCA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cbiAgICB2YXIgbWF4U2FmZUludGVnZXIgPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlUmVtb3ZhYmxlRGlzcG9zYWJsZShzdWJqZWN0LCBvYnNlcnZlcikge1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVDcmVhdGUoZnVuY3Rpb24gKCkge1xuICAgICAgICBvYnNlcnZlci5kaXNwb3NlKCk7XG4gICAgICAgICFzdWJqZWN0LmlzRGlzcG9zZWQgJiYgc3ViamVjdC5vYnNlcnZlcnMuc3BsaWNlKHN1YmplY3Qub2JzZXJ2ZXJzLmluZGV4T2Yob2JzZXJ2ZXIpLCAxKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGluaGVyaXRzKFJlcGxheVN1YmplY3QsIF9fc3VwZXJfXyk7XG5cbiAgICAvKipcbiAgICAgKiAgSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFJlcGxheVN1YmplY3QgY2xhc3Mgd2l0aCB0aGUgc3BlY2lmaWVkIGJ1ZmZlciBzaXplLCB3aW5kb3cgc2l6ZSBhbmQgc2NoZWR1bGVyLlxuICAgICAqICBAcGFyYW0ge051bWJlcn0gW2J1ZmZlclNpemVdIE1heGltdW0gZWxlbWVudCBjb3VudCBvZiB0aGUgcmVwbGF5IGJ1ZmZlci5cbiAgICAgKiAgQHBhcmFtIHtOdW1iZXJ9IFt3aW5kb3dTaXplXSBNYXhpbXVtIHRpbWUgbGVuZ3RoIG9mIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgICAqICBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRoZSBvYnNlcnZlcnMgYXJlIGludm9rZWQgb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gUmVwbGF5U3ViamVjdChidWZmZXJTaXplLCB3aW5kb3dTaXplLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemUgPT0gbnVsbCA/IG1heFNhZmVJbnRlZ2VyIDogYnVmZmVyU2l6ZTtcbiAgICAgIHRoaXMud2luZG93U2l6ZSA9IHdpbmRvd1NpemUgPT0gbnVsbCA/IG1heFNhZmVJbnRlZ2VyIDogd2luZG93U2l6ZTtcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyIHx8IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXI7XG4gICAgICB0aGlzLnEgPSBbXTtcbiAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgICB0aGlzLmVycm9yID0gbnVsbDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGFkZFByb3BlcnRpZXMoUmVwbGF5U3ViamVjdC5wcm90b3R5cGUsIE9ic2VydmVyLnByb3RvdHlwZSwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgdmFyIHNvID0gbmV3IFNjaGVkdWxlZE9ic2VydmVyKHRoaXMuc2NoZWR1bGVyLCBvKSwgc3Vic2NyaXB0aW9uID0gY3JlYXRlUmVtb3ZhYmxlRGlzcG9zYWJsZSh0aGlzLCBzbyk7XG5cbiAgICAgICAgdGhpcy5fdHJpbSh0aGlzLnNjaGVkdWxlci5ub3coKSk7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2goc28pO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBzby5vbk5leHQodGhpcy5xW2ldLnZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgc28ub25FcnJvcih0aGlzLmVycm9yKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIHNvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cblxuICAgICAgICBzby5lbnN1cmVBY3RpdmUoKTtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWJqZWN0IGhhcyBvYnNlcnZlcnMgc3Vic2NyaWJlZCB0byBpdC5cbiAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG4gICAgICAgKi9cbiAgICAgIGhhc09ic2VydmVyczogZnVuY3Rpb24gKCkgeyBjaGVja0Rpc3Bvc2VkKHRoaXMpOyByZXR1cm4gdGhpcy5vYnNlcnZlcnMubGVuZ3RoID4gMDsgfSxcbiAgICAgIF90cmltOiBmdW5jdGlvbiAobm93KSB7XG4gICAgICAgIHdoaWxlICh0aGlzLnEubGVuZ3RoID4gdGhpcy5idWZmZXJTaXplKSB7XG4gICAgICAgICAgdGhpcy5xLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHRoaXMucS5sZW5ndGggPiAwICYmIChub3cgLSB0aGlzLnFbMF0uaW50ZXJ2YWwpID4gdGhpcy53aW5kb3dTaXplKSB7XG4gICAgICAgICAgdGhpcy5xLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgYXJyaXZhbCBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25OZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuICAgICAgICB2YXIgbm93ID0gdGhpcy5zY2hlZHVsZXIubm93KCk7XG4gICAgICAgIHRoaXMucS5wdXNoKHsgaW50ZXJ2YWw6IG5vdywgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICB0aGlzLl90cmltKG5vdyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIG9ic2VydmVyID0gb3NbaV07XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcbiAgICAgICAgICBvYnNlcnZlci5lbnN1cmVBY3RpdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBleGNlcHRpb24uXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSBlcnJvciBUaGUgZXhjZXB0aW9uIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkgeyByZXR1cm47IH1cbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICB2YXIgbm93ID0gdGhpcy5zY2hlZHVsZXIubm93KCk7XG4gICAgICAgIHRoaXMuX3RyaW0obm93KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIG9ic2VydmVyID0gb3NbaV07XG4gICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlcnJvcik7XG4gICAgICAgICAgb2JzZXJ2ZXIuZW5zdXJlQWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cbiAgICAgICAqL1xuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHZhciBub3cgPSB0aGlzLnNjaGVkdWxlci5ub3coKTtcbiAgICAgICAgdGhpcy5fdHJpbShub3cpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBvc1tpXTtcbiAgICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIG9ic2VydmVyLmVuc3VyZUFjdGl2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBVbnN1YnNjcmliZSBhbGwgb2JzZXJ2ZXJzIGFuZCByZWxlYXNlIHJlc291cmNlcy5cbiAgICAgICAqL1xuICAgICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gUmVwbGF5U3ViamVjdDtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgdmFyIEFub255bW91c1N1YmplY3QgPSBSeC5Bbm9ueW1vdXNTdWJqZWN0ID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhBbm9ueW1vdXNTdWJqZWN0LCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEFub255bW91c1N1YmplY3Qob2JzZXJ2ZXIsIG9ic2VydmFibGUpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBhZGRQcm9wZXJ0aWVzKEFub255bW91c1N1YmplY3QucHJvdG90eXBlLCBPYnNlcnZlci5wcm90b3R5cGUsIHtcbiAgICAgIF9zdWJzY3JpYmU6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9ic2VydmFibGUuc3Vic2NyaWJlKG8pO1xuICAgICAgfSxcbiAgICAgIG9uQ29tcGxldGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgIH0sXG4gICAgICBvbkVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vbkVycm9yKGVycm9yKTtcbiAgICAgIH0sXG4gICAgICBvbk5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9uTmV4dCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQW5vbnltb3VzU3ViamVjdDtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICogVXNlZCB0byBwYXVzZSBhbmQgcmVzdW1lIHN0cmVhbXMuXG4gICovXG4gIFJ4LlBhdXNlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUGF1c2VyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFBhdXNlcigpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhdXNlcyB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cbiAgICAgKi9cbiAgICBQYXVzZXIucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkgeyB0aGlzLm9uTmV4dChmYWxzZSk7IH07XG5cbiAgICAvKipcbiAgICAqIFJlc3VtZXMgdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UuXG4gICAgKi9cbiAgICBQYXVzZXIucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHsgdGhpcy5vbk5leHQodHJ1ZSk7IH07XG5cbiAgICByZXR1cm4gUGF1c2VyO1xuICB9KFN1YmplY3QpKTtcblxuICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcbiAgICByb290LlJ4ID0gUng7XG5cbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gUng7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSkge1xuICAgIC8vIGluIE5vZGUuanMgb3IgUmluZ29KU1xuICAgIGlmIChtb2R1bGVFeHBvcnRzKSB7XG4gICAgICAoZnJlZU1vZHVsZS5leHBvcnRzID0gUngpLlJ4ID0gUng7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyZWVFeHBvcnRzLlJ4ID0gUng7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGluIGEgYnJvd3NlciBvciBSaGlub1xuICAgIHJvb3QuUnggPSBSeDtcbiAgfVxuXG4gIC8vIEFsbCBjb2RlIGJlZm9yZSB0aGlzIHBvaW50IHdpbGwgYmUgZmlsdGVyZWQgZnJvbSBzdGFjayB0cmFjZXMuXG4gIHZhciByRW5kaW5nTGluZSA9IGNhcHR1cmVMaW5lKCk7XG5cbn0uY2FsbCh0aGlzKSk7XG4iLCJ2YXIgbG93ZXJDYXNlID0gcmVxdWlyZSgnbG93ZXItY2FzZScpXG5cbnZhciBOT05fV09SRF9SRUdFWFAgPSByZXF1aXJlKCcuL3ZlbmRvci9ub24td29yZC1yZWdleHAnKVxudmFyIENBTUVMX0NBU0VfUkVHRVhQID0gcmVxdWlyZSgnLi92ZW5kb3IvY2FtZWwtY2FzZS1yZWdleHAnKVxudmFyIFRSQUlMSU5HX0RJR0lUX1JFR0VYUCA9IHJlcXVpcmUoJy4vdmVuZG9yL3RyYWlsaW5nLWRpZ2l0LXJlZ2V4cCcpXG5cbi8qKlxuICogU2VudGVuY2UgY2FzZSBhIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHN0clxuICogQHBhcmFtICB7U3RyaW5nfSBsb2NhbGVcbiAqIEBwYXJhbSAge1N0cmluZ30gcmVwbGFjZW1lbnRcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc3RyLCBsb2NhbGUsIHJlcGxhY2VtZW50KSB7XG4gIGlmIChzdHIgPT0gbnVsbCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgcmVwbGFjZW1lbnQgPSByZXBsYWNlbWVudCB8fCAnICdcblxuICBmdW5jdGlvbiByZXBsYWNlIChtYXRjaCwgaW5kZXgsIHN0cmluZykge1xuICAgIGlmIChpbmRleCA9PT0gMCB8fCBpbmRleCA9PT0gKHN0cmluZy5sZW5ndGggLSBtYXRjaC5sZW5ndGgpKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9XG5cbiAgICByZXR1cm4gcmVwbGFjZW1lbnRcbiAgfVxuXG4gIHN0ciA9IFN0cmluZyhzdHIpXG4gICAgLy8gU3VwcG9ydCBjYW1lbCBjYXNlIChcImNhbWVsQ2FzZVwiIC0+IFwiY2FtZWwgQ2FzZVwiKS5cbiAgICAucmVwbGFjZShDQU1FTF9DQVNFX1JFR0VYUCwgJyQxICQyJylcbiAgICAvLyBTdXBwb3J0IGRpZ2l0IGdyb3VwcyAoXCJ0ZXN0MjAxMlwiIC0+IFwidGVzdCAyMDEyXCIpLlxuICAgIC5yZXBsYWNlKFRSQUlMSU5HX0RJR0lUX1JFR0VYUCwgJyQxICQyJylcbiAgICAvLyBSZW1vdmUgYWxsIG5vbi13b3JkIGNoYXJhY3RlcnMgYW5kIHJlcGxhY2Ugd2l0aCBhIHNpbmdsZSBzcGFjZS5cbiAgICAucmVwbGFjZShOT05fV09SRF9SRUdFWFAsIHJlcGxhY2UpXG5cbiAgLy8gTG93ZXIgY2FzZSB0aGUgZW50aXJlIHN0cmluZy5cbiAgcmV0dXJuIGxvd2VyQ2FzZShzdHIsIGxvY2FsZSlcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gLyhbXFx1MDA2MS1cXHUwMDdBXFx1MDBCNVxcdTAwREYtXFx1MDBGNlxcdTAwRjgtXFx1MDBGRlxcdTAxMDFcXHUwMTAzXFx1MDEwNVxcdTAxMDdcXHUwMTA5XFx1MDEwQlxcdTAxMERcXHUwMTBGXFx1MDExMVxcdTAxMTNcXHUwMTE1XFx1MDExN1xcdTAxMTlcXHUwMTFCXFx1MDExRFxcdTAxMUZcXHUwMTIxXFx1MDEyM1xcdTAxMjVcXHUwMTI3XFx1MDEyOVxcdTAxMkJcXHUwMTJEXFx1MDEyRlxcdTAxMzFcXHUwMTMzXFx1MDEzNVxcdTAxMzdcXHUwMTM4XFx1MDEzQVxcdTAxM0NcXHUwMTNFXFx1MDE0MFxcdTAxNDJcXHUwMTQ0XFx1MDE0NlxcdTAxNDhcXHUwMTQ5XFx1MDE0QlxcdTAxNERcXHUwMTRGXFx1MDE1MVxcdTAxNTNcXHUwMTU1XFx1MDE1N1xcdTAxNTlcXHUwMTVCXFx1MDE1RFxcdTAxNUZcXHUwMTYxXFx1MDE2M1xcdTAxNjVcXHUwMTY3XFx1MDE2OVxcdTAxNkJcXHUwMTZEXFx1MDE2RlxcdTAxNzFcXHUwMTczXFx1MDE3NVxcdTAxNzdcXHUwMTdBXFx1MDE3Q1xcdTAxN0UtXFx1MDE4MFxcdTAxODNcXHUwMTg1XFx1MDE4OFxcdTAxOENcXHUwMThEXFx1MDE5MlxcdTAxOTVcXHUwMTk5LVxcdTAxOUJcXHUwMTlFXFx1MDFBMVxcdTAxQTNcXHUwMUE1XFx1MDFBOFxcdTAxQUFcXHUwMUFCXFx1MDFBRFxcdTAxQjBcXHUwMUI0XFx1MDFCNlxcdTAxQjlcXHUwMUJBXFx1MDFCRC1cXHUwMUJGXFx1MDFDNlxcdTAxQzlcXHUwMUNDXFx1MDFDRVxcdTAxRDBcXHUwMUQyXFx1MDFENFxcdTAxRDZcXHUwMUQ4XFx1MDFEQVxcdTAxRENcXHUwMUREXFx1MDFERlxcdTAxRTFcXHUwMUUzXFx1MDFFNVxcdTAxRTdcXHUwMUU5XFx1MDFFQlxcdTAxRURcXHUwMUVGXFx1MDFGMFxcdTAxRjNcXHUwMUY1XFx1MDFGOVxcdTAxRkJcXHUwMUZEXFx1MDFGRlxcdTAyMDFcXHUwMjAzXFx1MDIwNVxcdTAyMDdcXHUwMjA5XFx1MDIwQlxcdTAyMERcXHUwMjBGXFx1MDIxMVxcdTAyMTNcXHUwMjE1XFx1MDIxN1xcdTAyMTlcXHUwMjFCXFx1MDIxRFxcdTAyMUZcXHUwMjIxXFx1MDIyM1xcdTAyMjVcXHUwMjI3XFx1MDIyOVxcdTAyMkJcXHUwMjJEXFx1MDIyRlxcdTAyMzFcXHUwMjMzLVxcdTAyMzlcXHUwMjNDXFx1MDIzRlxcdTAyNDBcXHUwMjQyXFx1MDI0N1xcdTAyNDlcXHUwMjRCXFx1MDI0RFxcdTAyNEYtXFx1MDI5M1xcdTAyOTUtXFx1MDJBRlxcdTAzNzFcXHUwMzczXFx1MDM3N1xcdTAzN0ItXFx1MDM3RFxcdTAzOTBcXHUwM0FDLVxcdTAzQ0VcXHUwM0QwXFx1MDNEMVxcdTAzRDUtXFx1MDNEN1xcdTAzRDlcXHUwM0RCXFx1MDNERFxcdTAzREZcXHUwM0UxXFx1MDNFM1xcdTAzRTVcXHUwM0U3XFx1MDNFOVxcdTAzRUJcXHUwM0VEXFx1MDNFRi1cXHUwM0YzXFx1MDNGNVxcdTAzRjhcXHUwM0ZCXFx1MDNGQ1xcdTA0MzAtXFx1MDQ1RlxcdTA0NjFcXHUwNDYzXFx1MDQ2NVxcdTA0NjdcXHUwNDY5XFx1MDQ2QlxcdTA0NkRcXHUwNDZGXFx1MDQ3MVxcdTA0NzNcXHUwNDc1XFx1MDQ3N1xcdTA0NzlcXHUwNDdCXFx1MDQ3RFxcdTA0N0ZcXHUwNDgxXFx1MDQ4QlxcdTA0OERcXHUwNDhGXFx1MDQ5MVxcdTA0OTNcXHUwNDk1XFx1MDQ5N1xcdTA0OTlcXHUwNDlCXFx1MDQ5RFxcdTA0OUZcXHUwNEExXFx1MDRBM1xcdTA0QTVcXHUwNEE3XFx1MDRBOVxcdTA0QUJcXHUwNEFEXFx1MDRBRlxcdTA0QjFcXHUwNEIzXFx1MDRCNVxcdTA0QjdcXHUwNEI5XFx1MDRCQlxcdTA0QkRcXHUwNEJGXFx1MDRDMlxcdTA0QzRcXHUwNEM2XFx1MDRDOFxcdTA0Q0FcXHUwNENDXFx1MDRDRVxcdTA0Q0ZcXHUwNEQxXFx1MDREM1xcdTA0RDVcXHUwNEQ3XFx1MDREOVxcdTA0REJcXHUwNEREXFx1MDRERlxcdTA0RTFcXHUwNEUzXFx1MDRFNVxcdTA0RTdcXHUwNEU5XFx1MDRFQlxcdTA0RURcXHUwNEVGXFx1MDRGMVxcdTA0RjNcXHUwNEY1XFx1MDRGN1xcdTA0RjlcXHUwNEZCXFx1MDRGRFxcdTA0RkZcXHUwNTAxXFx1MDUwM1xcdTA1MDVcXHUwNTA3XFx1MDUwOVxcdTA1MEJcXHUwNTBEXFx1MDUwRlxcdTA1MTFcXHUwNTEzXFx1MDUxNVxcdTA1MTdcXHUwNTE5XFx1MDUxQlxcdTA1MURcXHUwNTFGXFx1MDUyMVxcdTA1MjNcXHUwNTI1XFx1MDUyN1xcdTA1NjEtXFx1MDU4N1xcdTFEMDAtXFx1MUQyQlxcdTFENkItXFx1MUQ3N1xcdTFENzktXFx1MUQ5QVxcdTFFMDFcXHUxRTAzXFx1MUUwNVxcdTFFMDdcXHUxRTA5XFx1MUUwQlxcdTFFMERcXHUxRTBGXFx1MUUxMVxcdTFFMTNcXHUxRTE1XFx1MUUxN1xcdTFFMTlcXHUxRTFCXFx1MUUxRFxcdTFFMUZcXHUxRTIxXFx1MUUyM1xcdTFFMjVcXHUxRTI3XFx1MUUyOVxcdTFFMkJcXHUxRTJEXFx1MUUyRlxcdTFFMzFcXHUxRTMzXFx1MUUzNVxcdTFFMzdcXHUxRTM5XFx1MUUzQlxcdTFFM0RcXHUxRTNGXFx1MUU0MVxcdTFFNDNcXHUxRTQ1XFx1MUU0N1xcdTFFNDlcXHUxRTRCXFx1MUU0RFxcdTFFNEZcXHUxRTUxXFx1MUU1M1xcdTFFNTVcXHUxRTU3XFx1MUU1OVxcdTFFNUJcXHUxRTVEXFx1MUU1RlxcdTFFNjFcXHUxRTYzXFx1MUU2NVxcdTFFNjdcXHUxRTY5XFx1MUU2QlxcdTFFNkRcXHUxRTZGXFx1MUU3MVxcdTFFNzNcXHUxRTc1XFx1MUU3N1xcdTFFNzlcXHUxRTdCXFx1MUU3RFxcdTFFN0ZcXHUxRTgxXFx1MUU4M1xcdTFFODVcXHUxRTg3XFx1MUU4OVxcdTFFOEJcXHUxRThEXFx1MUU4RlxcdTFFOTFcXHUxRTkzXFx1MUU5NS1cXHUxRTlEXFx1MUU5RlxcdTFFQTFcXHUxRUEzXFx1MUVBNVxcdTFFQTdcXHUxRUE5XFx1MUVBQlxcdTFFQURcXHUxRUFGXFx1MUVCMVxcdTFFQjNcXHUxRUI1XFx1MUVCN1xcdTFFQjlcXHUxRUJCXFx1MUVCRFxcdTFFQkZcXHUxRUMxXFx1MUVDM1xcdTFFQzVcXHUxRUM3XFx1MUVDOVxcdTFFQ0JcXHUxRUNEXFx1MUVDRlxcdTFFRDFcXHUxRUQzXFx1MUVENVxcdTFFRDdcXHUxRUQ5XFx1MUVEQlxcdTFFRERcXHUxRURGXFx1MUVFMVxcdTFFRTNcXHUxRUU1XFx1MUVFN1xcdTFFRTlcXHUxRUVCXFx1MUVFRFxcdTFFRUZcXHUxRUYxXFx1MUVGM1xcdTFFRjVcXHUxRUY3XFx1MUVGOVxcdTFFRkJcXHUxRUZEXFx1MUVGRi1cXHUxRjA3XFx1MUYxMC1cXHUxRjE1XFx1MUYyMC1cXHUxRjI3XFx1MUYzMC1cXHUxRjM3XFx1MUY0MC1cXHUxRjQ1XFx1MUY1MC1cXHUxRjU3XFx1MUY2MC1cXHUxRjY3XFx1MUY3MC1cXHUxRjdEXFx1MUY4MC1cXHUxRjg3XFx1MUY5MC1cXHUxRjk3XFx1MUZBMC1cXHUxRkE3XFx1MUZCMC1cXHUxRkI0XFx1MUZCNlxcdTFGQjdcXHUxRkJFXFx1MUZDMi1cXHUxRkM0XFx1MUZDNlxcdTFGQzdcXHUxRkQwLVxcdTFGRDNcXHUxRkQ2XFx1MUZEN1xcdTFGRTAtXFx1MUZFN1xcdTFGRjItXFx1MUZGNFxcdTFGRjZcXHUxRkY3XFx1MjEwQVxcdTIxMEVcXHUyMTBGXFx1MjExM1xcdTIxMkZcXHUyMTM0XFx1MjEzOVxcdTIxM0NcXHUyMTNEXFx1MjE0Ni1cXHUyMTQ5XFx1MjE0RVxcdTIxODRcXHUyQzMwLVxcdTJDNUVcXHUyQzYxXFx1MkM2NVxcdTJDNjZcXHUyQzY4XFx1MkM2QVxcdTJDNkNcXHUyQzcxXFx1MkM3M1xcdTJDNzRcXHUyQzc2LVxcdTJDN0JcXHUyQzgxXFx1MkM4M1xcdTJDODVcXHUyQzg3XFx1MkM4OVxcdTJDOEJcXHUyQzhEXFx1MkM4RlxcdTJDOTFcXHUyQzkzXFx1MkM5NVxcdTJDOTdcXHUyQzk5XFx1MkM5QlxcdTJDOURcXHUyQzlGXFx1MkNBMVxcdTJDQTNcXHUyQ0E1XFx1MkNBN1xcdTJDQTlcXHUyQ0FCXFx1MkNBRFxcdTJDQUZcXHUyQ0IxXFx1MkNCM1xcdTJDQjVcXHUyQ0I3XFx1MkNCOVxcdTJDQkJcXHUyQ0JEXFx1MkNCRlxcdTJDQzFcXHUyQ0MzXFx1MkNDNVxcdTJDQzdcXHUyQ0M5XFx1MkNDQlxcdTJDQ0RcXHUyQ0NGXFx1MkNEMVxcdTJDRDNcXHUyQ0Q1XFx1MkNEN1xcdTJDRDlcXHUyQ0RCXFx1MkNERFxcdTJDREZcXHUyQ0UxXFx1MkNFM1xcdTJDRTRcXHUyQ0VDXFx1MkNFRVxcdTJDRjNcXHUyRDAwLVxcdTJEMjVcXHUyRDI3XFx1MkQyRFxcdUE2NDFcXHVBNjQzXFx1QTY0NVxcdUE2NDdcXHVBNjQ5XFx1QTY0QlxcdUE2NERcXHVBNjRGXFx1QTY1MVxcdUE2NTNcXHVBNjU1XFx1QTY1N1xcdUE2NTlcXHVBNjVCXFx1QTY1RFxcdUE2NUZcXHVBNjYxXFx1QTY2M1xcdUE2NjVcXHVBNjY3XFx1QTY2OVxcdUE2NkJcXHVBNjZEXFx1QTY4MVxcdUE2ODNcXHVBNjg1XFx1QTY4N1xcdUE2ODlcXHVBNjhCXFx1QTY4RFxcdUE2OEZcXHVBNjkxXFx1QTY5M1xcdUE2OTVcXHVBNjk3XFx1QTcyM1xcdUE3MjVcXHVBNzI3XFx1QTcyOVxcdUE3MkJcXHVBNzJEXFx1QTcyRi1cXHVBNzMxXFx1QTczM1xcdUE3MzVcXHVBNzM3XFx1QTczOVxcdUE3M0JcXHVBNzNEXFx1QTczRlxcdUE3NDFcXHVBNzQzXFx1QTc0NVxcdUE3NDdcXHVBNzQ5XFx1QTc0QlxcdUE3NERcXHVBNzRGXFx1QTc1MVxcdUE3NTNcXHVBNzU1XFx1QTc1N1xcdUE3NTlcXHVBNzVCXFx1QTc1RFxcdUE3NUZcXHVBNzYxXFx1QTc2M1xcdUE3NjVcXHVBNzY3XFx1QTc2OVxcdUE3NkJcXHVBNzZEXFx1QTc2RlxcdUE3NzEtXFx1QTc3OFxcdUE3N0FcXHVBNzdDXFx1QTc3RlxcdUE3ODFcXHVBNzgzXFx1QTc4NVxcdUE3ODdcXHVBNzhDXFx1QTc4RVxcdUE3OTFcXHVBNzkzXFx1QTdBMVxcdUE3QTNcXHVBN0E1XFx1QTdBN1xcdUE3QTlcXHVBN0ZBXFx1RkIwMC1cXHVGQjA2XFx1RkIxMy1cXHVGQjE3XFx1RkY0MS1cXHVGRjVBXSkoW1xcdTAwNDEtXFx1MDA1QVxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBERVxcdTAxMDBcXHUwMTAyXFx1MDEwNFxcdTAxMDZcXHUwMTA4XFx1MDEwQVxcdTAxMENcXHUwMTBFXFx1MDExMFxcdTAxMTJcXHUwMTE0XFx1MDExNlxcdTAxMThcXHUwMTFBXFx1MDExQ1xcdTAxMUVcXHUwMTIwXFx1MDEyMlxcdTAxMjRcXHUwMTI2XFx1MDEyOFxcdTAxMkFcXHUwMTJDXFx1MDEyRVxcdTAxMzBcXHUwMTMyXFx1MDEzNFxcdTAxMzZcXHUwMTM5XFx1MDEzQlxcdTAxM0RcXHUwMTNGXFx1MDE0MVxcdTAxNDNcXHUwMTQ1XFx1MDE0N1xcdTAxNEFcXHUwMTRDXFx1MDE0RVxcdTAxNTBcXHUwMTUyXFx1MDE1NFxcdTAxNTZcXHUwMTU4XFx1MDE1QVxcdTAxNUNcXHUwMTVFXFx1MDE2MFxcdTAxNjJcXHUwMTY0XFx1MDE2NlxcdTAxNjhcXHUwMTZBXFx1MDE2Q1xcdTAxNkVcXHUwMTcwXFx1MDE3MlxcdTAxNzRcXHUwMTc2XFx1MDE3OFxcdTAxNzlcXHUwMTdCXFx1MDE3RFxcdTAxODFcXHUwMTgyXFx1MDE4NFxcdTAxODZcXHUwMTg3XFx1MDE4OS1cXHUwMThCXFx1MDE4RS1cXHUwMTkxXFx1MDE5M1xcdTAxOTRcXHUwMTk2LVxcdTAxOThcXHUwMTlDXFx1MDE5RFxcdTAxOUZcXHUwMUEwXFx1MDFBMlxcdTAxQTRcXHUwMUE2XFx1MDFBN1xcdTAxQTlcXHUwMUFDXFx1MDFBRVxcdTAxQUZcXHUwMUIxLVxcdTAxQjNcXHUwMUI1XFx1MDFCN1xcdTAxQjhcXHUwMUJDXFx1MDFDNFxcdTAxQzdcXHUwMUNBXFx1MDFDRFxcdTAxQ0ZcXHUwMUQxXFx1MDFEM1xcdTAxRDVcXHUwMUQ3XFx1MDFEOVxcdTAxREJcXHUwMURFXFx1MDFFMFxcdTAxRTJcXHUwMUU0XFx1MDFFNlxcdTAxRThcXHUwMUVBXFx1MDFFQ1xcdTAxRUVcXHUwMUYxXFx1MDFGNFxcdTAxRjYtXFx1MDFGOFxcdTAxRkFcXHUwMUZDXFx1MDFGRVxcdTAyMDBcXHUwMjAyXFx1MDIwNFxcdTAyMDZcXHUwMjA4XFx1MDIwQVxcdTAyMENcXHUwMjBFXFx1MDIxMFxcdTAyMTJcXHUwMjE0XFx1MDIxNlxcdTAyMThcXHUwMjFBXFx1MDIxQ1xcdTAyMUVcXHUwMjIwXFx1MDIyMlxcdTAyMjRcXHUwMjI2XFx1MDIyOFxcdTAyMkFcXHUwMjJDXFx1MDIyRVxcdTAyMzBcXHUwMjMyXFx1MDIzQVxcdTAyM0JcXHUwMjNEXFx1MDIzRVxcdTAyNDFcXHUwMjQzLVxcdTAyNDZcXHUwMjQ4XFx1MDI0QVxcdTAyNENcXHUwMjRFXFx1MDM3MFxcdTAzNzJcXHUwMzc2XFx1MDM4NlxcdTAzODgtXFx1MDM4QVxcdTAzOENcXHUwMzhFXFx1MDM4RlxcdTAzOTEtXFx1MDNBMVxcdTAzQTMtXFx1MDNBQlxcdTAzQ0ZcXHUwM0QyLVxcdTAzRDRcXHUwM0Q4XFx1MDNEQVxcdTAzRENcXHUwM0RFXFx1MDNFMFxcdTAzRTJcXHUwM0U0XFx1MDNFNlxcdTAzRThcXHUwM0VBXFx1MDNFQ1xcdTAzRUVcXHUwM0Y0XFx1MDNGN1xcdTAzRjlcXHUwM0ZBXFx1MDNGRC1cXHUwNDJGXFx1MDQ2MFxcdTA0NjJcXHUwNDY0XFx1MDQ2NlxcdTA0NjhcXHUwNDZBXFx1MDQ2Q1xcdTA0NkVcXHUwNDcwXFx1MDQ3MlxcdTA0NzRcXHUwNDc2XFx1MDQ3OFxcdTA0N0FcXHUwNDdDXFx1MDQ3RVxcdTA0ODBcXHUwNDhBXFx1MDQ4Q1xcdTA0OEVcXHUwNDkwXFx1MDQ5MlxcdTA0OTRcXHUwNDk2XFx1MDQ5OFxcdTA0OUFcXHUwNDlDXFx1MDQ5RVxcdTA0QTBcXHUwNEEyXFx1MDRBNFxcdTA0QTZcXHUwNEE4XFx1MDRBQVxcdTA0QUNcXHUwNEFFXFx1MDRCMFxcdTA0QjJcXHUwNEI0XFx1MDRCNlxcdTA0QjhcXHUwNEJBXFx1MDRCQ1xcdTA0QkVcXHUwNEMwXFx1MDRDMVxcdTA0QzNcXHUwNEM1XFx1MDRDN1xcdTA0QzlcXHUwNENCXFx1MDRDRFxcdTA0RDBcXHUwNEQyXFx1MDRENFxcdTA0RDZcXHUwNEQ4XFx1MDREQVxcdTA0RENcXHUwNERFXFx1MDRFMFxcdTA0RTJcXHUwNEU0XFx1MDRFNlxcdTA0RThcXHUwNEVBXFx1MDRFQ1xcdTA0RUVcXHUwNEYwXFx1MDRGMlxcdTA0RjRcXHUwNEY2XFx1MDRGOFxcdTA0RkFcXHUwNEZDXFx1MDRGRVxcdTA1MDBcXHUwNTAyXFx1MDUwNFxcdTA1MDZcXHUwNTA4XFx1MDUwQVxcdTA1MENcXHUwNTBFXFx1MDUxMFxcdTA1MTJcXHUwNTE0XFx1MDUxNlxcdTA1MThcXHUwNTFBXFx1MDUxQ1xcdTA1MUVcXHUwNTIwXFx1MDUyMlxcdTA1MjRcXHUwNTI2XFx1MDUzMS1cXHUwNTU2XFx1MTBBMC1cXHUxMEM1XFx1MTBDN1xcdTEwQ0RcXHUxRTAwXFx1MUUwMlxcdTFFMDRcXHUxRTA2XFx1MUUwOFxcdTFFMEFcXHUxRTBDXFx1MUUwRVxcdTFFMTBcXHUxRTEyXFx1MUUxNFxcdTFFMTZcXHUxRTE4XFx1MUUxQVxcdTFFMUNcXHUxRTFFXFx1MUUyMFxcdTFFMjJcXHUxRTI0XFx1MUUyNlxcdTFFMjhcXHUxRTJBXFx1MUUyQ1xcdTFFMkVcXHUxRTMwXFx1MUUzMlxcdTFFMzRcXHUxRTM2XFx1MUUzOFxcdTFFM0FcXHUxRTNDXFx1MUUzRVxcdTFFNDBcXHUxRTQyXFx1MUU0NFxcdTFFNDZcXHUxRTQ4XFx1MUU0QVxcdTFFNENcXHUxRTRFXFx1MUU1MFxcdTFFNTJcXHUxRTU0XFx1MUU1NlxcdTFFNThcXHUxRTVBXFx1MUU1Q1xcdTFFNUVcXHUxRTYwXFx1MUU2MlxcdTFFNjRcXHUxRTY2XFx1MUU2OFxcdTFFNkFcXHUxRTZDXFx1MUU2RVxcdTFFNzBcXHUxRTcyXFx1MUU3NFxcdTFFNzZcXHUxRTc4XFx1MUU3QVxcdTFFN0NcXHUxRTdFXFx1MUU4MFxcdTFFODJcXHUxRTg0XFx1MUU4NlxcdTFFODhcXHUxRThBXFx1MUU4Q1xcdTFFOEVcXHUxRTkwXFx1MUU5MlxcdTFFOTRcXHUxRTlFXFx1MUVBMFxcdTFFQTJcXHUxRUE0XFx1MUVBNlxcdTFFQThcXHUxRUFBXFx1MUVBQ1xcdTFFQUVcXHUxRUIwXFx1MUVCMlxcdTFFQjRcXHUxRUI2XFx1MUVCOFxcdTFFQkFcXHUxRUJDXFx1MUVCRVxcdTFFQzBcXHUxRUMyXFx1MUVDNFxcdTFFQzZcXHUxRUM4XFx1MUVDQVxcdTFFQ0NcXHUxRUNFXFx1MUVEMFxcdTFFRDJcXHUxRUQ0XFx1MUVENlxcdTFFRDhcXHUxRURBXFx1MUVEQ1xcdTFFREVcXHUxRUUwXFx1MUVFMlxcdTFFRTRcXHUxRUU2XFx1MUVFOFxcdTFFRUFcXHUxRUVDXFx1MUVFRVxcdTFFRjBcXHUxRUYyXFx1MUVGNFxcdTFFRjZcXHUxRUY4XFx1MUVGQVxcdTFFRkNcXHUxRUZFXFx1MUYwOC1cXHUxRjBGXFx1MUYxOC1cXHUxRjFEXFx1MUYyOC1cXHUxRjJGXFx1MUYzOC1cXHUxRjNGXFx1MUY0OC1cXHUxRjREXFx1MUY1OVxcdTFGNUJcXHUxRjVEXFx1MUY1RlxcdTFGNjgtXFx1MUY2RlxcdTFGQjgtXFx1MUZCQlxcdTFGQzgtXFx1MUZDQlxcdTFGRDgtXFx1MUZEQlxcdTFGRTgtXFx1MUZFQ1xcdTFGRjgtXFx1MUZGQlxcdTIxMDJcXHUyMTA3XFx1MjEwQi1cXHUyMTBEXFx1MjExMC1cXHUyMTEyXFx1MjExNVxcdTIxMTktXFx1MjExRFxcdTIxMjRcXHUyMTI2XFx1MjEyOFxcdTIxMkEtXFx1MjEyRFxcdTIxMzAtXFx1MjEzM1xcdTIxM0VcXHUyMTNGXFx1MjE0NVxcdTIxODNcXHUyQzAwLVxcdTJDMkVcXHUyQzYwXFx1MkM2Mi1cXHUyQzY0XFx1MkM2N1xcdTJDNjlcXHUyQzZCXFx1MkM2RC1cXHUyQzcwXFx1MkM3MlxcdTJDNzVcXHUyQzdFLVxcdTJDODBcXHUyQzgyXFx1MkM4NFxcdTJDODZcXHUyQzg4XFx1MkM4QVxcdTJDOENcXHUyQzhFXFx1MkM5MFxcdTJDOTJcXHUyQzk0XFx1MkM5NlxcdTJDOThcXHUyQzlBXFx1MkM5Q1xcdTJDOUVcXHUyQ0EwXFx1MkNBMlxcdTJDQTRcXHUyQ0E2XFx1MkNBOFxcdTJDQUFcXHUyQ0FDXFx1MkNBRVxcdTJDQjBcXHUyQ0IyXFx1MkNCNFxcdTJDQjZcXHUyQ0I4XFx1MkNCQVxcdTJDQkNcXHUyQ0JFXFx1MkNDMFxcdTJDQzJcXHUyQ0M0XFx1MkNDNlxcdTJDQzhcXHUyQ0NBXFx1MkNDQ1xcdTJDQ0VcXHUyQ0QwXFx1MkNEMlxcdTJDRDRcXHUyQ0Q2XFx1MkNEOFxcdTJDREFcXHUyQ0RDXFx1MkNERVxcdTJDRTBcXHUyQ0UyXFx1MkNFQlxcdTJDRURcXHUyQ0YyXFx1QTY0MFxcdUE2NDJcXHVBNjQ0XFx1QTY0NlxcdUE2NDhcXHVBNjRBXFx1QTY0Q1xcdUE2NEVcXHVBNjUwXFx1QTY1MlxcdUE2NTRcXHVBNjU2XFx1QTY1OFxcdUE2NUFcXHVBNjVDXFx1QTY1RVxcdUE2NjBcXHVBNjYyXFx1QTY2NFxcdUE2NjZcXHVBNjY4XFx1QTY2QVxcdUE2NkNcXHVBNjgwXFx1QTY4MlxcdUE2ODRcXHVBNjg2XFx1QTY4OFxcdUE2OEFcXHVBNjhDXFx1QTY4RVxcdUE2OTBcXHVBNjkyXFx1QTY5NFxcdUE2OTZcXHVBNzIyXFx1QTcyNFxcdUE3MjZcXHVBNzI4XFx1QTcyQVxcdUE3MkNcXHVBNzJFXFx1QTczMlxcdUE3MzRcXHVBNzM2XFx1QTczOFxcdUE3M0FcXHVBNzNDXFx1QTczRVxcdUE3NDBcXHVBNzQyXFx1QTc0NFxcdUE3NDZcXHVBNzQ4XFx1QTc0QVxcdUE3NENcXHVBNzRFXFx1QTc1MFxcdUE3NTJcXHVBNzU0XFx1QTc1NlxcdUE3NThcXHVBNzVBXFx1QTc1Q1xcdUE3NUVcXHVBNzYwXFx1QTc2MlxcdUE3NjRcXHVBNzY2XFx1QTc2OFxcdUE3NkFcXHVBNzZDXFx1QTc2RVxcdUE3NzlcXHVBNzdCXFx1QTc3RFxcdUE3N0VcXHVBNzgwXFx1QTc4MlxcdUE3ODRcXHVBNzg2XFx1QTc4QlxcdUE3OERcXHVBNzkwXFx1QTc5MlxcdUE3QTBcXHVBN0EyXFx1QTdBNFxcdUE3QTZcXHVBN0E4XFx1QTdBQVxcdUZGMjEtXFx1RkYzQVxcdTAwMzAtXFx1MDAzOVxcdTAwQjJcXHUwMEIzXFx1MDBCOVxcdTAwQkMtXFx1MDBCRVxcdTA2NjAtXFx1MDY2OVxcdTA2RjAtXFx1MDZGOVxcdTA3QzAtXFx1MDdDOVxcdTA5NjYtXFx1MDk2RlxcdTA5RTYtXFx1MDlFRlxcdTA5RjQtXFx1MDlGOVxcdTBBNjYtXFx1MEE2RlxcdTBBRTYtXFx1MEFFRlxcdTBCNjYtXFx1MEI2RlxcdTBCNzItXFx1MEI3N1xcdTBCRTYtXFx1MEJGMlxcdTBDNjYtXFx1MEM2RlxcdTBDNzgtXFx1MEM3RVxcdTBDRTYtXFx1MENFRlxcdTBENjYtXFx1MEQ3NVxcdTBFNTAtXFx1MEU1OVxcdTBFRDAtXFx1MEVEOVxcdTBGMjAtXFx1MEYzM1xcdTEwNDAtXFx1MTA0OVxcdTEwOTAtXFx1MTA5OVxcdTEzNjktXFx1MTM3Q1xcdTE2RUUtXFx1MTZGMFxcdTE3RTAtXFx1MTdFOVxcdTE3RjAtXFx1MTdGOVxcdTE4MTAtXFx1MTgxOVxcdTE5NDYtXFx1MTk0RlxcdTE5RDAtXFx1MTlEQVxcdTFBODAtXFx1MUE4OVxcdTFBOTAtXFx1MUE5OVxcdTFCNTAtXFx1MUI1OVxcdTFCQjAtXFx1MUJCOVxcdTFDNDAtXFx1MUM0OVxcdTFDNTAtXFx1MUM1OVxcdTIwNzBcXHUyMDc0LVxcdTIwNzlcXHUyMDgwLVxcdTIwODlcXHUyMTUwLVxcdTIxODJcXHUyMTg1LVxcdTIxODlcXHUyNDYwLVxcdTI0OUJcXHUyNEVBLVxcdTI0RkZcXHUyNzc2LVxcdTI3OTNcXHUyQ0ZEXFx1MzAwN1xcdTMwMjEtXFx1MzAyOVxcdTMwMzgtXFx1MzAzQVxcdTMxOTItXFx1MzE5NVxcdTMyMjAtXFx1MzIyOVxcdTMyNDgtXFx1MzI0RlxcdTMyNTEtXFx1MzI1RlxcdTMyODAtXFx1MzI4OVxcdTMyQjEtXFx1MzJCRlxcdUE2MjAtXFx1QTYyOVxcdUE2RTYtXFx1QTZFRlxcdUE4MzAtXFx1QTgzNVxcdUE4RDAtXFx1QThEOVxcdUE5MDAtXFx1QTkwOVxcdUE5RDAtXFx1QTlEOVxcdUFBNTAtXFx1QUE1OVxcdUFCRjAtXFx1QUJGOVxcdUZGMTAtXFx1RkYxOV0pL2dcbiIsIm1vZHVsZS5leHBvcnRzID0gL1teXFx1MDA0MS1cXHUwMDVBXFx1MDA2MS1cXHUwMDdBXFx1MDBBQVxcdTAwQjVcXHUwMEJBXFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkMxXFx1MDJDNi1cXHUwMkQxXFx1MDJFMC1cXHUwMkU0XFx1MDJFQ1xcdTAyRUVcXHUwMzcwLVxcdTAzNzRcXHUwMzc2XFx1MDM3N1xcdTAzN0EtXFx1MDM3RFxcdTAzODZcXHUwMzg4LVxcdTAzOEFcXHUwMzhDXFx1MDM4RS1cXHUwM0ExXFx1MDNBMy1cXHUwM0Y1XFx1MDNGNy1cXHUwNDgxXFx1MDQ4QS1cXHUwNTI3XFx1MDUzMS1cXHUwNTU2XFx1MDU1OVxcdTA1NjEtXFx1MDU4N1xcdTA1RDAtXFx1MDVFQVxcdTA1RjAtXFx1MDVGMlxcdTA2MjAtXFx1MDY0QVxcdTA2NkVcXHUwNjZGXFx1MDY3MS1cXHUwNkQzXFx1MDZENVxcdTA2RTVcXHUwNkU2XFx1MDZFRVxcdTA2RUZcXHUwNkZBLVxcdTA2RkNcXHUwNkZGXFx1MDcxMFxcdTA3MTItXFx1MDcyRlxcdTA3NEQtXFx1MDdBNVxcdTA3QjFcXHUwN0NBLVxcdTA3RUFcXHUwN0Y0XFx1MDdGNVxcdTA3RkFcXHUwODAwLVxcdTA4MTVcXHUwODFBXFx1MDgyNFxcdTA4MjhcXHUwODQwLVxcdTA4NThcXHUwOEEwXFx1MDhBMi1cXHUwOEFDXFx1MDkwNC1cXHUwOTM5XFx1MDkzRFxcdTA5NTBcXHUwOTU4LVxcdTA5NjFcXHUwOTcxLVxcdTA5NzdcXHUwOTc5LVxcdTA5N0ZcXHUwOTg1LVxcdTA5OENcXHUwOThGXFx1MDk5MFxcdTA5OTMtXFx1MDlBOFxcdTA5QUEtXFx1MDlCMFxcdTA5QjJcXHUwOUI2LVxcdTA5QjlcXHUwOUJEXFx1MDlDRVxcdTA5RENcXHUwOUREXFx1MDlERi1cXHUwOUUxXFx1MDlGMFxcdTA5RjFcXHUwQTA1LVxcdTBBMEFcXHUwQTBGXFx1MEExMFxcdTBBMTMtXFx1MEEyOFxcdTBBMkEtXFx1MEEzMFxcdTBBMzJcXHUwQTMzXFx1MEEzNVxcdTBBMzZcXHUwQTM4XFx1MEEzOVxcdTBBNTktXFx1MEE1Q1xcdTBBNUVcXHUwQTcyLVxcdTBBNzRcXHUwQTg1LVxcdTBBOERcXHUwQThGLVxcdTBBOTFcXHUwQTkzLVxcdTBBQThcXHUwQUFBLVxcdTBBQjBcXHUwQUIyXFx1MEFCM1xcdTBBQjUtXFx1MEFCOVxcdTBBQkRcXHUwQUQwXFx1MEFFMFxcdTBBRTFcXHUwQjA1LVxcdTBCMENcXHUwQjBGXFx1MEIxMFxcdTBCMTMtXFx1MEIyOFxcdTBCMkEtXFx1MEIzMFxcdTBCMzJcXHUwQjMzXFx1MEIzNS1cXHUwQjM5XFx1MEIzRFxcdTBCNUNcXHUwQjVEXFx1MEI1Ri1cXHUwQjYxXFx1MEI3MVxcdTBCODNcXHUwQjg1LVxcdTBCOEFcXHUwQjhFLVxcdTBCOTBcXHUwQjkyLVxcdTBCOTVcXHUwQjk5XFx1MEI5QVxcdTBCOUNcXHUwQjlFXFx1MEI5RlxcdTBCQTNcXHUwQkE0XFx1MEJBOC1cXHUwQkFBXFx1MEJBRS1cXHUwQkI5XFx1MEJEMFxcdTBDMDUtXFx1MEMwQ1xcdTBDMEUtXFx1MEMxMFxcdTBDMTItXFx1MEMyOFxcdTBDMkEtXFx1MEMzM1xcdTBDMzUtXFx1MEMzOVxcdTBDM0RcXHUwQzU4XFx1MEM1OVxcdTBDNjBcXHUwQzYxXFx1MEM4NS1cXHUwQzhDXFx1MEM4RS1cXHUwQzkwXFx1MEM5Mi1cXHUwQ0E4XFx1MENBQS1cXHUwQ0IzXFx1MENCNS1cXHUwQ0I5XFx1MENCRFxcdTBDREVcXHUwQ0UwXFx1MENFMVxcdTBDRjFcXHUwQ0YyXFx1MEQwNS1cXHUwRDBDXFx1MEQwRS1cXHUwRDEwXFx1MEQxMi1cXHUwRDNBXFx1MEQzRFxcdTBENEVcXHUwRDYwXFx1MEQ2MVxcdTBEN0EtXFx1MEQ3RlxcdTBEODUtXFx1MEQ5NlxcdTBEOUEtXFx1MERCMVxcdTBEQjMtXFx1MERCQlxcdTBEQkRcXHUwREMwLVxcdTBEQzZcXHUwRTAxLVxcdTBFMzBcXHUwRTMyXFx1MEUzM1xcdTBFNDAtXFx1MEU0NlxcdTBFODFcXHUwRTgyXFx1MEU4NFxcdTBFODdcXHUwRTg4XFx1MEU4QVxcdTBFOERcXHUwRTk0LVxcdTBFOTdcXHUwRTk5LVxcdTBFOUZcXHUwRUExLVxcdTBFQTNcXHUwRUE1XFx1MEVBN1xcdTBFQUFcXHUwRUFCXFx1MEVBRC1cXHUwRUIwXFx1MEVCMlxcdTBFQjNcXHUwRUJEXFx1MEVDMC1cXHUwRUM0XFx1MEVDNlxcdTBFREMtXFx1MEVERlxcdTBGMDBcXHUwRjQwLVxcdTBGNDdcXHUwRjQ5LVxcdTBGNkNcXHUwRjg4LVxcdTBGOENcXHUxMDAwLVxcdTEwMkFcXHUxMDNGXFx1MTA1MC1cXHUxMDU1XFx1MTA1QS1cXHUxMDVEXFx1MTA2MVxcdTEwNjVcXHUxMDY2XFx1MTA2RS1cXHUxMDcwXFx1MTA3NS1cXHUxMDgxXFx1MTA4RVxcdTEwQTAtXFx1MTBDNVxcdTEwQzdcXHUxMENEXFx1MTBEMC1cXHUxMEZBXFx1MTBGQy1cXHUxMjQ4XFx1MTI0QS1cXHUxMjREXFx1MTI1MC1cXHUxMjU2XFx1MTI1OFxcdTEyNUEtXFx1MTI1RFxcdTEyNjAtXFx1MTI4OFxcdTEyOEEtXFx1MTI4RFxcdTEyOTAtXFx1MTJCMFxcdTEyQjItXFx1MTJCNVxcdTEyQjgtXFx1MTJCRVxcdTEyQzBcXHUxMkMyLVxcdTEyQzVcXHUxMkM4LVxcdTEyRDZcXHUxMkQ4LVxcdTEzMTBcXHUxMzEyLVxcdTEzMTVcXHUxMzE4LVxcdTEzNUFcXHUxMzgwLVxcdTEzOEZcXHUxM0EwLVxcdTEzRjRcXHUxNDAxLVxcdTE2NkNcXHUxNjZGLVxcdTE2N0ZcXHUxNjgxLVxcdTE2OUFcXHUxNkEwLVxcdTE2RUFcXHUxNzAwLVxcdTE3MENcXHUxNzBFLVxcdTE3MTFcXHUxNzIwLVxcdTE3MzFcXHUxNzQwLVxcdTE3NTFcXHUxNzYwLVxcdTE3NkNcXHUxNzZFLVxcdTE3NzBcXHUxNzgwLVxcdTE3QjNcXHUxN0Q3XFx1MTdEQ1xcdTE4MjAtXFx1MTg3N1xcdTE4ODAtXFx1MThBOFxcdTE4QUFcXHUxOEIwLVxcdTE4RjVcXHUxOTAwLVxcdTE5MUNcXHUxOTUwLVxcdTE5NkRcXHUxOTcwLVxcdTE5NzRcXHUxOTgwLVxcdTE5QUJcXHUxOUMxLVxcdTE5QzdcXHUxQTAwLVxcdTFBMTZcXHUxQTIwLVxcdTFBNTRcXHUxQUE3XFx1MUIwNS1cXHUxQjMzXFx1MUI0NS1cXHUxQjRCXFx1MUI4My1cXHUxQkEwXFx1MUJBRVxcdTFCQUZcXHUxQkJBLVxcdTFCRTVcXHUxQzAwLVxcdTFDMjNcXHUxQzRELVxcdTFDNEZcXHUxQzVBLVxcdTFDN0RcXHUxQ0U5LVxcdTFDRUNcXHUxQ0VFLVxcdTFDRjFcXHUxQ0Y1XFx1MUNGNlxcdTFEMDAtXFx1MURCRlxcdTFFMDAtXFx1MUYxNVxcdTFGMTgtXFx1MUYxRFxcdTFGMjAtXFx1MUY0NVxcdTFGNDgtXFx1MUY0RFxcdTFGNTAtXFx1MUY1N1xcdTFGNTlcXHUxRjVCXFx1MUY1RFxcdTFGNUYtXFx1MUY3RFxcdTFGODAtXFx1MUZCNFxcdTFGQjYtXFx1MUZCQ1xcdTFGQkVcXHUxRkMyLVxcdTFGQzRcXHUxRkM2LVxcdTFGQ0NcXHUxRkQwLVxcdTFGRDNcXHUxRkQ2LVxcdTFGREJcXHUxRkUwLVxcdTFGRUNcXHUxRkYyLVxcdTFGRjRcXHUxRkY2LVxcdTFGRkNcXHUyMDcxXFx1MjA3RlxcdTIwOTAtXFx1MjA5Q1xcdTIxMDJcXHUyMTA3XFx1MjEwQS1cXHUyMTEzXFx1MjExNVxcdTIxMTktXFx1MjExRFxcdTIxMjRcXHUyMTI2XFx1MjEyOFxcdTIxMkEtXFx1MjEyRFxcdTIxMkYtXFx1MjEzOVxcdTIxM0MtXFx1MjEzRlxcdTIxNDUtXFx1MjE0OVxcdTIxNEVcXHUyMTgzXFx1MjE4NFxcdTJDMDAtXFx1MkMyRVxcdTJDMzAtXFx1MkM1RVxcdTJDNjAtXFx1MkNFNFxcdTJDRUItXFx1MkNFRVxcdTJDRjJcXHUyQ0YzXFx1MkQwMC1cXHUyRDI1XFx1MkQyN1xcdTJEMkRcXHUyRDMwLVxcdTJENjdcXHUyRDZGXFx1MkQ4MC1cXHUyRDk2XFx1MkRBMC1cXHUyREE2XFx1MkRBOC1cXHUyREFFXFx1MkRCMC1cXHUyREI2XFx1MkRCOC1cXHUyREJFXFx1MkRDMC1cXHUyREM2XFx1MkRDOC1cXHUyRENFXFx1MkREMC1cXHUyREQ2XFx1MkREOC1cXHUyRERFXFx1MkUyRlxcdTMwMDVcXHUzMDA2XFx1MzAzMS1cXHUzMDM1XFx1MzAzQlxcdTMwM0NcXHUzMDQxLVxcdTMwOTZcXHUzMDlELVxcdTMwOUZcXHUzMEExLVxcdTMwRkFcXHUzMEZDLVxcdTMwRkZcXHUzMTA1LVxcdTMxMkRcXHUzMTMxLVxcdTMxOEVcXHUzMUEwLVxcdTMxQkFcXHUzMUYwLVxcdTMxRkZcXHUzNDAwLVxcdTREQjVcXHU0RTAwLVxcdTlGQ0NcXHVBMDAwLVxcdUE0OENcXHVBNEQwLVxcdUE0RkRcXHVBNTAwLVxcdUE2MENcXHVBNjEwLVxcdUE2MUZcXHVBNjJBXFx1QTYyQlxcdUE2NDAtXFx1QTY2RVxcdUE2N0YtXFx1QTY5N1xcdUE2QTAtXFx1QTZFNVxcdUE3MTctXFx1QTcxRlxcdUE3MjItXFx1QTc4OFxcdUE3OEItXFx1QTc4RVxcdUE3OTAtXFx1QTc5M1xcdUE3QTAtXFx1QTdBQVxcdUE3RjgtXFx1QTgwMVxcdUE4MDMtXFx1QTgwNVxcdUE4MDctXFx1QTgwQVxcdUE4MEMtXFx1QTgyMlxcdUE4NDAtXFx1QTg3M1xcdUE4ODItXFx1QThCM1xcdUE4RjItXFx1QThGN1xcdUE4RkJcXHVBOTBBLVxcdUE5MjVcXHVBOTMwLVxcdUE5NDZcXHVBOTYwLVxcdUE5N0NcXHVBOTg0LVxcdUE5QjJcXHVBOUNGXFx1QUEwMC1cXHVBQTI4XFx1QUE0MC1cXHVBQTQyXFx1QUE0NC1cXHVBQTRCXFx1QUE2MC1cXHVBQTc2XFx1QUE3QVxcdUFBODAtXFx1QUFBRlxcdUFBQjFcXHVBQUI1XFx1QUFCNlxcdUFBQjktXFx1QUFCRFxcdUFBQzBcXHVBQUMyXFx1QUFEQi1cXHVBQUREXFx1QUFFMC1cXHVBQUVBXFx1QUFGMi1cXHVBQUY0XFx1QUIwMS1cXHVBQjA2XFx1QUIwOS1cXHVBQjBFXFx1QUIxMS1cXHVBQjE2XFx1QUIyMC1cXHVBQjI2XFx1QUIyOC1cXHVBQjJFXFx1QUJDMC1cXHVBQkUyXFx1QUMwMC1cXHVEN0EzXFx1RDdCMC1cXHVEN0M2XFx1RDdDQi1cXHVEN0ZCXFx1RjkwMC1cXHVGQTZEXFx1RkE3MC1cXHVGQUQ5XFx1RkIwMC1cXHVGQjA2XFx1RkIxMy1cXHVGQjE3XFx1RkIxRFxcdUZCMUYtXFx1RkIyOFxcdUZCMkEtXFx1RkIzNlxcdUZCMzgtXFx1RkIzQ1xcdUZCM0VcXHVGQjQwXFx1RkI0MVxcdUZCNDNcXHVGQjQ0XFx1RkI0Ni1cXHVGQkIxXFx1RkJEMy1cXHVGRDNEXFx1RkQ1MC1cXHVGRDhGXFx1RkQ5Mi1cXHVGREM3XFx1RkRGMC1cXHVGREZCXFx1RkU3MC1cXHVGRTc0XFx1RkU3Ni1cXHVGRUZDXFx1RkYyMS1cXHVGRjNBXFx1RkY0MS1cXHVGRjVBXFx1RkY2Ni1cXHVGRkJFXFx1RkZDMi1cXHVGRkM3XFx1RkZDQS1cXHVGRkNGXFx1RkZEMi1cXHVGRkQ3XFx1RkZEQS1cXHVGRkRDXFx1MDAzMC1cXHUwMDM5XFx1MDBCMlxcdTAwQjNcXHUwMEI5XFx1MDBCQy1cXHUwMEJFXFx1MDY2MC1cXHUwNjY5XFx1MDZGMC1cXHUwNkY5XFx1MDdDMC1cXHUwN0M5XFx1MDk2Ni1cXHUwOTZGXFx1MDlFNi1cXHUwOUVGXFx1MDlGNC1cXHUwOUY5XFx1MEE2Ni1cXHUwQTZGXFx1MEFFNi1cXHUwQUVGXFx1MEI2Ni1cXHUwQjZGXFx1MEI3Mi1cXHUwQjc3XFx1MEJFNi1cXHUwQkYyXFx1MEM2Ni1cXHUwQzZGXFx1MEM3OC1cXHUwQzdFXFx1MENFNi1cXHUwQ0VGXFx1MEQ2Ni1cXHUwRDc1XFx1MEU1MC1cXHUwRTU5XFx1MEVEMC1cXHUwRUQ5XFx1MEYyMC1cXHUwRjMzXFx1MTA0MC1cXHUxMDQ5XFx1MTA5MC1cXHUxMDk5XFx1MTM2OS1cXHUxMzdDXFx1MTZFRS1cXHUxNkYwXFx1MTdFMC1cXHUxN0U5XFx1MTdGMC1cXHUxN0Y5XFx1MTgxMC1cXHUxODE5XFx1MTk0Ni1cXHUxOTRGXFx1MTlEMC1cXHUxOURBXFx1MUE4MC1cXHUxQTg5XFx1MUE5MC1cXHUxQTk5XFx1MUI1MC1cXHUxQjU5XFx1MUJCMC1cXHUxQkI5XFx1MUM0MC1cXHUxQzQ5XFx1MUM1MC1cXHUxQzU5XFx1MjA3MFxcdTIwNzQtXFx1MjA3OVxcdTIwODAtXFx1MjA4OVxcdTIxNTAtXFx1MjE4MlxcdTIxODUtXFx1MjE4OVxcdTI0NjAtXFx1MjQ5QlxcdTI0RUEtXFx1MjRGRlxcdTI3NzYtXFx1Mjc5M1xcdTJDRkRcXHUzMDA3XFx1MzAyMS1cXHUzMDI5XFx1MzAzOC1cXHUzMDNBXFx1MzE5Mi1cXHUzMTk1XFx1MzIyMC1cXHUzMjI5XFx1MzI0OC1cXHUzMjRGXFx1MzI1MS1cXHUzMjVGXFx1MzI4MC1cXHUzMjg5XFx1MzJCMS1cXHUzMkJGXFx1QTYyMC1cXHVBNjI5XFx1QTZFNi1cXHVBNkVGXFx1QTgzMC1cXHVBODM1XFx1QThEMC1cXHVBOEQ5XFx1QTkwMC1cXHVBOTA5XFx1QTlEMC1cXHVBOUQ5XFx1QUE1MC1cXHVBQTU5XFx1QUJGMC1cXHVBQkY5XFx1RkYxMC1cXHVGRjE5XSsvZ1xuIiwibW9kdWxlLmV4cG9ydHMgPSAvKFtcXHUwMDMwLVxcdTAwMzlcXHUwMEIyXFx1MDBCM1xcdTAwQjlcXHUwMEJDLVxcdTAwQkVcXHUwNjYwLVxcdTA2NjlcXHUwNkYwLVxcdTA2RjlcXHUwN0MwLVxcdTA3QzlcXHUwOTY2LVxcdTA5NkZcXHUwOUU2LVxcdTA5RUZcXHUwOUY0LVxcdTA5RjlcXHUwQTY2LVxcdTBBNkZcXHUwQUU2LVxcdTBBRUZcXHUwQjY2LVxcdTBCNkZcXHUwQjcyLVxcdTBCNzdcXHUwQkU2LVxcdTBCRjJcXHUwQzY2LVxcdTBDNkZcXHUwQzc4LVxcdTBDN0VcXHUwQ0U2LVxcdTBDRUZcXHUwRDY2LVxcdTBENzVcXHUwRTUwLVxcdTBFNTlcXHUwRUQwLVxcdTBFRDlcXHUwRjIwLVxcdTBGMzNcXHUxMDQwLVxcdTEwNDlcXHUxMDkwLVxcdTEwOTlcXHUxMzY5LVxcdTEzN0NcXHUxNkVFLVxcdTE2RjBcXHUxN0UwLVxcdTE3RTlcXHUxN0YwLVxcdTE3RjlcXHUxODEwLVxcdTE4MTlcXHUxOTQ2LVxcdTE5NEZcXHUxOUQwLVxcdTE5REFcXHUxQTgwLVxcdTFBODlcXHUxQTkwLVxcdTFBOTlcXHUxQjUwLVxcdTFCNTlcXHUxQkIwLVxcdTFCQjlcXHUxQzQwLVxcdTFDNDlcXHUxQzUwLVxcdTFDNTlcXHUyMDcwXFx1MjA3NC1cXHUyMDc5XFx1MjA4MC1cXHUyMDg5XFx1MjE1MC1cXHUyMTgyXFx1MjE4NS1cXHUyMTg5XFx1MjQ2MC1cXHUyNDlCXFx1MjRFQS1cXHUyNEZGXFx1Mjc3Ni1cXHUyNzkzXFx1MkNGRFxcdTMwMDdcXHUzMDIxLVxcdTMwMjlcXHUzMDM4LVxcdTMwM0FcXHUzMTkyLVxcdTMxOTVcXHUzMjIwLVxcdTMyMjlcXHUzMjQ4LVxcdTMyNEZcXHUzMjUxLVxcdTMyNUZcXHUzMjgwLVxcdTMyODlcXHUzMkIxLVxcdTMyQkZcXHVBNjIwLVxcdUE2MjlcXHVBNkU2LVxcdUE2RUZcXHVBODMwLVxcdUE4MzVcXHVBOEQwLVxcdUE4RDlcXHVBOTAwLVxcdUE5MDlcXHVBOUQwLVxcdUE5RDlcXHVBQTUwLVxcdUFBNTlcXHVBQkYwLVxcdUFCRjlcXHVGRjEwLVxcdUZGMTldKShbXlxcdTAwMzAtXFx1MDAzOVxcdTAwQjJcXHUwMEIzXFx1MDBCOVxcdTAwQkMtXFx1MDBCRVxcdTA2NjAtXFx1MDY2OVxcdTA2RjAtXFx1MDZGOVxcdTA3QzAtXFx1MDdDOVxcdTA5NjYtXFx1MDk2RlxcdTA5RTYtXFx1MDlFRlxcdTA5RjQtXFx1MDlGOVxcdTBBNjYtXFx1MEE2RlxcdTBBRTYtXFx1MEFFRlxcdTBCNjYtXFx1MEI2RlxcdTBCNzItXFx1MEI3N1xcdTBCRTYtXFx1MEJGMlxcdTBDNjYtXFx1MEM2RlxcdTBDNzgtXFx1MEM3RVxcdTBDRTYtXFx1MENFRlxcdTBENjYtXFx1MEQ3NVxcdTBFNTAtXFx1MEU1OVxcdTBFRDAtXFx1MEVEOVxcdTBGMjAtXFx1MEYzM1xcdTEwNDAtXFx1MTA0OVxcdTEwOTAtXFx1MTA5OVxcdTEzNjktXFx1MTM3Q1xcdTE2RUUtXFx1MTZGMFxcdTE3RTAtXFx1MTdFOVxcdTE3RjAtXFx1MTdGOVxcdTE4MTAtXFx1MTgxOVxcdTE5NDYtXFx1MTk0RlxcdTE5RDAtXFx1MTlEQVxcdTFBODAtXFx1MUE4OVxcdTFBOTAtXFx1MUE5OVxcdTFCNTAtXFx1MUI1OVxcdTFCQjAtXFx1MUJCOVxcdTFDNDAtXFx1MUM0OVxcdTFDNTAtXFx1MUM1OVxcdTIwNzBcXHUyMDc0LVxcdTIwNzlcXHUyMDgwLVxcdTIwODlcXHUyMTUwLVxcdTIxODJcXHUyMTg1LVxcdTIxODlcXHUyNDYwLVxcdTI0OUJcXHUyNEVBLVxcdTI0RkZcXHUyNzc2LVxcdTI3OTNcXHUyQ0ZEXFx1MzAwN1xcdTMwMjEtXFx1MzAyOVxcdTMwMzgtXFx1MzAzQVxcdTMxOTItXFx1MzE5NVxcdTMyMjAtXFx1MzIyOVxcdTMyNDgtXFx1MzI0RlxcdTMyNTEtXFx1MzI1RlxcdTMyODAtXFx1MzI4OVxcdTMyQjEtXFx1MzJCRlxcdUE2MjAtXFx1QTYyOVxcdUE2RTYtXFx1QTZFRlxcdUE4MzAtXFx1QTgzNVxcdUE4RDAtXFx1QThEOVxcdUE5MDAtXFx1QTkwOVxcdUE5RDAtXFx1QTlEOVxcdUFBNTAtXFx1QUE1OVxcdUFCRjAtXFx1QUJGOVxcdUZGMTAtXFx1RkYxOV0pL2dcbiIsIid1c2Ugc3RyaWN0Jztcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHN0cikge1xuXHRyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cikucmVwbGFjZSgvWyEnKCkqXS9nLCBmdW5jdGlvbiAoYykge1xuXHRcdHJldHVybiAnJScgKyBjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG5cdH0pO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBpc1BhdHRlcm4oY2FuZGlkYXRlKSB7XG4gIHJldHVybiB0eXBlb2YgY2FuZGlkYXRlID09PSBcInN0cmluZ1wiICYmIChjYW5kaWRhdGUuY2hhckF0KDApID09PSBcIi9cIiB8fCBjYW5kaWRhdGUgPT09IFwiKlwiKTtcbn1cblxuZnVuY3Rpb24gaXNSb3V0ZUNvbmZpZ3VyYXRpb25PYmplY3Qocm91dGVzKSB7XG4gIGlmICh0eXBlb2Ygcm91dGVzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZvciAodmFyIHBhdGggaW4gcm91dGVzKSB7XG4gICAgaWYgKHJvdXRlcy5oYXNPd25Qcm9wZXJ0eShwYXRoKSkge1xuICAgICAgcmV0dXJuIGlzUGF0dGVybihwYXRoKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdW5wcmVmaXhlZChmdWxsU3RyLCBwcmVmaXgpIHtcbiAgcmV0dXJuIGZ1bGxTdHIuc3BsaXQocHJlZml4KVsxXTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlc1dpdGhQYXJhbXMoc291cmNlUGF0aCwgcGF0dGVybikge1xuICB2YXIgc291cmNlUGFydHMgPSBzb3VyY2VQYXRoLnNwbGl0KFwiL1wiKS5maWx0ZXIoZnVuY3Rpb24gKHMpIHtcbiAgICByZXR1cm4gcy5sZW5ndGggPiAwO1xuICB9KTtcbiAgdmFyIHBhdHRlcm5QYXJ0cyA9IHBhdHRlcm4uc3BsaXQoXCIvXCIpLmZpbHRlcihmdW5jdGlvbiAocykge1xuICAgIHJldHVybiBzLmxlbmd0aCA+IDA7XG4gIH0pO1xuICB2YXIgcGFyYW1zID0gcGF0dGVyblBhcnRzLm1hcChmdW5jdGlvbiAocGF0dGVyblBhcnQsIGluZGV4KSB7XG4gICAgaWYgKHBhdHRlcm5QYXJ0Lm1hdGNoKC86XFx3Ky8pICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gc291cmNlUGFydHNbaW5kZXhdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0pLmZpbHRlcihmdW5jdGlvbiAoeCkge1xuICAgIHJldHVybiB4ICE9PSBudWxsO1xuICB9KTtcbiAgdmFyIG1hdGNoZWQgPSBwYXR0ZXJuUGFydHMuZXZlcnkoZnVuY3Rpb24gKHBhcnQsIGkpIHtcbiAgICByZXR1cm4gcGFydC5tYXRjaCgvOlxcdysvKSAhPT0gbnVsbCB8fCBwYXJ0ID09PSBzb3VyY2VQYXJ0c1tpXTtcbiAgfSk7XG4gIHJldHVybiBtYXRjaGVkID8gcGFyYW1zIDogW107XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlU3dpdGNoUGF0aFByZWNvbmRpdGlvbnMoc291cmNlUGF0aCwgcm91dGVzKSB7XG4gIGlmICh0eXBlb2Ygc291cmNlUGF0aCAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc291cmNlIHBhdGguIFdlIGV4cGVjdGVkIHRvIHNlZSBhIHN0cmluZyBnaXZlbiBcIiArIFwiYXMgdGhlIHNvdXJjZVBhdGggKGZpcnN0IGFyZ3VtZW50KSB0byBzd2l0Y2hQYXRoLlwiKTtcbiAgfVxuICBpZiAoIWlzUm91dGVDb25maWd1cmF0aW9uT2JqZWN0KHJvdXRlcykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHJvdXRlcyBvYmplY3QuIFdlIGV4cGVjdGVkIHRvIHNlZSBhIHJvdXRlcyBcIiArIFwiY29uZmlndXJhdGlvbiBvYmplY3Qgd2hlcmUga2V5cyBhcmUgc3RyaW5ncyB0aGF0IGxvb2sgbGlrZSAnL2ZvbycuIFwiICsgXCJUaGVzZSBrZXlzIG11c3Qgc3RhcnQgd2l0aCBhIHNsYXNoICcvJy5cIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVQYXR0ZXJuUHJlY29uZGl0aW9ucyhwYXR0ZXJuKSB7XG4gIGlmICghaXNQYXR0ZXJuKHBhdHRlcm4pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUGF0aHMgaW4gcm91dGUgY29uZmlndXJhdGlvbiBtdXN0IGJlIHN0cmluZ3MgdGhhdCBzdGFydCBcIiArIFwid2l0aCBhIHNsYXNoICcvJy5cIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNOb3JtYWxQYXR0ZXJuKHJvdXRlcywgcGF0dGVybikge1xuICBpZiAocGF0dGVybiA9PT0gXCIqXCIgfHwgIXJvdXRlcy5oYXNPd25Qcm9wZXJ0eShwYXR0ZXJuKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlVHJhaWxpbmdTbGFzaChwYXJhbXNGbikge1xuICBpZiAoaXNSb3V0ZUNvbmZpZ3VyYXRpb25PYmplY3QocGFyYW1zRm4pKSB7XG4gICAgcmV0dXJuIHBhcmFtc0ZuW1wiL1wiXTtcbiAgfVxuICByZXR1cm4gcGFyYW1zRm47XG59XG5cbmZ1bmN0aW9uIGdldFBhcmFtc0ZuVmFsdWUocGFyYW1GbiwgcGFyYW1zKSB7XG4gIHZhciBfcGFyYW1GbiA9IGhhbmRsZVRyYWlsaW5nU2xhc2gocGFyYW1Gbik7XG4gIGlmICh0eXBlb2YgX3BhcmFtRm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiBfcGFyYW1GbjtcbiAgfVxuICByZXR1cm4gX3BhcmFtRm4uYXBwbHkobnVsbCwgcGFyYW1zKTtcbn1cblxuZnVuY3Rpb24gc3BsaXRQYXRoKHBhdGgpIHtcbiAgdmFyIHBhdGhQYXJ0cyA9IHBhdGguc3BsaXQoXCIvXCIpO1xuICBpZiAocGF0aFBhcnRzW3BhdGhQYXJ0cy5sZW5ndGggLSAxXSA9PT0gXCJcIikge1xuICAgIHBhdGhQYXJ0cy5wb3AoKTtcbiAgfVxuICByZXR1cm4gcGF0aFBhcnRzO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVBhdGgoc291cmNlUGF0aCwgbWF0Y2hlZFBhdGgpIHtcbiAgaWYgKG1hdGNoZWRQYXRoID09PSBudWxsKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbiAgdmFyIHNvdXJjZVBhcnRzID0gc3BsaXRQYXRoKHNvdXJjZVBhdGgpO1xuICB2YXIgbWF0Y2hlZFBhcnRzID0gc3BsaXRQYXRoKG1hdGNoZWRQYXRoKTtcbiAgdmFyIHZhbGlkUGF0aCA9IHNvdXJjZVBhcnRzLm1hcChmdW5jdGlvbiAocGFydCwgaW5kZXgpIHtcbiAgICBpZiAocGFydCAhPT0gbWF0Y2hlZFBhcnRzW2luZGV4XSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBwYXJ0O1xuICB9KS5maWx0ZXIoZnVuY3Rpb24gKHgpIHtcbiAgICByZXR1cm4geCAhPT0gbnVsbDtcbiAgfSkuam9pbihcIi9cIik7XG4gIHJldHVybiB2YWxpZFBhdGg7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlKF9yZWYpIHtcbiAgdmFyIHNvdXJjZVBhdGggPSBfcmVmLnNvdXJjZVBhdGg7XG4gIHZhciBtYXRjaGVkUGF0aCA9IF9yZWYubWF0Y2hlZFBhdGg7XG4gIHZhciB2YWx1ZSA9IF9yZWYudmFsdWU7XG4gIHZhciByb3V0ZXMgPSBfcmVmLnJvdXRlcztcblxuICB2YXIgdmFsaWRQYXRoID0gdmFsaWRhdGVQYXRoKHNvdXJjZVBhdGgsIG1hdGNoZWRQYXRoKTtcbiAgaWYgKCF2YWxpZFBhdGgpIHtcbiAgICB2YWxpZFBhdGggPSAhcm91dGVzW1wiKlwiXSA/IG51bGwgOiBzb3VyY2VQYXRoO1xuICAgIHZhciB2YWxpZFZhbHVlID0gIXZhbGlkUGF0aCA/IG51bGwgOiByb3V0ZXNbXCIqXCJdO1xuICAgIHJldHVybiB7XG4gICAgICB2YWxpZFBhdGg6IHZhbGlkUGF0aCxcbiAgICAgIHZhbGlkVmFsdWU6IHZhbGlkVmFsdWVcbiAgICB9O1xuICB9XG4gIHJldHVybiB7IHZhbGlkUGF0aDogdmFsaWRQYXRoLCB2YWxpZFZhbHVlOiB2YWx1ZSB9O1xufVxuXG5mdW5jdGlvbiBiZXR0ZXJNYXRjaChjYW5kaWRhdGUsIHJlZmVyZW5jZSkge1xuICBpZiAoY2FuZGlkYXRlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChyZWZlcmVuY2UgPT09IG51bGwpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gY2FuZGlkYXRlLmxlbmd0aCA+PSByZWZlcmVuY2UubGVuZ3RoO1xufVxuXG5mdW5jdGlvbiBzd2l0Y2hQYXRoKHNvdXJjZVBhdGgsIHJvdXRlcykge1xuICB2YWxpZGF0ZVN3aXRjaFBhdGhQcmVjb25kaXRpb25zKHNvdXJjZVBhdGgsIHJvdXRlcyk7XG4gIHZhciBtYXRjaGVkUGF0aCA9IG51bGw7XG4gIHZhciB2YWx1ZSA9IG51bGw7XG4gIGZvciAodmFyIHBhdHRlcm4gaW4gcm91dGVzKSB7XG4gICAgaWYgKCFpc05vcm1hbFBhdHRlcm4ocm91dGVzLCBwYXR0ZXJuKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHZhbGlkYXRlUGF0dGVyblByZWNvbmRpdGlvbnMocGF0dGVybik7XG4gICAgaWYgKHNvdXJjZVBhdGguc2VhcmNoKHBhdHRlcm4pID09PSAwICYmIGJldHRlck1hdGNoKHBhdHRlcm4sIG1hdGNoZWRQYXRoKSkge1xuICAgICAgbWF0Y2hlZFBhdGggPSBwYXR0ZXJuO1xuICAgICAgdmFsdWUgPSByb3V0ZXNbcGF0dGVybl07XG4gICAgfVxuICAgIHZhciBwYXJhbXMgPSBtYXRjaGVzV2l0aFBhcmFtcyhzb3VyY2VQYXRoLCBwYXR0ZXJuKTtcbiAgICBpZiAocGFyYW1zLmxlbmd0aCA+IDAgJiYgYmV0dGVyTWF0Y2goc291cmNlUGF0aCwgbWF0Y2hlZFBhdGgpKSB7XG4gICAgICBtYXRjaGVkUGF0aCA9IHNvdXJjZVBhdGg7XG4gICAgICB2YWx1ZSA9IGdldFBhcmFtc0ZuVmFsdWUocm91dGVzW3BhdHRlcm5dLCBwYXJhbXMpO1xuICAgIH1cbiAgICBpZiAoaXNSb3V0ZUNvbmZpZ3VyYXRpb25PYmplY3Qocm91dGVzW3BhdHRlcm5dKSAmJiBwYXJhbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB2YXIgY2hpbGQgPSBzd2l0Y2hQYXRoKHVucHJlZml4ZWQoc291cmNlUGF0aCwgcGF0dGVybiksIHJvdXRlc1twYXR0ZXJuXSk7XG4gICAgICB2YXIgbmVzdGVkUGF0aCA9IHBhdHRlcm4gKyBjaGlsZC5wYXRoO1xuICAgICAgaWYgKGNoaWxkLnBhdGggIT09IG51bGwgJiYgYmV0dGVyTWF0Y2gobmVzdGVkUGF0aCwgbWF0Y2hlZFBhdGgpKSB7XG4gICAgICAgIG1hdGNoZWRQYXRoID0gbmVzdGVkUGF0aDtcbiAgICAgICAgdmFsdWUgPSBjaGlsZC52YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHBhdHRlcm4gPT09IHNvdXJjZVBhdGgpIHtcbiAgICAgIHJldHVybiB7IHBhdGg6IHBhdHRlcm4sIHZhbHVlOiBoYW5kbGVUcmFpbGluZ1NsYXNoKHJvdXRlc1twYXR0ZXJuXSkgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgX3ZhbGlkYXRlID0gdmFsaWRhdGUoe1xuICAgIHNvdXJjZVBhdGg6IHNvdXJjZVBhdGgsXG4gICAgbWF0Y2hlZFBhdGg6IG1hdGNoZWRQYXRoLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICByb3V0ZXM6IHJvdXRlc1xuICB9KTtcblxuICB2YXIgdmFsaWRQYXRoID0gX3ZhbGlkYXRlLnZhbGlkUGF0aDtcbiAgdmFyIHZhbGlkVmFsdWUgPSBfdmFsaWRhdGUudmFsaWRWYWx1ZTtcblxuICByZXR1cm4geyBwYXRoOiB2YWxpZFBhdGgsIHZhbHVlOiB2YWxpZFZhbHVlIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3dpdGNoUGF0aDsiLCJcbi8qKlxuICogaW5kZXguanNcbiAqXG4gKiBBIGNsaWVudC1zaWRlIERPTSB0byB2ZG9tIHBhcnNlciBiYXNlZCBvbiBET01QYXJzZXIgQVBJXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgVk5vZGUgPSByZXF1aXJlKCd2aXJ0dWFsLWRvbS92bm9kZS92bm9kZScpO1xudmFyIFZUZXh0ID0gcmVxdWlyZSgndmlydHVhbC1kb20vdm5vZGUvdnRleHQnKTtcbnZhciBkb21QYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG5cbnZhciBwcm9wZXJ0eU1hcCA9IHJlcXVpcmUoJy4vcHJvcGVydHktbWFwJyk7XG52YXIgbmFtZXNwYWNlTWFwID0gcmVxdWlyZSgnLi9uYW1lc3BhY2UtbWFwJyk7XG5cbnZhciBIVE1MX05BTUVTUEFDRSA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJztcblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZXI7XG5cbi8qKlxuICogRE9NL2h0bWwgc3RyaW5nIHRvIHZkb20gcGFyc2VyXG4gKlxuICogQHBhcmFtICAgTWl4ZWQgICBlbCAgICBET00gZWxlbWVudCBvciBodG1sIHN0cmluZ1xuICogQHBhcmFtICAgU3RyaW5nICBhdHRyICBBdHRyaWJ1dGUgbmFtZSB0aGF0IGNvbnRhaW5zIHZkb20ga2V5XG4gKiBAcmV0dXJuICBPYmplY3QgICAgICAgIFZOb2RlIG9yIFZUZXh0XG4gKi9cbmZ1bmN0aW9uIHBhcnNlcihlbCwgYXR0cikge1xuXHQvLyBlbXB0eSBpbnB1dCBmYWxsYmFjayB0byBlbXB0eSB0ZXh0IG5vZGVcblx0aWYgKCFlbCkge1xuXHRcdHJldHVybiBjcmVhdGVOb2RlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKSk7XG5cdH1cblxuXHRpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuXHRcdHZhciBkb2MgPSBkb21QYXJzZXIucGFyc2VGcm9tU3RyaW5nKGVsLCAndGV4dC9odG1sJyk7XG5cblx0XHQvLyBtb3N0IHRhZ3MgZGVmYXVsdCB0byBib2R5XG5cdFx0aWYgKGRvYy5ib2R5LmZpcnN0Q2hpbGQpIHtcblx0XHRcdGVsID0gZG9jLmJvZHkuZmlyc3RDaGlsZDtcblxuXHRcdC8vIHNvbWUgdGFncywgbGlrZSBzY3JpcHQgYW5kIHN0eWxlLCBkZWZhdWx0IHRvIGhlYWRcblx0XHR9IGVsc2UgaWYgKGRvYy5oZWFkLmZpcnN0Q2hpbGQgJiYgKGRvYy5oZWFkLmZpcnN0Q2hpbGQudGFnTmFtZSAhPT0gJ1RJVExFJyB8fCBkb2MudGl0bGUpKSB7XG5cdFx0XHRlbCA9IGRvYy5oZWFkLmZpcnN0Q2hpbGQ7XG5cblx0XHQvLyBzcGVjaWFsIGNhc2UgZm9yIGh0bWwgY29tbWVudCwgY2RhdGEsIGRvY3R5cGVcblx0XHR9IGVsc2UgaWYgKGRvYy5maXJzdENoaWxkICYmIGRvYy5maXJzdENoaWxkLnRhZ05hbWUgIT09ICdIVE1MJykge1xuXHRcdFx0ZWwgPSBkb2MuZmlyc3RDaGlsZDtcblxuXHRcdC8vIG90aGVyIGVsZW1lbnQsIHN1Y2ggYXMgd2hpdGVzcGFjZSwgb3IgaHRtbC9ib2R5L2hlYWQgdGFnLCBmYWxsYmFjayB0byBlbXB0eSB0ZXh0IG5vZGVcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWwgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKHR5cGVvZiBlbCAhPT0gJ29iamVjdCcgfHwgIWVsIHx8ICFlbC5ub2RlVHlwZSkgeyBcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgZG9tIG5vZGUnLCBlbCk7XG5cdH1cblxuXHRyZXR1cm4gY3JlYXRlTm9kZShlbCwgYXR0cik7XG59XG5cbi8qKlxuICogQ3JlYXRlIHZkb20gZnJvbSBkb20gbm9kZVxuICpcbiAqIEBwYXJhbSAgIE9iamVjdCAgZWwgICAgRE9NIGVsZW1lbnRcbiAqIEBwYXJhbSAgIFN0cmluZyAgYXR0ciAgQXR0cmlidXRlIG5hbWUgdGhhdCBjb250YWlucyB2ZG9tIGtleVxuICogQHJldHVybiAgT2JqZWN0ICAgICAgICBWTm9kZSBvciBWVGV4dFxuICovXG5mdW5jdGlvbiBjcmVhdGVOb2RlKGVsLCBhdHRyKSB7XG5cdC8vIGh0bWwgY29tbWVudCBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBieSB2aXJ0dWFsLWRvbVxuXHRpZiAoZWwubm9kZVR5cGUgPT09IDMpIHtcblx0XHRyZXR1cm4gY3JlYXRlVmlydHVhbFRleHROb2RlKGVsKTtcblxuXHQvLyBjZGF0YSBvciBkb2N0eXBlIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IHZpcnR1YWwtZG9tXG5cdH0gZWxzZSBpZiAoZWwubm9kZVR5cGUgPT09IDEgfHwgZWwubm9kZVR5cGUgPT09IDkpIHtcblx0XHRyZXR1cm4gY3JlYXRlVmlydHVhbERvbU5vZGUoZWwsIGF0dHIpO1xuXHR9XG5cblx0Ly8gZGVmYXVsdCB0byBlbXB0eSB0ZXh0IG5vZGVcblx0cmV0dXJuIG5ldyBWVGV4dCgnJyk7XG59XG5cbi8qKlxuICogQ3JlYXRlIHZ0ZXh0IGZyb20gZG9tIG5vZGVcbiAqXG4gKiBAcGFyYW0gICBPYmplY3QgIGVsICBUZXh0IG5vZGVcbiAqIEByZXR1cm4gIE9iamVjdCAgICAgIFZUZXh0XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVZpcnR1YWxUZXh0Tm9kZShlbCkge1xuXHRyZXR1cm4gbmV3IFZUZXh0KGVsLm5vZGVWYWx1ZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIHZub2RlIGZyb20gZG9tIG5vZGVcbiAqXG4gKiBAcGFyYW0gICBPYmplY3QgIGVsICAgIERPTSBlbGVtZW50XG4gKiBAcGFyYW0gICBTdHJpbmcgIGF0dHIgIEF0dHJpYnV0ZSBuYW1lIHRoYXQgY29udGFpbnMgdmRvbSBrZXlcbiAqIEByZXR1cm4gIE9iamVjdCAgICAgICAgVk5vZGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlVmlydHVhbERvbU5vZGUoZWwsIGF0dHIpIHtcblx0dmFyIG5zID0gZWwubmFtZXNwYWNlVVJJICE9PSBIVE1MX05BTUVTUEFDRSA/IGVsLm5hbWVzcGFjZVVSSSA6IG51bGw7XG5cdHZhciBrZXkgPSBhdHRyICYmIGVsLmdldEF0dHJpYnV0ZShhdHRyKSA/IGVsLmdldEF0dHJpYnV0ZShhdHRyKSA6IG51bGw7XG5cblx0cmV0dXJuIG5ldyBWTm9kZShcblx0XHRlbC50YWdOYW1lXG5cdFx0LCBjcmVhdGVQcm9wZXJ0aWVzKGVsKVxuXHRcdCwgY3JlYXRlQ2hpbGRyZW4oZWwsIGF0dHIpXG5cdFx0LCBrZXlcblx0XHQsIG5zXG5cdCk7XG59XG5cbi8qKlxuICogUmVjdXJzaXZlbHkgY3JlYXRlIHZkb21cbiAqXG4gKiBAcGFyYW0gICBPYmplY3QgIGVsICAgIFBhcmVudCBlbGVtZW50XG4gKiBAcGFyYW0gICBTdHJpbmcgIGF0dHIgIEF0dHJpYnV0ZSBuYW1lIHRoYXQgY29udGFpbnMgdmRvbSBrZXlcbiAqIEByZXR1cm4gIEFycmF5ICAgICAgICAgQ2hpbGQgdm5vZGUgb3IgdnRleHRcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2hpbGRyZW4oZWwsIGF0dHIpIHtcblx0dmFyIGNoaWxkcmVuID0gW107XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuXHRcdGNoaWxkcmVuLnB1c2goY3JlYXRlTm9kZShlbC5jaGlsZE5vZGVzW2ldLCBhdHRyKSk7XG5cdH07XG5cblx0cmV0dXJuIGNoaWxkcmVuO1xufVxuXG4vKipcbiAqIENyZWF0ZSBwcm9wZXJ0aWVzIGZyb20gZG9tIG5vZGVcbiAqXG4gKiBAcGFyYW0gICBPYmplY3QgIGVsICBET00gZWxlbWVudFxuICogQHJldHVybiAgT2JqZWN0ICAgICAgTm9kZSBwcm9wZXJ0aWVzIGFuZCBhdHRyaWJ1dGVzXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVByb3BlcnRpZXMoZWwpIHtcblx0dmFyIHByb3BlcnRpZXMgPSB7fTtcblxuXHRpZiAoIWVsLmhhc0F0dHJpYnV0ZXMoKSkge1xuXHRcdHJldHVybiBwcm9wZXJ0aWVzO1xuXHR9XG5cblx0dmFyIG5zO1xuXHRpZiAoZWwubmFtZXNwYWNlVVJJICYmIGVsLm5hbWVzcGFjZVVSSSAhPT0gSFRNTF9OQU1FU1BBQ0UpIHtcblx0XHRucyA9IGVsLm5hbWVzcGFjZVVSSTtcblx0fVxuXG5cdHZhciBhdHRyO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGVsLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAobnMpIHtcblx0XHRcdGF0dHIgPSBjcmVhdGVQcm9wZXJ0eU5TKGVsLmF0dHJpYnV0ZXNbaV0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhdHRyID0gY3JlYXRlUHJvcGVydHkoZWwuYXR0cmlidXRlc1tpXSk7XG5cdFx0fVxuXG5cdFx0Ly8gc3BlY2lhbCBjYXNlLCBuYW1lc3BhY2VkIGF0dHJpYnV0ZSwgdXNlIHByb3BlcnRpZXMuZm9vYmFyXG5cdFx0aWYgKGF0dHIubnMpIHtcblx0XHRcdHByb3BlcnRpZXNbYXR0ci5uYW1lXSA9IHtcblx0XHRcdFx0bmFtZXNwYWNlOiBhdHRyLm5zXG5cdFx0XHRcdCwgdmFsdWU6IGF0dHIudmFsdWVcblx0XHRcdH07XG5cblx0XHQvLyBzcGVjaWFsIGNhc2UsIHVzZSBwcm9wZXJ0aWVzLmF0dHJpYnV0ZXMuZm9vYmFyXG5cdFx0fSBlbHNlIGlmIChhdHRyLmlzQXR0cikge1xuXHRcdFx0Ly8gaW5pdCBhdHRyaWJ1dGVzIG9iamVjdCBvbmx5IHdoZW4gbmVjZXNzYXJ5XG5cdFx0XHRpZiAoIXByb3BlcnRpZXMuYXR0cmlidXRlcykge1xuXHRcdFx0XHRwcm9wZXJ0aWVzLmF0dHJpYnV0ZXMgPSB7fVxuXHRcdFx0fVxuXHRcdFx0cHJvcGVydGllcy5hdHRyaWJ1dGVzW2F0dHIubmFtZV0gPSBhdHRyLnZhbHVlO1xuXG5cdFx0Ly8gZGVmYXVsdCBjYXNlLCB1c2UgcHJvcGVydGllcy5mb29iYXJcblx0XHR9IGVsc2Uge1xuXHRcdFx0cHJvcGVydGllc1thdHRyLm5hbWVdID0gYXR0ci52YWx1ZTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIHByb3BlcnRpZXM7XG59XG5cbi8qKlxuICogQ3JlYXRlIHByb3BlcnR5IGZyb20gZG9tIGF0dHJpYnV0ZSBcbiAqXG4gKiBAcGFyYW0gICBPYmplY3QgIGF0dHIgIERPTSBhdHRyaWJ1dGVcbiAqIEByZXR1cm4gIE9iamVjdCAgICAgICAgTm9ybWFsaXplZCBhdHRyaWJ1dGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUHJvcGVydHkoYXR0cikge1xuXHR2YXIgbmFtZSwgdmFsdWUsIGlzQXR0cjtcblxuXHQvLyB1c2luZyBhIG1hcCB0byBmaW5kIHRoZSBjb3JyZWN0IGNhc2Ugb2YgcHJvcGVydHkgbmFtZVxuXHRpZiAocHJvcGVydHlNYXBbYXR0ci5uYW1lXSkge1xuXHRcdG5hbWUgPSBwcm9wZXJ0eU1hcFthdHRyLm5hbWVdO1xuXHR9IGVsc2Uge1xuXHRcdG5hbWUgPSBhdHRyLm5hbWU7XG5cdH1cblxuXHQvLyBzcGVjaWFsIGNhc2VzIGZvciBzdHlsZSBhdHRyaWJ1dGUsIHdlIGRlZmF1bHQgdG8gcHJvcGVydGllcy5zdHlsZVxuXHRpZiAobmFtZSA9PT0gJ3N0eWxlJykge1xuXHRcdHZhciBzdHlsZSA9IHt9O1xuXHRcdGF0dHIudmFsdWUuc3BsaXQoJzsnKS5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7XG5cdFx0XHR2YXIgcG9zID0gcy5pbmRleE9mKCc6Jyk7XG5cdFx0XHRpZiAocG9zIDwgMCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRzdHlsZVtzLnN1YnN0cigwLCBwb3MpLnRyaW0oKV0gPSBzLnN1YnN0cihwb3MgKyAxKS50cmltKCk7XG5cdFx0fSk7XG5cdFx0dmFsdWUgPSBzdHlsZTtcblx0Ly8gc3BlY2lhbCBjYXNlcyBmb3IgZGF0YSBhdHRyaWJ1dGUsIHdlIGRlZmF1bHQgdG8gcHJvcGVydGllcy5hdHRyaWJ1dGVzLmRhdGFcblx0fSBlbHNlIGlmIChuYW1lLmluZGV4T2YoJ2RhdGEtJykgPT09IDApIHtcblx0XHR2YWx1ZSA9IGF0dHIudmFsdWU7XG5cdFx0aXNBdHRyID0gdHJ1ZTtcblx0fSBlbHNlIHtcblx0XHR2YWx1ZSA9IGF0dHIudmFsdWU7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdG5hbWU6IG5hbWVcblx0XHQsIHZhbHVlOiB2YWx1ZVxuXHRcdCwgaXNBdHRyOiBpc0F0dHIgfHwgZmFsc2Vcblx0fTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgbmFtZXNwYWNlZCBwcm9wZXJ0eSBmcm9tIGRvbSBhdHRyaWJ1dGUgXG4gKlxuICogQHBhcmFtICAgT2JqZWN0ICBhdHRyICBET00gYXR0cmlidXRlXG4gKiBAcmV0dXJuICBPYmplY3QgICAgICAgIE5vcm1hbGl6ZWQgYXR0cmlidXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVByb3BlcnR5TlMoYXR0cikge1xuXHR2YXIgbmFtZSwgdmFsdWU7XG5cblx0cmV0dXJuIHtcblx0XHRuYW1lOiBhdHRyLm5hbWVcblx0XHQsIHZhbHVlOiBhdHRyLnZhbHVlXG5cdFx0LCBuczogbmFtZXNwYWNlTWFwW2F0dHIubmFtZV0gfHwgJydcblx0fTtcbn1cbiIsIlxuLyoqXG4gKiBuYW1lc3BhY2UtbWFwLmpzXG4gKlxuICogTmVjZXNzYXJ5IHRvIG1hcCBzdmcgYXR0cmlidXRlcyBiYWNrIHRvIHRoZWlyIG5hbWVzcGFjZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLy8gZXh0cmFjdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL01hdHQtRXNjaC92aXJ0dWFsLWRvbS9ibG9iL21hc3Rlci92aXJ0dWFsLWh5cGVyc2NyaXB0L3N2Zy1hdHRyaWJ1dGUtbmFtZXNwYWNlLmpzXG52YXIgREVGQVVMVF9OQU1FU1BBQ0UgPSBudWxsO1xudmFyIEVWX05BTUVTUEFDRSA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAxL3htbC1ldmVudHMnO1xudmFyIFhMSU5LX05BTUVTUEFDRSA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcbnZhciBYTUxfTkFNRVNQQUNFID0gJ2h0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZSc7XG5cbnZhciBuYW1lc3BhY2VzID0ge1xuXHQnYWJvdXQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdhY2NlbnQtaGVpZ2h0JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnYWNjdW11bGF0ZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2FkZGl0aXZlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnYWxpZ25tZW50LWJhc2VsaW5lJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnYWxwaGFiZXRpYyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2FtcGxpdHVkZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2FyYWJpYy1mb3JtJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnYXNjZW50JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnYXR0cmlidXRlTmFtZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2F0dHJpYnV0ZVR5cGUnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdhemltdXRoJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnYmFuZHdpZHRoJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnYmFzZUZyZXF1ZW5jeSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2Jhc2VQcm9maWxlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnYmFzZWxpbmUtc2hpZnQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdiYm94JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnYmVnaW4nOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdiaWFzJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnYnknOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdjYWxjTW9kZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2NhcC1oZWlnaHQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdjbGFzcyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2NsaXAnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdjbGlwLXBhdGgnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdjbGlwLXJ1bGUnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdjbGlwUGF0aFVuaXRzJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnY29sb3InOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdjb2xvci1pbnRlcnBvbGF0aW9uJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnY29sb3ItcHJvZmlsZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2NvbG9yLXJlbmRlcmluZyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2NvbnRlbnQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdjb250ZW50U2NyaXB0VHlwZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2NvbnRlbnRTdHlsZVR5cGUnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdjdXJzb3InOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdjeCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2N5JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2RhdGF0eXBlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZGVmYXVsdEFjdGlvbic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2Rlc2NlbnQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdkaWZmdXNlQ29uc3RhbnQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdkaXJlY3Rpb24nOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdkaXNwbGF5JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZGl2aXNvcic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2RvbWluYW50LWJhc2VsaW5lJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZHVyJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZHgnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdkeSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2VkZ2VNb2RlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZWRpdGFibGUnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdlbGV2YXRpb24nOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdlbmFibGUtYmFja2dyb3VuZCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2VuZCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2V2OmV2ZW50JzogRVZfTkFNRVNQQUNFXG5cdCwgJ2V2ZW50JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZXhwb25lbnQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZmlsbCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2ZpbGwtb3BhY2l0eSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2ZpbGwtcnVsZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2ZpbHRlcic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2ZpbHRlclJlcyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2ZpbHRlclVuaXRzJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZmxvb2QtY29sb3InOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdmbG9vZC1vcGFjaXR5JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZm9jdXNIaWdobGlnaHQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdmb2N1c2FibGUnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdmb250LWZhbWlseSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2ZvbnQtc2l6ZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2ZvbnQtc2l6ZS1hZGp1c3QnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdmb250LXN0cmV0Y2gnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdmb250LXN0eWxlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZm9udC12YXJpYW50JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZm9udC13ZWlnaHQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdmb3JtYXQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdmcm9tJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZngnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdmeSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2cxJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZzInOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdnbHlwaC1uYW1lJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZ2x5cGgtb3JpZW50YXRpb24taG9yaXpvbnRhbCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2dseXBoLW9yaWVudGF0aW9uLXZlcnRpY2FsJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnZ2x5cGhSZWYnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdncmFkaWVudFRyYW5zZm9ybSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2dyYWRpZW50VW5pdHMnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdoYW5kbGVyJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnaGFuZ2luZyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2hlaWdodCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2hvcml6LWFkdi14JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnaG9yaXotb3JpZ2luLXgnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdob3Jpei1vcmlnaW4teSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2lkJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnaWRlb2dyYXBoaWMnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdpbWFnZS1yZW5kZXJpbmcnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdpbic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2luMic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2luaXRpYWxWaXNpYmlsaXR5JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnaW50ZXJjZXB0JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnayc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2sxJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnazInOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdrMyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2s0JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAna2VybmVsTWF0cml4JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAna2VybmVsVW5pdExlbmd0aCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2tlcm5pbmcnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdrZXlQb2ludHMnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdrZXlTcGxpbmVzJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAna2V5VGltZXMnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdsYW5nJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnbGVuZ3RoQWRqdXN0JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnbGV0dGVyLXNwYWNpbmcnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdsaWdodGluZy1jb2xvcic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ2xpbWl0aW5nQ29uZUFuZ2xlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnbG9jYWwnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdtYXJrZXItZW5kJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnbWFya2VyLW1pZCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ21hcmtlci1zdGFydCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ21hcmtlckhlaWdodCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ21hcmtlclVuaXRzJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnbWFya2VyV2lkdGgnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdtYXNrJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnbWFza0NvbnRlbnRVbml0cyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ21hc2tVbml0cyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ21hdGhlbWF0aWNhbCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ21heCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ21lZGlhJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnbWVkaWFDaGFyYWN0ZXJFbmNvZGluZyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ21lZGlhQ29udGVudEVuY29kaW5ncyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ21lZGlhU2l6ZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ21lZGlhVGltZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ21ldGhvZCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ21pbic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ21vZGUnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICduYW1lJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnbmF2LWRvd24nOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICduYXYtZG93bi1sZWZ0JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnbmF2LWRvd24tcmlnaHQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICduYXYtbGVmdCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ25hdi1uZXh0JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnbmF2LXByZXYnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICduYXYtcmlnaHQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICduYXYtdXAnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICduYXYtdXAtbGVmdCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ25hdi11cC1yaWdodCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ251bU9jdGF2ZXMnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdvYnNlcnZlcic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ29mZnNldCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ29wYWNpdHknOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdvcGVyYXRvcic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ29yZGVyJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnb3JpZW50JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnb3JpZW50YXRpb24nOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdvcmlnaW4nOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdvdmVyZmxvdyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ292ZXJsYXknOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdvdmVybGluZS1wb3NpdGlvbic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ292ZXJsaW5lLXRoaWNrbmVzcyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3Bhbm9zZS0xJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncGF0aCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3BhdGhMZW5ndGgnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdwYXR0ZXJuQ29udGVudFVuaXRzJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncGF0dGVyblRyYW5zZm9ybSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3BhdHRlcm5Vbml0cyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3BoYXNlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncGxheWJhY2tPcmRlcic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3BvaW50ZXItZXZlbnRzJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncG9pbnRzJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncG9pbnRzQXRYJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncG9pbnRzQXRZJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncG9pbnRzQXRaJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncHJlc2VydmVBbHBoYSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3ByZXNlcnZlQXNwZWN0UmF0aW8nOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdwcmltaXRpdmVVbml0cyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3Byb3BhZ2F0ZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3Byb3BlcnR5JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3JhZGl1cyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3JlZlgnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdyZWZZJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncmVsJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncmVuZGVyaW5nLWludGVudCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3JlcGVhdENvdW50JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncmVwZWF0RHVyJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncmVxdWlyZWRFeHRlbnNpb25zJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncmVxdWlyZWRGZWF0dXJlcyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3JlcXVpcmVkRm9udHMnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdyZXF1aXJlZEZvcm1hdHMnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdyZXNvdXJjZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3Jlc3RhcnQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdyZXN1bHQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdyZXYnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdyb2xlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncm90YXRlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAncngnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdyeSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3NjYWxlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc2VlZCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3NoYXBlLXJlbmRlcmluZyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3Nsb3BlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc25hcHNob3RUaW1lJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3BhY2luZyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3NwZWN1bGFyQ29uc3RhbnQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdzcGVjdWxhckV4cG9uZW50JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3ByZWFkTWV0aG9kJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3RhcnRPZmZzZXQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdzdGREZXZpYXRpb24nOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdzdGVtaCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3N0ZW12JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3RpdGNoVGlsZXMnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdzdG9wLWNvbG9yJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3RvcC1vcGFjaXR5JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3RyaWtldGhyb3VnaC1wb3NpdGlvbic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3N0cmlrZXRocm91Z2gtdGhpY2tuZXNzJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3RyaW5nJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3Ryb2tlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3Ryb2tlLWRhc2hhcnJheSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3N0cm9rZS1kYXNob2Zmc2V0JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3Ryb2tlLWxpbmVjYXAnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdzdHJva2UtbGluZWpvaW4nOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdzdHJva2UtbWl0ZXJsaW1pdCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3N0cm9rZS1vcGFjaXR5JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3Ryb2tlLXdpZHRoJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3VyZmFjZVNjYWxlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3luY0JlaGF2aW9yJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3luY0JlaGF2aW9yRGVmYXVsdCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3N5bmNNYXN0ZXInOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdzeW5jVG9sZXJhbmNlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAnc3luY1RvbGVyYW5jZURlZmF1bHQnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICdzeXN0ZW1MYW5ndWFnZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3RhYmxlVmFsdWVzJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAndGFyZ2V0JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAndGFyZ2V0WCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3RhcmdldFknOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICd0ZXh0LWFuY2hvcic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3RleHQtZGVjb3JhdGlvbic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3RleHQtcmVuZGVyaW5nJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAndGV4dExlbmd0aCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3RpbWVsaW5lQmVnaW4nOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICd0aXRsZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3RvJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAndHJhbnNmb3JtJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAndHJhbnNmb3JtQmVoYXZpb3InOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICd0eXBlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAndHlwZW9mJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAndTEnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICd1Mic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3VuZGVybGluZS1wb3NpdGlvbic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3VuZGVybGluZS10aGlja25lc3MnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICd1bmljb2RlJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAndW5pY29kZS1iaWRpJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAndW5pY29kZS1yYW5nZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3VuaXRzLXBlci1lbSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3YtYWxwaGFiZXRpYyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3YtaGFuZ2luZyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3YtaWRlb2dyYXBoaWMnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICd2LW1hdGhlbWF0aWNhbCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3ZhbHVlcyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3ZlcnNpb24nOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICd2ZXJ0LWFkdi15JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAndmVydC1vcmlnaW4teCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3ZlcnQtb3JpZ2luLXknOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICd2aWV3Qm94JzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAndmlld1RhcmdldCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3Zpc2liaWxpdHknOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICd3aWR0aCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3dpZHRocyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3dvcmQtc3BhY2luZyc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3dyaXRpbmctbW9kZSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3gnOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICd4LWhlaWdodCc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3gxJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAneDInOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICd4Q2hhbm5lbFNlbGVjdG9yJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAneGxpbms6YWN0dWF0ZSc6IFhMSU5LX05BTUVTUEFDRVxuXHQsICd4bGluazphcmNyb2xlJzogWExJTktfTkFNRVNQQUNFXG5cdCwgJ3hsaW5rOmhyZWYnOiBYTElOS19OQU1FU1BBQ0Vcblx0LCAneGxpbms6cm9sZSc6IFhMSU5LX05BTUVTUEFDRVxuXHQsICd4bGluazpzaG93JzogWExJTktfTkFNRVNQQUNFXG5cdCwgJ3hsaW5rOnRpdGxlJzogWExJTktfTkFNRVNQQUNFXG5cdCwgJ3hsaW5rOnR5cGUnOiBYTElOS19OQU1FU1BBQ0Vcblx0LCAneG1sOmJhc2UnOiBYTUxfTkFNRVNQQUNFXG5cdCwgJ3htbDppZCc6IFhNTF9OQU1FU1BBQ0Vcblx0LCAneG1sOmxhbmcnOiBYTUxfTkFNRVNQQUNFXG5cdCwgJ3htbDpzcGFjZSc6IFhNTF9OQU1FU1BBQ0Vcblx0LCAneSc6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3kxJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAneTInOiBERUZBVUxUX05BTUVTUEFDRVxuXHQsICd5Q2hhbm5lbFNlbGVjdG9yJzogREVGQVVMVF9OQU1FU1BBQ0Vcblx0LCAneic6IERFRkFVTFRfTkFNRVNQQUNFXG5cdCwgJ3pvb21BbmRQYW4nOiBERUZBVUxUX05BTUVTUEFDRVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBuYW1lc3BhY2VzO1xuIiwiXG4vKipcbiAqIHByb3BlcnR5LW1hcC5qc1xuICpcbiAqIE5lY2Vzc2FyeSB0byBtYXAgZG9tIGF0dHJpYnV0ZXMgYmFjayB0byB2ZG9tIHByb3BlcnRpZXNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8vIGludmVydCBvZiBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9odG1sLWF0dHJpYnV0ZXNcbnZhciBwcm9wZXJ0aWVzID0ge1xuXHQnYWJicic6ICdhYmJyJ1xuXHQsICdhY2NlcHQnOiAnYWNjZXB0J1xuXHQsICdhY2NlcHQtY2hhcnNldCc6ICdhY2NlcHRDaGFyc2V0J1xuXHQsICdhY2Nlc3NrZXknOiAnYWNjZXNzS2V5J1xuXHQsICdhY3Rpb24nOiAnYWN0aW9uJ1xuXHQsICdhbGxvd2Z1bGxzY3JlZW4nOiAnYWxsb3dGdWxsU2NyZWVuJ1xuXHQsICdhbGxvd3RyYW5zcGFyZW5jeSc6ICdhbGxvd1RyYW5zcGFyZW5jeSdcblx0LCAnYWx0JzogJ2FsdCdcblx0LCAnYXN5bmMnOiAnYXN5bmMnXG5cdCwgJ2F1dG9jb21wbGV0ZSc6ICdhdXRvQ29tcGxldGUnXG5cdCwgJ2F1dG9mb2N1cyc6ICdhdXRvRm9jdXMnXG5cdCwgJ2F1dG9wbGF5JzogJ2F1dG9QbGF5J1xuXHQsICdjZWxscGFkZGluZyc6ICdjZWxsUGFkZGluZydcblx0LCAnY2VsbHNwYWNpbmcnOiAnY2VsbFNwYWNpbmcnXG5cdCwgJ2NoYWxsZW5nZSc6ICdjaGFsbGVuZ2UnXG5cdCwgJ2NoYXJzZXQnOiAnY2hhcnNldCdcblx0LCAnY2hlY2tlZCc6ICdjaGVja2VkJ1xuXHQsICdjaXRlJzogJ2NpdGUnXG5cdCwgJ2NsYXNzJzogJ2NsYXNzTmFtZSdcblx0LCAnY29scyc6ICdjb2xzJ1xuXHQsICdjb2xzcGFuJzogJ2NvbFNwYW4nXG5cdCwgJ2NvbW1hbmQnOiAnY29tbWFuZCdcblx0LCAnY29udGVudCc6ICdjb250ZW50J1xuXHQsICdjb250ZW50ZWRpdGFibGUnOiAnY29udGVudEVkaXRhYmxlJ1xuXHQsICdjb250ZXh0bWVudSc6ICdjb250ZXh0TWVudSdcblx0LCAnY29udHJvbHMnOiAnY29udHJvbHMnXG5cdCwgJ2Nvb3Jkcyc6ICdjb29yZHMnXG5cdCwgJ2Nyb3Nzb3JpZ2luJzogJ2Nyb3NzT3JpZ2luJ1xuXHQsICdkYXRhJzogJ2RhdGEnXG5cdCwgJ2RhdGV0aW1lJzogJ2RhdGVUaW1lJ1xuXHQsICdkZWZhdWx0JzogJ2RlZmF1bHQnXG5cdCwgJ2RlZmVyJzogJ2RlZmVyJ1xuXHQsICdkaXInOiAnZGlyJ1xuXHQsICdkaXNhYmxlZCc6ICdkaXNhYmxlZCdcblx0LCAnZG93bmxvYWQnOiAnZG93bmxvYWQnXG5cdCwgJ2RyYWdnYWJsZSc6ICdkcmFnZ2FibGUnXG5cdCwgJ2Ryb3B6b25lJzogJ2Ryb3B6b25lJ1xuXHQsICdlbmN0eXBlJzogJ2VuY1R5cGUnXG5cdCwgJ2Zvcic6ICdodG1sRm9yJ1xuXHQsICdmb3JtJzogJ2Zvcm0nXG5cdCwgJ2Zvcm1hY3Rpb24nOiAnZm9ybUFjdGlvbidcblx0LCAnZm9ybWVuY3R5cGUnOiAnZm9ybUVuY1R5cGUnXG5cdCwgJ2Zvcm1tZXRob2QnOiAnZm9ybU1ldGhvZCdcblx0LCAnZm9ybW5vdmFsaWRhdGUnOiAnZm9ybU5vVmFsaWRhdGUnXG5cdCwgJ2Zvcm10YXJnZXQnOiAnZm9ybVRhcmdldCdcblx0LCAnZnJhbWVCb3JkZXInOiAnZnJhbWVCb3JkZXInXG5cdCwgJ2hlYWRlcnMnOiAnaGVhZGVycydcblx0LCAnaGVpZ2h0JzogJ2hlaWdodCdcblx0LCAnaGlkZGVuJzogJ2hpZGRlbidcblx0LCAnaGlnaCc6ICdoaWdoJ1xuXHQsICdocmVmJzogJ2hyZWYnXG5cdCwgJ2hyZWZsYW5nJzogJ2hyZWZMYW5nJ1xuXHQsICdodHRwLWVxdWl2JzogJ2h0dHBFcXVpdidcblx0LCAnaWNvbic6ICdpY29uJ1xuXHQsICdpZCc6ICdpZCdcblx0LCAnaW5wdXRtb2RlJzogJ2lucHV0TW9kZSdcblx0LCAnaXNtYXAnOiAnaXNNYXAnXG5cdCwgJ2l0ZW1pZCc6ICdpdGVtSWQnXG5cdCwgJ2l0ZW1wcm9wJzogJ2l0ZW1Qcm9wJ1xuXHQsICdpdGVtcmVmJzogJ2l0ZW1SZWYnXG5cdCwgJ2l0ZW1zY29wZSc6ICdpdGVtU2NvcGUnXG5cdCwgJ2l0ZW10eXBlJzogJ2l0ZW1UeXBlJ1xuXHQsICdraW5kJzogJ2tpbmQnXG5cdCwgJ2xhYmVsJzogJ2xhYmVsJ1xuXHQsICdsYW5nJzogJ2xhbmcnXG5cdCwgJ2xpc3QnOiAnbGlzdCdcblx0LCAnbG9vcCc6ICdsb29wJ1xuXHQsICdtYW5pZmVzdCc6ICdtYW5pZmVzdCdcblx0LCAnbWF4JzogJ21heCdcblx0LCAnbWF4bGVuZ3RoJzogJ21heExlbmd0aCdcblx0LCAnbWVkaWEnOiAnbWVkaWEnXG5cdCwgJ21lZGlhZ3JvdXAnOiAnbWVkaWFHcm91cCdcblx0LCAnbWV0aG9kJzogJ21ldGhvZCdcblx0LCAnbWluJzogJ21pbidcblx0LCAnbWlubGVuZ3RoJzogJ21pbkxlbmd0aCdcblx0LCAnbXVsdGlwbGUnOiAnbXVsdGlwbGUnXG5cdCwgJ211dGVkJzogJ211dGVkJ1xuXHQsICduYW1lJzogJ25hbWUnXG5cdCwgJ25vdmFsaWRhdGUnOiAnbm9WYWxpZGF0ZSdcblx0LCAnb3Blbic6ICdvcGVuJ1xuXHQsICdvcHRpbXVtJzogJ29wdGltdW0nXG5cdCwgJ3BhdHRlcm4nOiAncGF0dGVybidcblx0LCAncGluZyc6ICdwaW5nJ1xuXHQsICdwbGFjZWhvbGRlcic6ICdwbGFjZWhvbGRlcidcblx0LCAncG9zdGVyJzogJ3Bvc3Rlcidcblx0LCAncHJlbG9hZCc6ICdwcmVsb2FkJ1xuXHQsICdyYWRpb2dyb3VwJzogJ3JhZGlvR3JvdXAnXG5cdCwgJ3JlYWRvbmx5JzogJ3JlYWRPbmx5J1xuXHQsICdyZWwnOiAncmVsJ1xuXHQsICdyZXF1aXJlZCc6ICdyZXF1aXJlZCdcblx0LCAncm9sZSc6ICdyb2xlJ1xuXHQsICdyb3dzJzogJ3Jvd3MnXG5cdCwgJ3Jvd3NwYW4nOiAncm93U3Bhbidcblx0LCAnc2FuZGJveCc6ICdzYW5kYm94J1xuXHQsICdzY29wZSc6ICdzY29wZSdcblx0LCAnc2NvcGVkJzogJ3Njb3BlZCdcblx0LCAnc2Nyb2xsaW5nJzogJ3Njcm9sbGluZydcblx0LCAnc2VhbWxlc3MnOiAnc2VhbWxlc3MnXG5cdCwgJ3NlbGVjdGVkJzogJ3NlbGVjdGVkJ1xuXHQsICdzaGFwZSc6ICdzaGFwZSdcblx0LCAnc2l6ZSc6ICdzaXplJ1xuXHQsICdzaXplcyc6ICdzaXplcydcblx0LCAnc29ydGFibGUnOiAnc29ydGFibGUnXG5cdCwgJ3NwYW4nOiAnc3Bhbidcblx0LCAnc3BlbGxjaGVjayc6ICdzcGVsbENoZWNrJ1xuXHQsICdzcmMnOiAnc3JjJ1xuXHQsICdzcmNkb2MnOiAnc3JjRG9jJ1xuXHQsICdzcmNzZXQnOiAnc3JjU2V0J1xuXHQsICdzdGFydCc6ICdzdGFydCdcblx0LCAnc3RlcCc6ICdzdGVwJ1xuXHQsICdzdHlsZSc6ICdzdHlsZSdcblx0LCAndGFiaW5kZXgnOiAndGFiSW5kZXgnXG5cdCwgJ3RhcmdldCc6ICd0YXJnZXQnXG5cdCwgJ3RpdGxlJzogJ3RpdGxlJ1xuXHQsICd0cmFuc2xhdGUnOiAndHJhbnNsYXRlJ1xuXHQsICd0eXBlJzogJ3R5cGUnXG5cdCwgJ3R5cGVtdXN0bWF0Y2gnOiAndHlwZU11c3RNYXRjaCdcblx0LCAndXNlbWFwJzogJ3VzZU1hcCdcblx0LCAndmFsdWUnOiAndmFsdWUnXG5cdCwgJ3dpZHRoJzogJ3dpZHRoJ1xuXHQsICd3bW9kZSc6ICd3bW9kZSdcblx0LCAnd3JhcCc6ICd3cmFwJ1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBwcm9wZXJ0aWVzO1xuIiwidmFyIGVzY2FwZSA9IHJlcXVpcmUoJ2VzY2FwZS1odG1sJyk7XG52YXIgcHJvcENvbmZpZyA9IHJlcXVpcmUoJy4vcHJvcGVydHktY29uZmlnJyk7XG52YXIgdHlwZXMgPSBwcm9wQ29uZmlnLmF0dHJpYnV0ZVR5cGVzO1xudmFyIHByb3BlcnRpZXMgPSBwcm9wQ29uZmlnLnByb3BlcnRpZXM7XG52YXIgYXR0cmlidXRlTmFtZXMgPSBwcm9wQ29uZmlnLmF0dHJpYnV0ZU5hbWVzO1xuXG52YXIgcHJlZml4QXR0cmlidXRlID0gbWVtb2l6ZVN0cmluZyhmdW5jdGlvbiAobmFtZSkge1xuICByZXR1cm4gZXNjYXBlKG5hbWUpICsgJz1cIic7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVBdHRyaWJ1dGU7XG5cbi8qKlxuICogQ3JlYXRlIGF0dHJpYnV0ZSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IG9yIGF0dHJpYnV0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWVcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2lzQXR0cmlidXRlXSBEZW5vdGVzIHdoZXRoZXIgYG5hbWVgIGlzIGFuIGF0dHJpYnV0ZS5cbiAqIEByZXR1cm4gez9TdHJpbmd9IEF0dHJpYnV0ZSBzdHJpbmcgfHwgbnVsbCBpZiBub3QgYSB2YWxpZCBwcm9wZXJ0eSBvciBjdXN0b20gYXR0cmlidXRlLlxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZUF0dHJpYnV0ZShuYW1lLCB2YWx1ZSwgaXNBdHRyaWJ1dGUpIHtcbiAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICBpZiAoc2hvdWxkU2tpcChuYW1lLCB2YWx1ZSkpIHJldHVybiAnJztcbiAgICBuYW1lID0gKGF0dHJpYnV0ZU5hbWVzW25hbWVdIHx8IG5hbWUpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFyIGF0dHJUeXBlID0gcHJvcGVydGllc1tuYW1lXTtcbiAgICAvLyBmb3IgQk9PTEVBTiBgdmFsdWVgIG9ubHkgaGFzIHRvIGJlIHRydXRoeVxuICAgIC8vIGZvciBPVkVSTE9BREVEX0JPT0xFQU4gYHZhbHVlYCBoYXMgdG8gYmUgPT09IHRydWVcbiAgICBpZiAoKGF0dHJUeXBlID09PSB0eXBlcy5CT09MRUFOKSB8fFxuICAgICAgICAoYXR0clR5cGUgPT09IHR5cGVzLk9WRVJMT0FERURfQk9PTEVBTiAmJiB2YWx1ZSA9PT0gdHJ1ZSkpIHtcbiAgICAgIHJldHVybiBlc2NhcGUobmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBwcmVmaXhBdHRyaWJ1dGUobmFtZSkgKyBlc2NhcGUodmFsdWUpICsgJ1wiJztcbiAgfSBlbHNlIGlmIChpc0F0dHJpYnV0ZSkge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gJyc7XG4gICAgcmV0dXJuIHByZWZpeEF0dHJpYnV0ZShuYW1lKSArIGVzY2FwZSh2YWx1ZSkgKyAnXCInO1xuICB9XG4gIC8vIHJldHVybiBudWxsIGlmIGBuYW1lYCBpcyBuZWl0aGVyIGEgdmFsaWQgcHJvcGVydHkgbm9yIGFuIGF0dHJpYnV0ZVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBTaG91bGQgc2tpcCBmYWxzZSBib29sZWFuIGF0dHJpYnV0ZXMuXG4gKi9cblxuZnVuY3Rpb24gc2hvdWxkU2tpcChuYW1lLCB2YWx1ZSkge1xuICB2YXIgYXR0clR5cGUgPSBwcm9wZXJ0aWVzW25hbWVdO1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCB8fFxuICAgIChhdHRyVHlwZSA9PT0gdHlwZXMuQk9PTEVBTiAmJiAhdmFsdWUpIHx8XG4gICAgKGF0dHJUeXBlID09PSB0eXBlcy5PVkVSTE9BREVEX0JPT0xFQU4gJiYgdmFsdWUgPT09IGZhbHNlKTtcbn1cblxuLyoqXG4gKiBNZW1vaXplcyB0aGUgcmV0dXJuIHZhbHVlIG9mIGEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIG9uZSBzdHJpbmcgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4ge2Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIG1lbW9pemVTdHJpbmcoY2FsbGJhY2spIHtcbiAgdmFyIGNhY2hlID0ge307XG4gIHJldHVybiBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkoc3RyaW5nKSkge1xuICAgICAgcmV0dXJuIGNhY2hlW3N0cmluZ107XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjYWNoZVtzdHJpbmddID0gY2FsbGJhY2suY2FsbCh0aGlzLCBzdHJpbmcpO1xuICAgIH1cbiAgfTtcbn0iLCJ2YXIgZXNjYXBlID0gcmVxdWlyZSgnZXNjYXBlLWh0bWwnKTtcbnZhciBleHRlbmQgPSByZXF1aXJlKCd4dGVuZCcpO1xudmFyIGlzVk5vZGUgPSByZXF1aXJlKCd2aXJ0dWFsLWRvbS92bm9kZS9pcy12bm9kZScpO1xudmFyIGlzVlRleHQgPSByZXF1aXJlKCd2aXJ0dWFsLWRvbS92bm9kZS9pcy12dGV4dCcpO1xudmFyIGlzVGh1bmsgPSByZXF1aXJlKCd2aXJ0dWFsLWRvbS92bm9kZS9pcy10aHVuaycpO1xudmFyIGlzV2lkZ2V0ID0gcmVxdWlyZSgndmlydHVhbC1kb20vdm5vZGUvaXMtd2lkZ2V0Jyk7XG52YXIgc29mdEhvb2sgPSByZXF1aXJlKCd2aXJ0dWFsLWRvbS92aXJ0dWFsLWh5cGVyc2NyaXB0L2hvb2tzL3NvZnQtc2V0LWhvb2snKTtcbnZhciBhdHRySG9vayA9IHJlcXVpcmUoJ3ZpcnR1YWwtZG9tL3ZpcnR1YWwtaHlwZXJzY3JpcHQvaG9va3MvYXR0cmlidXRlLWhvb2snKTtcbnZhciBwYXJhbUNhc2UgPSByZXF1aXJlKCdwYXJhbS1jYXNlJyk7XG52YXIgY3JlYXRlQXR0cmlidXRlID0gcmVxdWlyZSgnLi9jcmVhdGUtYXR0cmlidXRlJyk7XG52YXIgdm9pZEVsZW1lbnRzID0gcmVxdWlyZSgnLi92b2lkLWVsZW1lbnRzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gdG9IVE1MO1xuXG5mdW5jdGlvbiB0b0hUTUwobm9kZSwgcGFyZW50KSB7XG4gIGlmICghbm9kZSkgcmV0dXJuICcnO1xuXG4gIGlmIChpc1RodW5rKG5vZGUpKSB7XG4gICAgbm9kZSA9IG5vZGUucmVuZGVyKCk7XG4gIH1cblxuICBpZiAoaXNXaWRnZXQobm9kZSkgJiYgbm9kZS5yZW5kZXIpIHtcbiAgICBub2RlID0gbm9kZS5yZW5kZXIoKTtcbiAgfVxuXG4gIGlmIChpc1ZOb2RlKG5vZGUpKSB7XG4gICAgcmV0dXJuIG9wZW5UYWcobm9kZSkgKyB0YWdDb250ZW50KG5vZGUpICsgY2xvc2VUYWcobm9kZSk7XG4gIH0gZWxzZSBpZiAoaXNWVGV4dChub2RlKSkge1xuICAgIGlmIChwYXJlbnQgJiYgcGFyZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3NjcmlwdCcpIHJldHVybiBTdHJpbmcobm9kZS50ZXh0KTtcbiAgICByZXR1cm4gZXNjYXBlKFN0cmluZyhub2RlLnRleHQpKTtcbiAgfVxuXG4gIHJldHVybiAnJztcbn1cblxuZnVuY3Rpb24gb3BlblRhZyhub2RlKSB7XG4gIHZhciBwcm9wcyA9IG5vZGUucHJvcGVydGllcztcbiAgdmFyIHJldCA9ICc8JyArIG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcbiAgICB2YXIgdmFsdWUgPSBwcm9wc1tuYW1lXTtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkgY29udGludWU7XG5cbiAgICBpZiAobmFtZSA9PSAnYXR0cmlidXRlcycpIHtcbiAgICAgIHZhbHVlID0gZXh0ZW5kKHt9LCB2YWx1ZSk7XG4gICAgICBmb3IgKHZhciBhdHRyUHJvcCBpbiB2YWx1ZSkge1xuICAgICAgICByZXQgKz0gJyAnICsgY3JlYXRlQXR0cmlidXRlKGF0dHJQcm9wLCB2YWx1ZVthdHRyUHJvcF0sIHRydWUpO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKG5hbWUgPT0gJ3N0eWxlJykge1xuICAgICAgdmFyIGNzcyA9ICcnO1xuICAgICAgdmFsdWUgPSBleHRlbmQoe30sIHZhbHVlKTtcbiAgICAgIGZvciAodmFyIHN0eWxlUHJvcCBpbiB2YWx1ZSkge1xuICAgICAgICBjc3MgKz0gcGFyYW1DYXNlKHN0eWxlUHJvcCkgKyAnOiAnICsgdmFsdWVbc3R5bGVQcm9wXSArICc7ICc7XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IGNzcy50cmltKCk7XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2Ygc29mdEhvb2sgfHwgdmFsdWUgaW5zdGFuY2VvZiBhdHRySG9vaykge1xuICAgICAgcmV0ICs9ICcgJyArIGNyZWF0ZUF0dHJpYnV0ZShuYW1lLCB2YWx1ZS52YWx1ZSwgdHJ1ZSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICB2YXIgYXR0ciA9IGNyZWF0ZUF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgaWYgKGF0dHIpIHJldCArPSAnICcgKyBhdHRyO1xuICB9XG5cbiAgcmV0dXJuIHJldCArICc+Jztcbn1cblxuZnVuY3Rpb24gdGFnQ29udGVudChub2RlKSB7XG4gIHZhciBpbm5lckhUTUwgPSBub2RlLnByb3BlcnRpZXMuaW5uZXJIVE1MO1xuICBpZiAoaW5uZXJIVE1MICE9IG51bGwpIHJldHVybiBpbm5lckhUTUw7XG4gIGVsc2Uge1xuICAgIHZhciByZXQgPSAnJztcbiAgICBpZiAobm9kZS5jaGlsZHJlbiAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaTxsOyBpKyspIHtcbiAgICAgICAgdmFyIGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTtcbiAgICAgICAgcmV0ICs9IHRvSFRNTChjaGlsZCwgbm9kZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xvc2VUYWcobm9kZSkge1xuICB2YXIgdGFnID0gbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiB2b2lkRWxlbWVudHNbdGFnXSA/ICcnIDogJzwvJyArIHRhZyArICc+Jztcbn0iLCIvKipcbiAqIEF0dHJpYnV0ZSB0eXBlcy5cbiAqL1xuXG52YXIgdHlwZXMgPSB7XG4gIEJPT0xFQU46IDEsXG4gIE9WRVJMT0FERURfQk9PTEVBTjogMlxufTtcblxuLyoqXG4gKiBQcm9wZXJ0aWVzLlxuICpcbiAqIFRha2VuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2Jsb2IvODQ3MzU3ZTQyZTUyNjdiMDRkZDZlMjk3MjE5ZWFhMTI1YWIyZjlmNC9zcmMvYnJvd3Nlci91aS9kb20vSFRNTERPTVByb3BlcnR5Q29uZmlnLmpzXG4gKlxuICovXG5cbnZhciBwcm9wZXJ0aWVzID0ge1xuICAvKipcbiAgICogU3RhbmRhcmQgUHJvcGVydGllc1xuICAgKi9cbiAgYWNjZXB0OiB0cnVlLFxuICBhY2NlcHRDaGFyc2V0OiB0cnVlLFxuICBhY2Nlc3NLZXk6IHRydWUsXG4gIGFjdGlvbjogdHJ1ZSxcbiAgYWxsb3dGdWxsU2NyZWVuOiB0eXBlcy5CT09MRUFOLFxuICBhbGxvd1RyYW5zcGFyZW5jeTogdHJ1ZSxcbiAgYWx0OiB0cnVlLFxuICBhc3luYzogdHlwZXMuQk9PTEVBTixcbiAgYXV0b2NvbXBsZXRlOiB0cnVlLFxuICBhdXRvZm9jdXM6IHR5cGVzLkJPT0xFQU4sXG4gIGF1dG9wbGF5OiB0eXBlcy5CT09MRUFOLFxuICBjZWxsUGFkZGluZzogdHJ1ZSxcbiAgY2VsbFNwYWNpbmc6IHRydWUsXG4gIGNoYXJzZXQ6IHRydWUsXG4gIGNoZWNrZWQ6IHR5cGVzLkJPT0xFQU4sXG4gIGNsYXNzSUQ6IHRydWUsXG4gIGNsYXNzTmFtZTogdHJ1ZSxcbiAgY29sczogdHJ1ZSxcbiAgY29sU3BhbjogdHJ1ZSxcbiAgY29udGVudDogdHJ1ZSxcbiAgY29udGVudEVkaXRhYmxlOiB0cnVlLFxuICBjb250ZXh0TWVudTogdHJ1ZSxcbiAgY29udHJvbHM6IHR5cGVzLkJPT0xFQU4sXG4gIGNvb3JkczogdHJ1ZSxcbiAgY3Jvc3NPcmlnaW46IHRydWUsXG4gIGRhdGE6IHRydWUsIC8vIEZvciBgPG9iamVjdCAvPmAgYWN0cyBhcyBgc3JjYC5cbiAgZGF0ZVRpbWU6IHRydWUsXG4gIGRlZmVyOiB0eXBlcy5CT09MRUFOLFxuICBkaXI6IHRydWUsXG4gIGRpc2FibGVkOiB0eXBlcy5CT09MRUFOLFxuICBkb3dubG9hZDogdHlwZXMuT1ZFUkxPQURFRF9CT09MRUFOLFxuICBkcmFnZ2FibGU6IHRydWUsXG4gIGVuY3R5cGU6IHRydWUsXG4gIGZvcm06IHRydWUsXG4gIGZvcm1BY3Rpb246IHRydWUsXG4gIGZvcm1FbmNUeXBlOiB0cnVlLFxuICBmb3JtTWV0aG9kOiB0cnVlLFxuICBmb3JtTm9WYWxpZGF0ZTogdHlwZXMuQk9PTEVBTixcbiAgZm9ybVRhcmdldDogdHJ1ZSxcbiAgZnJhbWVCb3JkZXI6IHRydWUsXG4gIGhlYWRlcnM6IHRydWUsXG4gIGhlaWdodDogdHJ1ZSxcbiAgaGlkZGVuOiB0eXBlcy5CT09MRUFOLFxuICBocmVmOiB0cnVlLFxuICBocmVmbGFuZzogdHJ1ZSxcbiAgaHRtbEZvcjogdHJ1ZSxcbiAgaHR0cEVxdWl2OiB0cnVlLFxuICBpY29uOiB0cnVlLFxuICBpZDogdHJ1ZSxcbiAgbGFiZWw6IHRydWUsXG4gIGxhbmc6IHRydWUsXG4gIGxpc3Q6IHRydWUsXG4gIGxvb3A6IHR5cGVzLkJPT0xFQU4sXG4gIG1hbmlmZXN0OiB0cnVlLFxuICBtYXJnaW5IZWlnaHQ6IHRydWUsXG4gIG1hcmdpbldpZHRoOiB0cnVlLFxuICBtYXg6IHRydWUsXG4gIG1heExlbmd0aDogdHJ1ZSxcbiAgbWVkaWE6IHRydWUsXG4gIG1lZGlhR3JvdXA6IHRydWUsXG4gIG1ldGhvZDogdHJ1ZSxcbiAgbWluOiB0cnVlLFxuICBtdWx0aXBsZTogdHlwZXMuQk9PTEVBTixcbiAgbXV0ZWQ6IHR5cGVzLkJPT0xFQU4sXG4gIG5hbWU6IHRydWUsXG4gIG5vVmFsaWRhdGU6IHR5cGVzLkJPT0xFQU4sXG4gIG9wZW46IHRydWUsXG4gIHBhdHRlcm46IHRydWUsXG4gIHBsYWNlaG9sZGVyOiB0cnVlLFxuICBwb3N0ZXI6IHRydWUsXG4gIHByZWxvYWQ6IHRydWUsXG4gIHJhZGlvZ3JvdXA6IHRydWUsXG4gIHJlYWRPbmx5OiB0eXBlcy5CT09MRUFOLFxuICByZWw6IHRydWUsXG4gIHJlcXVpcmVkOiB0eXBlcy5CT09MRUFOLFxuICByb2xlOiB0cnVlLFxuICByb3dzOiB0cnVlLFxuICByb3dTcGFuOiB0cnVlLFxuICBzYW5kYm94OiB0cnVlLFxuICBzY29wZTogdHJ1ZSxcbiAgc2Nyb2xsaW5nOiB0cnVlLFxuICBzZWFtbGVzczogdHlwZXMuQk9PTEVBTixcbiAgc2VsZWN0ZWQ6IHR5cGVzLkJPT0xFQU4sXG4gIHNoYXBlOiB0cnVlLFxuICBzaXplOiB0cnVlLFxuICBzaXplczogdHJ1ZSxcbiAgc3BhbjogdHJ1ZSxcbiAgc3BlbGxjaGVjazogdHJ1ZSxcbiAgc3JjOiB0cnVlLFxuICBzcmNkb2M6IHRydWUsXG4gIHNyY3NldDogdHJ1ZSxcbiAgc3RhcnQ6IHRydWUsXG4gIHN0ZXA6IHRydWUsXG4gIHN0eWxlOiB0cnVlLFxuICB0YWJJbmRleDogdHJ1ZSxcbiAgdGFyZ2V0OiB0cnVlLFxuICB0aXRsZTogdHJ1ZSxcbiAgdHlwZTogdHJ1ZSxcbiAgdXNlTWFwOiB0cnVlLFxuICB2YWx1ZTogdHJ1ZSxcbiAgd2lkdGg6IHRydWUsXG4gIHdtb2RlOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBOb24tc3RhbmRhcmQgUHJvcGVydGllc1xuICAgKi9cbiAgLy8gYXV0b0NhcGl0YWxpemUgYW5kIGF1dG9Db3JyZWN0IGFyZSBzdXBwb3J0ZWQgaW4gTW9iaWxlIFNhZmFyaSBmb3JcbiAgLy8ga2V5Ym9hcmQgaGludHMuXG4gIGF1dG9jYXBpdGFsaXplOiB0cnVlLFxuICBhdXRvY29ycmVjdDogdHJ1ZSxcbiAgLy8gaXRlbVByb3AsIGl0ZW1TY29wZSwgaXRlbVR5cGUgYXJlIGZvciBNaWNyb2RhdGEgc3VwcG9ydC4gU2VlXG4gIC8vIGh0dHA6Ly9zY2hlbWEub3JnL2RvY3MvZ3MuaHRtbFxuICBpdGVtUHJvcDogdHJ1ZSxcbiAgaXRlbVNjb3BlOiB0eXBlcy5CT09MRUFOLFxuICBpdGVtVHlwZTogdHJ1ZSxcbiAgLy8gcHJvcGVydHkgaXMgc3VwcG9ydGVkIGZvciBPcGVuR3JhcGggaW4gbWV0YSB0YWdzLlxuICBwcm9wZXJ0eTogdHJ1ZVxufTtcblxuLyoqXG4gKiBQcm9wZXJ0aWVzIHRvIGF0dHJpYnV0ZXMgbWFwcGluZy5cbiAqXG4gKiBUaGUgb25lcyBub3QgaGVyZSBhcmUgc2ltcGx5IGNvbnZlcnRlZCB0byBsb3dlciBjYXNlLlxuICovXG5cbnZhciBhdHRyaWJ1dGVOYW1lcyA9IHtcbiAgYWNjZXB0Q2hhcnNldDogJ2FjY2VwdC1jaGFyc2V0JyxcbiAgY2xhc3NOYW1lOiAnY2xhc3MnLFxuICBodG1sRm9yOiAnZm9yJyxcbiAgaHR0cEVxdWl2OiAnaHR0cC1lcXVpdidcbn07XG5cbi8qKlxuICogRXhwb3J0cy5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYXR0cmlidXRlVHlwZXM6IHR5cGVzLFxuICBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLFxuICBhdHRyaWJ1dGVOYW1lczogYXR0cmlidXRlTmFtZXNcbn07IiwiXG4vKipcbiAqIFZvaWQgZWxlbWVudHMuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2Jsb2IvdjAuMTIuMC9zcmMvYnJvd3Nlci91aS9SZWFjdERPTUNvbXBvbmVudC5qcyNMOTlcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgJ2FyZWEnOiB0cnVlLFxuICAnYmFzZSc6IHRydWUsXG4gICdicic6IHRydWUsXG4gICdjb2wnOiB0cnVlLFxuICAnZW1iZWQnOiB0cnVlLFxuICAnaHInOiB0cnVlLFxuICAnaW1nJzogdHJ1ZSxcbiAgJ2lucHV0JzogdHJ1ZSxcbiAgJ2tleWdlbic6IHRydWUsXG4gICdsaW5rJzogdHJ1ZSxcbiAgJ21ldGEnOiB0cnVlLFxuICAncGFyYW0nOiB0cnVlLFxuICAnc291cmNlJzogdHJ1ZSxcbiAgJ3RyYWNrJzogdHJ1ZSxcbiAgJ3dicic6IHRydWVcbn07IiwidmFyIGRpZmYgPSByZXF1aXJlKFwiLi92dHJlZS9kaWZmLmpzXCIpXG5cbm1vZHVsZS5leHBvcnRzID0gZGlmZlxuIiwidmFyIHBhdGNoID0gcmVxdWlyZShcIi4vdmRvbS9wYXRjaC5qc1wiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBhdGNoXG4iLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKFwiaXMtb2JqZWN0XCIpXG52YXIgaXNIb29rID0gcmVxdWlyZShcIi4uL3Zub2RlL2lzLXZob29rLmpzXCIpXG5cbm1vZHVsZS5leHBvcnRzID0gYXBwbHlQcm9wZXJ0aWVzXG5cbmZ1bmN0aW9uIGFwcGx5UHJvcGVydGllcyhub2RlLCBwcm9wcywgcHJldmlvdXMpIHtcbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBwcm9wcykge1xuICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdXG5cbiAgICAgICAgaWYgKHByb3BWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZW1vdmVQcm9wZXJ0eShub2RlLCBwcm9wTmFtZSwgcHJvcFZhbHVlLCBwcmV2aW91cyk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNIb29rKHByb3BWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJlbW92ZVByb3BlcnR5KG5vZGUsIHByb3BOYW1lLCBwcm9wVmFsdWUsIHByZXZpb3VzKVxuICAgICAgICAgICAgaWYgKHByb3BWYWx1ZS5ob29rKSB7XG4gICAgICAgICAgICAgICAgcHJvcFZhbHVlLmhvb2sobm9kZSxcbiAgICAgICAgICAgICAgICAgICAgcHJvcE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzID8gcHJldmlvdXNbcHJvcE5hbWVdIDogdW5kZWZpbmVkKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHByb3BWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBwYXRjaE9iamVjdChub2RlLCBwcm9wcywgcHJldmlvdXMsIHByb3BOYW1lLCBwcm9wVmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBub2RlW3Byb3BOYW1lXSA9IHByb3BWYWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVQcm9wZXJ0eShub2RlLCBwcm9wTmFtZSwgcHJvcFZhbHVlLCBwcmV2aW91cykge1xuICAgIGlmIChwcmV2aW91cykge1xuICAgICAgICB2YXIgcHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzW3Byb3BOYW1lXVxuXG4gICAgICAgIGlmICghaXNIb29rKHByZXZpb3VzVmFsdWUpKSB7XG4gICAgICAgICAgICBpZiAocHJvcE5hbWUgPT09IFwiYXR0cmlidXRlc1wiKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYXR0ck5hbWUgaW4gcHJldmlvdXNWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BOYW1lID09PSBcInN0eWxlXCIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHByZXZpb3VzVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5zdHlsZVtpXSA9IFwiXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2aW91c1ZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgbm9kZVtwcm9wTmFtZV0gPSBcIlwiXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGVbcHJvcE5hbWVdID0gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHByZXZpb3VzVmFsdWUudW5ob29rKSB7XG4gICAgICAgICAgICBwcmV2aW91c1ZhbHVlLnVuaG9vayhub2RlLCBwcm9wTmFtZSwgcHJvcFZhbHVlKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwYXRjaE9iamVjdChub2RlLCBwcm9wcywgcHJldmlvdXMsIHByb3BOYW1lLCBwcm9wVmFsdWUpIHtcbiAgICB2YXIgcHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzID8gcHJldmlvdXNbcHJvcE5hbWVdIDogdW5kZWZpbmVkXG5cbiAgICAvLyBTZXQgYXR0cmlidXRlc1xuICAgIGlmIChwcm9wTmFtZSA9PT0gXCJhdHRyaWJ1dGVzXCIpIHtcbiAgICAgICAgZm9yICh2YXIgYXR0ck5hbWUgaW4gcHJvcFZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgYXR0clZhbHVlID0gcHJvcFZhbHVlW2F0dHJOYW1lXVxuXG4gICAgICAgICAgICBpZiAoYXR0clZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJWYWx1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmKHByZXZpb3VzVmFsdWUgJiYgaXNPYmplY3QocHJldmlvdXNWYWx1ZSkgJiZcbiAgICAgICAgZ2V0UHJvdG90eXBlKHByZXZpb3VzVmFsdWUpICE9PSBnZXRQcm90b3R5cGUocHJvcFZhbHVlKSkge1xuICAgICAgICBub2RlW3Byb3BOYW1lXSA9IHByb3BWYWx1ZVxuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIWlzT2JqZWN0KG5vZGVbcHJvcE5hbWVdKSkge1xuICAgICAgICBub2RlW3Byb3BOYW1lXSA9IHt9XG4gICAgfVxuXG4gICAgdmFyIHJlcGxhY2VyID0gcHJvcE5hbWUgPT09IFwic3R5bGVcIiA/IFwiXCIgOiB1bmRlZmluZWRcblxuICAgIGZvciAodmFyIGsgaW4gcHJvcFZhbHVlKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHByb3BWYWx1ZVtrXVxuICAgICAgICBub2RlW3Byb3BOYW1lXVtrXSA9ICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSA/IHJlcGxhY2VyIDogdmFsdWVcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldFByb3RvdHlwZSh2YWx1ZSkge1xuICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSlcbiAgICB9IGVsc2UgaWYgKHZhbHVlLl9fcHJvdG9fXykge1xuICAgICAgICByZXR1cm4gdmFsdWUuX19wcm90b19fXG4gICAgfSBlbHNlIGlmICh2YWx1ZS5jb25zdHJ1Y3Rvcikge1xuICAgICAgICByZXR1cm4gdmFsdWUuY29uc3RydWN0b3IucHJvdG90eXBlXG4gICAgfVxufVxuIiwidmFyIGRvY3VtZW50ID0gcmVxdWlyZShcImdsb2JhbC9kb2N1bWVudFwiKVxuXG52YXIgYXBwbHlQcm9wZXJ0aWVzID0gcmVxdWlyZShcIi4vYXBwbHktcHJvcGVydGllc1wiKVxuXG52YXIgaXNWTm9kZSA9IHJlcXVpcmUoXCIuLi92bm9kZS9pcy12bm9kZS5qc1wiKVxudmFyIGlzVlRleHQgPSByZXF1aXJlKFwiLi4vdm5vZGUvaXMtdnRleHQuanNcIilcbnZhciBpc1dpZGdldCA9IHJlcXVpcmUoXCIuLi92bm9kZS9pcy13aWRnZXQuanNcIilcbnZhciBoYW5kbGVUaHVuayA9IHJlcXVpcmUoXCIuLi92bm9kZS9oYW5kbGUtdGh1bmsuanNcIilcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVFbGVtZW50XG5cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodm5vZGUsIG9wdHMpIHtcbiAgICB2YXIgZG9jID0gb3B0cyA/IG9wdHMuZG9jdW1lbnQgfHwgZG9jdW1lbnQgOiBkb2N1bWVudFxuICAgIHZhciB3YXJuID0gb3B0cyA/IG9wdHMud2FybiA6IG51bGxcblxuICAgIHZub2RlID0gaGFuZGxlVGh1bmsodm5vZGUpLmFcblxuICAgIGlmIChpc1dpZGdldCh2bm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIHZub2RlLmluaXQoKVxuICAgIH0gZWxzZSBpZiAoaXNWVGV4dCh2bm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIGRvYy5jcmVhdGVUZXh0Tm9kZSh2bm9kZS50ZXh0KVxuICAgIH0gZWxzZSBpZiAoIWlzVk5vZGUodm5vZGUpKSB7XG4gICAgICAgIGlmICh3YXJuKSB7XG4gICAgICAgICAgICB3YXJuKFwiSXRlbSBpcyBub3QgYSB2YWxpZCB2aXJ0dWFsIGRvbSBub2RlXCIsIHZub2RlKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgdmFyIG5vZGUgPSAodm5vZGUubmFtZXNwYWNlID09PSBudWxsKSA/XG4gICAgICAgIGRvYy5jcmVhdGVFbGVtZW50KHZub2RlLnRhZ05hbWUpIDpcbiAgICAgICAgZG9jLmNyZWF0ZUVsZW1lbnROUyh2bm9kZS5uYW1lc3BhY2UsIHZub2RlLnRhZ05hbWUpXG5cbiAgICB2YXIgcHJvcHMgPSB2bm9kZS5wcm9wZXJ0aWVzXG4gICAgYXBwbHlQcm9wZXJ0aWVzKG5vZGUsIHByb3BzKVxuXG4gICAgdmFyIGNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW5cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGNoaWxkTm9kZSA9IGNyZWF0ZUVsZW1lbnQoY2hpbGRyZW5baV0sIG9wdHMpXG4gICAgICAgIGlmIChjaGlsZE5vZGUpIHtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoY2hpbGROb2RlKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVcbn1cbiIsIi8vIE1hcHMgYSB2aXJ0dWFsIERPTSB0cmVlIG9udG8gYSByZWFsIERPTSB0cmVlIGluIGFuIGVmZmljaWVudCBtYW5uZXIuXG4vLyBXZSBkb24ndCB3YW50IHRvIHJlYWQgYWxsIG9mIHRoZSBET00gbm9kZXMgaW4gdGhlIHRyZWUgc28gd2UgdXNlXG4vLyB0aGUgaW4tb3JkZXIgdHJlZSBpbmRleGluZyB0byBlbGltaW5hdGUgcmVjdXJzaW9uIGRvd24gY2VydGFpbiBicmFuY2hlcy5cbi8vIFdlIG9ubHkgcmVjdXJzZSBpbnRvIGEgRE9NIG5vZGUgaWYgd2Uga25vdyB0aGF0IGl0IGNvbnRhaW5zIGEgY2hpbGQgb2Zcbi8vIGludGVyZXN0LlxuXG52YXIgbm9DaGlsZCA9IHt9XG5cbm1vZHVsZS5leHBvcnRzID0gZG9tSW5kZXhcblxuZnVuY3Rpb24gZG9tSW5kZXgocm9vdE5vZGUsIHRyZWUsIGluZGljZXMsIG5vZGVzKSB7XG4gICAgaWYgKCFpbmRpY2VzIHx8IGluZGljZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7fVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGluZGljZXMuc29ydChhc2NlbmRpbmcpXG4gICAgICAgIHJldHVybiByZWN1cnNlKHJvb3ROb2RlLCB0cmVlLCBpbmRpY2VzLCBub2RlcywgMClcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlY3Vyc2Uocm9vdE5vZGUsIHRyZWUsIGluZGljZXMsIG5vZGVzLCByb290SW5kZXgpIHtcbiAgICBub2RlcyA9IG5vZGVzIHx8IHt9XG5cblxuICAgIGlmIChyb290Tm9kZSkge1xuICAgICAgICBpZiAoaW5kZXhJblJhbmdlKGluZGljZXMsIHJvb3RJbmRleCwgcm9vdEluZGV4KSkge1xuICAgICAgICAgICAgbm9kZXNbcm9vdEluZGV4XSA9IHJvb3ROb2RlXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdkNoaWxkcmVuID0gdHJlZS5jaGlsZHJlblxuXG4gICAgICAgIGlmICh2Q2hpbGRyZW4pIHtcblxuICAgICAgICAgICAgdmFyIGNoaWxkTm9kZXMgPSByb290Tm9kZS5jaGlsZE5vZGVzXG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJlZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJvb3RJbmRleCArPSAxXG5cbiAgICAgICAgICAgICAgICB2YXIgdkNoaWxkID0gdkNoaWxkcmVuW2ldIHx8IG5vQ2hpbGRcbiAgICAgICAgICAgICAgICB2YXIgbmV4dEluZGV4ID0gcm9vdEluZGV4ICsgKHZDaGlsZC5jb3VudCB8fCAwKVxuXG4gICAgICAgICAgICAgICAgLy8gc2tpcCByZWN1cnNpb24gZG93biB0aGUgdHJlZSBpZiB0aGVyZSBhcmUgbm8gbm9kZXMgZG93biBoZXJlXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4SW5SYW5nZShpbmRpY2VzLCByb290SW5kZXgsIG5leHRJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzZShjaGlsZE5vZGVzW2ldLCB2Q2hpbGQsIGluZGljZXMsIG5vZGVzLCByb290SW5kZXgpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcm9vdEluZGV4ID0gbmV4dEluZGV4XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZXNcbn1cblxuLy8gQmluYXJ5IHNlYXJjaCBmb3IgYW4gaW5kZXggaW4gdGhlIGludGVydmFsIFtsZWZ0LCByaWdodF1cbmZ1bmN0aW9uIGluZGV4SW5SYW5nZShpbmRpY2VzLCBsZWZ0LCByaWdodCkge1xuICAgIGlmIChpbmRpY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICB2YXIgbWluSW5kZXggPSAwXG4gICAgdmFyIG1heEluZGV4ID0gaW5kaWNlcy5sZW5ndGggLSAxXG4gICAgdmFyIGN1cnJlbnRJbmRleFxuICAgIHZhciBjdXJyZW50SXRlbVxuXG4gICAgd2hpbGUgKG1pbkluZGV4IDw9IG1heEluZGV4KSB7XG4gICAgICAgIGN1cnJlbnRJbmRleCA9ICgobWF4SW5kZXggKyBtaW5JbmRleCkgLyAyKSA+PiAwXG4gICAgICAgIGN1cnJlbnRJdGVtID0gaW5kaWNlc1tjdXJyZW50SW5kZXhdXG5cbiAgICAgICAgaWYgKG1pbkluZGV4ID09PSBtYXhJbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRJdGVtID49IGxlZnQgJiYgY3VycmVudEl0ZW0gPD0gcmlnaHRcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50SXRlbSA8IGxlZnQpIHtcbiAgICAgICAgICAgIG1pbkluZGV4ID0gY3VycmVudEluZGV4ICsgMVxuICAgICAgICB9IGVsc2UgIGlmIChjdXJyZW50SXRlbSA+IHJpZ2h0KSB7XG4gICAgICAgICAgICBtYXhJbmRleCA9IGN1cnJlbnRJbmRleCAtIDFcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7XG4gICAgcmV0dXJuIGEgPiBiID8gMSA6IC0xXG59XG4iLCJ2YXIgYXBwbHlQcm9wZXJ0aWVzID0gcmVxdWlyZShcIi4vYXBwbHktcHJvcGVydGllc1wiKVxuXG52YXIgaXNXaWRnZXQgPSByZXF1aXJlKFwiLi4vdm5vZGUvaXMtd2lkZ2V0LmpzXCIpXG52YXIgVlBhdGNoID0gcmVxdWlyZShcIi4uL3Zub2RlL3ZwYXRjaC5qc1wiKVxuXG52YXIgdXBkYXRlV2lkZ2V0ID0gcmVxdWlyZShcIi4vdXBkYXRlLXdpZGdldFwiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcGx5UGF0Y2hcblxuZnVuY3Rpb24gYXBwbHlQYXRjaCh2cGF0Y2gsIGRvbU5vZGUsIHJlbmRlck9wdGlvbnMpIHtcbiAgICB2YXIgdHlwZSA9IHZwYXRjaC50eXBlXG4gICAgdmFyIHZOb2RlID0gdnBhdGNoLnZOb2RlXG4gICAgdmFyIHBhdGNoID0gdnBhdGNoLnBhdGNoXG5cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBWUGF0Y2guUkVNT1ZFOlxuICAgICAgICAgICAgcmV0dXJuIHJlbW92ZU5vZGUoZG9tTm9kZSwgdk5vZGUpXG4gICAgICAgIGNhc2UgVlBhdGNoLklOU0VSVDpcbiAgICAgICAgICAgIHJldHVybiBpbnNlcnROb2RlKGRvbU5vZGUsIHBhdGNoLCByZW5kZXJPcHRpb25zKVxuICAgICAgICBjYXNlIFZQYXRjaC5WVEVYVDpcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmdQYXRjaChkb21Ob2RlLCB2Tm9kZSwgcGF0Y2gsIHJlbmRlck9wdGlvbnMpXG4gICAgICAgIGNhc2UgVlBhdGNoLldJREdFVDpcbiAgICAgICAgICAgIHJldHVybiB3aWRnZXRQYXRjaChkb21Ob2RlLCB2Tm9kZSwgcGF0Y2gsIHJlbmRlck9wdGlvbnMpXG4gICAgICAgIGNhc2UgVlBhdGNoLlZOT0RFOlxuICAgICAgICAgICAgcmV0dXJuIHZOb2RlUGF0Y2goZG9tTm9kZSwgdk5vZGUsIHBhdGNoLCByZW5kZXJPcHRpb25zKVxuICAgICAgICBjYXNlIFZQYXRjaC5PUkRFUjpcbiAgICAgICAgICAgIHJlb3JkZXJDaGlsZHJlbihkb21Ob2RlLCBwYXRjaClcbiAgICAgICAgICAgIHJldHVybiBkb21Ob2RlXG4gICAgICAgIGNhc2UgVlBhdGNoLlBST1BTOlxuICAgICAgICAgICAgYXBwbHlQcm9wZXJ0aWVzKGRvbU5vZGUsIHBhdGNoLCB2Tm9kZS5wcm9wZXJ0aWVzKVxuICAgICAgICAgICAgcmV0dXJuIGRvbU5vZGVcbiAgICAgICAgY2FzZSBWUGF0Y2guVEhVTks6XG4gICAgICAgICAgICByZXR1cm4gcmVwbGFjZVJvb3QoZG9tTm9kZSxcbiAgICAgICAgICAgICAgICByZW5kZXJPcHRpb25zLnBhdGNoKGRvbU5vZGUsIHBhdGNoLCByZW5kZXJPcHRpb25zKSlcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBkb21Ob2RlXG4gICAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVOb2RlKGRvbU5vZGUsIHZOb2RlKSB7XG4gICAgdmFyIHBhcmVudE5vZGUgPSBkb21Ob2RlLnBhcmVudE5vZGVcblxuICAgIGlmIChwYXJlbnROb2RlKSB7XG4gICAgICAgIHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZG9tTm9kZSlcbiAgICB9XG5cbiAgICBkZXN0cm95V2lkZ2V0KGRvbU5vZGUsIHZOb2RlKTtcblxuICAgIHJldHVybiBudWxsXG59XG5cbmZ1bmN0aW9uIGluc2VydE5vZGUocGFyZW50Tm9kZSwgdk5vZGUsIHJlbmRlck9wdGlvbnMpIHtcbiAgICB2YXIgbmV3Tm9kZSA9IHJlbmRlck9wdGlvbnMucmVuZGVyKHZOb2RlLCByZW5kZXJPcHRpb25zKVxuXG4gICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgcGFyZW50Tm9kZS5hcHBlbmRDaGlsZChuZXdOb2RlKVxuICAgIH1cblxuICAgIHJldHVybiBwYXJlbnROb2RlXG59XG5cbmZ1bmN0aW9uIHN0cmluZ1BhdGNoKGRvbU5vZGUsIGxlZnRWTm9kZSwgdlRleHQsIHJlbmRlck9wdGlvbnMpIHtcbiAgICB2YXIgbmV3Tm9kZVxuXG4gICAgaWYgKGRvbU5vZGUubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgICAgZG9tTm9kZS5yZXBsYWNlRGF0YSgwLCBkb21Ob2RlLmxlbmd0aCwgdlRleHQudGV4dClcbiAgICAgICAgbmV3Tm9kZSA9IGRvbU5vZGVcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcGFyZW50Tm9kZSA9IGRvbU5vZGUucGFyZW50Tm9kZVxuICAgICAgICBuZXdOb2RlID0gcmVuZGVyT3B0aW9ucy5yZW5kZXIodlRleHQsIHJlbmRlck9wdGlvbnMpXG5cbiAgICAgICAgaWYgKHBhcmVudE5vZGUgJiYgbmV3Tm9kZSAhPT0gZG9tTm9kZSkge1xuICAgICAgICAgICAgcGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgZG9tTm9kZSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXdOb2RlXG59XG5cbmZ1bmN0aW9uIHdpZGdldFBhdGNoKGRvbU5vZGUsIGxlZnRWTm9kZSwgd2lkZ2V0LCByZW5kZXJPcHRpb25zKSB7XG4gICAgdmFyIHVwZGF0aW5nID0gdXBkYXRlV2lkZ2V0KGxlZnRWTm9kZSwgd2lkZ2V0KVxuICAgIHZhciBuZXdOb2RlXG5cbiAgICBpZiAodXBkYXRpbmcpIHtcbiAgICAgICAgbmV3Tm9kZSA9IHdpZGdldC51cGRhdGUobGVmdFZOb2RlLCBkb21Ob2RlKSB8fCBkb21Ob2RlXG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV3Tm9kZSA9IHJlbmRlck9wdGlvbnMucmVuZGVyKHdpZGdldCwgcmVuZGVyT3B0aW9ucylcbiAgICB9XG5cbiAgICB2YXIgcGFyZW50Tm9kZSA9IGRvbU5vZGUucGFyZW50Tm9kZVxuXG4gICAgaWYgKHBhcmVudE5vZGUgJiYgbmV3Tm9kZSAhPT0gZG9tTm9kZSkge1xuICAgICAgICBwYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdOb2RlLCBkb21Ob2RlKVxuICAgIH1cblxuICAgIGlmICghdXBkYXRpbmcpIHtcbiAgICAgICAgZGVzdHJveVdpZGdldChkb21Ob2RlLCBsZWZ0Vk5vZGUpXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld05vZGVcbn1cblxuZnVuY3Rpb24gdk5vZGVQYXRjaChkb21Ob2RlLCBsZWZ0Vk5vZGUsIHZOb2RlLCByZW5kZXJPcHRpb25zKSB7XG4gICAgdmFyIHBhcmVudE5vZGUgPSBkb21Ob2RlLnBhcmVudE5vZGVcbiAgICB2YXIgbmV3Tm9kZSA9IHJlbmRlck9wdGlvbnMucmVuZGVyKHZOb2RlLCByZW5kZXJPcHRpb25zKVxuXG4gICAgaWYgKHBhcmVudE5vZGUgJiYgbmV3Tm9kZSAhPT0gZG9tTm9kZSkge1xuICAgICAgICBwYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdOb2RlLCBkb21Ob2RlKVxuICAgIH1cblxuICAgIHJldHVybiBuZXdOb2RlXG59XG5cbmZ1bmN0aW9uIGRlc3Ryb3lXaWRnZXQoZG9tTm9kZSwgdykge1xuICAgIGlmICh0eXBlb2Ygdy5kZXN0cm95ID09PSBcImZ1bmN0aW9uXCIgJiYgaXNXaWRnZXQodykpIHtcbiAgICAgICAgdy5kZXN0cm95KGRvbU5vZGUpXG4gICAgfVxufVxuXG5mdW5jdGlvbiByZW9yZGVyQ2hpbGRyZW4oZG9tTm9kZSwgbW92ZXMpIHtcbiAgICB2YXIgY2hpbGROb2RlcyA9IGRvbU5vZGUuY2hpbGROb2Rlc1xuICAgIHZhciBrZXlNYXAgPSB7fVxuICAgIHZhciBub2RlXG4gICAgdmFyIHJlbW92ZVxuICAgIHZhciBpbnNlcnRcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW92ZXMucmVtb3Zlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICByZW1vdmUgPSBtb3Zlcy5yZW1vdmVzW2ldXG4gICAgICAgIG5vZGUgPSBjaGlsZE5vZGVzW3JlbW92ZS5mcm9tXVxuICAgICAgICBpZiAocmVtb3ZlLmtleSkge1xuICAgICAgICAgICAga2V5TWFwW3JlbW92ZS5rZXldID0gbm9kZVxuICAgICAgICB9XG4gICAgICAgIGRvbU5vZGUucmVtb3ZlQ2hpbGQobm9kZSlcbiAgICB9XG5cbiAgICB2YXIgbGVuZ3RoID0gY2hpbGROb2Rlcy5sZW5ndGhcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1vdmVzLmluc2VydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaW5zZXJ0ID0gbW92ZXMuaW5zZXJ0c1tqXVxuICAgICAgICBub2RlID0ga2V5TWFwW2luc2VydC5rZXldXG4gICAgICAgIC8vIHRoaXMgaXMgdGhlIHdlaXJkZXN0IGJ1ZyBpJ3ZlIGV2ZXIgc2VlbiBpbiB3ZWJraXRcbiAgICAgICAgZG9tTm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgaW5zZXJ0LnRvID49IGxlbmd0aCsrID8gbnVsbCA6IGNoaWxkTm9kZXNbaW5zZXJ0LnRvXSlcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VSb290KG9sZFJvb3QsIG5ld1Jvb3QpIHtcbiAgICBpZiAob2xkUm9vdCAmJiBuZXdSb290ICYmIG9sZFJvb3QgIT09IG5ld1Jvb3QgJiYgb2xkUm9vdC5wYXJlbnROb2RlKSB7XG4gICAgICAgIG9sZFJvb3QucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3Um9vdCwgb2xkUm9vdClcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3Um9vdDtcbn1cbiIsInZhciBkb2N1bWVudCA9IHJlcXVpcmUoXCJnbG9iYWwvZG9jdW1lbnRcIilcbnZhciBpc0FycmF5ID0gcmVxdWlyZShcIngtaXMtYXJyYXlcIilcblxudmFyIHJlbmRlciA9IHJlcXVpcmUoXCIuL2NyZWF0ZS1lbGVtZW50XCIpXG52YXIgZG9tSW5kZXggPSByZXF1aXJlKFwiLi9kb20taW5kZXhcIilcbnZhciBwYXRjaE9wID0gcmVxdWlyZShcIi4vcGF0Y2gtb3BcIilcbm1vZHVsZS5leHBvcnRzID0gcGF0Y2hcblxuZnVuY3Rpb24gcGF0Y2gocm9vdE5vZGUsIHBhdGNoZXMsIHJlbmRlck9wdGlvbnMpIHtcbiAgICByZW5kZXJPcHRpb25zID0gcmVuZGVyT3B0aW9ucyB8fCB7fVxuICAgIHJlbmRlck9wdGlvbnMucGF0Y2ggPSByZW5kZXJPcHRpb25zLnBhdGNoICYmIHJlbmRlck9wdGlvbnMucGF0Y2ggIT09IHBhdGNoXG4gICAgICAgID8gcmVuZGVyT3B0aW9ucy5wYXRjaFxuICAgICAgICA6IHBhdGNoUmVjdXJzaXZlXG4gICAgcmVuZGVyT3B0aW9ucy5yZW5kZXIgPSByZW5kZXJPcHRpb25zLnJlbmRlciB8fCByZW5kZXJcblxuICAgIHJldHVybiByZW5kZXJPcHRpb25zLnBhdGNoKHJvb3ROb2RlLCBwYXRjaGVzLCByZW5kZXJPcHRpb25zKVxufVxuXG5mdW5jdGlvbiBwYXRjaFJlY3Vyc2l2ZShyb290Tm9kZSwgcGF0Y2hlcywgcmVuZGVyT3B0aW9ucykge1xuICAgIHZhciBpbmRpY2VzID0gcGF0Y2hJbmRpY2VzKHBhdGNoZXMpXG5cbiAgICBpZiAoaW5kaWNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJvb3ROb2RlXG4gICAgfVxuXG4gICAgdmFyIGluZGV4ID0gZG9tSW5kZXgocm9vdE5vZGUsIHBhdGNoZXMuYSwgaW5kaWNlcylcbiAgICB2YXIgb3duZXJEb2N1bWVudCA9IHJvb3ROb2RlLm93bmVyRG9jdW1lbnRcblxuICAgIGlmICghcmVuZGVyT3B0aW9ucy5kb2N1bWVudCAmJiBvd25lckRvY3VtZW50ICE9PSBkb2N1bWVudCkge1xuICAgICAgICByZW5kZXJPcHRpb25zLmRvY3VtZW50ID0gb3duZXJEb2N1bWVudFxuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kaWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbm9kZUluZGV4ID0gaW5kaWNlc1tpXVxuICAgICAgICByb290Tm9kZSA9IGFwcGx5UGF0Y2gocm9vdE5vZGUsXG4gICAgICAgICAgICBpbmRleFtub2RlSW5kZXhdLFxuICAgICAgICAgICAgcGF0Y2hlc1tub2RlSW5kZXhdLFxuICAgICAgICAgICAgcmVuZGVyT3B0aW9ucylcbiAgICB9XG5cbiAgICByZXR1cm4gcm9vdE5vZGVcbn1cblxuZnVuY3Rpb24gYXBwbHlQYXRjaChyb290Tm9kZSwgZG9tTm9kZSwgcGF0Y2hMaXN0LCByZW5kZXJPcHRpb25zKSB7XG4gICAgaWYgKCFkb21Ob2RlKSB7XG4gICAgICAgIHJldHVybiByb290Tm9kZVxuICAgIH1cblxuICAgIHZhciBuZXdOb2RlXG5cbiAgICBpZiAoaXNBcnJheShwYXRjaExpc3QpKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0Y2hMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBuZXdOb2RlID0gcGF0Y2hPcChwYXRjaExpc3RbaV0sIGRvbU5vZGUsIHJlbmRlck9wdGlvbnMpXG5cbiAgICAgICAgICAgIGlmIChkb21Ob2RlID09PSByb290Tm9kZSkge1xuICAgICAgICAgICAgICAgIHJvb3ROb2RlID0gbmV3Tm9kZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV3Tm9kZSA9IHBhdGNoT3AocGF0Y2hMaXN0LCBkb21Ob2RlLCByZW5kZXJPcHRpb25zKVxuXG4gICAgICAgIGlmIChkb21Ob2RlID09PSByb290Tm9kZSkge1xuICAgICAgICAgICAgcm9vdE5vZGUgPSBuZXdOb2RlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcm9vdE5vZGVcbn1cblxuZnVuY3Rpb24gcGF0Y2hJbmRpY2VzKHBhdGNoZXMpIHtcbiAgICB2YXIgaW5kaWNlcyA9IFtdXG5cbiAgICBmb3IgKHZhciBrZXkgaW4gcGF0Y2hlcykge1xuICAgICAgICBpZiAoa2V5ICE9PSBcImFcIikge1xuICAgICAgICAgICAgaW5kaWNlcy5wdXNoKE51bWJlcihrZXkpKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGljZXNcbn1cbiIsInZhciBpc1dpZGdldCA9IHJlcXVpcmUoXCIuLi92bm9kZS9pcy13aWRnZXQuanNcIilcblxubW9kdWxlLmV4cG9ydHMgPSB1cGRhdGVXaWRnZXRcblxuZnVuY3Rpb24gdXBkYXRlV2lkZ2V0KGEsIGIpIHtcbiAgICBpZiAoaXNXaWRnZXQoYSkgJiYgaXNXaWRnZXQoYikpIHtcbiAgICAgICAgaWYgKFwibmFtZVwiIGluIGEgJiYgXCJuYW1lXCIgaW4gYikge1xuICAgICAgICAgICAgcmV0dXJuIGEuaWQgPT09IGIuaWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhLmluaXQgPT09IGIuaW5pdFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlXG59XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gQXR0cmlidXRlSG9vaztcblxuZnVuY3Rpb24gQXR0cmlidXRlSG9vayhuYW1lc3BhY2UsIHZhbHVlKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEF0dHJpYnV0ZUhvb2spKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0cmlidXRlSG9vayhuYW1lc3BhY2UsIHZhbHVlKTtcbiAgICB9XG5cbiAgICB0aGlzLm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG59XG5cbkF0dHJpYnV0ZUhvb2sucHJvdG90eXBlLmhvb2sgPSBmdW5jdGlvbiAobm9kZSwgcHJvcCwgcHJldikge1xuICAgIGlmIChwcmV2ICYmIHByZXYudHlwZSA9PT0gJ0F0dHJpYnV0ZUhvb2snICYmXG4gICAgICAgIHByZXYudmFsdWUgPT09IHRoaXMudmFsdWUgJiZcbiAgICAgICAgcHJldi5uYW1lc3BhY2UgPT09IHRoaXMubmFtZXNwYWNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBub2RlLnNldEF0dHJpYnV0ZU5TKHRoaXMubmFtZXNwYWNlLCBwcm9wLCB0aGlzLnZhbHVlKTtcbn07XG5cbkF0dHJpYnV0ZUhvb2sucHJvdG90eXBlLnVuaG9vayA9IGZ1bmN0aW9uIChub2RlLCBwcm9wLCBuZXh0KSB7XG4gICAgaWYgKG5leHQgJiYgbmV4dC50eXBlID09PSAnQXR0cmlidXRlSG9vaycgJiZcbiAgICAgICAgbmV4dC5uYW1lc3BhY2UgPT09IHRoaXMubmFtZXNwYWNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgY29sb25Qb3NpdGlvbiA9IHByb3AuaW5kZXhPZignOicpO1xuICAgIHZhciBsb2NhbE5hbWUgPSBjb2xvblBvc2l0aW9uID4gLTEgPyBwcm9wLnN1YnN0cihjb2xvblBvc2l0aW9uICsgMSkgOiBwcm9wO1xuICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlTlModGhpcy5uYW1lc3BhY2UsIGxvY2FsTmFtZSk7XG59O1xuXG5BdHRyaWJ1dGVIb29rLnByb3RvdHlwZS50eXBlID0gJ0F0dHJpYnV0ZUhvb2snO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZTdG9yZSA9IHJlcXVpcmUoJ2V2LXN0b3JlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gRXZIb29rO1xuXG5mdW5jdGlvbiBFdkhvb2sodmFsdWUpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRXZIb29rKSkge1xuICAgICAgICByZXR1cm4gbmV3IEV2SG9vayh2YWx1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xufVxuXG5Fdkhvb2sucHJvdG90eXBlLmhvb2sgPSBmdW5jdGlvbiAobm9kZSwgcHJvcGVydHlOYW1lKSB7XG4gICAgdmFyIGVzID0gRXZTdG9yZShub2RlKTtcbiAgICB2YXIgcHJvcE5hbWUgPSBwcm9wZXJ0eU5hbWUuc3Vic3RyKDMpO1xuXG4gICAgZXNbcHJvcE5hbWVdID0gdGhpcy52YWx1ZTtcbn07XG5cbkV2SG9vay5wcm90b3R5cGUudW5ob29rID0gZnVuY3Rpb24obm9kZSwgcHJvcGVydHlOYW1lKSB7XG4gICAgdmFyIGVzID0gRXZTdG9yZShub2RlKTtcbiAgICB2YXIgcHJvcE5hbWUgPSBwcm9wZXJ0eU5hbWUuc3Vic3RyKDMpO1xuXG4gICAgZXNbcHJvcE5hbWVdID0gdW5kZWZpbmVkO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBTb2Z0U2V0SG9vaztcblxuZnVuY3Rpb24gU29mdFNldEhvb2sodmFsdWUpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU29mdFNldEhvb2spKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29mdFNldEhvb2sodmFsdWUpO1xuICAgIH1cblxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbn1cblxuU29mdFNldEhvb2sucHJvdG90eXBlLmhvb2sgPSBmdW5jdGlvbiAobm9kZSwgcHJvcGVydHlOYW1lKSB7XG4gICAgaWYgKG5vZGVbcHJvcGVydHlOYW1lXSAhPT0gdGhpcy52YWx1ZSkge1xuICAgICAgICBub2RlW3Byb3BlcnR5TmFtZV0gPSB0aGlzLnZhbHVlO1xuICAgIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBzcGxpdCA9IHJlcXVpcmUoJ2Jyb3dzZXItc3BsaXQnKTtcblxudmFyIGNsYXNzSWRTcGxpdCA9IC8oW1xcLiNdP1thLXpBLVowLTlcXHUwMDdGLVxcdUZGRkZfOi1dKykvO1xudmFyIG5vdENsYXNzSWQgPSAvXlxcLnwjLztcblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZVRhZztcblxuZnVuY3Rpb24gcGFyc2VUYWcodGFnLCBwcm9wcykge1xuICAgIGlmICghdGFnKSB7XG4gICAgICAgIHJldHVybiAnRElWJztcbiAgICB9XG5cbiAgICB2YXIgbm9JZCA9ICEocHJvcHMuaGFzT3duUHJvcGVydHkoJ2lkJykpO1xuXG4gICAgdmFyIHRhZ1BhcnRzID0gc3BsaXQodGFnLCBjbGFzc0lkU3BsaXQpO1xuICAgIHZhciB0YWdOYW1lID0gbnVsbDtcblxuICAgIGlmIChub3RDbGFzc0lkLnRlc3QodGFnUGFydHNbMV0pKSB7XG4gICAgICAgIHRhZ05hbWUgPSAnRElWJztcbiAgICB9XG5cbiAgICB2YXIgY2xhc3NlcywgcGFydCwgdHlwZSwgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCB0YWdQYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBwYXJ0ID0gdGFnUGFydHNbaV07XG5cbiAgICAgICAgaWYgKCFwYXJ0KSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHR5cGUgPSBwYXJ0LmNoYXJBdCgwKTtcblxuICAgICAgICBpZiAoIXRhZ05hbWUpIHtcbiAgICAgICAgICAgIHRhZ05hbWUgPSBwYXJ0O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICcuJykge1xuICAgICAgICAgICAgY2xhc3NlcyA9IGNsYXNzZXMgfHwgW107XG4gICAgICAgICAgICBjbGFzc2VzLnB1c2gocGFydC5zdWJzdHJpbmcoMSwgcGFydC5sZW5ndGgpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnIycgJiYgbm9JZCkge1xuICAgICAgICAgICAgcHJvcHMuaWQgPSBwYXJ0LnN1YnN0cmluZygxLCBwYXJ0Lmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2xhc3Nlcykge1xuICAgICAgICBpZiAocHJvcHMuY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICBjbGFzc2VzLnB1c2gocHJvcHMuY2xhc3NOYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3BzLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbignICcpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9wcy5uYW1lc3BhY2UgPyB0YWdOYW1lIDogdGFnTmFtZS50b1VwcGVyQ2FzZSgpO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgREVGQVVMVF9OQU1FU1BBQ0UgPSBudWxsO1xudmFyIEVWX05BTUVTUEFDRSA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAxL3htbC1ldmVudHMnO1xudmFyIFhMSU5LX05BTUVTUEFDRSA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcbnZhciBYTUxfTkFNRVNQQUNFID0gJ2h0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZSc7XG5cbi8vIGh0dHA6Ly93d3cudzMub3JnL1RSL1NWR1RpbnkxMi9hdHRyaWJ1dGVUYWJsZS5odG1sXG4vLyBodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcvYXR0aW5kZXguaHRtbFxudmFyIFNWR19QUk9QRVJUSUVTID0ge1xuICAgICdhYm91dCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdhY2NlbnQtaGVpZ2h0JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2FjY3VtdWxhdGUnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnYWRkaXRpdmUnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnYWxpZ25tZW50LWJhc2VsaW5lJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2FscGhhYmV0aWMnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnYW1wbGl0dWRlJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2FyYWJpYy1mb3JtJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2FzY2VudCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdhdHRyaWJ1dGVOYW1lJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2F0dHJpYnV0ZVR5cGUnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnYXppbXV0aCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdiYW5kd2lkdGgnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnYmFzZUZyZXF1ZW5jeSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdiYXNlUHJvZmlsZSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdiYXNlbGluZS1zaGlmdCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdiYm94JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2JlZ2luJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2JpYXMnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnYnknOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnY2FsY01vZGUnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnY2FwLWhlaWdodCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdjbGFzcyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdjbGlwJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2NsaXAtcGF0aCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdjbGlwLXJ1bGUnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnY2xpcFBhdGhVbml0cyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdjb2xvcic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdjb2xvci1pbnRlcnBvbGF0aW9uJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2NvbG9yLWludGVycG9sYXRpb24tZmlsdGVycyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdjb2xvci1wcm9maWxlJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2NvbG9yLXJlbmRlcmluZyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdjb250ZW50JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2NvbnRlbnRTY3JpcHRUeXBlJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2NvbnRlbnRTdHlsZVR5cGUnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnY3Vyc29yJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2N4JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2N5JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2QnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnZGF0YXR5cGUnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnZGVmYXVsdEFjdGlvbic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdkZXNjZW50JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2RpZmZ1c2VDb25zdGFudCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdkaXJlY3Rpb24nOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnZGlzcGxheSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdkaXZpc29yJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2RvbWluYW50LWJhc2VsaW5lJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2R1cic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdkeCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdkeSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdlZGdlTW9kZSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdlZGl0YWJsZSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdlbGV2YXRpb24nOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnZW5hYmxlLWJhY2tncm91bmQnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnZW5kJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2V2OmV2ZW50JzogRVZfTkFNRVNQQUNFLFxuICAgICdldmVudCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdleHBvbmVudCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2ZpbGwnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnZmlsbC1vcGFjaXR5JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2ZpbGwtcnVsZSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdmaWx0ZXInOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnZmlsdGVyUmVzJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2ZpbHRlclVuaXRzJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2Zsb29kLWNvbG9yJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2Zsb29kLW9wYWNpdHknOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnZm9jdXNIaWdobGlnaHQnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnZm9jdXNhYmxlJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2ZvbnQtZmFtaWx5JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2ZvbnQtc2l6ZSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdmb250LXNpemUtYWRqdXN0JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2ZvbnQtc3RyZXRjaCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdmb250LXN0eWxlJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2ZvbnQtdmFyaWFudCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdmb250LXdlaWdodCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdmb3JtYXQnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnZnJvbSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdmeCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdmeSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdnMSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdnMic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdnbHlwaC1uYW1lJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2dseXBoLW9yaWVudGF0aW9uLWhvcml6b250YWwnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnZ2x5cGgtb3JpZW50YXRpb24tdmVydGljYWwnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnZ2x5cGhSZWYnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnZ3JhZGllbnRUcmFuc2Zvcm0nOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnZ3JhZGllbnRVbml0cyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdoYW5kbGVyJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2hhbmdpbmcnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnaGVpZ2h0JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2hvcml6LWFkdi14JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2hvcml6LW9yaWdpbi14JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2hvcml6LW9yaWdpbi15JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2lkJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2lkZW9ncmFwaGljJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2ltYWdlLXJlbmRlcmluZyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdpbic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdpbjInOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnaW5pdGlhbFZpc2liaWxpdHknOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnaW50ZXJjZXB0JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2snOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnazEnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnazInOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnazMnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnazQnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAna2VybmVsTWF0cml4JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2tlcm5lbFVuaXRMZW5ndGgnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAna2VybmluZyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdrZXlQb2ludHMnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAna2V5U3BsaW5lcyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdrZXlUaW1lcyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdsYW5nJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ2xlbmd0aEFkanVzdCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdsZXR0ZXItc3BhY2luZyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdsaWdodGluZy1jb2xvcic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdsaW1pdGluZ0NvbmVBbmdsZSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdsb2NhbCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdtYXJrZXItZW5kJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ21hcmtlci1taWQnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnbWFya2VyLXN0YXJ0JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ21hcmtlckhlaWdodCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdtYXJrZXJVbml0cyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdtYXJrZXJXaWR0aCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdtYXNrJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ21hc2tDb250ZW50VW5pdHMnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnbWFza1VuaXRzJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ21hdGhlbWF0aWNhbCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdtYXgnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnbWVkaWEnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnbWVkaWFDaGFyYWN0ZXJFbmNvZGluZyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdtZWRpYUNvbnRlbnRFbmNvZGluZ3MnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnbWVkaWFTaXplJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ21lZGlhVGltZSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdtZXRob2QnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnbWluJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ21vZGUnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnbmFtZSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICduYXYtZG93bic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICduYXYtZG93bi1sZWZ0JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ25hdi1kb3duLXJpZ2h0JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ25hdi1sZWZ0JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ25hdi1uZXh0JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ25hdi1wcmV2JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ25hdi1yaWdodCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICduYXYtdXAnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnbmF2LXVwLWxlZnQnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnbmF2LXVwLXJpZ2h0JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ251bU9jdGF2ZXMnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnb2JzZXJ2ZXInOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnb2Zmc2V0JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ29wYWNpdHknOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnb3BlcmF0b3InOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnb3JkZXInOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnb3JpZW50JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ29yaWVudGF0aW9uJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ29yaWdpbic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdvdmVyZmxvdyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdvdmVybGF5JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ292ZXJsaW5lLXBvc2l0aW9uJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ292ZXJsaW5lLXRoaWNrbmVzcyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdwYW5vc2UtMSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdwYXRoJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3BhdGhMZW5ndGgnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAncGF0dGVybkNvbnRlbnRVbml0cyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdwYXR0ZXJuVHJhbnNmb3JtJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3BhdHRlcm5Vbml0cyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdwaGFzZSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdwbGF5YmFja09yZGVyJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3BvaW50ZXItZXZlbnRzJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3BvaW50cyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdwb2ludHNBdFgnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAncG9pbnRzQXRZJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3BvaW50c0F0Wic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdwcmVzZXJ2ZUFscGhhJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3ByZXNlcnZlQXNwZWN0UmF0aW8nOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAncHJpbWl0aXZlVW5pdHMnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAncHJvcGFnYXRlJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3Byb3BlcnR5JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3InOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAncmFkaXVzJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3JlZlgnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAncmVmWSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdyZWwnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAncmVuZGVyaW5nLWludGVudCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdyZXBlYXRDb3VudCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdyZXBlYXREdXInOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAncmVxdWlyZWRFeHRlbnNpb25zJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3JlcXVpcmVkRmVhdHVyZXMnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAncmVxdWlyZWRGb250cyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdyZXF1aXJlZEZvcm1hdHMnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAncmVzb3VyY2UnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAncmVzdGFydCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdyZXN1bHQnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAncmV2JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3JvbGUnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAncm90YXRlJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3J4JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3J5JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3NjYWxlJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3NlZWQnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnc2hhcGUtcmVuZGVyaW5nJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3Nsb3BlJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3NuYXBzaG90VGltZSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdzcGFjaW5nJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3NwZWN1bGFyQ29uc3RhbnQnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnc3BlY3VsYXJFeHBvbmVudCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdzcHJlYWRNZXRob2QnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnc3RhcnRPZmZzZXQnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnc3RkRGV2aWF0aW9uJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3N0ZW1oJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3N0ZW12JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3N0aXRjaFRpbGVzJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3N0b3AtY29sb3InOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnc3RvcC1vcGFjaXR5JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3N0cmlrZXRocm91Z2gtcG9zaXRpb24nOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnc3RyaWtldGhyb3VnaC10aGlja25lc3MnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnc3RyaW5nJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3N0cm9rZSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdzdHJva2UtZGFzaGFycmF5JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3N0cm9rZS1kYXNob2Zmc2V0JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3N0cm9rZS1saW5lY2FwJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3N0cm9rZS1saW5lam9pbic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdzdHJva2UtbWl0ZXJsaW1pdCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdzdHJva2Utb3BhY2l0eSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdzdHJva2Utd2lkdGgnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnc3VyZmFjZVNjYWxlJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3N5bmNCZWhhdmlvcic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdzeW5jQmVoYXZpb3JEZWZhdWx0JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3N5bmNNYXN0ZXInOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnc3luY1RvbGVyYW5jZSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdzeW5jVG9sZXJhbmNlRGVmYXVsdCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICdzeXN0ZW1MYW5ndWFnZSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd0YWJsZVZhbHVlcyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd0YXJnZXQnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAndGFyZ2V0WCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd0YXJnZXRZJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3RleHQtYW5jaG9yJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3RleHQtZGVjb3JhdGlvbic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd0ZXh0LXJlbmRlcmluZyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd0ZXh0TGVuZ3RoJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3RpbWVsaW5lQmVnaW4nOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAndGl0bGUnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAndG8nOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAndHJhbnNmb3JtJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3RyYW5zZm9ybUJlaGF2aW9yJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3R5cGUnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAndHlwZW9mJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3UxJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3UyJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3VuZGVybGluZS1wb3NpdGlvbic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd1bmRlcmxpbmUtdGhpY2tuZXNzJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3VuaWNvZGUnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAndW5pY29kZS1iaWRpJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3VuaWNvZGUtcmFuZ2UnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAndW5pdHMtcGVyLWVtJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3YtYWxwaGFiZXRpYyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd2LWhhbmdpbmcnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAndi1pZGVvZ3JhcGhpYyc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd2LW1hdGhlbWF0aWNhbCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd2YWx1ZXMnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAndmVyc2lvbic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd2ZXJ0LWFkdi15JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3ZlcnQtb3JpZ2luLXgnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAndmVydC1vcmlnaW4teSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd2aWV3Qm94JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3ZpZXdUYXJnZXQnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAndmlzaWJpbGl0eSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd3aWR0aCc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd3aWR0aHMnOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAnd29yZC1zcGFjaW5nJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3dyaXRpbmctbW9kZSc6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd4JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3gtaGVpZ2h0JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3gxJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3gyJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3hDaGFubmVsU2VsZWN0b3InOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAneGxpbms6YWN0dWF0ZSc6IFhMSU5LX05BTUVTUEFDRSxcbiAgICAneGxpbms6YXJjcm9sZSc6IFhMSU5LX05BTUVTUEFDRSxcbiAgICAneGxpbms6aHJlZic6IFhMSU5LX05BTUVTUEFDRSxcbiAgICAneGxpbms6cm9sZSc6IFhMSU5LX05BTUVTUEFDRSxcbiAgICAneGxpbms6c2hvdyc6IFhMSU5LX05BTUVTUEFDRSxcbiAgICAneGxpbms6dGl0bGUnOiBYTElOS19OQU1FU1BBQ0UsXG4gICAgJ3hsaW5rOnR5cGUnOiBYTElOS19OQU1FU1BBQ0UsXG4gICAgJ3htbDpiYXNlJzogWE1MX05BTUVTUEFDRSxcbiAgICAneG1sOmlkJzogWE1MX05BTUVTUEFDRSxcbiAgICAneG1sOmxhbmcnOiBYTUxfTkFNRVNQQUNFLFxuICAgICd4bWw6c3BhY2UnOiBYTUxfTkFNRVNQQUNFLFxuICAgICd5JzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3kxJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3kyJzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgJ3lDaGFubmVsU2VsZWN0b3InOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAneic6IERFRkFVTFRfTkFNRVNQQUNFLFxuICAgICd6b29tQW5kUGFuJzogREVGQVVMVF9OQU1FU1BBQ0Vcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU1ZHQXR0cmlidXRlTmFtZXNwYWNlO1xuXG5mdW5jdGlvbiBTVkdBdHRyaWJ1dGVOYW1lc3BhY2UodmFsdWUpIHtcbiAgaWYgKFNWR19QUk9QRVJUSUVTLmhhc093blByb3BlcnR5KHZhbHVlKSkge1xuICAgIHJldHVybiBTVkdfUFJPUEVSVElFU1t2YWx1ZV07XG4gIH1cbn1cbiIsInZhciBpc1ZOb2RlID0gcmVxdWlyZShcIi4vaXMtdm5vZGVcIilcbnZhciBpc1ZUZXh0ID0gcmVxdWlyZShcIi4vaXMtdnRleHRcIilcbnZhciBpc1dpZGdldCA9IHJlcXVpcmUoXCIuL2lzLXdpZGdldFwiKVxudmFyIGlzVGh1bmsgPSByZXF1aXJlKFwiLi9pcy10aHVua1wiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhbmRsZVRodW5rXG5cbmZ1bmN0aW9uIGhhbmRsZVRodW5rKGEsIGIpIHtcbiAgICB2YXIgcmVuZGVyZWRBID0gYVxuICAgIHZhciByZW5kZXJlZEIgPSBiXG5cbiAgICBpZiAoaXNUaHVuayhiKSkge1xuICAgICAgICByZW5kZXJlZEIgPSByZW5kZXJUaHVuayhiLCBhKVxuICAgIH1cblxuICAgIGlmIChpc1RodW5rKGEpKSB7XG4gICAgICAgIHJlbmRlcmVkQSA9IHJlbmRlclRodW5rKGEsIG51bGwpXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYTogcmVuZGVyZWRBLFxuICAgICAgICBiOiByZW5kZXJlZEJcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlbmRlclRodW5rKHRodW5rLCBwcmV2aW91cykge1xuICAgIHZhciByZW5kZXJlZFRodW5rID0gdGh1bmsudm5vZGVcblxuICAgIGlmICghcmVuZGVyZWRUaHVuaykge1xuICAgICAgICByZW5kZXJlZFRodW5rID0gdGh1bmsudm5vZGUgPSB0aHVuay5yZW5kZXIocHJldmlvdXMpXG4gICAgfVxuXG4gICAgaWYgKCEoaXNWTm9kZShyZW5kZXJlZFRodW5rKSB8fFxuICAgICAgICAgICAgaXNWVGV4dChyZW5kZXJlZFRodW5rKSB8fFxuICAgICAgICAgICAgaXNXaWRnZXQocmVuZGVyZWRUaHVuaykpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInRodW5rIGRpZCBub3QgcmV0dXJuIGEgdmFsaWQgbm9kZVwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVuZGVyZWRUaHVua1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBpc1RodW5rXHJcblxyXG5mdW5jdGlvbiBpc1RodW5rKHQpIHtcclxuICAgIHJldHVybiB0ICYmIHQudHlwZSA9PT0gXCJUaHVua1wiXHJcbn1cclxuIiwibW9kdWxlLmV4cG9ydHMgPSBpc0hvb2tcblxuZnVuY3Rpb24gaXNIb29rKGhvb2spIHtcbiAgICByZXR1cm4gaG9vayAmJlxuICAgICAgKHR5cGVvZiBob29rLmhvb2sgPT09IFwiZnVuY3Rpb25cIiAmJiAhaG9vay5oYXNPd25Qcm9wZXJ0eShcImhvb2tcIikgfHxcbiAgICAgICB0eXBlb2YgaG9vay51bmhvb2sgPT09IFwiZnVuY3Rpb25cIiAmJiAhaG9vay5oYXNPd25Qcm9wZXJ0eShcInVuaG9va1wiKSlcbn1cbiIsInZhciB2ZXJzaW9uID0gcmVxdWlyZShcIi4vdmVyc2lvblwiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzVmlydHVhbE5vZGVcblxuZnVuY3Rpb24gaXNWaXJ0dWFsTm9kZSh4KSB7XG4gICAgcmV0dXJuIHggJiYgeC50eXBlID09PSBcIlZpcnR1YWxOb2RlXCIgJiYgeC52ZXJzaW9uID09PSB2ZXJzaW9uXG59XG4iLCJ2YXIgdmVyc2lvbiA9IHJlcXVpcmUoXCIuL3ZlcnNpb25cIilcblxubW9kdWxlLmV4cG9ydHMgPSBpc1ZpcnR1YWxUZXh0XG5cbmZ1bmN0aW9uIGlzVmlydHVhbFRleHQoeCkge1xuICAgIHJldHVybiB4ICYmIHgudHlwZSA9PT0gXCJWaXJ0dWFsVGV4dFwiICYmIHgudmVyc2lvbiA9PT0gdmVyc2lvblxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBpc1dpZGdldFxuXG5mdW5jdGlvbiBpc1dpZGdldCh3KSB7XG4gICAgcmV0dXJuIHcgJiYgdy50eXBlID09PSBcIldpZGdldFwiXG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IFwiMlwiXG4iLCJ2YXIgdmVyc2lvbiA9IHJlcXVpcmUoXCIuL3ZlcnNpb25cIilcbnZhciBpc1ZOb2RlID0gcmVxdWlyZShcIi4vaXMtdm5vZGVcIilcbnZhciBpc1dpZGdldCA9IHJlcXVpcmUoXCIuL2lzLXdpZGdldFwiKVxudmFyIGlzVGh1bmsgPSByZXF1aXJlKFwiLi9pcy10aHVua1wiKVxudmFyIGlzVkhvb2sgPSByZXF1aXJlKFwiLi9pcy12aG9va1wiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IFZpcnR1YWxOb2RlXG5cbnZhciBub1Byb3BlcnRpZXMgPSB7fVxudmFyIG5vQ2hpbGRyZW4gPSBbXVxuXG5mdW5jdGlvbiBWaXJ0dWFsTm9kZSh0YWdOYW1lLCBwcm9wZXJ0aWVzLCBjaGlsZHJlbiwga2V5LCBuYW1lc3BhY2UpIHtcbiAgICB0aGlzLnRhZ05hbWUgPSB0YWdOYW1lXG4gICAgdGhpcy5wcm9wZXJ0aWVzID0gcHJvcGVydGllcyB8fCBub1Byb3BlcnRpZXNcbiAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW4gfHwgbm9DaGlsZHJlblxuICAgIHRoaXMua2V5ID0ga2V5ICE9IG51bGwgPyBTdHJpbmcoa2V5KSA6IHVuZGVmaW5lZFxuICAgIHRoaXMubmFtZXNwYWNlID0gKHR5cGVvZiBuYW1lc3BhY2UgPT09IFwic3RyaW5nXCIpID8gbmFtZXNwYWNlIDogbnVsbFxuXG4gICAgdmFyIGNvdW50ID0gKGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCkgfHwgMFxuICAgIHZhciBkZXNjZW5kYW50cyA9IDBcbiAgICB2YXIgaGFzV2lkZ2V0cyA9IGZhbHNlXG4gICAgdmFyIGhhc1RodW5rcyA9IGZhbHNlXG4gICAgdmFyIGRlc2NlbmRhbnRIb29rcyA9IGZhbHNlXG4gICAgdmFyIGhvb2tzXG5cbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gcHJvcGVydGllc1twcm9wTmFtZV1cbiAgICAgICAgICAgIGlmIChpc1ZIb29rKHByb3BlcnR5KSAmJiBwcm9wZXJ0eS51bmhvb2spIHtcbiAgICAgICAgICAgICAgICBpZiAoIWhvb2tzKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvb2tzID0ge31cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBob29rc1twcm9wTmFtZV0gPSBwcm9wZXJ0eVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldXG4gICAgICAgIGlmIChpc1ZOb2RlKGNoaWxkKSkge1xuICAgICAgICAgICAgZGVzY2VuZGFudHMgKz0gY2hpbGQuY291bnQgfHwgMFxuXG4gICAgICAgICAgICBpZiAoIWhhc1dpZGdldHMgJiYgY2hpbGQuaGFzV2lkZ2V0cykge1xuICAgICAgICAgICAgICAgIGhhc1dpZGdldHMgPSB0cnVlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghaGFzVGh1bmtzICYmIGNoaWxkLmhhc1RodW5rcykge1xuICAgICAgICAgICAgICAgIGhhc1RodW5rcyA9IHRydWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFkZXNjZW5kYW50SG9va3MgJiYgKGNoaWxkLmhvb2tzIHx8IGNoaWxkLmRlc2NlbmRhbnRIb29rcykpIHtcbiAgICAgICAgICAgICAgICBkZXNjZW5kYW50SG9va3MgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIWhhc1dpZGdldHMgJiYgaXNXaWRnZXQoY2hpbGQpKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNoaWxkLmRlc3Ryb3kgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIGhhc1dpZGdldHMgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIWhhc1RodW5rcyAmJiBpc1RodW5rKGNoaWxkKSkge1xuICAgICAgICAgICAgaGFzVGh1bmtzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY291bnQgPSBjb3VudCArIGRlc2NlbmRhbnRzXG4gICAgdGhpcy5oYXNXaWRnZXRzID0gaGFzV2lkZ2V0c1xuICAgIHRoaXMuaGFzVGh1bmtzID0gaGFzVGh1bmtzXG4gICAgdGhpcy5ob29rcyA9IGhvb2tzXG4gICAgdGhpcy5kZXNjZW5kYW50SG9va3MgPSBkZXNjZW5kYW50SG9va3Ncbn1cblxuVmlydHVhbE5vZGUucHJvdG90eXBlLnZlcnNpb24gPSB2ZXJzaW9uXG5WaXJ0dWFsTm9kZS5wcm90b3R5cGUudHlwZSA9IFwiVmlydHVhbE5vZGVcIlxuIiwidmFyIHZlcnNpb24gPSByZXF1aXJlKFwiLi92ZXJzaW9uXCIpXG5cblZpcnR1YWxQYXRjaC5OT05FID0gMFxuVmlydHVhbFBhdGNoLlZURVhUID0gMVxuVmlydHVhbFBhdGNoLlZOT0RFID0gMlxuVmlydHVhbFBhdGNoLldJREdFVCA9IDNcblZpcnR1YWxQYXRjaC5QUk9QUyA9IDRcblZpcnR1YWxQYXRjaC5PUkRFUiA9IDVcblZpcnR1YWxQYXRjaC5JTlNFUlQgPSA2XG5WaXJ0dWFsUGF0Y2guUkVNT1ZFID0gN1xuVmlydHVhbFBhdGNoLlRIVU5LID0gOFxuXG5tb2R1bGUuZXhwb3J0cyA9IFZpcnR1YWxQYXRjaFxuXG5mdW5jdGlvbiBWaXJ0dWFsUGF0Y2godHlwZSwgdk5vZGUsIHBhdGNoKSB7XG4gICAgdGhpcy50eXBlID0gTnVtYmVyKHR5cGUpXG4gICAgdGhpcy52Tm9kZSA9IHZOb2RlXG4gICAgdGhpcy5wYXRjaCA9IHBhdGNoXG59XG5cblZpcnR1YWxQYXRjaC5wcm90b3R5cGUudmVyc2lvbiA9IHZlcnNpb25cblZpcnR1YWxQYXRjaC5wcm90b3R5cGUudHlwZSA9IFwiVmlydHVhbFBhdGNoXCJcbiIsInZhciB2ZXJzaW9uID0gcmVxdWlyZShcIi4vdmVyc2lvblwiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IFZpcnR1YWxUZXh0XG5cbmZ1bmN0aW9uIFZpcnR1YWxUZXh0KHRleHQpIHtcbiAgICB0aGlzLnRleHQgPSBTdHJpbmcodGV4dClcbn1cblxuVmlydHVhbFRleHQucHJvdG90eXBlLnZlcnNpb24gPSB2ZXJzaW9uXG5WaXJ0dWFsVGV4dC5wcm90b3R5cGUudHlwZSA9IFwiVmlydHVhbFRleHRcIlxuIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZShcImlzLW9iamVjdFwiKVxudmFyIGlzSG9vayA9IHJlcXVpcmUoXCIuLi92bm9kZS9pcy12aG9va1wiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRpZmZQcm9wc1xuXG5mdW5jdGlvbiBkaWZmUHJvcHMoYSwgYikge1xuICAgIHZhciBkaWZmXG5cbiAgICBmb3IgKHZhciBhS2V5IGluIGEpIHtcbiAgICAgICAgaWYgKCEoYUtleSBpbiBiKSkge1xuICAgICAgICAgICAgZGlmZiA9IGRpZmYgfHwge31cbiAgICAgICAgICAgIGRpZmZbYUtleV0gPSB1bmRlZmluZWRcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhVmFsdWUgPSBhW2FLZXldXG4gICAgICAgIHZhciBiVmFsdWUgPSBiW2FLZXldXG5cbiAgICAgICAgaWYgKGFWYWx1ZSA9PT0gYlZhbHVlKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KGFWYWx1ZSkgJiYgaXNPYmplY3QoYlZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKGdldFByb3RvdHlwZShiVmFsdWUpICE9PSBnZXRQcm90b3R5cGUoYVZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGRpZmYgPSBkaWZmIHx8IHt9XG4gICAgICAgICAgICAgICAgZGlmZlthS2V5XSA9IGJWYWx1ZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0hvb2soYlZhbHVlKSkge1xuICAgICAgICAgICAgICAgICBkaWZmID0gZGlmZiB8fCB7fVxuICAgICAgICAgICAgICAgICBkaWZmW2FLZXldID0gYlZhbHVlXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3REaWZmID0gZGlmZlByb3BzKGFWYWx1ZSwgYlZhbHVlKVxuICAgICAgICAgICAgICAgIGlmIChvYmplY3REaWZmKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpZmYgPSBkaWZmIHx8IHt9XG4gICAgICAgICAgICAgICAgICAgIGRpZmZbYUtleV0gPSBvYmplY3REaWZmXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGlmZiA9IGRpZmYgfHwge31cbiAgICAgICAgICAgIGRpZmZbYUtleV0gPSBiVmFsdWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIGJLZXkgaW4gYikge1xuICAgICAgICBpZiAoIShiS2V5IGluIGEpKSB7XG4gICAgICAgICAgICBkaWZmID0gZGlmZiB8fCB7fVxuICAgICAgICAgICAgZGlmZltiS2V5XSA9IGJbYktleV1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkaWZmXG59XG5cbmZ1bmN0aW9uIGdldFByb3RvdHlwZSh2YWx1ZSkge1xuICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKSB7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSlcbiAgfSBlbHNlIGlmICh2YWx1ZS5fX3Byb3RvX18pIHtcbiAgICByZXR1cm4gdmFsdWUuX19wcm90b19fXG4gIH0gZWxzZSBpZiAodmFsdWUuY29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gdmFsdWUuY29uc3RydWN0b3IucHJvdG90eXBlXG4gIH1cbn1cbiIsInZhciBpc0FycmF5ID0gcmVxdWlyZShcIngtaXMtYXJyYXlcIilcblxudmFyIFZQYXRjaCA9IHJlcXVpcmUoXCIuLi92bm9kZS92cGF0Y2hcIilcbnZhciBpc1ZOb2RlID0gcmVxdWlyZShcIi4uL3Zub2RlL2lzLXZub2RlXCIpXG52YXIgaXNWVGV4dCA9IHJlcXVpcmUoXCIuLi92bm9kZS9pcy12dGV4dFwiKVxudmFyIGlzV2lkZ2V0ID0gcmVxdWlyZShcIi4uL3Zub2RlL2lzLXdpZGdldFwiKVxudmFyIGlzVGh1bmsgPSByZXF1aXJlKFwiLi4vdm5vZGUvaXMtdGh1bmtcIilcbnZhciBoYW5kbGVUaHVuayA9IHJlcXVpcmUoXCIuLi92bm9kZS9oYW5kbGUtdGh1bmtcIilcblxudmFyIGRpZmZQcm9wcyA9IHJlcXVpcmUoXCIuL2RpZmYtcHJvcHNcIilcblxubW9kdWxlLmV4cG9ydHMgPSBkaWZmXG5cbmZ1bmN0aW9uIGRpZmYoYSwgYikge1xuICAgIHZhciBwYXRjaCA9IHsgYTogYSB9XG4gICAgd2FsayhhLCBiLCBwYXRjaCwgMClcbiAgICByZXR1cm4gcGF0Y2hcbn1cblxuZnVuY3Rpb24gd2FsayhhLCBiLCBwYXRjaCwgaW5kZXgpIHtcbiAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgYXBwbHkgPSBwYXRjaFtpbmRleF1cbiAgICB2YXIgYXBwbHlDbGVhciA9IGZhbHNlXG5cbiAgICBpZiAoaXNUaHVuayhhKSB8fCBpc1RodW5rKGIpKSB7XG4gICAgICAgIHRodW5rcyhhLCBiLCBwYXRjaCwgaW5kZXgpXG4gICAgfSBlbHNlIGlmIChiID09IG51bGwpIHtcblxuICAgICAgICAvLyBJZiBhIGlzIGEgd2lkZ2V0IHdlIHdpbGwgYWRkIGEgcmVtb3ZlIHBhdGNoIGZvciBpdFxuICAgICAgICAvLyBPdGhlcndpc2UgYW55IGNoaWxkIHdpZGdldHMvaG9va3MgbXVzdCBiZSBkZXN0cm95ZWQuXG4gICAgICAgIC8vIFRoaXMgcHJldmVudHMgYWRkaW5nIHR3byByZW1vdmUgcGF0Y2hlcyBmb3IgYSB3aWRnZXQuXG4gICAgICAgIGlmICghaXNXaWRnZXQoYSkpIHtcbiAgICAgICAgICAgIGNsZWFyU3RhdGUoYSwgcGF0Y2gsIGluZGV4KVxuICAgICAgICAgICAgYXBwbHkgPSBwYXRjaFtpbmRleF1cbiAgICAgICAgfVxuXG4gICAgICAgIGFwcGx5ID0gYXBwZW5kUGF0Y2goYXBwbHksIG5ldyBWUGF0Y2goVlBhdGNoLlJFTU9WRSwgYSwgYikpXG4gICAgfSBlbHNlIGlmIChpc1ZOb2RlKGIpKSB7XG4gICAgICAgIGlmIChpc1ZOb2RlKGEpKSB7XG4gICAgICAgICAgICBpZiAoYS50YWdOYW1lID09PSBiLnRhZ05hbWUgJiZcbiAgICAgICAgICAgICAgICBhLm5hbWVzcGFjZSA9PT0gYi5uYW1lc3BhY2UgJiZcbiAgICAgICAgICAgICAgICBhLmtleSA9PT0gYi5rZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcHNQYXRjaCA9IGRpZmZQcm9wcyhhLnByb3BlcnRpZXMsIGIucHJvcGVydGllcylcbiAgICAgICAgICAgICAgICBpZiAocHJvcHNQYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBhcHBseSA9IGFwcGVuZFBhdGNoKGFwcGx5LFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFZQYXRjaChWUGF0Y2guUFJPUFMsIGEsIHByb3BzUGF0Y2gpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhcHBseSA9IGRpZmZDaGlsZHJlbihhLCBiLCBwYXRjaCwgYXBwbHksIGluZGV4KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcHBseSA9IGFwcGVuZFBhdGNoKGFwcGx5LCBuZXcgVlBhdGNoKFZQYXRjaC5WTk9ERSwgYSwgYikpXG4gICAgICAgICAgICAgICAgYXBwbHlDbGVhciA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwcGx5ID0gYXBwZW5kUGF0Y2goYXBwbHksIG5ldyBWUGF0Y2goVlBhdGNoLlZOT0RFLCBhLCBiKSlcbiAgICAgICAgICAgIGFwcGx5Q2xlYXIgPSB0cnVlXG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzVlRleHQoYikpIHtcbiAgICAgICAgaWYgKCFpc1ZUZXh0KGEpKSB7XG4gICAgICAgICAgICBhcHBseSA9IGFwcGVuZFBhdGNoKGFwcGx5LCBuZXcgVlBhdGNoKFZQYXRjaC5WVEVYVCwgYSwgYikpXG4gICAgICAgICAgICBhcHBseUNsZWFyID0gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKGEudGV4dCAhPT0gYi50ZXh0KSB7XG4gICAgICAgICAgICBhcHBseSA9IGFwcGVuZFBhdGNoKGFwcGx5LCBuZXcgVlBhdGNoKFZQYXRjaC5WVEVYVCwgYSwgYikpXG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzV2lkZ2V0KGIpKSB7XG4gICAgICAgIGlmICghaXNXaWRnZXQoYSkpIHtcbiAgICAgICAgICAgIGFwcGx5Q2xlYXIgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBhcHBseSA9IGFwcGVuZFBhdGNoKGFwcGx5LCBuZXcgVlBhdGNoKFZQYXRjaC5XSURHRVQsIGEsIGIpKVxuICAgIH1cblxuICAgIGlmIChhcHBseSkge1xuICAgICAgICBwYXRjaFtpbmRleF0gPSBhcHBseVxuICAgIH1cblxuICAgIGlmIChhcHBseUNsZWFyKSB7XG4gICAgICAgIGNsZWFyU3RhdGUoYSwgcGF0Y2gsIGluZGV4KVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZGlmZkNoaWxkcmVuKGEsIGIsIHBhdGNoLCBhcHBseSwgaW5kZXgpIHtcbiAgICB2YXIgYUNoaWxkcmVuID0gYS5jaGlsZHJlblxuICAgIHZhciBvcmRlcmVkU2V0ID0gcmVvcmRlcihhQ2hpbGRyZW4sIGIuY2hpbGRyZW4pXG4gICAgdmFyIGJDaGlsZHJlbiA9IG9yZGVyZWRTZXQuY2hpbGRyZW5cblxuICAgIHZhciBhTGVuID0gYUNoaWxkcmVuLmxlbmd0aFxuICAgIHZhciBiTGVuID0gYkNoaWxkcmVuLmxlbmd0aFxuICAgIHZhciBsZW4gPSBhTGVuID4gYkxlbiA/IGFMZW4gOiBiTGVuXG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBsZWZ0Tm9kZSA9IGFDaGlsZHJlbltpXVxuICAgICAgICB2YXIgcmlnaHROb2RlID0gYkNoaWxkcmVuW2ldXG4gICAgICAgIGluZGV4ICs9IDFcblxuICAgICAgICBpZiAoIWxlZnROb2RlKSB7XG4gICAgICAgICAgICBpZiAocmlnaHROb2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gRXhjZXNzIG5vZGVzIGluIGIgbmVlZCB0byBiZSBhZGRlZFxuICAgICAgICAgICAgICAgIGFwcGx5ID0gYXBwZW5kUGF0Y2goYXBwbHksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWUGF0Y2goVlBhdGNoLklOU0VSVCwgbnVsbCwgcmlnaHROb2RlKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdhbGsobGVmdE5vZGUsIHJpZ2h0Tm9kZSwgcGF0Y2gsIGluZGV4KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzVk5vZGUobGVmdE5vZGUpICYmIGxlZnROb2RlLmNvdW50KSB7XG4gICAgICAgICAgICBpbmRleCArPSBsZWZ0Tm9kZS5jb3VudFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9yZGVyZWRTZXQubW92ZXMpIHtcbiAgICAgICAgLy8gUmVvcmRlciBub2RlcyBsYXN0XG4gICAgICAgIGFwcGx5ID0gYXBwZW5kUGF0Y2goYXBwbHksIG5ldyBWUGF0Y2goXG4gICAgICAgICAgICBWUGF0Y2guT1JERVIsXG4gICAgICAgICAgICBhLFxuICAgICAgICAgICAgb3JkZXJlZFNldC5tb3Zlc1xuICAgICAgICApKVxuICAgIH1cblxuICAgIHJldHVybiBhcHBseVxufVxuXG5mdW5jdGlvbiBjbGVhclN0YXRlKHZOb2RlLCBwYXRjaCwgaW5kZXgpIHtcbiAgICAvLyBUT0RPOiBNYWtlIHRoaXMgYSBzaW5nbGUgd2Fsaywgbm90IHR3b1xuICAgIHVuaG9vayh2Tm9kZSwgcGF0Y2gsIGluZGV4KVxuICAgIGRlc3Ryb3lXaWRnZXRzKHZOb2RlLCBwYXRjaCwgaW5kZXgpXG59XG5cbi8vIFBhdGNoIHJlY29yZHMgZm9yIGFsbCBkZXN0cm95ZWQgd2lkZ2V0cyBtdXN0IGJlIGFkZGVkIGJlY2F1c2Ugd2UgbmVlZFxuLy8gYSBET00gbm9kZSByZWZlcmVuY2UgZm9yIHRoZSBkZXN0cm95IGZ1bmN0aW9uXG5mdW5jdGlvbiBkZXN0cm95V2lkZ2V0cyh2Tm9kZSwgcGF0Y2gsIGluZGV4KSB7XG4gICAgaWYgKGlzV2lkZ2V0KHZOb2RlKSkge1xuICAgICAgICBpZiAodHlwZW9mIHZOb2RlLmRlc3Ryb3kgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcGF0Y2hbaW5kZXhdID0gYXBwZW5kUGF0Y2goXG4gICAgICAgICAgICAgICAgcGF0Y2hbaW5kZXhdLFxuICAgICAgICAgICAgICAgIG5ldyBWUGF0Y2goVlBhdGNoLlJFTU9WRSwgdk5vZGUsIG51bGwpXG4gICAgICAgICAgICApXG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzVk5vZGUodk5vZGUpICYmICh2Tm9kZS5oYXNXaWRnZXRzIHx8IHZOb2RlLmhhc1RodW5rcykpIHtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gdk5vZGUuY2hpbGRyZW5cbiAgICAgICAgdmFyIGxlbiA9IGNoaWxkcmVuLmxlbmd0aFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXVxuICAgICAgICAgICAgaW5kZXggKz0gMVxuXG4gICAgICAgICAgICBkZXN0cm95V2lkZ2V0cyhjaGlsZCwgcGF0Y2gsIGluZGV4KVxuXG4gICAgICAgICAgICBpZiAoaXNWTm9kZShjaGlsZCkgJiYgY2hpbGQuY291bnQpIHtcbiAgICAgICAgICAgICAgICBpbmRleCArPSBjaGlsZC5jb3VudFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1RodW5rKHZOb2RlKSkge1xuICAgICAgICB0aHVua3Modk5vZGUsIG51bGwsIHBhdGNoLCBpbmRleClcbiAgICB9XG59XG5cbi8vIENyZWF0ZSBhIHN1Yi1wYXRjaCBmb3IgdGh1bmtzXG5mdW5jdGlvbiB0aHVua3MoYSwgYiwgcGF0Y2gsIGluZGV4KSB7XG4gICAgdmFyIG5vZGVzID0gaGFuZGxlVGh1bmsoYSwgYilcbiAgICB2YXIgdGh1bmtQYXRjaCA9IGRpZmYobm9kZXMuYSwgbm9kZXMuYilcbiAgICBpZiAoaGFzUGF0Y2hlcyh0aHVua1BhdGNoKSkge1xuICAgICAgICBwYXRjaFtpbmRleF0gPSBuZXcgVlBhdGNoKFZQYXRjaC5USFVOSywgbnVsbCwgdGh1bmtQYXRjaClcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGhhc1BhdGNoZXMocGF0Y2gpIHtcbiAgICBmb3IgKHZhciBpbmRleCBpbiBwYXRjaCkge1xuICAgICAgICBpZiAoaW5kZXggIT09IFwiYVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlXG59XG5cbi8vIEV4ZWN1dGUgaG9va3Mgd2hlbiB0d28gbm9kZXMgYXJlIGlkZW50aWNhbFxuZnVuY3Rpb24gdW5ob29rKHZOb2RlLCBwYXRjaCwgaW5kZXgpIHtcbiAgICBpZiAoaXNWTm9kZSh2Tm9kZSkpIHtcbiAgICAgICAgaWYgKHZOb2RlLmhvb2tzKSB7XG4gICAgICAgICAgICBwYXRjaFtpbmRleF0gPSBhcHBlbmRQYXRjaChcbiAgICAgICAgICAgICAgICBwYXRjaFtpbmRleF0sXG4gICAgICAgICAgICAgICAgbmV3IFZQYXRjaChcbiAgICAgICAgICAgICAgICAgICAgVlBhdGNoLlBST1BTLFxuICAgICAgICAgICAgICAgICAgICB2Tm9kZSxcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkS2V5cyh2Tm9kZS5ob29rcylcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodk5vZGUuZGVzY2VuZGFudEhvb2tzIHx8IHZOb2RlLmhhc1RodW5rcykge1xuICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gdk5vZGUuY2hpbGRyZW5cbiAgICAgICAgICAgIHZhciBsZW4gPSBjaGlsZHJlbi5sZW5ndGhcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXVxuICAgICAgICAgICAgICAgIGluZGV4ICs9IDFcblxuICAgICAgICAgICAgICAgIHVuaG9vayhjaGlsZCwgcGF0Y2gsIGluZGV4KVxuXG4gICAgICAgICAgICAgICAgaWYgKGlzVk5vZGUoY2hpbGQpICYmIGNoaWxkLmNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ICs9IGNoaWxkLmNvdW50XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1RodW5rKHZOb2RlKSkge1xuICAgICAgICB0aHVua3Modk5vZGUsIG51bGwsIHBhdGNoLCBpbmRleClcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVuZGVmaW5lZEtleXMob2JqKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFxufVxuXG4vLyBMaXN0IGRpZmYsIG5haXZlIGxlZnQgdG8gcmlnaHQgcmVvcmRlcmluZ1xuZnVuY3Rpb24gcmVvcmRlcihhQ2hpbGRyZW4sIGJDaGlsZHJlbikge1xuICAgIC8vIE8oTSkgdGltZSwgTyhNKSBtZW1vcnlcbiAgICB2YXIgYkNoaWxkSW5kZXggPSBrZXlJbmRleChiQ2hpbGRyZW4pXG4gICAgdmFyIGJLZXlzID0gYkNoaWxkSW5kZXgua2V5c1xuICAgIHZhciBiRnJlZSA9IGJDaGlsZEluZGV4LmZyZWVcblxuICAgIGlmIChiRnJlZS5sZW5ndGggPT09IGJDaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBiQ2hpbGRyZW4sXG4gICAgICAgICAgICBtb3ZlczogbnVsbFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTyhOKSB0aW1lLCBPKE4pIG1lbW9yeVxuICAgIHZhciBhQ2hpbGRJbmRleCA9IGtleUluZGV4KGFDaGlsZHJlbilcbiAgICB2YXIgYUtleXMgPSBhQ2hpbGRJbmRleC5rZXlzXG4gICAgdmFyIGFGcmVlID0gYUNoaWxkSW5kZXguZnJlZVxuXG4gICAgaWYgKGFGcmVlLmxlbmd0aCA9PT0gYUNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2hpbGRyZW46IGJDaGlsZHJlbixcbiAgICAgICAgICAgIG1vdmVzOiBudWxsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBPKE1BWChOLCBNKSkgbWVtb3J5XG4gICAgdmFyIG5ld0NoaWxkcmVuID0gW11cblxuICAgIHZhciBmcmVlSW5kZXggPSAwXG4gICAgdmFyIGZyZWVDb3VudCA9IGJGcmVlLmxlbmd0aFxuICAgIHZhciBkZWxldGVkSXRlbXMgPSAwXG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggYSBhbmQgbWF0Y2ggYSBub2RlIGluIGJcbiAgICAvLyBPKE4pIHRpbWUsXG4gICAgZm9yICh2YXIgaSA9IDAgOyBpIDwgYUNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBhSXRlbSA9IGFDaGlsZHJlbltpXVxuICAgICAgICB2YXIgaXRlbUluZGV4XG5cbiAgICAgICAgaWYgKGFJdGVtLmtleSkge1xuICAgICAgICAgICAgaWYgKGJLZXlzLmhhc093blByb3BlcnR5KGFJdGVtLmtleSkpIHtcbiAgICAgICAgICAgICAgICAvLyBNYXRjaCB1cCB0aGUgb2xkIGtleXNcbiAgICAgICAgICAgICAgICBpdGVtSW5kZXggPSBiS2V5c1thSXRlbS5rZXldXG4gICAgICAgICAgICAgICAgbmV3Q2hpbGRyZW4ucHVzaChiQ2hpbGRyZW5baXRlbUluZGV4XSlcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgb2xkIGtleWVkIGl0ZW1zXG4gICAgICAgICAgICAgICAgaXRlbUluZGV4ID0gaSAtIGRlbGV0ZWRJdGVtcysrXG4gICAgICAgICAgICAgICAgbmV3Q2hpbGRyZW4ucHVzaChudWxsKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTWF0Y2ggdGhlIGl0ZW0gaW4gYSB3aXRoIHRoZSBuZXh0IGZyZWUgaXRlbSBpbiBiXG4gICAgICAgICAgICBpZiAoZnJlZUluZGV4IDwgZnJlZUNvdW50KSB7XG4gICAgICAgICAgICAgICAgaXRlbUluZGV4ID0gYkZyZWVbZnJlZUluZGV4KytdXG4gICAgICAgICAgICAgICAgbmV3Q2hpbGRyZW4ucHVzaChiQ2hpbGRyZW5baXRlbUluZGV4XSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIG5vIGZyZWUgaXRlbXMgaW4gYiB0byBtYXRjaCB3aXRoXG4gICAgICAgICAgICAgICAgLy8gdGhlIGZyZWUgaXRlbXMgaW4gYSwgc28gdGhlIGV4dHJhIGZyZWUgbm9kZXNcbiAgICAgICAgICAgICAgICAvLyBhcmUgZGVsZXRlZC5cbiAgICAgICAgICAgICAgICBpdGVtSW5kZXggPSBpIC0gZGVsZXRlZEl0ZW1zKytcbiAgICAgICAgICAgICAgICBuZXdDaGlsZHJlbi5wdXNoKG51bGwpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbGFzdEZyZWVJbmRleCA9IGZyZWVJbmRleCA+PSBiRnJlZS5sZW5ndGggP1xuICAgICAgICBiQ2hpbGRyZW4ubGVuZ3RoIDpcbiAgICAgICAgYkZyZWVbZnJlZUluZGV4XVxuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGIgYW5kIGFwcGVuZCBhbnkgbmV3IGtleXNcbiAgICAvLyBPKE0pIHRpbWVcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGJDaGlsZHJlbi5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgbmV3SXRlbSA9IGJDaGlsZHJlbltqXVxuXG4gICAgICAgIGlmIChuZXdJdGVtLmtleSkge1xuICAgICAgICAgICAgaWYgKCFhS2V5cy5oYXNPd25Qcm9wZXJ0eShuZXdJdGVtLmtleSkpIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgYW55IG5ldyBrZXllZCBpdGVtc1xuICAgICAgICAgICAgICAgIC8vIFdlIGFyZSBhZGRpbmcgbmV3IGl0ZW1zIHRvIHRoZSBlbmQgYW5kIHRoZW4gc29ydGluZyB0aGVtXG4gICAgICAgICAgICAgICAgLy8gaW4gcGxhY2UuIEluIGZ1dHVyZSB3ZSBzaG91bGQgaW5zZXJ0IG5ldyBpdGVtcyBpbiBwbGFjZS5cbiAgICAgICAgICAgICAgICBuZXdDaGlsZHJlbi5wdXNoKG5ld0l0ZW0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaiA+PSBsYXN0RnJlZUluZGV4KSB7XG4gICAgICAgICAgICAvLyBBZGQgYW55IGxlZnRvdmVyIG5vbi1rZXllZCBpdGVtc1xuICAgICAgICAgICAgbmV3Q2hpbGRyZW4ucHVzaChuZXdJdGVtKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNpbXVsYXRlID0gbmV3Q2hpbGRyZW4uc2xpY2UoKVxuICAgIHZhciBzaW11bGF0ZUluZGV4ID0gMFxuICAgIHZhciByZW1vdmVzID0gW11cbiAgICB2YXIgaW5zZXJ0cyA9IFtdXG4gICAgdmFyIHNpbXVsYXRlSXRlbVxuXG4gICAgZm9yICh2YXIgayA9IDA7IGsgPCBiQ2hpbGRyZW4ubGVuZ3RoOykge1xuICAgICAgICB2YXIgd2FudGVkSXRlbSA9IGJDaGlsZHJlbltrXVxuICAgICAgICBzaW11bGF0ZUl0ZW0gPSBzaW11bGF0ZVtzaW11bGF0ZUluZGV4XVxuXG4gICAgICAgIC8vIHJlbW92ZSBpdGVtc1xuICAgICAgICB3aGlsZSAoc2ltdWxhdGVJdGVtID09PSBudWxsICYmIHNpbXVsYXRlLmxlbmd0aCkge1xuICAgICAgICAgICAgcmVtb3Zlcy5wdXNoKHJlbW92ZShzaW11bGF0ZSwgc2ltdWxhdGVJbmRleCwgbnVsbCkpXG4gICAgICAgICAgICBzaW11bGF0ZUl0ZW0gPSBzaW11bGF0ZVtzaW11bGF0ZUluZGV4XVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzaW11bGF0ZUl0ZW0gfHwgc2ltdWxhdGVJdGVtLmtleSAhPT0gd2FudGVkSXRlbS5rZXkpIHtcbiAgICAgICAgICAgIC8vIGlmIHdlIG5lZWQgYSBrZXkgaW4gdGhpcyBwb3NpdGlvbi4uLlxuICAgICAgICAgICAgaWYgKHdhbnRlZEl0ZW0ua2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHNpbXVsYXRlSXRlbSAmJiBzaW11bGF0ZUl0ZW0ua2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGFuIGluc2VydCBkb2Vzbid0IHB1dCB0aGlzIGtleSBpbiBwbGFjZSwgaXQgbmVlZHMgdG8gbW92ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoYktleXNbc2ltdWxhdGVJdGVtLmtleV0gIT09IGsgKyAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVzLnB1c2gocmVtb3ZlKHNpbXVsYXRlLCBzaW11bGF0ZUluZGV4LCBzaW11bGF0ZUl0ZW0ua2V5KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpbXVsYXRlSXRlbSA9IHNpbXVsYXRlW3NpbXVsYXRlSW5kZXhdXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgcmVtb3ZlIGRpZG4ndCBwdXQgdGhlIHdhbnRlZCBpdGVtIGluIHBsYWNlLCB3ZSBuZWVkIHRvIGluc2VydCBpdFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzaW11bGF0ZUl0ZW0gfHwgc2ltdWxhdGVJdGVtLmtleSAhPT0gd2FudGVkSXRlbS5rZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRzLnB1c2goe2tleTogd2FudGVkSXRlbS5rZXksIHRvOiBrfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0ZW1zIGFyZSBtYXRjaGluZywgc28gc2tpcCBhaGVhZFxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltdWxhdGVJbmRleCsrXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRzLnB1c2goe2tleTogd2FudGVkSXRlbS5rZXksIHRvOiBrfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0cy5wdXNoKHtrZXk6IHdhbnRlZEl0ZW0ua2V5LCB0bzoga30pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGsrK1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYSBrZXkgaW4gc2ltdWxhdGUgaGFzIG5vIG1hdGNoaW5nIHdhbnRlZCBrZXksIHJlbW92ZSBpdFxuICAgICAgICAgICAgZWxzZSBpZiAoc2ltdWxhdGVJdGVtICYmIHNpbXVsYXRlSXRlbS5rZXkpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVzLnB1c2gocmVtb3ZlKHNpbXVsYXRlLCBzaW11bGF0ZUluZGV4LCBzaW11bGF0ZUl0ZW0ua2V5KSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNpbXVsYXRlSW5kZXgrK1xuICAgICAgICAgICAgaysrXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZW1vdmUgYWxsIHRoZSByZW1haW5pbmcgbm9kZXMgZnJvbSBzaW11bGF0ZVxuICAgIHdoaWxlKHNpbXVsYXRlSW5kZXggPCBzaW11bGF0ZS5sZW5ndGgpIHtcbiAgICAgICAgc2ltdWxhdGVJdGVtID0gc2ltdWxhdGVbc2ltdWxhdGVJbmRleF1cbiAgICAgICAgcmVtb3Zlcy5wdXNoKHJlbW92ZShzaW11bGF0ZSwgc2ltdWxhdGVJbmRleCwgc2ltdWxhdGVJdGVtICYmIHNpbXVsYXRlSXRlbS5rZXkpKVxuICAgIH1cblxuICAgIC8vIElmIHRoZSBvbmx5IG1vdmVzIHdlIGhhdmUgYXJlIGRlbGV0ZXMgdGhlbiB3ZSBjYW4ganVzdFxuICAgIC8vIGxldCB0aGUgZGVsZXRlIHBhdGNoIHJlbW92ZSB0aGVzZSBpdGVtcy5cbiAgICBpZiAocmVtb3Zlcy5sZW5ndGggPT09IGRlbGV0ZWRJdGVtcyAmJiAhaW5zZXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBuZXdDaGlsZHJlbixcbiAgICAgICAgICAgIG1vdmVzOiBudWxsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjaGlsZHJlbjogbmV3Q2hpbGRyZW4sXG4gICAgICAgIG1vdmVzOiB7XG4gICAgICAgICAgICByZW1vdmVzOiByZW1vdmVzLFxuICAgICAgICAgICAgaW5zZXJ0czogaW5zZXJ0c1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmUoYXJyLCBpbmRleCwga2V5KSB7XG4gICAgYXJyLnNwbGljZShpbmRleCwgMSlcblxuICAgIHJldHVybiB7XG4gICAgICAgIGZyb206IGluZGV4LFxuICAgICAgICBrZXk6IGtleVxuICAgIH1cbn1cblxuZnVuY3Rpb24ga2V5SW5kZXgoY2hpbGRyZW4pIHtcbiAgICB2YXIga2V5cyA9IHt9XG4gICAgdmFyIGZyZWUgPSBbXVxuICAgIHZhciBsZW5ndGggPSBjaGlsZHJlbi5sZW5ndGhcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV1cblxuICAgICAgICBpZiAoY2hpbGQua2V5KSB7XG4gICAgICAgICAgICBrZXlzW2NoaWxkLmtleV0gPSBpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmcmVlLnB1c2goaSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGtleXM6IGtleXMsICAgICAvLyBBIGhhc2ggb2Yga2V5IG5hbWUgdG8gaW5kZXhcbiAgICAgICAgZnJlZTogZnJlZSAgICAgIC8vIEFuIGFycmF5IG9mIHVua2V5ZWQgaXRlbSBpbmRpY2VzXG4gICAgfVxufVxuXG5mdW5jdGlvbiBhcHBlbmRQYXRjaChhcHBseSwgcGF0Y2gpIHtcbiAgICBpZiAoYXBwbHkpIHtcbiAgICAgICAgaWYgKGlzQXJyYXkoYXBwbHkpKSB7XG4gICAgICAgICAgICBhcHBseS5wdXNoKHBhdGNoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXBwbHkgPSBbYXBwbHksIHBhdGNoXVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFwcGx5XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBhdGNoXG4gICAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFNpbWlsYXIgdG8gaW52YXJpYW50IGJ1dCBvbmx5IGxvZ3MgYSB3YXJuaW5nIGlmIHRoZSBjb25kaXRpb24gaXMgbm90IG1ldC5cbiAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gbG9nIGlzc3VlcyBpbiBkZXZlbG9wbWVudCBlbnZpcm9ubWVudHMgaW4gY3JpdGljYWxcbiAqIHBhdGhzLiBSZW1vdmluZyB0aGUgbG9nZ2luZyBjb2RlIGZvciBwcm9kdWN0aW9uIGVudmlyb25tZW50cyB3aWxsIGtlZXAgdGhlXG4gKiBzYW1lIGxvZ2ljIGFuZCBmb2xsb3cgdGhlIHNhbWUgY29kZSBwYXRocy5cbiAqL1xuXG52YXIgd2FybmluZyA9IGZ1bmN0aW9uKCkge307XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHdhcm5pbmcgPSBmdW5jdGlvbihjb25kaXRpb24sIGZvcm1hdCwgYXJncykge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGFyZ3MgPSBuZXcgQXJyYXkobGVuID4gMiA/IGxlbiAtIDIgOiAwKTtcbiAgICBmb3IgKHZhciBrZXkgPSAyOyBrZXkgPCBsZW47IGtleSsrKSB7XG4gICAgICBhcmdzW2tleSAtIDJdID0gYXJndW1lbnRzW2tleV07XG4gICAgfVxuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnYHdhcm5pbmcoY29uZGl0aW9uLCBmb3JtYXQsIC4uLmFyZ3MpYCByZXF1aXJlcyBhIHdhcm5pbmcgJyArXG4gICAgICAgICdtZXNzYWdlIGFyZ3VtZW50J1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoZm9ybWF0Lmxlbmd0aCA8IDEwIHx8ICgvXltzXFxXXSokLykudGVzdChmb3JtYXQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdUaGUgd2FybmluZyBmb3JtYXQgc2hvdWxkIGJlIGFibGUgdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhpcyAnICtcbiAgICAgICAgJ3dhcm5pbmcuIFBsZWFzZSwgdXNlIGEgbW9yZSBkZXNjcmlwdGl2ZSBmb3JtYXQgdGhhbjogJyArIGZvcm1hdFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmRpdGlvbikge1xuICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICAgIHZhciBtZXNzYWdlID0gJ1dhcm5pbmc6ICcgK1xuICAgICAgICBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107XG4gICAgICAgIH0pO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrXG4gICAgICAgIC8vIHRvIGZpbmQgdGhlIGNhbGxzaXRlIHRoYXQgY2F1c2VkIHRoaXMgd2FybmluZyB0byBmaXJlLlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgICB9IGNhdGNoKHgpIHt9XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHdhcm5pbmc7XG4iLCJ2YXIgbmF0aXZlSXNBcnJheSA9IEFycmF5LmlzQXJyYXlcbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdcblxubW9kdWxlLmV4cG9ydHMgPSBuYXRpdmVJc0FycmF5IHx8IGlzQXJyYXlcblxuZnVuY3Rpb24gaXNBcnJheShvYmopIHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSBcIltvYmplY3QgQXJyYXldXCJcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gZXh0ZW5kXG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbmZ1bmN0aW9uIGV4dGVuZCgpIHtcbiAgICB2YXIgdGFyZ2V0ID0ge31cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV1cblxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0XG59XG4iLCJpbXBvcnQge3J1bn0gZnJvbSAnQGN5Y2xlL2NvcmUnXG5pbXBvcnQge21ha2VET01Ecml2ZXJ9IGZyb20gJ0BjeWNsZS9kb20nXG5pbXBvcnQge21ha2VIaXN0b3J5RHJpdmVyfSBmcm9tICdjeWNsaWMtaGlzdG9yeSdcbmltcG9ydCB7bWFrZUhUVFBEcml2ZXJ9IGZyb20gJ0BjeWNsZS9odHRwJ1xuaW1wb3J0IHttYWtlUm91dGVyRHJpdmVyfSBmcm9tICdjeWNsaWMtcm91dGVyJ1xuaW1wb3J0IHtjcmVhdGVIYXNoSGlzdG9yeX0gZnJvbSAnaGlzdG9yeSdcbmltcG9ydCB7bWFrZVN0YXRlRHJpdmVyfSBmcm9tICcuL3N0YXRlLWRyaXZlcidcbmltcG9ydCBNYWluIGZyb20gJy4vbWFpbidcbmltcG9ydCBQb2wgZnJvbSAnLi9wb2x5bWVyJ1xuXG5hcHAuYWRkRXZlbnRMaXN0ZW5lcignZG9tLWNoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAvLyBUaGlzIGlzIHRoZSBDeWNsZSBydW4uIGZpcnN0IGFyZ3VtZW50IGlzIG91ciBtYWluQXBwIHRoZW4gYW4gb2JqZWN0OlxuICAvLyBET00gaXMgdGhlIElEIG9yIGNsYXNzIHdlIHdhbnQgdGhlIGN5Y2xlIHRvIHJlbmRlciBvbnRvIG91ciBwYWdlLlxuICAvLyBIaXN0b3J5IGlzIHVzaW5nIG91ciBtYWtlSGlzdG9yeURyaXZlciB0byBkZWFsIHdpdGggcm91dGluZy5cbiAgY29uc3Qgc291cmNlcyA9IHtcbiAgICBET006IG1ha2VET01Ecml2ZXIoYCNhcHBsaWNhdGlvbmApLFxuICAgIEhUVFA6IG1ha2VIVFRQRHJpdmVyKCksXG4gICAgcm91dGVyOiBtYWtlUm91dGVyRHJpdmVyKG1ha2VIaXN0b3J5RHJpdmVyKGNyZWF0ZUhhc2hIaXN0b3J5KCkpKSxcbiAgICBzdGF0ZSQ6IG1ha2VTdGF0ZURyaXZlcigpLFxuICB9XG5cbiAgcnVuKE1haW4sIHNvdXJjZXMpXG59KVxuIiwiaW1wb3J0IEhvbWUgZnJvbSAnLi4vLi4vcGFnZXMvaG9tZS9ob21lLWluZGV4J1xuaW1wb3J0IFBhZ2UxIGZyb20gJy4uLy4uL3BhZ2VzL3BhZ2UxL3BhZ2UxLWluZGV4J1xuaW1wb3J0IFBhZ2UyIGZyb20gJy4uLy4uL3BhZ2VzL3BhZ2UyL3BhZ2UyLWluZGV4J1xuaW1wb3J0IFBhZ2U0MDQgZnJvbSAnLi4vLi4vcGFnZXMvcGFnZTQwNC9wYWdlNDA0LWluZGV4J1xuXG5jb25zdCByb3V0ZXMgPSB7XG4gICcvJzogSG9tZSxcbiAgJy9wYWdlMSc6IFBhZ2UxLFxuICAnL3BhZ2UyJzogUGFnZTIsXG4gICcqJzogUGFnZTQwNCxcbn1cblxuZnVuY3Rpb24gQ29udGVudFJvdXRlcihzb3VyY2VzKSB7XG4gIGNvbnN0IHtyb3V0ZXIsIHN0YXRlJH0gPSBzb3VyY2VzXG4gIGNvbnN0IHtwYXRoJCwgdmFsdWUkfSA9IHJvdXRlci5kZWZpbmUocm91dGVzKVxuICBjb25zdCBjaGlsZHJlbkRPTSQgPSBwYXRoJC56aXAodmFsdWUkLFxuICAgIChwYXRoLCB2YWx1ZSkgPT4ge1xuICAgICAgY29uc3QgY29tcCA9IHZhbHVlKHtcbiAgICAgICAgLi4uc291cmNlcyxcbiAgICAgICAgcm91dGVyOiByb3V0ZXIucGF0aChwYXRoKSxcbiAgICAgICAgc3RhdGUkOiBzdGF0ZSQudGFrZSgxKSxcbiAgICAgIH0pXG4gICAgICByZXR1cm4ge1xuICAgICAgICBET006IGNvbXAuRE9NLFxuICAgICAgICBzdGF0ZSQ6IGNvbXAuc3RhdGUkLFxuICAgICAgfVxuICAgIH1cbiAgKVxuXG4gIHJldHVybiB7XG4gICAgRE9NOiBjaGlsZHJlbkRPTSQuZmxhdE1hcExhdGVzdChzID0+IHMuRE9NKSxcbiAgICBzdGF0ZSQ6IGNoaWxkcmVuRE9NJC5mbGF0TWFwTGF0ZXN0KHMgPT4gcy5zdGF0ZSQpLFxuICAgIHBhdGgkOiBwYXRoJCxcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb250ZW50Um91dGVyXG4iLCJpbXBvcnQgdmlldyBmcm9tICcuL25hdmJhci12aWV3J1xuXG5jb25zdCBuYXZiYXIgPSAoc291cmNlcywgcGF0aCQpID0+IHtcbiAgY29uc3QgdmlldyQgPSB2aWV3KHNvdXJjZXMsIHBhdGgkKVxuICByZXR1cm4ge0RPTTogdmlldyR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5hdmJhclxuIiwiaW1wb3J0IHtkaXYsIHVsLCBsaSwgYSwgbmF2LCBoMSwgaDJ9IGZyb20gJ0BjeWNsZS9kb20nXG5cbmZ1bmN0aW9uIHZpZXcoc291cmNlcywgcGF0aCQpIHtcbiAgY29uc3Qge3JvdXRlcjoge2NyZWF0ZUhyZWZ9fSA9IHNvdXJjZXNcbiAgY29uc3QgaG9tZUhyZWYgPSBjcmVhdGVIcmVmKGAvYClcbiAgY29uc3QgcGFnZTFIcmVmID0gY3JlYXRlSHJlZihgL3BhZ2UxYClcbiAgY29uc3QgcGFnZTJ0SHJlZiA9IGNyZWF0ZUhyZWYoYC9wYWdlMmApXG5cbiAgcmV0dXJuIHBhdGgkLm1hcCgoKSA9PiB7XG4gICAgcmV0dXJuIGRpdihbXG4gICAgICBuYXYoYC5uYXZgLCBbXG4gICAgICAgIHVsKGAubmF2LWxpc3RgLCBbXG4gICAgICAgICAgbGkoYC5uYXYtaXRlbSAubGlua2AsIFtcbiAgICAgICAgICAgIGEoYC5wdXJlLWJ1dHRvbmAsIHtocmVmOiBob21lSHJlZn0sIFtgSG9tZWBdKSxcbiAgICAgICAgICBdKSxcbiAgICAgICAgICBsaShgLm5hdi1pdGVtIC5saW5rYCwgW1xuICAgICAgICAgICAgYShgLnB1cmUtYnV0dG9uYCwge2hyZWY6IHBhZ2UxSHJlZn0sIFtgUGFnZSAxYF0pLFxuICAgICAgICAgIF0pLFxuICAgICAgICAgIGxpKGAubmF2LWl0ZW0gLmxpbmsgLnRlc3RsaW5rYCwgW1xuICAgICAgICAgICAgYShgLnB1cmUtYnV0dG9uYCwge2hyZWY6IHBhZ2UydEhyZWZ9LCBbYFBhZ2UgMmBdKSxcbiAgICAgICAgICBdKSxcbiAgICAgICAgXSksXG4gICAgICBdKV0pXG4gIH0pXG59XG5cbmV4cG9ydCBkZWZhdWx0IHZpZXdcbiIsImltcG9ydCB2aWV3IGZyb20gJy4vaG9tZS12aWV3J1xuaW1wb3J0IGludGVudCBmcm9tICcuL2hvbWUtaW50ZW50J1xuaW1wb3J0IG1vZGVsIGZyb20gJy4vaG9tZS1tb2RlbCdcblxuLy8gcmV0dXJuaW5nIG91ciBET01cbmNvbnN0IEhvbWUgPSAoc291cmNlcykgPT4ge1xuICBjb25zdCB7c3RhdGUkfSA9IHNvdXJjZXNcbiAgY29uc3QgYWN0aW9ucyA9IGludGVudChzb3VyY2VzKVxuICBjb25zdCBzdGF0ZSQkID0gbW9kZWwoey4uLmFjdGlvbnMsc3RhdGUkfSlcblxuICByZXR1cm4ge1xuICAgIERPTTogdmlldyhzdGF0ZSQkKSxcbiAgICBzdGF0ZSQ6IHN0YXRlJCQsXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSG9tZVxuIiwiLy8gaG9tZUludGVudCBjcmVhdGVzIHN0cmVhbXMgZnJvbSBjbGljayBldmVudHMgb24gLmluY3JlbWVudCAmIC5kZWNyZW1lbnRcbmNvbnN0IGhvbWVJbnRlbnQgPSBzID0+ICh7XG4gIGluYyQ6IHMuRE9NLnNlbGVjdChgLmluY3JlbWVudGApLmV2ZW50cyhgY2xpY2tgKS5tYXAoKCkgPT4gKzEpLFxuICBkZWMkOiBzLkRPTS5zZWxlY3QoYC5kZWNyZW1lbnRgKS5ldmVudHMoYGNsaWNrYCkubWFwKCgpID0+IC0xKSxcbn0pXG5leHBvcnQgZGVmYXVsdCBob21lSW50ZW50XG4iLCJpbXBvcnQgUnggZnJvbSAncngnXG4vLyBtZXJnaW5nIG91ciBjbGlja3MgZnJvbSBvdXIgaW50ZW50XG4vLyAoYSxiKSAtPiBudW1cbmNvbnN0IGhvbWVNb2RlbCA9ICh7aW5jJCxkZWMkLCBzdGF0ZSR9KSA9PiB7XG4gIHJldHVybiBSeC5PYnNlcnZhYmxlLm1lcmdlKFxuICAgIHN0YXRlJC50YWtlKDEpLm1hcCgoe2NvdW50ZXJ9KSA9PiBwYXJzZUZsb2F0KGNvdW50ZXIpKSxcbiAgICBpbmMkLFxuICAgIGRlYyRcbiAgICApXG4gICAgLnNjYW4oKHgsIHkpID0+IHggKyB5KVxuICAgIC5tYXAoeCA9PiAoe2NvdW50ZXI6IHh9KSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgaG9tZU1vZGVsXG4iLCJpbXBvcnQge2RpdiwgaDEsIGgyLCBidXR0b24sIGh9IGZyb20gJ0BjeWNsZS9kb20nXG5cbmNvbnN0IHZpZXcgPSAoc3RhdGUkKSA9PlxuICAvLyBtYXBwaW5nIG92ZXIgb3VyIG1lcmdlZCBtb2RlbCB0byB1cGRhdGUgJ2NvdW50J1xuICBzdGF0ZSQubWFwKCh7Y291bnRlcn0pID0+IHtcbiAgICByZXR1cm4gZGl2KGAuaG9tZXBhZ2VgLCBbXG4gICAgICBkaXYoW1xuICAgICAgICBkaXYoW1xuICAgICAgICAgIGgoYHBgLCBgQ291bnRlcjogYCArIGNvdW50ZXIpLFxuICAgICAgICBdKSxcbiAgICAgICAgaChgcGFwZXItaW5wdXQudXNlcm5hbWVgLCB7IGxhYmVsOiAnVXNlcm5hbWUnfSksXG4gICAgICAgIGgoYHBhcGVyLWlucHV0LnBhc3N3b3JkYCwgeyBsYWJlbDogJ1Bhc3N3b3JkJywgdHlwZTogJ3Bhc3N3b3JkJ30pLFxuICAgICAgICBoKGBwYXBlci1idXR0b24ubG9naW5gLCB7IHJhaXNlZDogJ3RydWUnIH0sIGBMb2dpbmApLFxuICAgICAgXSksXG4gICAgXSlcbiAgfVxuICApXG5cbmV4cG9ydCBkZWZhdWx0IHZpZXdcbiIsImltcG9ydCBSeCBmcm9tICdyeCdcbmltcG9ydCB2aWV3IGZyb20gJy4vcGFnZTEtdmlldydcblxuY29uc3QgUGFnZTEgPSAoc291cmNlcykgPT4ge1xuICBjb25zdCBzdGF0ZSQgPSBzb3VyY2VzLnN0YXRlJFxuICBjb25zdCAkdmlldyA9IHZpZXcoc3RhdGUkKVxuXG4gIHJldHVybiB7XG4gICAgRE9NOiBSeC5PYnNlcnZhYmxlLmp1c3QoJHZpZXcpLFxuICAgIHN0YXRlJDogc3RhdGUkLFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBhZ2UxXG4iLCJpbXBvcnQge2RpdiwgaDEsIGgyfSBmcm9tICdAY3ljbGUvZG9tJ1xuXG5jb25zdCB2aWV3ID0gc3RhdGUkID0+IHtcbiAgcmV0dXJuIHN0YXRlJC5tYXAoKHtjb3VudGVyfSkgPT4ge1xuICAgIHJldHVybiBkaXYoYC5wYWdlMWAsW1xuICAgICAgaDEoYC5jb250ZW50LXN1YmhlYWRgLCBbYFBhZ2UgMWBdKSxcbiAgICAgIGgxKFtgVGhpcyBpcyBQYWdlIDFgXSksXG4gICAgICBoMihbYENvdW50ZXI6IGAgKyBjb3VudGVyXSksXG4gICAgXSlcbiAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgdmlld1xuIiwiaW1wb3J0IFJ4IGZyb20gJ3J4J1xuaW1wb3J0IHZpZXcgZnJvbSAnLi9wYWdlMi12aWV3J1xuXG5jb25zdCBQYWdlMiA9IChzb3VyY2VzKSA9PiB7XG4gIGNvbnN0IHN0YXRlJCA9IHNvdXJjZXMuc3RhdGUkXG4gIGNvbnN0ICR2aWV3ID0gdmlldyhzdGF0ZSQpXG5cbiAgcmV0dXJuIHtcbiAgICBET006IFJ4Lk9ic2VydmFibGUuanVzdCgkdmlldyksXG4gICAgc3RhdGUkOiBzdGF0ZSQsXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGFnZTJcbiIsImltcG9ydCB7ZGl2LCBoMSwgaDJ9IGZyb20gJ0BjeWNsZS9kb20nXG5cbmNvbnN0IHZpZXcgPSBzdGF0ZSQgPT4ge1xuICByZXR1cm4gc3RhdGUkLm1hcCgoe2NvdW50ZXJ9KSA9PiB7XG4gICAgcmV0dXJuIGRpdihgLnBhZ2UyYCwgW1xuICAgICAgaDEoYC5jb250ZW50LXN1YmhlYWRgLCBbYFBhZ2UgMmBdKSxcbiAgICAgIGgxKFtgVGhpcyBpcyB0aGUgc2Vjb25kIFBhZ2VgXSksXG4gICAgICBoMihbYENvdW50ZXI6IGAgKyBjb3VudGVyXSksXG4gICAgXSlcbiAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgdmlld1xuIiwiaW1wb3J0IFJ4IGZyb20gJ3J4J1xuaW1wb3J0IHZpZXcgZnJvbSAnLi9wYWdlNDA0LXZpZXcnXG5cbmNvbnN0IFBhZ2U0MDQgPSAoKSA9PiB7XG4gIGNvbnN0IHZpZXckID0gUnguT2JzZXJ2YWJsZS5qdXN0KHZpZXcoKSlcbiAgcmV0dXJuIHtET006IHZpZXckfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQYWdlNDA0XG4iLCJpbXBvcnQge2RpdiwgaDF9IGZyb20gJ0BjeWNsZS9kb20nXG5cbmNvbnN0IHZpZXcgPSAoKSA9PiB7XG4gIHJldHVybiBkaXYoW1xuICAgIGgxKGAuY29udGVudC1zdWJoZWFkYCxbYDQwNCBlcnJvcmBdKSxcbiAgICBoMShgUGFnZSBjb3VsZCBub3QgYmUgZm91bmRgKSxcbiAgXSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgdmlld1xuIiwiaW1wb3J0IHtPYnNlcnZhYmxlfSBmcm9tICdyeCdcbmltcG9ydCBuYXZiYXIgZnJvbSAnLi9kaWFsb2d1ZS9jb21wb25lbnRzL25hdmJhci9uYXZiYXItaW5kZXgnXG5pbXBvcnQgQ29udGVudFJvdXRlciBmcm9tICcuL2RpYWxvZ3VlL2NvbXBvbmVudHMvY29udGVudC1yb3V0ZXIvY29udGVudC1yb3V0ZXItaW5kZXgnXG5pbXBvcnQge2gxfSBmcm9tICdAY3ljbGUvZG9tJ1xuLy8gQGN5Y2xlL2RvbSBoYXMgYSBoeXBlcnNjcmlwdC1oZWxwZXIgYnVpbHQgaW4gc28geW91IGNhblxuLy8gZGVjbGFyZSBhbGwgaHRtbCBlbGVtZW50cyB5b3UgYXJlIGdvaW5nIHRvIHVzZSBsaWtlIGRpdiwgaDEsIGgyLCBuYXYgZXRjXG5pbXBvcnQge2Rpdn0gZnJvbSAnQGN5Y2xlL2RvbSdcblxuLy8gdmlldyBpcyB3aGF0IHdlJ2QgbGlrZSB0byBkaXNwbGF5IGluIHRoaXMgY2FzZSBvdXIgc2lkZWJhciArIGNvbnRlbnQgYWxsIHdyYXBwZWQgaW4gYSBkaXZcbmNvbnN0IHZpZXcgPSAobmF2LCBjb250ZW50KSA9PiB7XG4gIHJldHVybiBkaXYoYCNsYXlvdXRgLCBbXG4gICAgZGl2KGRpdihgLmhlYWRlcmAsIFtuYXZdKSksXG4gICAgZGl2KFtjb250ZW50XSksXG4gIF0pXG59XG5cbi8vIHdlIG5lZWQgdG8gcGFzcyBvdXIgY29tcG9uZW50cyB0byBjeWNsZSBhbmQgZ2l2ZSB0aGVtIGEgXCJzb3VyY2VcIiB3aGVuIHRoZXkgY29tZSBmcm9tIGN5Y2xlXG4vLyBjcmVhdGluZyB0aGlzIFwiY3ljbGVcIiwgaGVyZSB5b3UgY2FuIHNlZSB0aGF0IHZpZXckIGlzIGEgUnggT2JzZXJ2YWJsZSBjb250YWluaW5nIG91dCBcInZpZXdcIlxuLy8gd2UgcGFzcyB2aWV3IG91ciBuYXYuRE9NICsgQ29udGVudC5ET00gd2hpY2ggeW91IGNhbiBzZWUgaW4gY29uc3QgdmlldyBhYm92ZSBiZWNvbWUgYXZhaWxhYmxlXG4vLyB2YXJpYWJsZXMuIFdlIHJldHVybiBhbGwgb2YgdGhpcyBpbiBhbiBPYmplY3Qgd2l0aCBET00gKyBIaXN0b3J5XG5mdW5jdGlvbiBtYWluKHNvdXJjZXMpIHtcbiAgY29uc3QgQ29udGVudCA9IENvbnRlbnRSb3V0ZXIoc291cmNlcylcbiAgY29uc3Qge3BhdGgkLCBzdGF0ZSR9ID0gQ29udGVudFxuICBjb25zdCBOYXYgPSBuYXZiYXIoc291cmNlcywgcGF0aCQpXG4gIGNvbnN0IGxvZ2luUmVxdWVzdCQgPSBzb3VyY2VzLkRPTS5zZWxlY3QoJy5sb2dpbicpXG4gICAgLmV2ZW50cygnY2xpY2snKVxuICAgIC5kZWJvdW5jZSg1MDApXG4gICAgLmZsYXRNYXAoZXYgPT4gT2JzZXJ2YWJsZS56aXAoXG4gICAgICBzb3VyY2VzLkRPTS5zZWxlY3QoJy51c2VybmFtZScpLm9ic2VydmFibGUuZmxhdE1hcCh4ID0+IHgpLm1hcChlID0+IGUudmFsdWUpLnRha2UoMSksXG4gICAgICBzb3VyY2VzLkRPTS5zZWxlY3QoJy5wYXNzd29yZCcpLm9ic2VydmFibGUuZmxhdE1hcCh4ID0+IHgpLm1hcChlID0+IGUudmFsdWUpLnRha2UoMSksXG4gICAgICAodSwgcCkgPT4gKHtcbiAgICAgICAgdXNlcm5hbWU6IHUsXG4gICAgICAgIHBhc3N3b3JkOiBwXG4gICAgfSkpKVxuICAgIC5kb09uTmV4dChlID0+IGNvbnNvbGUubG9nKGUpKVxuICAgIC5maWx0ZXIoZGF0YSA9PiBkYXRhLnVzZXJuYW1lLmxlbmd0aCA+IDApXG4gICAgLmZpbHRlcihkYXRhID0+IGRhdGEucGFzc3dvcmQubGVuZ3RoID4gMClcbiAgICAubWFwKGRhdGEgPT4gKHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnJvYmluaG9vZC5jb20vYXBpLXRva2VuLWF1dGgvJyxcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgZmllbGQ6ICh7XG4gICAgICAgIHVzZXJuYW1lOiBkYXRhLnVzZXJuYW1lLFxuICAgICAgICBwYXNzd29yZDogZGF0YS5wYXNzd29yZFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiAoe1xuICAgICAgICAnWC1Sb2Jpbmhvb2QtQVBJLVZlcnNpb24nOiAnMS42MC4xJyxcbiAgICAgICAgJ1VzZXItQWdlbnQnOiAnb2todHRwLzMuMi4wJ1xuICAgICAgfSlcbiAgICB9KSk7XG4gIGNvbnN0IHZpZXckID0gc291cmNlcy5IVFRQXG4gICAgLmZsYXRNYXAoeCA9PiB4KVxuICAgIC5tYXAocmVzID0+IHJlcy5ib2R5LnRva2VuKVxuICAgIC5zdGFydFdpdGgoXCJcIilcbiAgICAubWFwKHJlc3VsdCA9PlxuICAgICAgaDEoYC50b2tlbmAsIHJlc3VsdClcbiAgICApXG4gICAgLm1lcmdlKENvbnRlbnQuRE9NKTtcblxuICByZXR1cm4ge1xuICAgIERPTTogdmlldyQsXG4gICAgSFRUUDogbG9naW5SZXF1ZXN0JCxcbiAgICBzdGF0ZSQ6IHN0YXRlJC5zdGFydFdpdGgoe2NvdW50ZXI6IDB9KSxcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtYWluXG4iLCIvKlxuQ29weXJpZ2h0IChjKSAyMDE1IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuKGZ1bmN0aW9uKGRvY3VtZW50KSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBHcmFiIGEgcmVmZXJlbmNlIHRvIG91ciBhdXRvLWJpbmRpbmcgdGVtcGxhdGVcbiAgLy8gYW5kIGdpdmUgaXQgc29tZSBpbml0aWFsIGJpbmRpbmcgdmFsdWVzXG4gIC8vIExlYXJuIG1vcmUgYWJvdXQgYXV0by1iaW5kaW5nIHRlbXBsYXRlcyBhdCBodHRwOi8vZ29vLmdsL0R4MXUyZ1xuICB2YXIgYXBwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FwcCcpO1xuXG4gIC8vIFNldHMgYXBwIGRlZmF1bHQgYmFzZSBVUkxcbiAgYXBwLmJhc2VVcmwgPSAnLyc7XG4gIGlmICh3aW5kb3cubG9jYXRpb24ucG9ydCA9PT0gJycpIHsgIC8vIGlmIHByb2R1Y3Rpb25cbiAgICAvLyBVbmNvbW1lbnQgYXBwLmJhc2VVUkwgYmVsb3cgYW5kXG4gICAgLy8gc2V0IGFwcC5iYXNlVVJMIHRvICcveW91ci1wYXRobmFtZS8nIGlmIHJ1bm5pbmcgZnJvbSBmb2xkZXIgaW4gcHJvZHVjdGlvblxuICAgIC8vIGFwcC5iYXNlVXJsID0gJy9wb2x5bWVyLXN0YXJ0ZXIta2l0Lyc7XG4gIH1cblxuICBhcHAuZGlzcGxheUluc3RhbGxlZFRvYXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gQ2hlY2sgdG8gbWFrZSBzdXJlIGNhY2hpbmcgaXMgYWN0dWFsbHkgZW5hYmxlZOKAlGl0IHdvbid0IGJlIGluIHRoZSBkZXYgZW52aXJvbm1lbnQuXG4gICAgaWYgKCFQb2x5bWVyLmRvbShkb2N1bWVudCkucXVlcnlTZWxlY3RvcigncGxhdGludW0tc3ctY2FjaGUnKS5kaXNhYmxlZCkge1xuICAgICAgUG9seW1lci5kb20oZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3IoJyNjYWNoaW5nLWNvbXBsZXRlJykuc2hvdygpO1xuICAgIH1cbiAgfTtcblxuICAvLyBMaXN0ZW4gZm9yIHRlbXBsYXRlIGJvdW5kIGV2ZW50IHRvIGtub3cgd2hlbiBiaW5kaW5nc1xuICAvLyBoYXZlIHJlc29sdmVkIGFuZCBjb250ZW50IGhhcyBiZWVuIHN0YW1wZWQgdG8gdGhlIHBhZ2VcbiAgYXBwLmFkZEV2ZW50TGlzdGVuZXIoJ2RvbS1jaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgfSk7XG5cbiAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Qb2x5bWVyL3BvbHltZXIvaXNzdWVzLzEzODFcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ1dlYkNvbXBvbmVudHNSZWFkeScsIGZ1bmN0aW9uKCkge1xuICAgIC8vIGltcG9ydHMgYXJlIGxvYWRlZCBhbmQgZWxlbWVudHMgaGF2ZSBiZWVuIHJlZ2lzdGVyZWRcbiAgfSk7XG5cbiAgLy8gTWFpbiBhcmVhJ3MgcGFwZXItc2Nyb2xsLWhlYWRlci1wYW5lbCBjdXN0b20gY29uZGVuc2luZyB0cmFuc2Zvcm1hdGlvbiBvZlxuICAvLyB0aGUgYXBwTmFtZSBpbiB0aGUgbWlkZGxlLWNvbnRhaW5lciBhbmQgdGhlIGJvdHRvbSB0aXRsZSBpbiB0aGUgYm90dG9tLWNvbnRhaW5lci5cbiAgLy8gVGhlIGFwcE5hbWUgaXMgbW92ZWQgdG8gdG9wIGFuZCBzaHJ1bmsgb24gY29uZGVuc2luZy4gVGhlIGJvdHRvbSBzdWIgdGl0bGVcbiAgLy8gaXMgc2hydW5rIHRvIG5vdGhpbmcgb24gY29uZGVuc2luZy5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BhcGVyLWhlYWRlci10cmFuc2Zvcm0nLCBmdW5jdGlvbihlKSB7XG4gICAgdmFyIGFwcE5hbWUgPSBQb2x5bWVyLmRvbShkb2N1bWVudCkucXVlcnlTZWxlY3RvcignI21haW5Ub29sYmFyIC5hcHAtbmFtZScpO1xuICAgIHZhciBtaWRkbGVDb250YWluZXIgPSBQb2x5bWVyLmRvbShkb2N1bWVudCkucXVlcnlTZWxlY3RvcignI21haW5Ub29sYmFyIC5taWRkbGUtY29udGFpbmVyJyk7XG4gICAgdmFyIGJvdHRvbUNvbnRhaW5lciA9IFBvbHltZXIuZG9tKGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yKCcjbWFpblRvb2xiYXIgLmJvdHRvbS1jb250YWluZXInKTtcbiAgICB2YXIgZGV0YWlsID0gZS5kZXRhaWw7XG4gICAgdmFyIGhlaWdodERpZmYgPSBkZXRhaWwuaGVpZ2h0IC0gZGV0YWlsLmNvbmRlbnNlZEhlaWdodDtcbiAgICB2YXIgeVJhdGlvID0gTWF0aC5taW4oMSwgZGV0YWlsLnkgLyBoZWlnaHREaWZmKTtcbiAgICAvLyBhcHBOYW1lIG1heCBzaXplIHdoZW4gY29uZGVuc2VkLiBUaGUgc21hbGxlciB0aGUgbnVtYmVyIHRoZSBzbWFsbGVyIHRoZSBjb25kZW5zZWQgc2l6ZS5cbiAgICB2YXIgbWF4TWlkZGxlU2NhbGUgPSAwLjUwO1xuICAgIHZhciBhdXhIZWlnaHQgPSBoZWlnaHREaWZmIC0gZGV0YWlsLnk7XG4gICAgdmFyIGF1eFNjYWxlID0gaGVpZ2h0RGlmZiAvICgxIC0gbWF4TWlkZGxlU2NhbGUpO1xuICAgIHZhciBzY2FsZU1pZGRsZSA9IE1hdGgubWF4KG1heE1pZGRsZVNjYWxlLCBhdXhIZWlnaHQgLyBhdXhTY2FsZSArIG1heE1pZGRsZVNjYWxlKTtcbiAgICB2YXIgc2NhbGVCb3R0b20gPSAxIC0geVJhdGlvO1xuXG4gICAgLy8gTW92ZS90cmFuc2xhdGUgbWlkZGxlQ29udGFpbmVyXG4gICAgUG9seW1lci5CYXNlLnRyYW5zZm9ybSgndHJhbnNsYXRlM2QoMCwnICsgeVJhdGlvICogMTAwICsgJyUsMCknLCBtaWRkbGVDb250YWluZXIpO1xuXG4gICAgLy8gU2NhbGUgYm90dG9tQ29udGFpbmVyIGFuZCBib3R0b20gc3ViIHRpdGxlIHRvIG5vdGhpbmcgYW5kIGJhY2tcbiAgICBQb2x5bWVyLkJhc2UudHJhbnNmb3JtKCdzY2FsZSgnICsgc2NhbGVCb3R0b20gKyAnKSB0cmFuc2xhdGVaKDApJywgYm90dG9tQ29udGFpbmVyKTtcblxuICAgIC8vIFNjYWxlIG1pZGRsZUNvbnRhaW5lciBhcHBOYW1lXG4gICAgUG9seW1lci5CYXNlLnRyYW5zZm9ybSgnc2NhbGUoJyArIHNjYWxlTWlkZGxlICsgJykgdHJhbnNsYXRlWigwKScsIGFwcE5hbWUpO1xuICB9KTtcblxuICAvLyBTY3JvbGwgcGFnZSB0byB0b3AgYW5kIGV4cGFuZCBoZWFkZXJcbiAgYXBwLnNjcm9sbFBhZ2VUb1RvcCA9IGZ1bmN0aW9uKCkge1xuICAgIGFwcC4kLmhlYWRlclBhbmVsTWFpbi5zY3JvbGxUb1RvcCh0cnVlKTtcbiAgfTtcblxuICBhcHAuY2xvc2VEcmF3ZXIgPSBmdW5jdGlvbigpIHtcbiAgICBhcHAuJC5wYXBlckRyYXdlclBhbmVsLmNsb3NlRHJhd2VyKCk7XG4gIH07XG5cbn0pKGRvY3VtZW50KTtcbiIsImZ1bmN0aW9uIG1ha2VTdGF0ZURyaXZlcihzdGF0ZVN0b3JlID0ge30pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHN0YXRlRHJpdmVyKHNpbmskKSB7XG4gICAgY29uc3Qgc291cmNlJCA9IHNpbmskXG4gICAgICAuc2NhbigocHJldiwgY3VycikgPT4ge1xuICAgICAgICBpZiAoIWN1cnIgfHwgdHlwZW9mIGN1cnIgIT09IGBvYmplY3RgKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgc3RhdGUgbXVzdCBiZSBhbiBvYmplY3RgKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHByZXYsIGN1cnIpXG4gICAgICB9LCBzdGF0ZVN0b3JlKVxuICAgICAgLnJlcGxheShudWxsLCAxKVxuICAgIHNvdXJjZSQuY29ubmVjdCgpXG4gICAgcmV0dXJuIHNvdXJjZSRcbiAgfVxufVxuXG5leHBvcnQge21ha2VTdGF0ZURyaXZlcn1cbiJdfQ==
